<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Linuxå®‰è£…JDKä»¥åŠé…ç½®</title>
    <url>/jdk-install/</url>
    <content><![CDATA[<h3 id="1-å®‰è£…åŒ…å®‰è£…"><a href="#1-å®‰è£…åŒ…å®‰è£…" class="headerlink" title="1. å®‰è£…åŒ…å®‰è£…"></a>1. å®‰è£…åŒ…å®‰è£…</h3><ol>
<li><p>ä¸‹è½½jdkå®‰è£…åŒ…ï¼ˆ<a href="https://www.oracle.com/cn/java/technologies/javase/downloads/#java8%EF%BC%89">https://www.oracle.com/cn/java/technologies/javase/downloads/#java8ï¼‰</a><br> <img src="/jdk-install/1.png"></p>
</li>
<li><p>ä¸Šä¼ å¹¶è§£å‹</p>
</li>
</ol>
<ul>
<li>åœ¨/usr/local/ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ï¼šjava</li>
<li>ä¸Šä¼ ä»‹è´¨åˆ°/usr/local/java/</li>
<li>è§£å‹ï¼štar -zxvf jdk-8u311-linux-x64.tar.gz</li>
</ul>
<ol start="3">
<li>é…ç½®ç¯å¢ƒå˜é‡ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¾‘é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨æœ«å°¾è¿½åŠ </span></span><br><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_311</span><br><span class="line">export JRE_HOME=/usr/local/java/jdk1.8.0_311/jre</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</span></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li>
<li>æµ‹è¯• <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•ç‰ˆæœ¬å·</span></span><br><span class="line">java -version</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿”å›</span></span><br><span class="line">java version &quot;1.8.0_311&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_311-b10)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.291-b10, mixed mode)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢JAVA_HOME</span></span><br><span class="line">echo $JAVA_HOME</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿”å›</span></span><br><span class="line">/usr/local/java/jdk1.8.0_311</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="2-yumæºå®‰è£…"><a href="#2-yumæºå®‰è£…" class="headerlink" title="2. yumæºå®‰è£…"></a>2. yumæºå®‰è£…</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨javaç›¸å…³å‘½ä»¤</span></span><br><span class="line">rpm -qa|grep java</span><br><span class="line">rpm -qa|grep jdk</span><br><span class="line">rpm -qa|grep gcj</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœéœ€è¦å¸è½½</span></span><br><span class="line">rpm -qa | grep java | xargs rpm -e --nodeps</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ£€ç´¢Java1.8æºåˆ—è¡¨</span></span><br><span class="line">yum list java-1.8*</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…Java1.8</span></span><br><span class="line">yum install java-1.8.0-openjdk* -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢JAVA_HOME</span></span><br><span class="line">which java</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿”å›</span></span><br><span class="line">/usr/bin/java</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -lå‘½ä»¤</span></span><br><span class="line">ls -l /usr/bin/java</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿”å›</span></span><br><span class="line">lrwxrwxrwx 1 root root 22 Nov 13 14:37 /usr/bin/java -&gt; /etc/alternatives/java</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ls -lå‘½ä»¤</span></span><br><span class="line">ls -l /etc/alternatives/java</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿”å›</span></span><br><span class="line">lrwxrwxrwx 1 root root 73 Nov 13 14:37 /etc/alternatives/java -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.272.b10-1.el7_9.x86_64/jre/bin/java</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ™JAVA_HOMEè·¯å¾„ä¸ºï¼š/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.272.b10-1.el7_9.x86_64</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>jdk</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå®‰è£…mysql8</title>
    <url>/mysql-install/</url>
    <content><![CDATA[<h3 id="1-ä¸‹è½½"><a href="#1-ä¸‹è½½" class="headerlink" title="1. ä¸‹è½½"></a>1. ä¸‹è½½</h3><ul>
<li>ä¸‹è½½åœ°å€ï¼š<a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></li>
<li>ç™¾åº¦ç½‘ç›˜é“¾æ¥: <a href="https://pan.baidu.com/s/1BkOuYlz2Ef7KRe9gikDUCg">https://pan.baidu.com/s/1BkOuYlz2Ef7KRe9gikDUCg</a>  å¯†ç : 0l15</li>
</ul>
<h3 id="2-å¸è½½mariadb"><a href="#2-å¸è½½mariadb" class="headerlink" title="2.å¸è½½mariadb"></a>2.å¸è½½mariadb</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹mariadb çš„å®‰è£…åŒ…</span></span><br><span class="line">rpm -qa | grep mariadb</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¸è½½ mariadb</span></span><br><span class="line">rpm -e mariadb-libs-5.5.68-1.el7.x86_64 --nodeps</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¸è½½éªŒè¯</span></span><br><span class="line">rpm -qa | grep mariadb</span><br></pre></td></tr></table></figure>

<h3 id="3-å®‰è£…"><a href="#3-å®‰è£…" class="headerlink" title="3.å®‰è£…"></a>3.å®‰è£…</h3><ol>
<li><p>è§£å‹å®‰è£…åŒ…</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash"> è¿›å…¥ä¸‹è½½ç›®å½•</span></span><br><span class="line"> cd /usr/local/src/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">è§£å‹ï¼Œ å¦‚æœæ˜¯.taråˆ™ç”¨ tar -zxvfè§£å‹ï¼Œ æˆ‘ä¸‹è½½çš„æ˜¯.tar.xzåŒ…ï¼Œä½¿ç”¨çš„æ˜¯tar -xvJf</span></span><br><span class="line"> tar -xvJf mysql-8.0.28-linux-glibc2.17-x86_64-minimal.tar.xz</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç§»åŠ¨è§£å‹åçš„æ–‡ä»¶å¤¹è‡³/usr/<span class="built_in">local</span></span></span><br><span class="line"> mv /usr/local/src/mysql-8.0.28-linux-glibc2.17-x86_64-minimal /usr/local/</span><br><span class="line"> cd /usr/local/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"> #</span><span class="bash"> é‡å‘½å</span></span><br><span class="line"> mv ./mysql-8.0.28-linux-glibc2.17-x86_64-minimal mysql8</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"> #</span><span class="bash"> åˆ›å»ºæ–‡ä»¶å¤¹data,å­˜å‚¨æ–‡ä»¶;</span></span><br><span class="line"> cd /usr/local/mysql8/</span><br><span class="line"> mkdir ./data</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ›å»ºç”¨æˆ·ä»¥åŠç”¨æˆ·ç»„</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç”¨æˆ·ç»„</span></span><br><span class="line">groupadd mysql</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç”¨æˆ· ï¼ˆç”¨æˆ·å/å¯†ç ï¼‰</span></span><br><span class="line">useradd -g mysql mysql</span><br></pre></td></tr></table></figure></li>
<li><p>æˆæƒ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chown -R mysql.mysql /usr/local/mysql8/ </span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–</span></span><br><span class="line">chown -R mysql .</span><br><span class="line">chgrp -R mysql .</span><br></pre></td></tr></table></figure></li>
<li><p>åˆå§‹åŒ–æ•°æ®åº“</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å½“å‰æ‰€åœ¨ç›®å½•</span></span><br><span class="line">pwd # è‹¥æ˜¾ç¤º/usr/local/mysql-8.0,è¯·ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™è¯·å…ˆè¿›å…¥æ­¤ç›®å½•/usr/local/mysql-8.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆå§‹åŒ– æ³¨æ„æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ç›¸å…³ç›®å½•,è‹¥ä¸å­˜åœ¨,è¯·æ–°å»º</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> äº²æµ‹</span></span><br><span class="line">./bin/mysqld --user=mysql --basedir=/usr/local/mysql8/ --datadir=/usr/local/mysql8/data/ --initialize </span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–</span></span><br><span class="line">./bin/mysql --user=mysql --basedir=/usr/local/mysql8/ --datadir=/usr/local/mysql8/data/ --initialize ;</span><br><span class="line">   </span><br><span class="line"><span class="meta">#</span><span class="bash">å¦‚æœå‡ºç°é”™è¯¯ï¼š./bin/mysqld: error <span class="keyword">while</span> loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory</span></span><br><span class="line">yum install -y libaio  #å®‰è£…ååœ¨åˆå§‹åŒ–å°±OKäº†</span><br></pre></td></tr></table></figure>
<p><img src="/mysql-install/3.png"><br> æ³¨æ„ï¼šåé¢ç™½è‰²é«˜äº®é€‰ä¸­çš„æ˜¯åˆå§‹å¯†ç ï¼ï¼ï¼ï¼</p>
</li>
<li><p>é…ç½®my.cnf</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp /usr/local/mysql8/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure>
<p>åœ¨é…ç½®ä¸­é”®å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"> <span class="attr">[mysqld]</span></span><br><span class="line"><span class="attr">port</span>=<span class="string">3306</span></span><br><span class="line"><span class="comment"># è®¾ç½®mysqlçš„å®‰è£…ç›®å½•</span></span><br><span class="line"><span class="attr">basedir</span>=<span class="string">/usr/local/mysql8</span></span><br><span class="line"><span class="comment"># è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•</span></span><br><span class="line"><span class="attr">datadir</span>=<span class="string">/usr/local/mysql8/data</span></span><br><span class="line"><span class="comment"># å…è®¸æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="string">1000</span></span><br><span class="line"><span class="comment"># å…è®¸è¿æ¥å¤±è´¥çš„æ¬¡æ•°ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢æœ‰äººä»è¯¥ä¸»æœºè¯•å›¾æ”»å‡»æ•°æ®åº“ç³»ç»Ÿ</span></span><br><span class="line"><span class="attr">max_connect_errors</span>=<span class="string">100</span></span><br><span class="line"><span class="comment"># æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸ºUTF8</span></span><br><span class="line"><span class="meta">character-set-server</span>=<span class="string">utf8mb4</span></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“</span></span><br><span class="line"><span class="meta">default-storage-engine</span>=<span class="string">INNODB</span></span><br><span class="line"><span class="comment"># é»˜è®¤ä½¿ç”¨â€œmysql_native_passwordâ€æ’ä»¶è®¤è¯</span></span><br><span class="line"><span class="attr">default_authentication_plugin</span>=<span class="string">mysql_native_password</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å¯¹sqlè¯­å¥å¤§å°å†™æ•æ„Ÿï¼Œ1è¡¨ç¤ºä¸æ•æ„Ÿ</span></span><br><span class="line"><span class="attr">lower_case_table_names</span> = <span class="string">1</span></span><br><span class="line"><span class="comment">#MySQLè¿æ¥é—²ç½®è¶…è¿‡ä¸€å®šæ—¶é—´å(å•ä½ï¼šç§’)å°†ä¼šè¢«å¼ºè¡Œå…³é—­</span></span><br><span class="line"><span class="comment">#MySQLé»˜è®¤çš„wait_timeout  å€¼ä¸º8ä¸ªå°æ—¶, interactive_timeoutå‚æ•°éœ€è¦åŒæ—¶é…ç½®æ‰èƒ½ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="attr">interactive_timeout</span> = <span class="string">1800</span></span><br><span class="line"><span class="attr">wait_timeout</span> = <span class="string">1800</span></span><br><span class="line"><span class="comment">#Metadata Lockæœ€å¤§æ—¶é•¿ï¼ˆç§’ï¼‰ï¼Œ ä¸€èˆ¬ç”¨äºæ§åˆ¶ alteræ“ä½œçš„æœ€å¤§æ—¶é•¿sine mysql5.6</span></span><br><span class="line"><span class="comment">#æ‰§è¡Œ DMLæ“ä½œæ—¶é™¤äº†å¢åŠ innodbäº‹åŠ¡é”å¤–è¿˜å¢åŠ Metadata Lockï¼Œå…¶ä»–alterï¼ˆDDLï¼‰sessionå°†é˜»å¡</span></span><br><span class="line"><span class="attr">lock_wait_timeout</span> = <span class="string">3600</span></span><br><span class="line"><span class="comment">#å†…éƒ¨å†…å­˜ä¸´æ—¶è¡¨çš„æœ€å¤§å€¼ã€‚</span></span><br><span class="line"><span class="comment">#æ¯”å¦‚å¤§æ•°æ®é‡çš„group by ,order byæ—¶å¯èƒ½ç”¨åˆ°ä¸´æ—¶è¡¨ï¼Œ</span></span><br><span class="line"><span class="comment">#è¶…è¿‡äº†è¿™ä¸ªå€¼å°†å†™å…¥ç£ç›˜ï¼Œç³»ç»ŸIOå‹åŠ›å¢å¤§</span></span><br><span class="line"><span class="attr">tmp_table_size</span> = <span class="string">64M</span></span><br><span class="line"><span class="attr">max_heap_table_size</span> = <span class="string">64M</span></span><br><span class="line"><span class="attr">[mysql]</span></span><br><span class="line"><span class="comment"># è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span></span><br><span class="line"><span class="meta">default-character-set</span>=<span class="string">utf8mb4</span></span><br><span class="line"><span class="attr">[client]</span></span><br><span class="line"><span class="comment"># è®¾ç½®mysqlå®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯æ—¶é»˜è®¤ä½¿ç”¨çš„ç«¯å£</span></span><br><span class="line"><span class="attr">port</span>=<span class="string">3306</span></span><br><span class="line"><span class="meta">default-character-set</span>=<span class="string">utf8mb4</span></span><br></pre></td></tr></table></figure></li>
<li><p>å»ºç«‹MysqlæœåŠ¡</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp -a ./support-files/mysql.server /etc/init.d/mysql</span><br><span class="line">chmod +x /etc/init.d/mysql</span><br><span class="line">chkconfig --add mysql</span><br><span class="line">chkconfig --list mysql</span><br></pre></td></tr></table></figure>
<p><img src="/mysql-install/4.png"></p>
</li>
<li><p>å¯åŠ¨MysqlæœåŠ¡</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨</span></span><br><span class="line">service mysql start;</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å¯åŠ¨çŠ¶æ€</span></span><br><span class="line">service mysql status;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæç¤ºï¼š -bash: mysql: command not found</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ln -s /usr/local/mysql8/bin/mysql /usr/bin</span><br></pre></td></tr></table></figure></li>
<li><p>ç™»å½•Mysql</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¾“å…¥<span class="string">&quot;åˆå§‹åŒ–æ•°æ®åº“&quot;</span>æ“ä½œæ—¶çš„<span class="string">&quot;ä¸´æ—¶å¯†ç &quot;</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/mysql-install/5.png"></p>
<p> ä¿®æ”¹å¯†ç ï¼š</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;æ–°å¯†ç &#x27;;</span><br></pre></td></tr></table></figure></li>
<li><p>è¿œç¨‹è¿æ¥</p>
<ol>
<li>è¿›å…¥mysqlå‘½ä»¤è¡Œ <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">update user set host =&#x27;%&#x27; where user=&#x27;root&#x27;;</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;root&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<img src="/mysql-install/7.png"></li>
</ol>
</li>
<li><p>æ£€æŸ¥ç«¯å£</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æ£€æŸ¥3306ç«¯å£æ˜¯å¦å¼€æ”¾</span></span><br><span class="line">netstat -nlp|grep 3306</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¼€æ”¾3306ç«¯å£</span></span><br><span class="line">firewall -cmd --permanent --add-prot=3306/tcp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">é‡å¯é˜²ç«å¢™</span></span><br><span class="line">firewall -cmd --reload</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-å¸¸è§é—®é¢˜"><a href="#4-å¸¸è§é—®é¢˜" class="headerlink" title="4. å¸¸è§é—®é¢˜"></a>4. å¸¸è§é—®é¢˜</h3><ol>
<li><p>The server quit without updating PID file</p>
<ul>
<li>ç¬¬ä¸€ï¼Œæƒé™çš„é—®é¢˜ï¼Œåœ¨å‡ºè¿™ä¸ªé”™è¯¯çš„æ—¶å€™ï¼Œæˆ‘æ‰€è¯´çš„æƒé™æ˜¯mysq.cnfå’Œæ‰€å®šä¹‰çš„mysqlæ•°æ®åº“å­˜æ”¾ç›®å½•çš„æƒé™ï¼Œè¦ä¿è¯æ˜¯mysqlç”¨æˆ·çš„æƒé™ï¼Œå¦‚æœå¯åŠ¨mysqlè¿˜æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆéœ€è¦è€ƒè™‘æé«˜æƒé™äº†ã€‚<br>è¯´äººè¯ï¼Œ æ•°æ®åº“å­˜æ”¾ç›®å½•å¿…é¡»æ˜¯mysqlè¿™ä¸ªç”¨æˆ·çš„å±ç»„(é€šå¸¸çš„ï¼Œå®‰è£…MySQLçš„æ—¶å€™å»ºç«‹çš„ç”¨æˆ·ä¸ºmysqlï¼Œä¸å»ºè®®ä½¿ç”¨åˆ«çš„ç”¨æˆ·ï¼‰ï¼Œmysqlçš„å¯åŠ¨è„šæœ¬å¿…é¡»æœ‰æ‰§è¡Œæƒé™ã€‚èµ‹äºˆæƒé™çš„å‘½ä»¤ä¸ºï¼šchown -R mysql. /usr/local/mysql,å‡è®¾æˆ‘çš„mysqlæ˜¯å®‰è£…åœ¨  /usr/local/mysqlç›®å½•ï¼Œæ•°æ®åº“å­˜æ”¾ç›®å½•ä¸º /usr/local/mysql/data/</li>
<li>ç¬¬äºŒï¼Œè¿›ç¨‹ä¸­æœ‰mysqlçš„è¿›ç¨‹ï¼Œä¸Šæ¬¡çš„é€€å‡ºå¹¶æ²¡æœ‰è‡ªåŠ¨ç»“æŸè¯¥pidï¼Œå¯¼è‡´æ–°çš„è¿›ç¨‹æ— æ³•å¯åŠ¨ï¼Œæ¯•ç«Ÿï¼Œmysqlæ¯æ¬¡å¯åŠ¨ç³»ç»Ÿåªä¼šç»™åˆ†é…ä¸€ä¸ªpidå·ï¼Œå†å¯åŠ¨ï¼Œç³»ç»Ÿä¹Ÿä¸å¯èƒ½ç»™ä½ åˆ†é…pidå·äº†ã€‚è¿è¡Œå‘½ä»¤ ps -ef |grep mysql  æ‰¾åˆ°mysqlçš„è¿›ç¨‹ç»“æŸå®ƒï¼Œç„¶ååœ¨å¯åŠ¨mysqlã€‚</li>
<li>ç¬¬ä¸‰ï¼Œè¿›å…¥mysqlæ•°æ®åº“çš„å­˜æ”¾ç›®å½•ï¼Œå¦‚æœæœ‰mysql-bin.indexè¿™æ ·çš„æ–‡ä»¶ï¼Œåˆ é™¤å®ƒï¼Œåœ¨å¯åŠ¨mysqlï¼Œè¯¥æ–‡ä»¶äº§ç”Ÿçš„åŸå› ä¸è¯¦ï¼Œä¸è¿‡åˆ é™¤å¿…å®šæ²¡å½±å“ï¼Œæˆ–è€…å¦ä¸€ä¸ªbinlog.indexä¹Ÿåˆ é™¤ï¼Œä¸¤ä¸ªindexåç¼€çš„éƒ½åˆ é™¤ä¹Ÿå¯ä»¥ã€‚</li>
<li>ç¬¬å››ï¼Œmy.cnf è¿™ä¸ªé…ç½®æ–‡ä»¶å†…å®¹ä¸å¯¹ï¼Œæ£€æŸ¥æœ‰æ²¡æœ‰skip-federatedè¿™ä¸ªå­—æ®µï¼Œå¦‚æœæœ‰æ³¨é‡Šæˆ–è€…åˆ é™¤ã€‚<br>æ£€æŸ¥æ˜¯å¦å®šä¹‰äº†æ•°æ®åº“å­˜æ”¾ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œè¯·ç«‹åˆ»å®šä¹‰ã€‚</li>
<li>ç¬¬äº”ï¼Œé”™è¯¯æ—¥å¿—ç›®å½•ä¸å­˜åœ¨è§£å†³æ–¹æ³•ï¼šä½¿ç”¨â€œchownâ€ â€œchmodâ€å‘½ä»¤èµ‹äºˆmysqlç›®å½•æ‰€æœ‰è€…åŠæƒé™ã€‚</li>
<li>ç¬¬å…­ï¼Œ<strong>my.cnfæ–‡ä»¶å†…å­˜åœ¨lower_case_table_names=1 å­—æ®µï¼Œæ³¨é‡Šæ‰å®ƒã€‚ï¼ˆè¿™ä¸ªé€‰é¡¹æ˜¯1è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼‰ã€‚å…·ä½“åŸå› ä¸è¯¦</strong>ã€‚</li>
</ul>
<p> æ€»ç»“ï¼šmysqlè¯´å¥½å®‰è£…ä¹Ÿå¥½å®‰è£…ï¼Œè¯´éš¾ä¹Ÿéš¾ï¼Œéš¾ç‚¹åœ¨äºæƒé™çš„é…ç½®ï¼Œç»™é«˜äº†ä¸å®‰å…¨ï¼Œç»™ä½äº†æœ‰å¯èƒ½å¯åŠ¨å‡ºé—®é¢˜ï¼Œå¦‚æœå¯åŠ¨å‡ºé—®é¢˜äº†ï¼Œé¦–å…ˆç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ£€æŸ¥ç›®å½•æƒé™ï¼Œç¬¬äºŒå°±æ˜¯æ£€æŸ¥my.cnfè¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œskip-federatedï¼Œlower_case_table_names=1 ï¼Œè¿™æ ·çš„å­—æ®µæ³¨é‡Šæ‰ï¼Œç¬¬ä¸‰ï¼Œæ¸…é™¤æ—§çš„mysqlè¿›ç¨‹ï¼Œå¦‚æœæœ‰å°±æ¸…é™¤æ‰ï¼Œæ—§çš„ä¸å»æ–°çš„ä¸æ¥ï¼Œå°±è¿™ä¹ˆä¸€ä¸ªé“ç†ã€‚ç¬¬å››ï¼Œè¿›å…¥mysqlæ•°æ®åº“å­˜æ”¾ç›®å½•åˆ é™¤indexåç¼€çš„æ–‡ä»¶ã€‚ä¸‹é¢ï¼Œç»™å¼ å›¾ï¼Œè¯¦ç»†çš„æƒé™æ…¢æ…¢ä½“ä¼š</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls -al /etc/init.d/mysql</span><br></pre></td></tr></table></figure></li>
<li><p>Can â€˜t connect to local MySQL server through socket â€˜/tmp/mysql.sock</p>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¿æ¥localhosté€šå¸¸é€šè¿‡ä¸€ä¸ªUnixåŸŸå¥—æ¥å­—æ–‡ä»¶è¿›è¡Œï¼Œä¸€èˆ¬æ˜¯/tmp/mysql.sockã€‚å¦‚æœå¥—æ¥å­—æ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œæœ¬åœ°å®¢æˆ·å°±ä¸èƒ½è¿æ¥ã€‚è¿™å¯èƒ½å‘ç”Ÿåœ¨ä½ çš„ç³»ç»Ÿè¿è¡Œä¸€ä¸ªcronä»»åŠ¡åˆ é™¤äº†/tmpä¸‹çš„ä¸´æ—¶æ–‡ä»¶ã€‚</span><br><span class="line">å¦‚æœä½ å› ä¸ºä¸¢å¤±å¥—æ¥å­—æ–‡ä»¶è€Œä¸èƒ½è¿æ¥ï¼Œä½ å¯ä»¥ç®€å•åœ°é€šè¿‡é‡å¯æœåŠ¡å™¨é‡æ–°åˆ›å»ºå¾—åˆ°å®ƒã€‚å› ä¸ºæœåŠ¡å™¨åœ¨å¯åŠ¨æ—¶é‡æ–°åˆ›å»ºå®ƒã€‚</span><br><span class="line">å¦‚æœå’Œæˆ‘ä¸€æ ·ï¼Œé‡å¯æœåŠ¡å™¨è¿˜æ˜¯æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä½ å¯ä»¥å…ˆæ‰§è¡Œä¸‹é¢çš„è¯­å¥</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -h 127.0.0.1 -p</span><br></pre></td></tr></table></figure>
<p>è§£å†³æ–¹å¼ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mkdir /var/run/mysqld/</span><br><span class="line">sudo ln -s /tmp/mysql.sock /var/run/mysqld/mysqld.sock</span><br></pre></td></tr></table></figure></li>
<li><p>however file donâ€™t exists. Create writable for user â€˜mysqlâ€™<br> é—®é¢˜æè¿°ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@test2 my57_3307]# /usr/local/mysql57/bin/mysqld_safe  --defaults-file=/dbdata/mysql/my57_3307/my57_3307.cnf  --ledir=/usr/local/mysql57/bin</span><br><span class="line">2018-08-26T14:12:45.459798Z mysqld_safe error: log-error set to &#x27;/var/log/mysqld/my57_3307.log&#x27;, however file don&#x27;t exists. Create writable for user &#x27;mysql&#x27;.</span><br></pre></td></tr></table></figure>
<p>è§£å†³æ–¹å¼ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">touch /usr/local/mysql8/log/error.log</span><br><span class="line">chown mysql /usr/local/mysql8/log/error.log</span><br><span class="line">/usr/local/mysql8/bin/mysqld_safe  --defaults-file=/etc/my.cnf  --ledir=/usr/local/mysql8/bin</span><br></pre></td></tr></table></figure></li>
<li><p>cannot open shared object file: No such file or directory</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">éœ€è¦å®‰è£… libnuma</span></span><br><span class="line">yum install libnuma</span><br><span class="line">yum -y install  numactl</span><br><span class="line">yum install libaio1 libaio-dev</span><br></pre></td></tr></table></figure></li>
<li><p>mysqldå¯åŠ¨æŠ¥é”™Failed to find valid data directory</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/my.cnf #æŸ¥çœ‹datadiré…ç½®é¡¹çš„è·¯å¾„ï¼Œç„¶åä¸€èˆ¬æ˜¯/var/lib/mysqlï¼Œå°†è¿™ä¸ªæ–‡ä»¶å¤¹åˆ æ‰ï¼Œç„¶åé‡æ–°åˆå§‹åŒ–</span><br><span class="line"></span><br><span class="line">/usr/local/mysql8/bin/mysqld --initialize --user=mysql</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¦‚æœmysqldå¯åŠ¨æœåŠ¡æ—¶æç¤ºä¸èƒ½ç”¨rootå¯åŠ¨ï¼Œåˆ™åœ¨/var/lib/mysqlä¸­åŠ å…¥è¿™è¡Œ user=mysql</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">é‡å¯</span></span><br><span class="line">service mysql restart</span><br></pre></td></tr></table></figure></li>
<li><p>Navicatæ— æ³•è¿æ¥ï¼šHost is not allowed to connect to this MySQL server</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br><span class="line"><span class="meta">#</span><span class="bash">è¾“å…¥å¯†ç </span></span><br></pre></td></tr></table></figure>
<p>æ“ä½œæ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"><span class="keyword">select</span> host <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/mysql-install/q6.png" alt="navicatæ— æ³•è¿æ¥æ•°æ®åº“"></p>
<p>è¯¥ç»“æœè¡¨ç¤ºå½“å‰çš„rootç”¨æˆ·é™åˆ¶åœ¨å½“å‰çš„IPå†…è®¿é—®ï¼Œéœ€è¦ä¿®æ”¹ä»–çš„è®¿é—®åŸŸ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">update <span class="keyword">user</span> <span class="keyword">set</span> host<span class="operator">=</span><span class="string">&#x27;%&#x27;</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">flush privileges ;</span><br></pre></td></tr></table></figure>
<p><img src="/mysql-install/q61.png" alt="navicatæ— æ³•è¿æ¥æ•°æ®åº“"></p>
</li>
<li><p>Canâ€™t connect to MySQL server â€˜xxxxxxâ€™ on(60)</p>
<p>æˆ‘ä¹°çš„æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œå‰å¾€é˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®å®‰å…¨ç»„è§„åˆ™å³å¯</p>
</li>
</ol>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¬æ¢æˆå°å†™å­—æ¯</title>
    <url>/algoright-2/</url>
    <content><![CDATA[<p>å®ç°å‡½æ•° ToLowerCase()ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° strï¼Œå¹¶å°†è¯¥å­—ç¬¦ä¸²ä¸­çš„å¤§å†™å­—æ¯è½¬æ¢æˆå°å†™å­—æ¯ï¼Œä¹‹åè¿”å›æ–°çš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥: &quot;Hello&quot;</span><br><span class="line">è¾“å‡º: &quot;hello&quot;</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹2ï¼š</span><br><span class="line">è¾“å…¥: &quot;LOVELY&quot;</span><br><span class="line">è¾“å‡º: &quot;lovely&quot;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•ä¸€ï¼š-ASCCIIç "><a href="#æ–¹æ³•ä¸€ï¼š-ASCCIIç " class="headerlink" title="æ–¹æ³•ä¸€ï¼š ASCCIIç "></a>æ–¹æ³•ä¸€ï¼š ASCCIIç </h3><p><strong>è§£é¢˜æ€è·¯ï¼šé€šè¿‡asciiç è¡¨æ“ä½œå­—ç¬¦ä¸²å³å¯,aå’ŒAç›¸å·®32ï¼›</strong></p>
<ul>
<li>a-z: 97 - 122</li>
<li>A-Z: 65 - 90</li>
<li>0-9: 48 - 57<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toLowerCase</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> ch : str.toCharArray()) &#123;</span><br><span class="line">        <span class="comment">// a-zï¼š97-122  A-Zï¼š65-90  0-9ï¼š48-57</span></span><br><span class="line">        <span class="keyword">if</span> (ch &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; ch &lt;= <span class="string">&#x27;Z&#x27;</span>) &#123;</span><br><span class="line">            sb.append((<span class="keyword">char</span>)(ch + <span class="number">32</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sb.append(ch);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æˆ–è€…ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toLowerCase</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span>[] ch = str.toCharArray();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ch[i] &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; ch[i] &lt;= <span class="string">&#x27;Z&#x27;</span>) &#123;</span><br><span class="line">            ch[i] += <span class="number">32</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> String.valueOf(ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æ–¹æ³•äºŒï¼š-ä½è¿ç®—"><a href="#æ–¹æ³•äºŒï¼š-ä½è¿ç®—" class="headerlink" title="æ–¹æ³•äºŒï¼š ä½è¿ç®—"></a>æ–¹æ³•äºŒï¼š ä½è¿ç®—</h3><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p>
<ul>
<li>å¤§å†™å˜å°å†™ã€å°å†™å˜å¤§å†™ï¼šå­—ç¬¦ ^= 32;</li>
<li>å¤§å†™å˜å°å†™ã€å°å†™å˜å°å†™ï¼šå­—ç¬¦ |= 32;</li>
<li>å¤§å†™å˜å¤§å†™ã€å°å†™å˜å¤§å†™ï¼šå­—ç¬¦ &amp;= 33;</li>
</ul>
<p>ASCIIç è¡¨ä¸­å¤§å†™çš„Aæ˜¯65ï¼Œå°å†™çš„aæ˜¯97ï¼Œå®ƒä»¬çš„å·®æ˜¯32<br>65 | 32 è½¬ä¸ºäºŒè¿›åˆ¶ï¼ˆæŒ‰8ä½æ¥ç®—ï¼‰å¯ä»¥å¾—åˆ° 0100 0001 | 0010 0000 = 0110 0001 = 97 = a</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toLowerCase</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span>[] ch = str.toCharArray();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">        ch[i] |= <span class="number">32</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> String.valueOf(ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqldumpslowåˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—</title>
    <url>/mysqldumpslow%E5%88%86%E6%9E%90%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<p>æŒ‰ç…§å¹³å‡æŸ¥è¯¢è¾“å‡º5è¡Œæ…¢æŸ¥è¯¢è®°å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysqldumpslow -s at -t 5 /phpstudy/data/slowquery.log</span><br></pre></td></tr></table></figure>
<ul>
<li>-s   æ’åºæ–¹å¼ï¼Œå¯é€‰å€¼æœ‰cï¼ˆè®°å½•æ¬¡æ•°ï¼‰ã€tï¼ˆæŸ¥è¯¢æ—¶é—´ï¼‰ã€lï¼ˆé”å®šæ—¶é—´ï¼‰ã€rï¼ˆè¿”å›è®°å½•ï¼‰ã€aï¼ˆå¹³å‡ï¼‰</li>
<li>-t    æ˜¾ç¤ºçš„è®°å½•æ•°Spawn failedè§£å†³æ–¹å¼</li>
<li>-g   åé¢è·Ÿæ­£åˆ™è¡¨è¾¾å</span> (key == <span class="keyword">null</span> || value == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">    <span class="comment">//spreadå‡½æ•°è®¡ç®—hashå€¼</span></span><br><span class="line">    <span class="keyword">int</span> hash = spread(key.hashCode());</span><br><span class="line">    <span class="keyword">int</span> binCount = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//è‡ªæ—‹è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span> (Node&lt;K,V&gt;[] tab = table;;) &#123;</span><br><span class="line">        Node&lt;K,V&gt; f; <span class="keyword">int</span> n, i, fh;</span><br><span class="line">        <span class="keyword">if</span> (tab == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            tab = initTable();</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜ å°„ä½ç½®èŠ‚ç‚¹æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((f = tabAt(tab, i = (n - <span class="number">1</span>) &amp; hash)) == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (casTabAt(tab, i, <span class="keyword">null</span>,</span><br><span class="line">                         <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key, value, <span class="keyword">null</span>)))</span><br><span class="line">                <span class="keyword">break</span>;                  </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœæ˜ å°„ä½ç½®èŠ‚ç‚¹value==MOVEDï¼Œè¯´æ˜æ­£åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((fh = f.hash) == MOVED)</span><br><span class="line">            tab = helpTransfer(tab, f);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            V oldVal = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">synchronized</span> (f) &#123;</span><br><span class="line">                <span class="keyword">if</span> (tabAt(tab, i) == f) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (fh &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                        binCount = <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">for</span> (Node&lt;K,V&gt; e = f;; ++binCount) &#123;</span><br><span class="line">                            K ek;</span><br><span class="line">                            <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                                ((ek = e.key) == key ||</span><br><span class="line">                                 (ek != <span class="keyword">null</span> &amp;&amp; key.equals(ek)))) &#123;</span><br><span class="line">                                oldVal = e.val;</span><br><span class="line">                                <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                    e.val = value;</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            Node&lt;K,V&gt; pred = e;</span><br><span class="line">                            <span class="keyword">if</span> ((e = e.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                                pred.next = <span class="keyword">new</span> Node&lt;K,V&gt;(hash, key,</span><br><span class="line">                                                          value, <span class="keyword">null</span>);</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//çº¢é»‘æ ‘ç»“æ„</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (f <span class="keyword">instanceof</span> TreeBin) &#123;</span><br><span class="line">                        Node&lt;K,V&gt; p;</span><br><span class="line">                        binCount = <span class="number">2</span>;</span><br><span class="line">                        <span class="keyword">if</span> ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,</span><br><span class="line">                                                       value)) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                            oldVal = p.val;</span><br><span class="line">                            <span class="keyword">if</span> (!onlyIfAbsent)</span><br><span class="line">                                p.val = value;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//é“¾è¡¨èŠ‚ç‚¹æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼Œè½¬ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">            <span class="keyword">if</span> (binCount != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD)</span><br><span class="line">                    treeifyBin(tab, i);</span><br><span class="line">                <span class="keyword">if</span> (oldVal != <span class="keyword">null</span>)</span><br><span class="line">                    <span class="keyword">return</span> oldVal;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    addCount(<span class="number">1L</span>, binCount);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2. spreadå‡½æ•°</strong><br>spreadå‡½æ•°ï¼Œè®¡ç®—hashå€¼ã€‚keyçš„hashå€¼ä¸å…¶é«˜16ä½ç›¸å¼‚æˆ–ï¼Œç„¶åä¸HASH_BITSå°†æœ€é«˜ä½ç½®0</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">spread</span><span class="params">(<span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (h ^ (h &gt;&gt;&gt; <span class="number">16</span>)) &amp; HASH_BITS;</span><br><span class="line">    <span class="comment">//HASH_BITS=0x7fffffff</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3. tableAtå‡½æ•°</strong><br>è·å–æœ€æ–°çš„tab[i]</p>
<p><strong>4. casTabAtå‡½æ•°</strong><br>é€šè¿‡CASæ“ä½œï¼Œå°†å€¼èµ‹å€¼è¿›tabä¸­å¯¹åº”ä½ç½®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> &lt;K,V&gt; <span class="function">Node&lt;K,V&gt; <span class="title">tabAt</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((<span class="keyword">long</span>)i &lt;&lt; ASHIFT) + ABASE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> &lt;K,V&gt; <span class="function"><span class="keyword">boolean</span> <span class="title">casTabAt</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="keyword">int</span> i,</span></span></span><br><span class="line"><span class="params"><span class="function">                                        Node&lt;K,V&gt; c, Node&lt;K,V&gt; v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> U.compareAndSwapObject(tab, ((<span class="keyword">long</span>)i &lt;&lt; ASHIFT) + ABASE, c, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>5. addCountå‡½æ•°</strong><br>å°è¯•ä½¿ç”¨CASæ“ä½œï¼Œå°†BASECOUNTåŠ 1ï¼Œæ“ä½œå¤±è´¥ï¼Œåˆ™è¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹åœ¨è¿›è¡ŒåŠ ä¸€æ“ä½œ,å‘ç”Ÿå†²çªã€‚ä¹‹ååˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">addCount</span><span class="params">(<span class="keyword">long</span> x, <span class="keyword">int</span> check)</span> </span>&#123;</span><br><span class="line">    CounterCell[] as; <span class="keyword">long</span> b, s;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨CASæ“ä½œï¼Œå°†BASECOUNTåŠ 1</span></span><br><span class="line">    <span class="keyword">if</span> ((as = counterCells) != <span class="keyword">null</span> ||</span><br><span class="line">        !U.compareAndSwapLong(<span class="keyword">this</span>, BASECOUNT, b = baseCount, s = b + x)) &#123;</span><br><span class="line">        CounterCell a; <span class="keyword">long</span> v; <span class="keyword">int</span> m;</span><br><span class="line">        <span class="comment">//å‘ç”Ÿå†²çª</span></span><br><span class="line">        <span class="keyword">boolean</span> uncontended = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (as == <span class="keyword">null</span> || (m = as.length - <span class="number">1</span>) &lt; <span class="number">0</span> ||</span><br><span class="line">            (a = as[ThreadLocalRandom.getProbe() &amp; m]) == <span class="keyword">null</span> ||</span><br><span class="line">            !(uncontended =</span><br><span class="line">              U.compareAndSwapLong(a, CELLVALUE, v = a.value, v + x))) &#123;</span><br><span class="line">            <span class="comment">//å¤šçº¿ç¨‹å†²çªæ‰§è¡Œ</span></span><br><span class="line">            fullAddCount(x, uncontended);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (check &lt;= <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        s = sumCount();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (check &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab, nt; <span class="keyword">int</span> n, sc;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹  å¤§äº0.75å½“å‰æ•°ç»„å¤§å°</span></span><br><span class="line">        <span class="keyword">while</span> (s &gt;= (<span class="keyword">long</span>)(sc = sizeCtl) &amp;&amp; (tab = table) != <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">               (n = tab.length) &lt; MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            <span class="keyword">int</span> rs = resizeStamp(n);</span><br><span class="line">            <span class="keyword">if</span> (sc &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­æ˜¯å¦éœ€è¦å¸®åŠ©æ‰©å®¹</span></span><br><span class="line">                <span class="comment">//æ‰©å®¹å®Œæˆï¼Œæˆ–è€…æ‰©å®¹çº¿ç¨‹è¾¾åˆ°é˜ˆå€¼ä¸éœ€è¦è¿›è¡Œæ‰©å®¹ï¼Œç›´æ¥break</span></span><br><span class="line">                <span class="keyword">if</span> ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + <span class="number">1</span> ||</span><br><span class="line">                    sc == rs + MAX_RESIZERS || (nt = nextTable) == <span class="keyword">null</span> ||</span><br><span class="line">                    transferIndex &lt;= <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">//å¸®åŠ©æ‰©å®¹ï¼Œæ‰©å®¹çº¿ç¨‹æ•°+1</span></span><br><span class="line">                <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, sc + <span class="number">1</span>))</span><br><span class="line">                    transfer(tab, nt);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¿›è¡Œæ‰©å®¹æ“ä½œ</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc,</span><br><span class="line">                                         (rs &lt;&lt; RESIZE_STAMP_SHIFT) + <span class="number">2</span>))</span><br><span class="line">                transfer(tab, <span class="keyword">null</span>);</span><br><span class="line">            s = sumCount();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-initTableå‡½æ•°"><a href="#2-3-initTableå‡½æ•°" class="headerlink" title="2.3 initTableå‡½æ•°"></a>2.3 initTableå‡½æ•°</h3><p>è¿›å…¥ä¸€ä¸ªè‡ªæ—‹è¿‡ç¨‹ï¼Œä¸€æ—¦æœ‰çº¿ç¨‹æ‰©å®¹æˆåŠŸï¼Œæ‰break</p>
<ul>
<li>å¦‚æœsizeCtl &lt; 0,è¯´æ˜å·²ç»æœ‰çº¿ç¨‹æ­£åœ¨æ‰©å®¹ï¼Œæ‰€ä»¥ç›´æ¥è®©å‡ºçº¿ç¨‹ã€‚</li>
<li>å¦‚æœsizeCtl&gt;=0,è¯´æ˜å½“å‰æ²¡æœ‰çº¿ç¨‹æ‰©å®¹ï¼Œå°è¯•CASæ“ä½œï¼Œè®¾ç½®sizeCtlä¸º-1</li>
<li>è®¾ç½®sizeCtlä¸º-1æˆåŠŸçš„çº¿ç¨‹ï¼Œè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œå¹¶ä¸”å°†scæ›´æ–°ä¸ºæ•°ç»„è´Ÿè½½é˜ˆå€¼0.75*n<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Node&lt;K,V&gt;[] initTable() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; <span class="keyword">int</span> sc;</span><br><span class="line">    <span class="comment">//è‡ªæ—‹è¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">while</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((sc = sizeCtl) &lt; <span class="number">0</span>)</span><br><span class="line">            Thread.yield(); </span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (U.compareAndSwapInt(<span class="keyword">this</span>, SIZECTL, sc, -<span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || tab.length == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">int</span> n = (sc &gt; <span class="number">0</span>) ? sc : DEFAULT_CAPACITY;</span><br><span class="line">                    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                    Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node&lt;?,?&gt;[n];</span><br><span class="line">                    table = tab = nt;</span><br><span class="line">                    <span class="comment">//0.75*n</span></span><br><span class="line">                    sc = n - (n &gt;&gt;&gt; <span class="number">2</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                sizeCtl = sc;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-4-ç»Ÿè®¡ConCurrentHashMapä¸­çš„å…ƒç´ ä¸ªæ•°"><a href="#2-4-ç»Ÿè®¡ConCurrentHashMapä¸­çš„å…ƒç´ ä¸ªæ•°" class="headerlink" title="2.4 ç»Ÿè®¡ConCurrentHashMapä¸­çš„å…ƒç´ ä¸ªæ•°"></a>2.4 ç»Ÿè®¡ConCurrentHashMapä¸­çš„å…ƒç´ ä¸ªæ•°</h3><p><strong>1. mappingCountå‡½æ•°</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è°ƒç”¨sumCount,è·å¾—å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">mappingCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">long</span> n = sumCount();</span><br><span class="line"><span class="keyword">return</span> (n &lt; <span class="number">0L</span>) ? <span class="number">0L</span> : n; <span class="comment">// ignore transient negative values</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2. sumCountå‡½æ•°</strong></p>
<p>baseCount+ counterCellså„ä¸ªå…ƒç´ å€¼ï¼Œå°±æ˜¯å…ƒç´ æ•°é‡<br>å…¶å®baseCountå°±æ˜¯è®°å½•å®¹å™¨æ•°é‡çš„ï¼Œç›´æ¥æ”¾å›baseCountä¸å°±å¯ä»¥äº†å—ï¼Ÿä¸ºä»€ä¹ˆsumCount()æ–¹æ³•ä¸­è¿˜è¦éå†counterCellsæ•°ç»„ï¼Œç´¯åŠ å¯¹è±¡çš„å€¼å‘¢ï¼Ÿ<br>å…¶ä¸­ï¼šcounterCellsæ˜¯ä¸ªå…¨å±€çš„å˜é‡ï¼Œè¡¨ç¤ºçš„æ˜¯CounterCellç±»æ•°ç»„ã€‚CounterCellæ˜¯ConcurrentHashmapçš„å†…éƒ¨ç±»ï¼Œå®ƒå°±æ˜¯å­˜å‚¨ä¸€ä¸ªå€¼ã€‚<br>JDK1.8ä¸­ä½¿ç”¨ä¸€ä¸ªvolatileç±»å‹çš„å˜é‡baseCountè®°å½•å…ƒç´ çš„ä¸ªæ•°ï¼Œå½“æ’å…¥æ–°æ•°æ®put()æˆ–åˆ™åˆ é™¤æ•°æ®remove()æ—¶ï¼Œä¼šé€šè¿‡addCount()æ–¹æ³•æ›´æ–°baseCount<br>åˆå§‹åŒ–æ—¶counterCellsä¸ºç©ºï¼Œåœ¨å¹¶å‘é‡å¾ˆé«˜æ—¶ï¼Œå¦‚æœå­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡ŒCASä¿®æ”¹baseCountå€¼ï¼Œåˆ™å¤±è´¥çš„çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œæ–¹æ³•ä½“ä¸­çš„é€»è¾‘ï¼Œæ‰§è¡ŒfullAddCount(x, uncontended)æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å®å°±æ˜¯åˆå§‹åŒ–counterCellsï¼Œå¹¶å°†xçš„å€¼æ’å…¥åˆ°counterCellç±»ä¸­ï¼Œè€Œxå€¼ä¸€èˆ¬ä¹Ÿå°±æ˜¯1æˆ–-1ï¼Œè¿™å¯ä»¥ä»put()æ–¹æ³•ä¸­å¾—çŸ¥ã€‚<br>è¿™äº›å¯¹è±¡æ˜¯å› ä¸ºåœ¨CASæ›´æ–°baseCountå€¼æ—¶ï¼Œç”±äºé«˜å¹¶å‘è€Œå¯¼è‡´å¤±è´¥ï¼Œæœ€ç»ˆå°†å€¼ä¿å­˜åˆ°CounterCellä¸­ï¼Œæ”¾åˆ°counterCellsé‡Œã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆsumCount()ä¸­éœ€è¦éå†counterCellsæ•°ç»„ï¼Œsumç´¯åŠ CounterCell.valueå€¼äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">long</span> <span class="title">sumCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    CounterCell[] as = counterCells; CounterCell a;</span><br><span class="line">    <span class="keyword">long</span> sum = baseCount;</span><br><span class="line">        <span class="keyword">if</span> (as != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; as.length; ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((a = as[i]) != <span class="keyword">null</span>)</span><br><span class="line">                sum += a.value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3. CounterCellç±»</strong><br>åªå­˜å‚¨ä¸€ä¸ªå€¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">CounterCell</span></span>&#123;</span><br><span class="line">   <span class="keyword">volatile</span> <span class="keyword">long</span> value;</span><br><span class="line">   CountCell(<span class="keyword">long</span> x) &#123;value = x;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/zycxnanwang/article/details/105424734">https://blog.csdn.net/zycxnanwang/article/details/105424734</a></p>
]]></content>
      <categories>
        <category>çŸ¥è¯†æ•´ç†</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ElasticSearchå®‰è£…</title>
    <url>/ElasticSearch/</url>
    <content><![CDATA[<h2 id="1-JDK14å®‰è£…"><a href="#1-JDK14å®‰è£…" class="headerlink" title="1. JDK14å®‰è£…"></a>1. JDK14å®‰è£…</h2><ol>
<li><p>ä¸‹è½½jdk14ï¼š  <a href="https://jdk.java.net/14/">https://jdk.java.net/14/</a></p>
</li>
<li><p>å°†æ–‡ä»¶å­˜æ”¾åœ¨linuxç³»ç»ŸæŸæ–‡ä»¶å¤¹å†…</p>
</li>
<li><p>è§£å‹</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf openjdk-14.0.2_linux-x64_bin.tar.gz</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®ç¯å¢ƒå˜é‡</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#åœ¨æ–‡ä»¶æœ€æœ«å°¾æ·»åŠ ï¼Œå…¶ä¸­JAVA_HOMEæ˜¯jdkè§£å‹åçš„æ–‡ä»¶è·¯å¾„</span></span></span><br><span class="line">JAVA_HOME=/usr/lib/tools/jdk-14.0.2</span><br><span class="line">PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">CLASSPATH=$JAVA_HOME/jre/lib/ext:$JAVA_HOME/lib/tools.jar</span><br><span class="line">export PATH JAVA_HOME CLASSPATH</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿å­˜åï¼Œæ›´æ–°é…ç½®æ–‡ä»¶</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹JDKæ˜¯å¦é…ç½®å®Œæˆ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>

<p>å‡ºç°ä¸‹å›¾è¡¨ç¤ºå®‰è£…æˆåŠŸï¼</p>
<p><img src="/ElasticSearch/image-20200806170145844.png" alt="image-20200806170145844"></p>
</li>
</ol>
<h2 id="2-ElasticSearchå®‰è£…"><a href="#2-ElasticSearchå®‰è£…" class="headerlink" title="2. ElasticSearchå®‰è£…"></a>2. ElasticSearchå®‰è£…</h2><ol>
<li><p>è§£å‹tar.gzåŒ…</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf elasticsearch-7.8.0-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure></li>
<li><p>æ·»åŠ elasticsearchç”¨æˆ·</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">useradd elastic</span><br></pre></td></tr></table></figure></li>
<li><p>èµ‹äºˆelastic searchæ“ä½œæ–‡ä»¶å¤¹çš„æƒé™</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chown -R elastic:elastic /usr/lib/tools/elasticsearch-7.8.0/*</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹æœ¬æœºçš„hostname</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hostname</span><br><span class="line"><span class="meta">#</span><span class="bash">localhost.localdomain</span></span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹elastic searché…ç½®</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> cd ./elasticsearch-7.8.0/config</span><br><span class="line">vim elasticsearch.yml</span><br></pre></td></tr></table></figure>

<p><strong>elasticsearch.yml</strong></p>
 <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ======================== Elasticsearch Configuration =========================</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># <span class="doctag">NOTE:</span> Elasticsearch comes with reasonable defaults for most settings.</span></span><br><span class="line"><span class="comment">#       Before you set out to tweak and tune the configuration, make sure you</span></span><br><span class="line"><span class="comment">#       understand what are you trying to accomplish and the consequences.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The primary way of configuring a node is via this file. This template lists</span></span><br><span class="line"><span class="comment"># the most important settings you may want to configure for a production cluster.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Please consult the documentation for further information on configuration options:</span></span><br><span class="line"><span class="comment"># https://www.elastic.co/guide/en/elasticsearch/reference/index.html</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Cluster -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for your cluster:</span></span><br><span class="line"><span class="comment">#é›†ç¾¤åç§°ï¼Œé»˜è®¤å¯ä»¥ä¸ä¿®æ”¹ï¼Œæ­¤å¤„ xiaoyuge</span></span><br><span class="line"><span class="attr">cluster.name:</span> <span class="string">xiaoyuge</span></span><br><span class="line"><span class="comment"># ------------------------------------ Node ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Use a descriptive name for the node:</span></span><br><span class="line"><span class="comment">#èŠ‚ç‚¹åç§°ï¼Œå¿…é¡»ä¿®æ”¹ ï¼Œé»˜è®¤ä¿®æ”¹ä¸ºå½“å‰æœºå™¨åç§°ï¼Œè‹¥æ˜¯å¤šå®ä¾‹åˆ™éœ€è¦åŒºåˆ†</span></span><br><span class="line"><span class="attr">node.name:</span> <span class="string">xiaoyuge-local1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Add custom attributes to the node:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#node.attr.rack: r1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Paths ------------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to directory where to store the data (separate multiple locations by comma):</span></span><br><span class="line"><span class="comment">##æ•°æ®ç›®å½•ä¸æ—¥å¿—ç›®å½•ï¼Œé»˜è®¤åœ¨å½“å‰è¿è¡Œç¨‹åºä¸‹ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦æŒ‡å®š</span></span><br><span class="line"><span class="comment">#path.data: /path/to/data</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Path to log files:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#path.logs: /path/to/logs</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ----------------------------------- Memory -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Lock the memory on startup:</span></span><br><span class="line"><span class="comment">#å†…å­˜äº¤æ¢é”å®šï¼Œæ­¤å¤„éœ€è¦æ“ä½œç³»ç»Ÿè®¾ç½®æ‰ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">#bootstrap.memory_lock: true</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Make sure that the heap size is set to about half the memory available</span></span><br><span class="line"><span class="comment"># on the system and that the owner of the process is allowed to use this</span></span><br><span class="line"><span class="comment"># limit.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Elasticsearch performs poorly when the system is swapping the memory.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Network -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Set the bind address to a specific IP (IPv4 or IPv6):</span></span><br><span class="line"><span class="comment">#IP åœ°å€ï¼Œé»˜è®¤æ˜¯ localï¼Œä»…é™æœ¬æœºè®¿é—®ï¼Œå¤–ç½‘ä¸å¯è®¿é—®ï¼Œè®¾ç½® 0.0.0.0 é€šç”¨åšæ³•</span></span><br><span class="line"><span class="attr">network.host:</span> <span class="number">192.168</span><span class="number">.135</span><span class="number">.111</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Set a custom port for HTTP:</span></span><br><span class="line"><span class="comment">#è®¿é—®ç«¯å£ï¼Œé»˜è®¤ 9200ï¼Œ9300ï¼Œå»ºè®®æ˜ç¡®æŒ‡å®š</span></span><br><span class="line"><span class="attr">http.port:</span> <span class="number">9200</span></span><br><span class="line"><span class="attr">transport.port:</span> <span class="number">9300</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the network module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># --------------------------------- Discovery ----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Pass an initial list of hosts to perform discovery when this node is started:</span></span><br><span class="line"><span class="comment"># The default list of hosts is [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]</span></span><br><span class="line"><span class="comment">## é›†ç¾¤å‘ç°é…ç½®</span></span><br><span class="line"><span class="attr">discovery.seed_hosts:</span> [<span class="string">&quot;192.168.135.111:9300&quot;</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Bootstrap the cluster using an initial set of master-eligible nodes:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster.initial_master_nodes:</span> [<span class="string">&quot;192.168.135.111:9300&quot;</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the discovery and cluster formation module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Gateway -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Block initial recovery after a full cluster restart until N nodes are started:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#gateway.recover_after_nodes: 3</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For more information, consult the gateway module documentation.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># ---------------------------------- Various -----------------------------------</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Require explicit names when deleting indices:</span></span><br><span class="line"><span class="comment">##é˜²æ­¢æ‰¹é‡åˆ é™¤ç´¢å¼•</span></span><br><span class="line"><span class="attr">action.destructive_requires_name:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#è®¾ç½®å¯†ç </span></span><br><span class="line"><span class="attr">xpack.security.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">xpack.license.self_generated.type:</span> <span class="string">trial</span></span><br><span class="line"><span class="attr">xpack.security.transport.ssl.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">http.cors.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">http.cors.allow-origin:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="attr">http.cors.allow-headers:</span> <span class="string">Authorization</span></span><br></pre></td></tr></table></figure></li>
<li><p>åˆ‡æ¢ä¸ºelastic searchç”¨æˆ·ï¼Œç„¶åå¯åŠ¨elastic search</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">su elastic			#åˆ‡æ¢ç”¨æˆ·</span><br><span class="line">./bin/elasticsearch -d      #åå°å¯åŠ¨</span><br></pre></td></tr></table></figure></li>
<li><p>è®¾ç½®å¯†ç </p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./bin/elasticsearch-setup-passwords interactive</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ‰§è¡Œè®¾ç½®ç”¨æˆ·åå’Œå¯†ç çš„å‘½ä»¤,è¿™é‡Œéœ€è¦ä¸º4ä¸ªç”¨æˆ·åˆ†åˆ«è®¾ç½®å¯†ç ï¼Œelastic, kibana, logstash_system,beats_system</span></span><br><span class="line">Initiating the setup of passwords for reserved users elastic,kibana,logstash_system,beats_system.</span><br><span class="line">You will be prompted to enter passwords as the process progresses.</span><br><span class="line">Please confirm that you would like to continue [y/N]y</span><br><span class="line">Enter password for [elastic]:</span><br><span class="line">passwords must be at least [6] characters long</span><br><span class="line">Try again.</span><br><span class="line">Enter password for [elastic]:</span><br><span class="line">Reenter password for [elastic]:</span><br><span class="line">Passwords do not match.</span><br><span class="line">Try again.</span><br><span class="line">Enter password for [elastic]:</span><br><span class="line">Reenter password for [elastic]:</span><br><span class="line">Enter password for [kibana]:</span><br><span class="line">Reenter password for [kibana]:</span><br><span class="line">Enter password for [logstash_system]:</span><br><span class="line">Reenter password for [logstash_system]:</span><br><span class="line">Enter password for [beats_system]:</span><br><span class="line">Reenter password for [beats_system]:</span><br><span class="line">Changed password for user [kibana]</span><br><span class="line">Changed password for user [logstash_system]</span><br><span class="line">Changed password for user [beats_system]</span><br><span class="line">Changed password for user [elastic]</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>å¸¸è§å¼‚å¸¸ï¼š</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash">java.lang.RuntimeException: can not run elasticsearch as root</span></span><br><span class="line"><span class="meta"> #</span><span class="bash">åˆ‡æ¢ä¸ºelastic searchç”¨æˆ·ï¼Œä¸èƒ½ç”¨rooté¡¹ç›®å¯åŠ¨</span></span><br><span class="line">  </span><br><span class="line">su elastic</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java.nio.file.AccessDeniedException: /usr/lib/tools/elasticsearch-7.8.0/config/elasticsearch.keystore</span></span><br><span class="line"><span class="meta">#</span><span class="bash">elastic searchç”¨æˆ·æ²¡æœ‰æ“ä½œè¯¥æ–‡ä»¶å¤¹çš„æƒé™</span></span><br><span class="line">  </span><br><span class="line">su root</span><br><span class="line">chown -R elastic:elastic /usr/lib/tools/elasticsearch-7.8.0/*</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ERROR: [2] bootstrap checks failed</span><br><span class="line">[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]</span><br><span class="line">[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</span><br><span class="line">   </span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ†é…å†…å­˜ä¸å¤Ÿ</span></span><br><span class="line"><span class="meta">#</span><span class="bash">1. ä¿®æ”¹ /etc/security/limits.conf</span></span><br><span class="line">sudo vi /etc/security/limits.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">åœ¨æ–‡ä»¶æœ«å°¾åŠ ä¸Š</span></span><br><span class="line">* soft nofile 65536</span><br><span class="line">* hard nofile 65536</span><br><span class="line">* soft nproc 4096</span><br><span class="line">* hard nproc 4096</span><br><span class="line"><span class="meta">#</span><span class="bash">2. ä¿®æ”¹ /etc/sysctl.conf</span></span><br><span class="line">sudo vi /etc/sysctl.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">åœ¨æ–‡ä»¶æœ«å°¾å¢åŠ </span></span><br><span class="line">vm.max_map_count=262144</span><br><span class="line"><span class="meta">#</span><span class="bash">3. é…ç½®é‡æ–°ç”Ÿæ•ˆ</span></span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>
<p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong></p>
<p><img src="/ElasticSearch/image-20200807093208470.png" alt="image-20200807093208470"></p>
<h2 id="3-Kibanaå®‰è£…"><a href="#3-Kibanaå®‰è£…" class="headerlink" title="3. Kibanaå®‰è£…"></a>3. Kibanaå®‰è£…</h2><ol>
<li><p>è§£å‹æ–‡ä»¶</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf kibana-7.8.0-linux-x86_64.tar.gz</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim ./config/kibana.yml</span><br></pre></td></tr></table></figure>

<p><strong>kibana.yml:</strong></p>
 <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Kibana is served by a back end server. This setting specifies the port to use.</span></span><br><span class="line"><span class="comment">##è®¿é—®ç«¯å£ï¼Œé»˜è®¤æ— éœ€ä¿®æ”¹</span></span><br><span class="line"><span class="attr">server.port:</span> <span class="number">5601</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specifies the address to which the Kibana server will bind. IP addresses and host names are both valid values.</span></span><br><span class="line"><span class="comment"># The default is &#x27;localhost&#x27;, which usually means remote machines will not be able to connect.</span></span><br><span class="line"><span class="comment"># To allow connections from remote users, set this parameter to a non-loopback address.</span></span><br><span class="line"><span class="comment">#è®¿é—®åœ°å€ IPï¼Œé»˜è®¤æœ¬åœ° ;å¦‚æœéœ€è¦å¤–ç½‘è®¿é—®ï¼Œåˆ™é…ç½®0.0.0.0</span></span><br><span class="line"><span class="attr">server.host:</span> <span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enables you to specify a path to mount Kibana at if you are running behind a proxy.</span></span><br><span class="line"><span class="comment"># Use the `server.rewriteBasePath` setting to tell Kibana if it should remove the basePath</span></span><br><span class="line"><span class="comment"># from requests it receives, and to prevent a deprecation warning at startup.</span></span><br><span class="line"><span class="comment"># This setting cannot end in a slash.</span></span><br><span class="line"><span class="comment">#server.basePath: &quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Specifies whether Kibana should rewrite requests that are prefixed with</span></span><br><span class="line"><span class="comment"># `server.basePath` or require that they are rewritten by your reverse proxy.</span></span><br><span class="line"><span class="comment"># This setting was effectively always `false` before Kibana 6.3 and will</span></span><br><span class="line"><span class="comment"># default to `true` starting in Kibana 7.0.</span></span><br><span class="line"><span class="comment">#server.rewriteBasePath: false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The maximum payload size in bytes for incoming server requests.</span></span><br><span class="line"><span class="comment">#server.maxPayloadBytes: 1048576</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The Kibana server&#x27;s name.  This is used for display purposes.</span></span><br><span class="line"><span class="comment">#server.name: &quot;your-hostname&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The URLs of the Elasticsearch instances to use for all your queries.</span></span><br><span class="line"><span class="comment"># ES æœåŠ¡æŒ‡å‘ï¼Œé›†ç¾¤ä¸‹é…ç½®å¤šä¸ª</span></span><br><span class="line"><span class="attr">elasticsearch.hosts:</span> [<span class="string">&quot;http://192.168.135.111:9200&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># When this setting&#x27;s value is true Kibana uses the hostname specified in the server.host</span></span><br><span class="line"><span class="comment"># setting. When the value of this setting is false, Kibana uses the hostname of the host</span></span><br><span class="line"><span class="comment"># that connects to this Kibana instance.</span></span><br><span class="line"><span class="comment">#elasticsearch.preserveHost: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Kibana uses an index in Elasticsearch to store saved searches, visualizations and</span></span><br><span class="line"><span class="comment"># dashboards. Kibana creates a new index if the index doesn&#x27;t already exist.</span></span><br><span class="line"><span class="comment"># Kibana å…ƒæ•°æ®å­˜å‚¨ç´¢å¼•åå­—ï¼Œé»˜è®¤.kibana æ— éœ€ä¿®æ”¹</span></span><br><span class="line"><span class="comment">#kibana.index: &quot;.kibana&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The default application to load.</span></span><br><span class="line"><span class="comment">#kibana.defaultAppId: &quot;home&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If your Elasticsearch is protected with basic authentication, these settings provide</span></span><br><span class="line"><span class="comment"># the username and password that the Kibana server uses to perform maintenance on the Kibana</span></span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash"> å½“å‰çª—å£å†…å¯åŠ¨</span></span><br><span class="line"> ./bin/kibana# </span><br><span class="line"><span class="meta">#</span><span class="bash">åå°è¿›ç¨‹å¯åŠ¨</span></span><br><span class="line">nohup ./bin/kibana &amp;</span><br></pre></td></tr></table></figure>

<p><strong>æ•ˆæœå¦‚ä¸‹</strong></p>
<p><img src="/ElasticSearch/image-20200807093309761.png" alt="image-20200807093309761"></p>
</li>
</ol>
<p><strong>é‡è§é—®é¢˜ï¼š</strong></p>
<ul>
<li><p>rootå¯åŠ¨æŠ¥é”™<img src="/ElasticSearch/image-20201211095101816.png" alt="image-20201211095101816"></p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">åˆ‡æ¢åˆ°elasticè´¦æˆ·</span></span><br><span class="line">su xiaoyuge</span><br></pre></td></tr></table></figure></li>
<li><p>elasticç”¨æˆ·æƒé™ä¸è¶³ <strong>Babel could not write cache to file: /usr/share/kibana/optimize/.babel_register_cache.json</strong><img src="/ElasticSearch/image-20201211095258901.png" alt="image-20201211095258901"></p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">åˆ‡æ¢åˆ°rootç”¨æˆ·</span></span><br><span class="line">su root </span><br><span class="line"><span class="meta">#</span><span class="bash">èµ‹äºˆelasticè´¦æˆ· xiaoyugeæ“ä½œæƒé™</span></span><br><span class="line">chown -R xiaoyuge /usr/local/kibana-7.7.1-linux-x86_64</span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ‡æ¢ä¸ºelasticè´¦æˆ·</span></span><br><span class="line">su xiaoyuge</span><br><span class="line"><span class="meta">#</span><span class="bash">å†æ¬¡å¯åŠ¨å³å¯</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>ELK</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒåˆ†æŸ¥æ‰¾</title>
    <url>/algorithm/</url>
    <content><![CDATA[<p>äºŒåˆ†æ³•æŸ¥æ‰¾æ˜¯ä¸€ç§åŸºäºæ¯”è¾ƒç›®æ ‡å€¼å’Œæ•°ç»„ä¸­é—´å…ƒç´ çš„ç®—æ³•</p>
<ul>
<li>å¦‚æœç›®æ ‡å€¼ = ä¸­é—´å€¼ï¼Œåˆ™æ‰¾åˆ°ç›®æ ‡å€¼</li>
<li>å¦‚æœç›®æ ‡å€¼ &lt; ä¸­é—´å€¼ï¼Œåˆ™åœ¨å·¦ä¾§ç»§ç»­æœç´¢</li>
<li>å¦‚æœç›®æ ‡å€¼ &gt; ä¸­é—´å€¼ï¼Œåˆ™åœ¨å³ä¾§ç»§ç»­æœç´¢<br><img src="/algorithm/01.png" alt="äºŒåˆ†æŸ¥æ‰¾"></li>
</ul>
<p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p>
<ul>
<li>åˆå§‹åŒ–æŒ‡é’ˆleft = 0, right=n-1;</li>
<li>å½“left &lt;= rightï¼š <ul>
<li>æ¯”è¾ƒä¸­é—´å…ƒç´ nums[pivot]å’Œç›®æ ‡å€¼target<br>1.target = nums[pivot], è¿”å›pivot<br>2.target &gt; nums[pivot], åˆ™åœ¨å³ä¾§ç»§ç»­æœç´¢left = pivot+1<br>3.target &lt; nums[pivot], åˆ™åœ¨å·¦ä¾§ç»§ç»­æœç´¢right = pivot+1<br><img src="/algorithm/02.png"><br><img src="/algorithm/03.png"></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»™å®šä¸€ä¸ªÂ nÂ ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„Â nums å’Œä¸€ä¸ªç›®æ ‡å€¼Â target Â ï¼Œ</span></span><br><span class="line"><span class="comment"> * å†™ä¸€ä¸ªå‡½æ•°æœç´¢Â numsÂ ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚</span></span><br><span class="line"><span class="comment"> * è¾“å…¥: nums = [-1,0,3,5,9,12], target = 9</span></span><br><span class="line"><span class="comment"> * è¾“å‡º: 4</span></span><br><span class="line"><span class="comment"> * è§£é‡Š: 9 å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º 4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pivot, left =<span class="number">0</span>, right = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right)&#123;</span><br><span class="line">        pivot = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (nums[pivot] == target)&#123;</span><br><span class="line">            <span class="keyword">return</span> pivot;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (nums[pivot] &lt; target)&#123;</span><br><span class="line">            left = pivot + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            right = pivot - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¤æ‚åº¦åˆ†æï¼š</strong></p>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(logN) </li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
</ul>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>springCloudä¹‹FeignClientè®¿é—®å¾®æœåŠ¡æ¥å£ç¼“æ…¢</title>
    <url>/bug-sprigCloud/</url>
    <content><![CDATA[<h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>é€»è¾‘æ˜¯AæœåŠ¡è°ƒç”¨BæœåŠ¡(ABåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…)ã€‚ ç»è¿‡åå¤æµ‹è¯•ï¼Œæœ‰ä¸€ä¸ªè®¿é—®ç¼“æ…¢çš„ç°è±¡ï¼Œå…·ä½“è¡¨ç°ä¸ºï¼š<br>ç¨‹åºå¯åŠ¨ç¬¬ä¸€æ¬¡è®¿é—®åˆå§‹åŒ–1.2ç§’å·¦å³ï¼Œè¿˜å¯ä»¥ç†è§£ã€‚<br>ä½†åé¢è®¿é—®è¿˜æ˜¯è¦1.1ç§’å·¦å³ï¼ˆæ ¼å¼åŒ–åˆ°SSSæ¯«ç§’æ‰“å°æ—¥å¿—ç›‘æ§çš„ï¼‰ã€‚<br>ä½†å¦‚æœè¿ç»­è®¿é—®å‡ æ¬¡ï¼Œåé¢å‡ æ¬¡åˆæ˜¯å‡ åæ¯«ç§’ã€‚è¿‡ä¸€ä¼šå†è®¿é—®ï¼Œæˆ–è€…æ¢æµè§ˆå™¨æ¢postå·¥å…·è¯·æ±‚ï¼Œåˆä¼š1.2ç§’å·¦å³ã€‚</p>
<h3 id="åŸå› æ’æŸ¥1"><a href="#åŸå› æ’æŸ¥1" class="headerlink" title="åŸå› æ’æŸ¥1"></a>åŸå› æ’æŸ¥1</h3><p>æŸ¥çœ‹è¿æ¥æŸ¥å®çš„æ¥å£<br><img src="/bug-sprigCloud/02.png" alt="è¯·æ±‚ç¼“æ…¢2"><br>å‘ç°æ¥å£è°ƒç”¨çš„æ˜¯è¿™ä¸ªåœ°å€ï¼Œå…¶å®æ˜¯åˆ«äººå¯åŠ¨é¡¹ç›®çš„æ—¶å€™å§è‡ªå·±çš„ipæ³¨å†Œåˆ°äº†eurekaæ³¨å†Œä¸­å¿ƒï¼Œå¯¼è‡´æ¥å£æœ‰æ—¶å€™èµ°çš„æ˜¯getwayï¼Œæœ‰æ—¶å€™åˆæ˜¯èµ°çš„åˆ«äººçš„æ¥å£</p>
<p>è§£å†³æ–¹æ³•ï¼šeureka.client.register-with-eureka ä¸ºfalse  è¿™æ ·å°±ä¸ä¼šæ³¨å†Œåˆ°eurekaæ³¨å†Œä¸­å¿ƒäº†</p>
<h3 id="åŸå› æ’æŸ¥2"><a href="#åŸå› æ’æŸ¥2" class="headerlink" title="åŸå› æ’æŸ¥2"></a>åŸå› æ’æŸ¥2</h3><ol>
<li>æŸ¥çœ‹æ—¥å¿—<br> <img src="/bug-sprigCloud/01.png" alt="è¯·æ±‚ç¼“æ…¢"><br>æŸ¥çœ‹æ˜¯å¦æ˜¯hystrix é…ç½®çš„æ—¶é—´å°äºäº†ribbonçš„æ—¶é—´</li>
</ol>
]]></content>
      <categories>
        <category>è¸©å‘è®°å½•</category>
      </categories>
      <tags>
        <tag>SpringCloud</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç¼“å­˜ä¸€è‡´æ€§é—®é¢˜</title>
    <url>/cache-consistency/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>JAVAç±»åŠ è½½è¿‡ç¨‹</title>
    <url>/classLoad/</url>
    <content><![CDATA[<h2 id="1-ç±»åŠ è½½æœºåˆ¶"><a href="#1-ç±»åŠ è½½æœºåˆ¶" class="headerlink" title="1.ç±»åŠ è½½æœºåˆ¶"></a>1.ç±»åŠ è½½æœºåˆ¶</h2><p>JVMå°†ç±»æè¿°æ•°æ®ä».classæ–‡ä»¶ä¸­åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œè§£æã€åˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆè¢«JVMç›´æ¥ä½¿ç”¨çš„Javaç±»å‹ï¼›ç±»ä»è¢«åŠ è½½åˆ°JVMä¸­å¼€å§‹ï¼Œåˆ°å¸è½½ä¸ºæ­¢ï¼Œ<br>æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼š<strong>åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½</strong>7ä¸ªé˜¶æ®µ<br><img src="/classLoad/01.png" alt="å®Œæ•´çš„ç±»åŠ è½½è¿‡ç¨‹"></p>
<ol>
<li><p>åŠ è½½</p>
<p> åŠ è½½æ—¶jvmåšäº†ä¸‰ä»¶äº‹</p>
<ul>
<li>1)é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåè·å–è¯¥ç±»çš„äºŒè¿›åˆ¶æµ</li>
<li>2)å°†è¿™ä¸ªå­—èŠ‚æµçš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºè¿è¡Œæ—¶æ•°æ®ç»“æ„</li>
<li>3)åœ¨å†…å­˜å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„java.lang.classå¯¹è±¡ï¼Œæœ€ä¸ºè¯¥ç±»æ•°æ®çš„è®¿é—®å…¥å£</li>
</ul>
</li>
<li><p>éªŒè¯</p>
<p> éªŒè¯ã€å‡†å¤‡ã€è§£æè¿™ä¸‰æ­¥å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªè¿æ¥çš„è¿‡ç¨‹ï¼Œå°†ç±»çš„å­—èŠ‚ç è¿æ¥åˆ°JVMçš„è¿è¡Œé»„å°ä¹‹ä¸­;  éªŒè¯æ˜¯ä¸ºäº†ç¡®ä¿classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œä¸ä¼šå¨èƒåˆ°jvmçš„å®‰å…¨ã€‚<br>éªŒè¯å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ–‡ä»¶æ ¼å¼çš„éªŒè¯ï¼š éªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆclassæ–‡ä»¶è¢‹é¢è§„èŒƒï¼Œæ˜¯å¦èƒ½è¢«å½“å‰ç‰ˆæœ¬çš„è™šæ‹Ÿæœºå¤„ç†</li>
<li>å…ƒæ•°æ®éªŒè¯ï¼š å¯¹å­—èŠ‚ç æè¿°çš„ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œç¡®ä¿ç¬¦åˆJavaè¯­è¨€è§„èŒƒ</li>
<li>å­—èŠ‚ç éªŒè¯ï¼šé€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šå¯“æ„æ˜¯å¦åˆæ³•ï¼Œç¬¦åˆé€»è¾‘çš„</li>
<li>ç¬¦å·å¼•ç”¨éªŒè¯ï¼šè¿™ä¸ªå¨‡è‰³åœ¨è§£æé˜¶æ®µå‘ç”Ÿ</li>
</ul>
</li>
<li><p>å‡†å¤‡</p>
<p> ä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œè®¾ç½®åˆå§‹å€¼ï¼Œå¯¹äºfinal staticä¿®é¥°çš„å˜é‡ï¼Œç›´æ¥èµ‹å€¼ä¸ºç”¨æˆ·çš„å®šä¹‰å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡†å¤‡é˜¶æ®µè¿‡åçš„åˆå§‹å€¼ä¸º0ï¼Œ è€Œä¸æ˜¯7</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> a = <span class="number">7</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>è§£æ</p>
<p> è§£ææ˜¯å°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨è½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨ï¼ˆå¦‚ç‰©ç†å†…å­˜åœ°å€æŒ‡é’ˆï¼‰</p>
</li>
<li><p>åˆå§‹åŒ–</p>
<p> åˆå§‹åŒ–é˜¶æ®µï¼Œjvmæ‰å¼€å§‹çœŸæ­£æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaä»£ç </p>
<ul>
<li>æ‰§è¡Œç±»æ„é€ å™¨<clinit>()æ–¹æ³•çš„è¿‡ç¨‹ï¼Œç±»æ„é€ å™¨æ–¹æ³•æ˜¯æœ‰ç¼–è¯‘å™¨è‡ªåŠ¨æ‰‹æœºç±»ä¸­æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ï¼ˆstaticå—ï¼‰ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„</clinit></li>
<li>å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œéœ€æœ‰é™è§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–</li>
<li>è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„<clinit>()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒè¢«æ­£ç¡®åŠ é”å’ŒåŒæ­¥<br><img src="/classLoad/02.png" alt="å®Œæ•´çš„ç±»åŠ è½½è¿‡ç¨‹2"></clinit></li>
</ul>
</li>
</ol>
<h2 id="2-ç±»åŠ è½½å™¨"><a href="#2-ç±»åŠ è½½å™¨" class="headerlink" title="2.ç±»åŠ è½½å™¨"></a>2.ç±»åŠ è½½å™¨</h2><p>ç±»åŠ è½½å™¨çš„ä¸»è¦ä»»åŠ¡ï¼šå¯¹ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„åŠ è½½æ“ä½œï¼ˆæ ¹æ®ä¸€ä¸ªç±»çš„å…¨é™å®šåè¯»å–è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµåˆ°JVMå†…éƒ¨ï¼Œç„¶åè½¬æ¢ä¸ºä¸€ä¸ªå¯¹åº”çš„java.lang.Classå¯¹è±¡å®ä¾‹ï¼‰</p>
<p>ç±»åŠ è½½å™¨çš„åˆ†ç±»</p>
<ul>
<li>å¯åŠ¨ç±»åŠ è½½å™¨Bootstrap ClassLoader:<br>åœ¨HotSpotè™šæ‹Ÿæœºä¸­ï¼ŒBootstrap ClassLoaderç”¨C++è¯­è¨€ç¼–å†™å¹¶åµŒå…¥JVMå†…éƒ¨ï¼Œä¸»è¦è´Ÿè½½åŠ è½½JAVA_HOME/libç›®å½•ä¸­çš„æ‰€æœ‰ç±»ï¼Œæˆ–è€…åŠ è½½ç”±é€‰é¡¹-XbootcalsspathæŒ‡å®šçš„è·¯å¾„ä¸‹çš„ç±»</li>
<li>æ‹“å±•ç±»åŠ è½½å™¨/ExtClassLoaderï¼š<br>ExtClassLoaderç»§æ‰¿ClassLoaderç±»ï¼Œè´Ÿè½½åŠ è½½JAVA_HOME/lib/extç›®å½•ä¸­çš„æ‰€æœ‰ç±»å‹ï¼Œæˆ–è€…ç”±å‚æ•°-XbootclasspathæŒ‡å®šè·¯å¾„ä¸­çš„æ‰€æœ‰ç±»å‹</li>
<li>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨/AppClassLoader:<br>ExtClassLoaderç»§æ‰¿ClassLoaderç±»ï¼Œè´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ClassPathä¸‹çš„æ‰€æœ‰ç±»å‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ºç¨‹åºçš„é»˜è®¤ç±»åŠ è½½å™¨</li>
<li>è‡ªå®šä¹‰åŠ è½½å™¨:<br>Javaè™šæ‹Ÿæœºè§„èŒƒå°†æ‰€æœ‰ç»§æ‰¿æŠ½è±¡ç±»java.lang.ClassLoaderçš„ç±»åŠ è½½å™¨ï¼Œå®šä¹‰ä¸ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨</li>
</ul>
<h2 id="3-åŒäº²å§”æ´¾æ¨¡å‹"><a href="#3-åŒäº²å§”æ´¾æ¨¡å‹" class="headerlink" title="3. åŒäº²å§”æ´¾æ¨¡å‹"></a>3. åŒäº²å§”æ´¾æ¨¡å‹</h2><p><img src="/classLoad/03.png" alt="åŒäº²å§”æ´¾æ¨¡å‹"><br>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨å»æ‰§è¡Œï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨è¿˜å­˜åœ¨å…¶çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’ï¼Œè¯·æ±‚æœ€ç»ˆå°†åˆ°è¾¾é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆç±»åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼Œå€˜è‹¥çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ ã€‚</p>
<ul>
<li>é™¤äº†å¯åŠ¨ç±»åŠ è½½å™¨ä»¥å¤–ï¼Œæ¯ä¸ªç±»åŠ è½½å™¨æ‹¥æœ‰ä¸€ä¸ªçˆ¶ç±»åŠ è½½å™¨ï¼Œç”¨æˆ·çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨æ˜¯AppClassLoaderï¼›</li>
<li>åŒäº²å§”æ´¾æ¨¡å‹å¯ä»¥ä¿è¯å…¨é™åæŒ‡å®šçš„ç±»ï¼Œåªè¢«åŠ è½½ä¸€æ¬¡ï¼›</li>
<li>åŒäº²å§”æ´¾æ¨¡å‹ä¸å…·æœ‰å¼ºåˆ¶æ€§çº¦æŸï¼Œæ˜¯Javaè®¾è®¡è€…æ¨èçš„ç±»åŠ è½½å™¨å®ç°æ–¹å¼ï¼›</li>
</ul>
<h3 id="3-1-åŒäº²å§”æ´¾æ¨¡å¼ä¼˜åŠ¿"><a href="#3-1-åŒäº²å§”æ´¾æ¨¡å¼ä¼˜åŠ¿" class="headerlink" title="3.1 åŒäº²å§”æ´¾æ¨¡å¼ä¼˜åŠ¿"></a>3.1 åŒäº²å§”æ´¾æ¨¡å¼ä¼˜åŠ¿</h3><ol>
<li>é‡‡ç”¨åŒäº²å§”æ´¾æ¨¡å¼çš„æ˜¯å¥½å¤„æ˜¯Javaç±»éšç€å®ƒçš„ç±»åŠ è½½å™¨ä¸€èµ·å…·å¤‡äº†ä¸€ç§å¸¦æœ‰ä¼˜å…ˆçº§çš„å±‚æ¬¡å…³ç³»ï¼Œé€šè¿‡è¿™ç§å±‚çº§å…³å¯ä»¥é¿å…ç±»çš„é‡å¤åŠ è½½ï¼Œå½“çˆ¶äº²å·²ç»åŠ è½½äº†è¯¥ç±»æ—¶ï¼Œå°±æ²¡æœ‰å¿…è¦å­ClassLoaderå†åŠ è½½ä¸€æ¬¡</li>
<li>javaæ ¸å¿ƒapiä¸­å®šä¹‰ç±»å‹ä¸ä¼šè¢«éšæ„æ›¿æ¢ï¼Œå‡è®¾é€šè¿‡ç½‘ç»œä¼ é€’ä¸€ä¸ªåä¸ºjava.lang.Integerçš„ç±»ï¼Œé€šè¿‡åŒäº²å§”æ‰˜æ¨¡å¼ä¼ é€’åˆ°å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œè€Œå¯åŠ¨ç±»åŠ è½½å™¨åœ¨æ ¸å¿ƒJava APIå‘ç°è¿™ä¸ªåå­—çš„ç±»ï¼Œå‘ç°è¯¥ç±»å·²è¢«åŠ è½½ï¼Œå¹¶ä¸ä¼šé‡æ–°åŠ è½½ç½‘ç»œä¼ é€’çš„è¿‡æ¥çš„java.lang.Integerï¼Œè€Œç›´æ¥è¿”å›å·²åŠ è½½è¿‡çš„Integer.classï¼Œè¿™æ ·ä¾¿å¯ä»¥é˜²æ­¢æ ¸å¿ƒAPIåº“è¢«éšæ„ç¯¡æ”¹</li>
<li>å¦‚æœæˆ‘ä»¬åœ¨classpathè·¯å¾„ä¸‹è‡ªå®šä¹‰ä¸€ä¸ªåä¸ºjava.lang.SingleIntergeç±»(è¯¥ç±»æ˜¯èƒ¡ç¼–çš„)å‘¢ï¼Ÿè¯¥ç±»å¹¶ä¸å­˜åœ¨java.langä¸­ï¼Œç»è¿‡åŒäº²å§”æ‰˜æ¨¡å¼ï¼Œä¼ é€’åˆ°å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ï¼Œç”±äºçˆ¶ç±»åŠ è½½å™¨è·¯å¾„ä¸‹å¹¶æ²¡æœ‰è¯¥ç±»ï¼Œæ‰€ä»¥ä¸ä¼šåŠ è½½ï¼Œå°†åå‘å§”æ‰˜ç»™å­ç±»åŠ è½½å™¨åŠ è½½ï¼Œæœ€ç»ˆä¼šé€šè¿‡ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½è¯¥ç±»ã€‚ä½†æ˜¯è¿™æ ·åšæ˜¯ä¸å…è®¸ï¼Œå› ä¸ºjava.langæ˜¯æ ¸å¿ƒAPIåŒ…ï¼Œéœ€è¦è®¿é—®æƒé™ï¼Œå¼ºåˆ¶åŠ è½½å°†ä¼šæŠ¥å‡ºå¦‚ä¸‹å¼‚å¸¸</li>
</ol>
<h3 id="3-2-åŒåº†å§”æ´¾æ¨¡å‹å®ç°æºç "><a href="#3-2-åŒåº†å§”æ´¾æ¨¡å‹å®ç°æºç " class="headerlink" title="3.2 åŒåº†å§”æ´¾æ¨¡å‹å®ç°æºç "></a>3.2 åŒåº†å§”æ´¾æ¨¡å‹å®ç°æºç </h3><p>å¯ä»¥æ‰“å¼€ java.lang.ClassLoader ç±»ï¼Œå…¶ loadClassæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="keyword">boolean</span> resolve)</span><br><span class="line">        <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">            <span class="comment">// First, check if the class has already been loaded</span></span><br><span class="line">            Class&lt;?&gt; c = findLoadedClass(name);</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">long</span> t0 = System.nanoTime();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (parent != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        c = parent.loadClass(name, <span class="keyword">false</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        c = findBootstrapClassOrNull(name);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    <span class="comment">// ClassNotFoundException thrown if class not found</span></span><br><span class="line">                    <span class="comment">// from the non-null parent class loader</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (c == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// If still not found, then invoke findClass in order</span></span><br><span class="line">                    <span class="comment">// to find the class.</span></span><br><span class="line">                    <span class="keyword">long</span> t1 = System.nanoTime();</span><br><span class="line">                    c = findClass(name);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                    sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClasses().increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">                resolveClass(c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°æ–¹å¼å¾ˆç®€å•ï¼Œé¦–å…ˆä¼šæ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡äº†ï¼Œè‹¥åŠ è½½è¿‡äº†ç›´æ¥è¿”å›ï¼ˆé»˜è®¤resolveå–falseï¼‰ï¼›è‹¥æ²¡æœ‰è¢«åŠ è½½ï¼Œåˆ™è°ƒç”¨çˆ¶ç±»åŠ è½½å™¨çš„ loadClassæ–¹æ³•ï¼Œè‹¥çˆ¶ç±»åŠ è½½å™¨ä¸ºç©ºåˆ™é»˜è®¤ä½¿ç”¨å¯åŠ¨ç±»åŠ è½½å™¨ä½œä¸ºçˆ¶åŠ è½½å™¨ã€‚å¦‚æœçˆ¶ç±»åŠ è½½å¤±è´¥ï¼Œåˆ™åœ¨æŠ›å‡º ClassNotFoundException å¼‚å¸¸åï¼Œåœ¨è°ƒç”¨è‡ªå·±çš„ findClass æ–¹æ³•è¿›è¡ŒåŠ è½½</p>
<h2 id="4-è‡ªå®šä¹‰ç±»åŠ è½½å™¨"><a href="#4-è‡ªå®šä¹‰ç±»åŠ è½½å™¨" class="headerlink" title="4.è‡ªå®šä¹‰ç±»åŠ è½½å™¨"></a>4.è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h2><ol>
<li><p>åŠ å¯†</p>
<p>æˆ‘ä»¬çŸ¥é“Javaå­—èŠ‚ç æ˜¯å¯ä»¥è¿›è¡Œåç¼–è¯‘çš„ï¼Œåœ¨æŸäº›å®‰å…¨æ€§é«˜çš„åœºæ™¯ï¼Œæ˜¯ä¸å…è®¸è¿™ç§æƒ…å†µå‘ç”Ÿçš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†ç¼–è¯‘åçš„ä»£ç ç”¨æŸç§åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†åçš„æ–‡ä»¶å°±ä¸èƒ½å†ç”¨å¸¸è§„çš„ç±»åŠ è½½å™¨å»åŠ è½½ç±»äº†ã€‚è€Œæˆ‘ä»¬è‡ªå·±å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨åœ¨åŠ è½½çš„æ—¶å€™å…ˆè§£å¯†ï¼Œç„¶ååœ¨åŠ è½½</p>
</li>
<li><p>åŠ¨æ€åˆ›å»º</p>
<p>æ¯”å¦‚å¾ˆæœ‰åçš„åŠ¨æ€ä»£ç†ã€‚</p>
</li>
<li><p>ä»éæ ‡å‡†çš„æ¥æºåŠ è½½ä»£ç <br>æˆ‘ä»¬ä¸ç”¨éè¦ä»classæ–‡ä»¶ä¸­è·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶æµï¼Œè¿˜å¯ä»¥ä»æ•°æ®åº“ï¼Œä»ç½‘ç»œä¸­ï¼Œæˆ–è€…ä»zipåŒ…ç­‰ã€‚</p>
</li>
</ol>
<h3 id="4-1-è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ–¹æ³•"><a href="#4-1-è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ–¹æ³•" class="headerlink" title="4.1 è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ–¹æ³•"></a>4.1 è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ–¹æ³•</h3><p>   ç±»åŠ è½½æ—¶æ ¹æ®åŒäº²å§”æ´¾æ¨¡å‹ä¼šå…ˆä¸€å±‚å±‚æ‰¾åˆ°çˆ¶åŠ è½½å™¨ï¼Œå¦‚æœåŠ è½½å¤±è´¥ï¼Œåˆ™ä¼šè°ƒç”¨å½“å‰åŠ è½½å™¨çš„ findClass() æ–¹æ³•æ¥å®ŒæˆåŠ è½½ã€‚å› æ­¤æˆ‘ä»¬è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œæœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š<br>   1ã€ç»§æ‰¿ ClassLoader</p>
<p>   2ã€è¦†å†™ findClass() æ–¹æ³•</p>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>ClassLoader</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoéƒ¨ç½²å‡ºç°é”™è¯¯Error Spawn failedè§£å†³æ–¹å¼</title>
    <url>/hexo-spawn-failed/</url>
    <content><![CDATA[<p>éƒ¨ç½²è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°é”™è¯¯:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.</span><br><span class="line">remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ for more information.</span><br><span class="line">fatal: unable to access &#x27;https://github.com/xiaoyuge5201/xiaoyuge5201.github.io.git/&#x27;: The requested URL returned error: 403</span><br><span class="line">FATAL &#123;</span><br><span class="line">  err: Error: Spawn failed</span><br><span class="line">      at ChildProcess.&lt;anonymous&gt; (/Users/xiaoyuge/workspace/mybolg/node_modules/hexo-util/lib/spawn.js:51:21)</span><br><span class="line">      at ChildProcess.emit (events.js:315:20)</span><br><span class="line">      at Process.ChildProcess._handle.onexit (internal/child_process.js:277:12) &#123;</span><br><span class="line">    code: 128</span><br><span class="line">  &#125;</span><br><span class="line">&#125; Something&#x27;s wrong. Maybe you can find the solution here: %s https://hexo.io/docs/troubleshooting.html</span><br><span class="line">xiaoyuge@xiaoyugedeMacBook-Pro mybolg % hexo clean</span><br></pre></td></tr></table></figure>
<p>####è§£å†³æ–¹å¼ä¸€ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#è¿›å…¥ç«™ç‚¹æ ¹ç›®å½•</span></span></span><br><span class="line">cd cd /Users/xiaoyuge/workspace/mybolg</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#åˆ é™¤gitæäº¤å†…å®¹æ–‡ä»¶å¤¹</span></span></span><br><span class="line">rm -rf .deploy_git/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#æ‰§è¡Œ</span></span></span><br><span class="line">git config --global core.autocrlf false</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#æœ€å</span></span></span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>
<p>####è§£å†³æ–¹å¼äºŒï¼š<br>æœ‰å¯èƒ½æ˜¯ä½ çš„git repoé…ç½®åœ°å€ä¸æ­£ç¡®,å¯ä»¥å°†httpæ–¹å¼å˜æ›´ä¸ºsshæ–¹å¼ï¼ˆæˆ‘çš„å°±æ˜¯è¿™ä¸ªé—®é¢˜ï¼‰<br>githubåœ¨2021-08-13æ­£å¼å¯ç”¨personal access tokenåï¼ŒåŸæ¥çš„ç”¨æˆ·å+å¯†ç æ–¹å¼éƒ¨ç½²ä¼šæŠ¥é”™ï¼Œéœ€è¦é‡‡ç”¨æœ€æ–°çš„tokenç™»å½•æ–¹å¼è¿›è¡Œéƒ¨ç½² ã€‚<br>å…·ä½“æ–¹å¼å‚è€ƒï¼š<a href="https://cloud.tencent.com/developer/article/1861466">https://cloud.tencent.com/developer/article/1861466</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">remote: Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹_config.ymlæ–‡ä»¶ï¼Œ</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="comment">#repo:https://github.com/xiaoyuge5201/xiaoyuge5201.github.io.git  è¿™æ˜¯åŸæ¥çš„è·¯å¾„ï¼Œç°åœ¨æ”¹æˆäº†ä¸‹é¢è¿™ç§</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:xiaoyuge5201/xiaoyuge5201.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoåšå®¢åŠ å¯†</title>
    <url>/hexo-encrypt/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="310f12fe1b1e78b54a5df19aaa04e467fa0fcc47678c2ec825f715ec1d7db8ba">1b693c4938223286468132b2f7068bf637405b87610f2a46e8332fe08c20af44a9b3f5c8d0913a6cf68fa76ae2ab389c3aeb5aad6771dc1959e48e0b86883b36a1ebad3367efb14178a842f7009ca37e3903dd85eb1205ed60e0393ccda77e60e40d362b5f9cb6d9f80504545849b88326f1b1cbd712ce060d67d8e707f4ce8cf2b8a5ae06534e4b8f394043531317b672e752f2c6b0d805dc9b106bfd062d2b27f21495b8f97884f6f33e1eb2e17d420a933118be30b38a92d5a755d33ddef76d0d92784be33070ad6f18ee885a7dc54f776f75a75411b0024e1ef8952b99f5baee83bc94371100dfb02c70803b6a4891d37ef664a3468ada1e2c4932b53cb5dbc200ec63b282322347867fe67f756ee267e426f06dcd71eacb962e8066242a6e7d88d8bfea8c21daa7d5fc2e1389eaa76f82f2dfab78b4467d3ba1e08622774673a942347bc988eb7bf434e9a7f8703c25cb1cd6778544c38482d11162f90ab67802b04b90e565ed044a040d26556017937b37ffe4625be852d64e4b55ec141aaec6e48c810bbedc1ba7a72ecc6969ce775a4ff2c8e2b63100cc463668efec2f4373d93137e5f54643ece450de58723e764c34ba7a6f63b6175890a5f1b3015baa6e2b804f9211583800ec6c3b6981d94186a6126c5e37f8c80657173d6e1621e820c99db813267dfcc58139e7a52c8fd2683ac7a65d36d0a26108b96f5431aa5d571c1154cbee6e8c5511618a1486962a2e17fa2127fb32361bd2c299ff0bc2ac7b229c4bcd1426994425587f886ccbc665e0faf161a7e8e96685bfac277ad314824b540eb2563f0427f1cd0392db3412325849875a11472d1d7f1954b8c19b9192f9ed26a2fc45bf9479af93f1f7663c304500292089140e4582a58d32be65cd7551c98841b502e48eb3c0ae5ecfb430b0261b8f3752cb0c55cde204526ffd922b60825b23d403fd74d647bae1b8ceb94184a47800082e4efa210d9a9ef7605504b9cb761d7c7dcdcb6b16e074e6f04a75dfd94372c733719aeedc23e9617cbf1477085ee49f04c354f79286c00ba3b72c55b77d5b04fb18863c5195f1f492288654489b054ddf0232b44862d1fb211a3f7a1efc487c9f8a8364e7c0ba3bdd881b38e44c35d8a0961b794e34cf6c93816a3269ce9f9767c6d845f550527be5d57413cef1283cf9f48b6f230ad7faed2e1bcdd18061e07b09e17d30720552b1499ac3cfc336f3ce2677a53bd35b6dd382ce97d21b56c27b3540dc1cb30b821c753e11d62c5474e78e828acf802dbb7bd3ebe119de9c7347e0b0b5bcd6263fff25ba6c4c1c32d4f6aa388feaa85eae15d900c5ccaa81359520bfd55e4f3a2adc2a952905f8b46b575a05065b5b7447bf9244ec7edbe0b06dd325a9ce5e5fa191784d232a9d7d62db496649c3790b24e4429fe6c41b0e9115dbee0e61e37db712f9a7b86e1f7dcba98ef72264b8943fe7965f5fe12d468e7850c8664d2825775b258be4a5ea88499fa2c29eb03e9a7216a3d77e7277d26186d63e47cba8dc440fb38bbcb0887a3d0310b357b86f325c3ff50fa8c45947276de21ad2a0480df1ed40103504e5f7aa7012962e2ec7e9decbbff6b4b2c06aedfd08a17b955d81262be12f15c7230d64afb176e37a65826be96be8775939dbd48eab475713fa2aaf3d948da550ca2b43b922f02674db7b292afc283c40cb7a73d750d01a0251271c0025db9647552be48a67b1c9273bebd0efcd66d8ac3d6e84d5fbcc4f2c01b713d3e328862511ddbac62db98521717a45a2d4360ee4c5a592080f124005e654ef22a13f70ff4885239a0259bcf028de5c466c9fba0d8feaa18235ffdbd5ad2e2eaf7eaf3780e021446eed4e04f1b7003e4b6087a59ad8c567dcfa3f28b87f2d28a5876cefa3a2af5e358b38f33b9f1a6f6dcedaf9802ddae7eab9729c7e88a8aa65788514790bb2a32cc3434377a7a7ac6384767ccd332a9393bbfa7346075432450f3a1a4effc8b39b8c3f9dbc99bedd681837f06b2c16049ff9c0211d5cb9c53c2cf5977344c2136eb2eba2c08b262c753ed0ef133b49d256c17c430bc2a238c46ec9ceb750086531a72078b0fa1fdf553ddf50f050499107551e64c159207087c0afb0536da0e10af470d041de472c86e86ca9e0cdd81b5ab456daa3c0503713f8398c59ab4780b269b1a1b19420d9744c041b40614ef149428f7e53d54161e4ee29a53552bcd3c777c939f8550727467c43faf4e64baeb9e0e4071408969da09e146f073a1cb7f9b70de18f0aefaba2257fc636d625882178c52c4cd2cfdf9b4ec02df7aded6bf6bea25c349407485b46afab7ad88ea52010bd15d0820a08f0934736b0897d4e491825eabbbe423fe1203fb1614bff992603570c3b883bb1978e3db09a9cc9d9d743670abf1b1f96a8915588acdb5227568848176d063a71f1497a06818601fccbba8d934712fd1f11fb97bcaccd4047e2d79c9897af78ee4bad4adab6516bed24cf143278bebbddbf94cf7a46a04195ac3f766ac857ba093f7781d4ffa9127a01bd95476144c79ec5e7932c11916ea75dfdabcde83d9de132fe51b1c11a1a532dbe02f612aafd70f2d02fbf1473b6a81048aae044cb87e0a782f8e44b1fdac01e626db6e17997e0bae1125301e18895ca852d8b2b81c1f7cf335a56d041618357498920467f3b13c104586db5ac7174cd9b6f0a71d62ba414227a6b070e8ae5bcfbeddecc8d2499addec450a6d2931e1cdf158d7f92d96b836487ded398212431a52a7ca26b9ff13310734b12094461531f42fe64807f56959c74b1896786fa5220c08790546430e940e62cd0cc4565ffba3f68e734ed9e43c42f7ea481668384fc35436dc43c22c5f8634d478b8951dad246c33f16e06e98fd63c31d468f61c6246b1ccc77f5774a3c76cccc831fb2b8e37960f0b2cd9803aef1b4ea272b48cf475cb91d389c73a696ddc9147303a70dc877da9e9a384447f3a01dd48934c061bdce11c091ab1d8bd95404d08dacf603071fac631b5cc947e0b30cb13b192d5670419d0fa0babec31e7702db1be069e119d63cc221826379633dca67cb2904086c504e1e115d251b617297681968b6cd900e9089921fa17b48dbce72237b98437efbf90861a8b3c8d7b19064e5c58a7c52d7a01d426932c6e2741b7819b9597a09746500ab1d0bbfe00d3163788ad182ca51474a6a703c2cde9fe8aacbb4fd239751b2bfb5a4ab730bedc5bc6025e816fbf0971ab97d8e8dddcacb03e0375e307c6a82fb8071944bffb8e873dead9ad6d9042dbc03379b85c37fd1d8cb1ceb139d1d2988a351620fccf9a61410930239a2fb78715b02486b971c15a6bad0df918a86ec4b32497de459adbed290be47cc6ffe961db8287f44f9192209fe5a122524b47fc63aa69b037d3862cbfbcd929599927ffadf417881199b4790b5ea024d46abf81cc60c65bb82e5092efad5cd294b1d9fc797b4c2c94140a3f5f6e7299f2b81e0ce819ec933b2f86a51e357b6c35c2a5431f5cb0019afad4e67d88409bbbe79b46f473474a62e95723a4a6dd05127841f7198047f422279b67fd1435917cfa9841dc6d71ac2dc9bdb038fb46b1dac488b0fc887453560b4fc35bd6864830fd512f9422db5e55e9b93f9e7346a9e7884343c6ecb5849d79e8fa86a39782643f95765a10aac92d3f236516e52bd8c05e51e291ef401dbdb850495146f6fae2e29f7b0fc1ba97447e0e0a8dd71c68be35fd718f898fdc16209eda2b844ccab9410794cc89185cc11ac38a764811dbc143b86cb23b576a3b08a10cb85eb7e2f26a8b85cee527cdc4a9e9b981e34062c3e2ac94595548f79a81717298f2f62ecdcb7364921c32f70abd1d87e27779dcb56a6c4ff12985260b5eac3bd827a23d867b056917298bbd9c1a72422cc5cf0409b8c2d9d457c68f02e747909b9a7cd50873c49368c8a1d9df3a4ef6eefbf682358e678ea5070d2137e3d6a9feb3ce49ec8a68b855573e8387e4aebd57da4ef55d037870aa22ce0285434d85cf4f1c67ea7f3114d1e7dab25833bdb59718658253f20709e36d6bc66f84da42b4b63c1b8e89af5b4da25fde712faa443e30d7166dc684e7a8c843aca856c232cc82ed6d2bcba986d1fefbb923137e04d789e51acd032357de1e8512511e20ff54e2b41d1bc2071244683c4c60f8c068c33d2a3913e1d299899b8298ce26fd93b9d09c4084c71dd51d412375d35e7381208d51db360d99898aa769628c492e6265153163adb28bf8c42f8d38e66bddf86907d8e741c816955a12a6d4a20c6eb78422abb79758cb2e74a55e391218360ae944cbba7fa5b1d3519a5df154ca8f8680ecef9bf9a1aada35ffe15641b6ab53c59c4c8e3c10687aac3a59522f846fb0d29cb685ff5313288d8fd4d6c6b476b2527d04fb6caab1154e08fd0e0ed356cc2fcd8cb422b60a0121dfe5db3330ca427aeb3ee34ccaf0eaac321b70b973e6714daf81ebfa1c70f998e1d7e0dc484b467621dfb60d694d16b379baf6bce12c9581ef9c2e67bd396c67f7255c54b96e80fcf21b972aaf6c4733fbe8b7e277cc1e0b5a877947e83e82ed01cdc202bff2c90456b08a4eb13d9e5ce6970cc329dfb8977f883870d3a67573bbfe4d2992f2c9e188d9248b389684e7b94a9ffc6f12bd1c8a7435ee5379a298c07b031f322fb72d3177fdb4ce6e22c1f8c1293bea99a840224acb4cbc916b7eb0c9af6721dab99950ed6b76eb68b2ab25d4537dc9171d20db4eceaf59761e770f71e879112af69d7f22814d1ddeaf53fd6ea5f374627b0bb1e97bfe1d9077ed9d327eedcfa26f2d9c735783c3819e9b970821a329513ece65d1a632f424978031413aa8ddf4f82225105e74720f7c2d207e153ce2da8ef52447fa4bf1f53e8e5d7da2e3469bab839b636f8c5e91df8b984a99b68fa50652b144c037fe165691002bcf6b168bd898a4748bace91ae19e01d1f02b5a0e71b83beac3cdc849e28691e3f63058eb6f20616fe5113a13075852fa7f50614d779e1050889df57f74a03ee2cb7699e68217e647751e7a072fcf7ac0e2a2bfc759da5715ba33ef631b8c272dc3d64028379826338ab6391556613e9a2b83d23dcad694356ec39ce2deed2de8cc0d51d559705206f890d5ac275b5de9e1b2302c8a2926b929144b19b9c71210367f0f0f7c8385a94679ec35e445fb5b0a9cca680881337d3f63267d65b9738d4f8fa83bee73ba278fd51609b83832ae2904729387769c059765b37a355bea9be28b2d18a619493732064210137aa957318bc80aaf44aaf0b01ed01b28f0b42412a9d4c3b84776031e29655d05007b8f87be64f386271e4571598ef2b402183bd4e0c1e0c233267b8696ec40b416c42555f080a73c112cdc3989804bcfdda1fe87cd6eb55c6840dfcffdc36b37ad1629097f508a8a8432b2d02191394278353c5bc87b88ef1aa8e8aa7776d99ab8c976a1dc6a33904e9aab67d96f3167d1984e7fbed2806a90b6dcfa314202899d156d843c6df6707238dd6811b0b43f6ddcb70c1574fd81e174564c904356115a6396723dafffbf803b553f5f1b1fac1122b1b39ee235a1ab03de1a54e748724acf85867b4d0966b9b25d8397fcc9c499f178ae909afaa265f69ccc5c77ce06a2e0ef84235fed0d69b69f6d39e925464b2da96660ac2a64d4d959991ce0e25c2e4a7bf03b59f7e08c754d4a2a5ebac66239d2b5d80d0e2a67cd77f6d45263877cc4a08dc1377704bbd7502e3a24d2d72d2f27f795a116096493aefa382dfd9409a49177dd6dae5a35383d2927131fe6197ea012158842701c464510dc494d5a2e6f8c0cb5b69c5c26f4c7919dfc129d8e68ea1adc5737907f62e9f27e048748de1291373bf58e3cc21f0accbb54a5b73c07dcb9230083f3df92c923648ab24fb9b0c6e192dfe459fb88628a2dfb374ba90ea88fc2211ef2a2d5e465e47da340a0136d7fc060b90fa19c5888ca94d4aa9a4e8ed7797341e3957cc14d6022722f91ca3e8bdb8ce29d9ad8a74e6afd5f7d372c75d2ee03294154c74add4affced4eca6fc2fa6430ccfd77a7549416ab90d2d36abc4df65b7dccfea6c290c0d42d78a62f940fcb32c0245cba9d0c8da4872134ad99e125687c95c93e706b0045b02bc12d4c91f47030e1d5f974b83462a027dcbf1db290b154ac4963bdaa84176629db4bef61aae7fa7a89b246abeef4a058ebe8505bded593d683ce99661ebf72801ba83a4684ba5a071f96f7a6ace748612a8309cde9ac5a3127d1e7df6be58eb369c56ec47bec14815694fc27a912c423e40f65002207008c6c0e7242edacf41c728998d35fd9bbf438cea2be6cf45ac7832ab4610dbe90f35935195624c1c07072a332b0e64556c07d7e529cca4a32d915c89004656444d13c7135cfe44d1ae43546403ff60ba9c1c3de38af02af55c79f0ca2e9456ae9f7a3b891689b381f1ff7a068440fd57ae5f14201e6ae94bb28a51e193843e16bd4950ac5151f8d92d81b1e91dd28f6792c786fb03af4223019fa780d0a471bba46e79aec34318ff20cb5f782292c793ce3dbd0bf16e6df2d8a886f768af1b53dc4cd668edb7028fc4423f69391c4f17d195e0f3e18c69c817a5eb0a979a9da9a5d8dc6bca1a0e1d35f937b71dc21bee4f9ebf1a8c4f9a6e30fe1a458e6c71163f5936694f1be02f6627631434367f2b601bbc5f419955e4d41c3fc656ba1674bdbdc107c760c652c7071f12100a7c35feabea90780f086bb56c8067068a4d07a16c028ccbe054a2e65e9a3f9fe386f9253b2b3de4b48c7946d0dee53854c022cb66b0d4fbd3754629ecaaac2d0161bda9ee0c4369aad565a9411efe26785f172214df63420fd0cf8d24aa5656bfb31baf06fa6ed3fa424df1b30f833a31c298ed8baf298efbfb3692b8a89b65deb804f7331b65de410e2c1b977a7137f503018a103ab14bb5e7e5ac8657f10270b4ad3204d42f90c690968b17a42cbb48b8ca7a19d075c4ac524ce25554e21440b1ca766c7ab0cb958ade3a0662327ec807d10dc1a2ee60e519ac06cd61f27ae82ee58dac58137c79440a9ed5dc02fbeb2583d607c5d06d6d0e6fe11bc6b97e6687d735064f6e11091f91a432fc263341091d3c62799ac9d4071588c61ee1821d53abd69ee251ce5df6702ed6d9acc0a49e75c3d79d4f2be2a9ebcc55c900b2b254c42c2e9f94ede113919a5adf4cb50b4abe38bccf6a4086e29ac64a985e6e821502e031becf17ef6e68b40e6a55e1ce40ff8b93261b6275f017bf9fa436b6d5516f81f914af99b5d1935c4d891c90e05a6970b9793aff7c23c125fee4bd2d9cb3dea79457461129273fd9f2f8dc4c89896330db9d7b79a54091433f305202378f15693ebc0d9029081bfab8358ecc3f0caafd5aee108abe33c0c4d2943b418cee765d703b562e5d3daadb04d5383d464d275135077941313c6377a99a5279ea6d123226d62905c61706cea26c3920e56e5f45f7a08b54cde692ac25e5ad48465544755fdacfe492fed2d3d9cc0534108d792abb7fab73d3362a73d53e40089634f591c33646d06fccb13edc16e390eff64b8e6736207ae6f66889a5131aaf23e230d7cfa8d6bb15d8a92153b479001b0cdb41ae5f11a59d2d3b4b0899a113f49df316e7cb575c4c4815bf64c6c62e3ef466c053d19e2a1a8fb2e6101a042dfde341442f930cfb7629b061a564811c452ac99573f4adbc55a712c62e29e7d5da37f6c86d233256d3573f281a77933ba72375658bd411750227aef32bb4939c31808c28beeaa2e9f55a75c87bf96936b6c3b90a7b675a469130eda3cb6cf6754fe363dfd8f8ee5aa5ea44e4e3292f1302d800c5109eae1a0809d69b39560dd7d4c17fe510a61ceccd2fb857faaaab660295693e5e13d9dfb0afb0a1ee8bbffe7995940c2b8d633dcc5b0eccc04aba2270e484cdd3b87df62bf186ebd2494e15155d2516dcf249910e79e4a0bd97789f989f10881e336b2d9b038fab5efdd22d51a43bfb612880175f48bfe617bef6520982a3dff3081a05eba4d0f223c80c4101cf4eae84b267ce935782c7ca78100b382a1e93cb457d1d88dce4739e87cf8790c9e510f6f6f7ca161c629587ff4414e9c2d5e5761dc364ab5fa79b5e2a197b7fc781fea1b5d62d5bb183af4194a0ac217c1393348958686352606c27d7c56438b36fa3d2b1ebddc812ac1ade406c7fbd22b76268d341aa406daba58b49361b1effe4ee7b60fff827ccb714b118eb5c0b2303e7f0d06de1fb93fb6f355b759aa32de505bd6e02de0d3fac4f0f84f9ea663b2a01238297b86cef7464d100a8912f25596020fb3d5a12e1dc2c45ad307b1dd8f56a6961a14b947c75689dc9cc6aba22cef1acd5c2ee93b8d536a502df8f732a7ab526db9932a75f4afc3792e3860897723b1483b5f9b2586d5fc58e594e8f531bde3c8c08747ead5040f7b086b9df45e68ab7b19c0efbfec51f78e54469e533f8868d3c6d4dc2d0f48bb7c95c536ba16aee4e0567eb163c02ad8f37d3bd089cb42cb4aa13c90b78c2cb91254056b0b169fba6556239d965ee8a64a20ac7ec136422c345ee5214b1b1db015c702f857c4d582be9b4e58da093a08c6fd26e4de6889d5a1f05c9a7fafb757c202aba002a99243b4c298fc2d5ff5d87639f25eba4467a714f4c3dec0bcc63a8a42c42e534bdbbb91f667f17b7d933633b424af4f27417f6fdac559fca690874cb5cd0697a3e855258e1f9ee74f4c96a8e5e17797b186a6cebd99223ae131a666b6db2ba82accf79fbbe474a5dc30e25ca080ff2daf77c1f88b1f4c099cf0e75b00195987bf79d421cdd29b015d151d19fdd40b1194fb80208b2d32f6ba3e72a295aceeb089d6fd2107b9cae6ad486c72168156aff5985acb5445a0c5d9681ca98c3460f18fe9da92e46a84633dcc9028b98390404d077af206f6ed3f638041592fa90d8bba331ab3b61aa7d2fbf4a688a64c07a73df70e40b174b082907b522a054337949bc352b70483c30b4b9ea85fd42459ca21fdef239776e6a4b1360d7e2859a0621c0f51e8406b23c8903dc3ef57af81bcec0e80f1dcc2e92dd10e31dd68cae037b7c04e9dc0c177999add4a75ee3c1549411dca014e2ee5a4dac5a7f6f74610a6f7785152b592ed155a27cd4381b775149bbccd9b82e7db4a5a8ea96867382630d552d206f043a67ecfa58ada36c2c9729ac867e4a3285fc99ab4c748417c377b329990ba0d1b53c37830d31a73d6decfd8971199f7085d5ee982bd6a4d5cefc3e90cdc387add02377eec0fb39eb2da64485cc2cef22153cd08556d1a6a6ad321fb8d04c9c4f916669d8b9748fd6ce649835328e3b66c35cd79ec6d1cca10027a5d3416ce19c3035377806965a398d22e678aceb0d3d7e918923eb4c3d5fc764a9f2457d831550dbb1a1e6042e95b464bb216b516c685e526bfda9ed6347274eb82310a97fcd41735e046a287a77f131c65f922bef365224e396f091c6b78c17a5b8ff4df420be199ca6491603dccb765761272b4a781a41a55eb2ef75df7ec9441171b14fd343c80e6124df65ea3d325398cca54c1a923cd19883d1749a4a29d0d343beefc014e72212ef2f7cbe9667b207765f5fcc8a78174b8563418d073016129a0dd4cfba69903488dd5cc7f3bada42b82278ec89c7641c120518ad8684f400f4b6baa865ae9cccffabb919ae22c6b20deb9d1cfc84e19f01bab2171c4e0f5ab9ab6ef5c9d1835e3c77817ebcdebca32d02c8634dfbe93c6c2a6a74581e173df48f175902cdec0d93303865b273c71219cad140365abe12f92250bd31471e6e3e80fabb826789cdcd2ec057f6dddd96a29628f3be738fe2a37ce05c6b30563b84f09c180ff62efeae1cda4a4d419a6bbf190c4bd792b6cb33397a0b04a5f75d765d66eeb5172e615c3d23b89c0ff7cc358d56892b0f2090b95beaef64e436fcdd37c78d7769f9c8492d9d8a0a86d35bd94673a0d7a610b1dac7c051d4ddf92b221aba49ae85b7d13b69ad43b912d2b5c1daf945af2e7d697e6755b14942b2b2dfcd42dc8d7ce99f300a915b96e002a6ced139190df1c8df05c10649d1e9f2779478a2a73eb135773891f071264089fde3d909ff9fe607e1d931eadb4c89c19221d8bcadd3878f06d176b85cce962bf7a691540547136f05085970d77defa5efe43512a04c854a6e054e2ac9ed930ca1c8f44436ab40af1aa2c3360aa30182d3d7f6cba3a941cc1b2dbdf468848b0ab15e5cad40c1dd9a1019e1bb619901c0b58767b896b98357517923c1836660f2049f007fbd4c2c806c2e5487d8454cd13fd5213de5d2585889c6cf0c985a6618e10eaa88f6b50ea5cf079b850b442bc9ecf58dae6073fc7c4e59176fdfb3a9640c9ea0e5a8e227e9701752232c32c22435b6da3622a14bbd5103682b44b42867a7f33f6ea52622d12585dab3200c8cbff1aac848bdcb6ef4813456df1a03a407333ff44ce22b4445f6ae2cf34000a6ed5cd593deb24fe213ec45fdd2e3856ed018d6db8d4a473c6daa898fba0f32139b5a69897c5eca236117770b0c14b0b83d7861f78cb45a29e7700dc1f69c469b27d8cb5b6f9418ee8fa282d0112c372af4978d5049b679f238d5111326af4823ef6fe907ca549befa08d1ac90dab262700ab4bfd16b68519cded6696076ac7e4c8b9431cbc0d97ee71e15b1d7d8f2e823f4b23249eff65188e2140424f8113abb818c7db025888b4a74aab80559daffb2aec91f200834541626148314619c29d4e1ad8945a8c6a2db504a9bd12756fb94b4120b27a2040ea8790b3a96e3c0cce035e44f05f82d9c3bf0975093e148c2c5199bba94c71d6e9fdaa80f051b796c5c6f6be62eb5f190ad39f1504bbbfef282ceda2f90f95bda75e45605899416f22dc31d729b10c17150177444965288b3f4982307ae05db29fc0e710072c930292e4b0974c930b84f3e664697d1d4af22ba8c1cf5fab8a994baf28111f63b8eed63a6a847d0572aa4fd5ea630b15ab3a88a55b3002320da0d1130951125467f19abbff3cb8665b5f05528bf000db4c70551fdf1e2dd7e92f8092d84f6185c14409e43dd4d2acff3c98cbab8b0548319cc072ba1f046d1558a0d10156efaf7987c26cd62eccd479bb9a8be8a48f5c171fe1d9f674ec50c7d2e629d111974ede056bb7ba685c34c30be8be6f3ea20b8492bd4ac757ca1d2e20a8ec0f9dc6e80803835c0fd291f778b69b210b3ac3445791cf09dfae4dde5dc17984daa289fb993f04f0e7c733fc1338d23eadf1cce2537e4db83f62341e7633ae93c8b8946dc06be1b5c64f5055f42edb27d062d06a00ca022c44c385cea70b7b0fe2724d341942b09526565e80df56f9784d65d45ecad3439ef3d61063c191c7e3fc9b67614bbb3257af34f992453f83a6496cd019ef52d7dc587d876838b6985f17e081f30368767255875f4dcdbf5540b202dd2bb1c393286c7e21bbf4c3f7be9afbf61eae16df55ba5e5b33c48c7166d31ff0d7cd97b8fbfb260083545d55b7a80f2dfe230d1a07540f2ad38ae4665712efd1cd9e0f2bc0b059efe90d5e27c36bed559e991650e7948fbf4d575a9689d44260be5f250326683a09b4eafca8edc3d37afad9bf2361ea7c42ac3ae634417dc23ea06f7b1071e6b07a2e65b5b9b2142e3530f738ea9733a15a5164e887d7b666aa9a1c528b2b09cdc832fc111537d871e6f8f22364b9c0f7264c6674c8de4c42e6800dd42f59addf911c4a398f2433740b1842efaa6e21fe61b971d75582ed1611d90bb29af1f1bd8b903407103d857121a541ec18b32970afa0c4a200d924ff7b62879090b329785e0d7ceea05246d1a94efb8753523f75fb2a965d9a7d40f05d4def2d46efb6906e89e0d857013af18dc1379db7eeca2cfd19de04348ca12b1cbcd36dc3ed6ee8909fc4157c1c52058d791f4746753106dbf1634ac32aa40f74a059cdcd6e77c161c7cd5f15cf385f541cd70d364704743825e6f0acca70ce43701c7189251ad9cbc681a34c789bd8b79e275bf0074fe9721b06fae4cd7631bf1f65ba89b86a722e8a76d372ddcd45f83b4d1f8acf6c616a6ad832b9b3857627c4b678d18a9a872b13ed5a090ad20c63a124d7da33082b39aac75e034a132586e51e5074963d63c9daef32f36e5b4b25b3d61d57a3866ab85e20cd62821101d68036800f108a5624f163b41228bf951a5a0358de11df35ebaf4175a70918dc19558b543c8e4e038653295676b40758b5f1a28099b3940589858de8e68f4bdc8ceb7e6a13b7b3ef0fd066952208cea315c7e12420fe84a3296d7bf1d9996f4f9e4caaae700f6e828dde2c19814d24e893252be2fd30dae53af92db3bfef22fb9965ea2720e1b96364b9148ccbbac2b65d7a03ae57e3b14c46206731fd7b66b31487c2112d8e9db57008e8614ff2f4b985d8f614fc894b66b62e7d3f067ddcb439052491686de99d09f65c01b95771f41a6073b618a20d54c6381ed2426966e4b4f8e31ff2738fa5b8f7b2c6fd5504dc013df24a54de71b3c7623e79c39bc32bf5340f31cb7fbc988d900a7c058809928edb545b7862292d564ca560e1142854c797017ce73850fde38cbbbb85fce37bb8586f7a7752b1ffa40ad1a33d59759f0c56dc5b40c0cf678f7c3653be2f597d5557cfd578e6c16382d5997033250a1e6d392858477e3906973070235047de3b59103a9565b0ea71ab184c0638ad8fcb0f2b11f9c9fdf56acdc219e62a9941ffe79eefdff5f1d60139d40431dff377b56495006eb1f8193f4e9888ddc9cdac11e03845d39176f664fa9d753eb2274a5bfaaa9bdde6f45cf183c544d08339022e633b7e8021e0c68e8ae24d0f25144b664b488bd5d1f805199704eddd6050ab01f309df45d6de792276740b0b69f1c34a7e47c2e56332ccc2cd3ba0a8e6abcd1e3a1f454d68583c29731b7c85b62e52cf5d983e2fb70b7a5e0d0a14471e81dad2bf9b9e0dbafaa44326ba66474b300381bfa1dc1517f45d0a1177bda5927f1740970c652173bd7b9d167d8285d63eebd4a50cc0aecb8c07e832d802c5378f6800598c152f86a2a95a18f7a7378b74fb826e58566ad7915529caa38a2afa0f4d30ab5dbdcd91fa95129e3897151aeaf1aab4ce5f11038335888e2df0cb4ca5e922e576cd873dcc3d305b331d209d9d09cddb3890c3c00477b8800052a570f5e54836678b33e957ff29747bdbd6d529f9a6e4bd74cac94f48571636ca73cdc02e8245a83315950a18120a65db57dcaa15f5b20b6b1905924b0da04ac08e4fab3b4eb8a52307633948d0748b3bca19236776a4ec990099b2db443aa1aaa913b617cbf91776a37b8f9d560cf625ecddbddb583fc83748f1c5c20eb0e690d7f684bc421f8fb2f1d13645ec19b789221b020b60c25c076932b80c5a6eac60b1dd00f271d9ab8ce2718cb5c0dc49f0e1cc7cb8180ae5731301bc53d7c3a39c86224fd602a09abbad7b559fd13088d4c7e8301905766b77051b91de6b19214cd85b49190ef78e4aa259b95640000dc9c765769a9678f5b37772e6554a443a930cb4dcb5c3e8244b7fc93b40a7741351d927cbd10b18f6fe971604aa9346c62ecda07c6afc9a1bdb08d653d25b2493562621a293e0d5cdd5ed2e7c3c7da9fa19cf9ded250b4647dc1294d9e36c42571bde78f1ab2f4d30ea8964a8c316f74561bad9ee3f96992af16e8a8fd81f3cbbf10736ec14dc64273998fd414b705f5035e2e9a6e0caf5354baef0fd72850b5a3a2447c2de0a24b2ae3c0fcc3b12e6a9d0e334709d757df619badc9130e70ebcb672b378f601794582b624ceb74406baaa6d43fe3695433161dcb531a6f9290af45fb9dad7190c32c4f10549435f9e298768db78156e8cd626d2329940e7f0ce6edac46a689521b3e750b7ef608d06cbbd58ebf272c6760071972760e281eead73fabb4f4827a909e8fe6cc4d837dcc5952d51293a02ec1f9b766fa614fd93a2c926e81c58e6ddd5b1e8b6d0e33ee4e8de1f87ab6fabe88c1bb887ba054e74b418a7590d2445a7e36450a335757d23754ab76de232b0ad22291c142714286cacda42ce5d2d716e02efc58d1b02b6f197cf4812a77b23306687d7be6893c2d86334cb55290039a6d970c8ac5eedafd57a1d7c2eff8b17d728d3f093ee485b16c80cd29a91e52e9435f5c4dbb408280159881a9e6b149aeffa57d4883a7de285aa4389fb60ac8ad60bb54d2f336229330a3f1a0e312819f9044a68263fea654abe9b86851739f071b2c324007b27ee46b3d89b061e672844098140cfb80f41eaac6ca0e3a592eabb3c30381bf8bf327f2f20d5de2075cb815a5a1166cb2330ec645057cf0e310963532958210e5e1e3bdd455c71bca9ef8703a617a8b0bafc469e4e2cd161ec8462384a943a6f121aa263540777f44d9860ba8b72dc6aef8eb7d9d34528c2f60a3836a7c8cf47da298220d1997cf709ddcf4e35d2dcf2a92d784b122e6950c6dbbbeddd04be86996fb6c6c40f000f33ea30839e36a7632a5638d969831f8c6d287fca5730731a861c1015a5d632d80d875794a284db9aa145b8ef114eb9e1b513b221867473ee517ab0f79c7806df4f608d8d35d60a1c4157cb11911453e81695c12ca1f0cc4a1bcdc63f03fd945ada41ec2bef2df1b1915fe6c33398b73af4080372aa195b76e61629ef16051f5592cf673d3e24ed65a3c43f43f4d39c01d6730612b4edc14bae20c2afba82f047bb78bba11a6408409bb8bc59549e4a6baf7bf653ef31a9020e140c7a52fec8748fa0a9ee1f10d484ac17254c4bb780399676da2a4488fa80d7e4a8e1e8377e75bbd46aeda724748fbd73b95f5e7179c1cfd540e8a4b65e9ce6a9254fd9a46e8818265ae70ead357a064a546cc5ef28d23871f1b8075ec822f893de70cb09cc681becae3b45231a10d8f4ec930d2715ea21f185cc1a3b8b5651345e265890f3de9c0f2a0924ab754e8864633fea3ce2b1adf86cf5038e5467cbd1982e2a2e5299827a5098877be82a367e41efc7637feaceb7be085d123eb2b061acba7e8766c37bffb1c4c5ed480e05681c6124c20b58c4b9eeba5c545c1e10dcc578dcb08c76798076fe7576a928f8bafdfbd20a459065ddcc7735b842c61ff4f3564fcc4218d4728c93ba7af6aabd1afcbe7de9df4f3345de559f58cee6753e2255d5c1a524898cda4c9e86ecd6ba3c9d509afcd60540f255f541fad81ddb5972774f2b113c15819fd37abae0f7b4ceeef381753b32452f962a46c7cfc513008e3143bbf52b42beb2fbea7fa555d79a1581c17cb010e891c34a65eb753b8932a5d09ee00d0a5f4b85bf74b4b41009b4c76374a00ed6db3bb1d00e0a073430fda1be7ae08b3c8678bc5c51071749ee78e4b0e367eb7725f56ee1c40a22b2a96c15a0c90a56efe198b9ff20d6eaf69f8c2f4d795fe5423f8fd6b64bddc5c8f8307880298bd16ce5e57eed82ab9d379211c8e030c5bcc2141a38415896166465e3962f15f5a632fa628fd292afcb21e5e7f38e639258ce4df97deff6ce6a72834e1393f91c5b83439008f336a5da07e86af5b0aaeef9da77da4c66cf67363ad8023a56002dab1ae33818669073607ab402128ad9ef63196da1c4bce4e91b45618c3cb7158f34312277c3b6281958b497f8b537e43c981baedc54941c316a46382f081cd443674d057c7164438a5947b5e6bf556f7cc64e6d1c304daa448e87439a6befafd2f86f2fa0d5b3437e9c9606f9ba394599d999efad821a79adbc96a0673cb954b1996f5d245124a220f7714ed967b1b980cb3bab593a615ac08f75101d0cd6117daad09f4f0d2232f083233c0aff6012eafd545d2ae6cfd8fb4ca6896d67cf5c3ba6d1dd86b6fe6d075836d92a579744260ec4daf3b90c691f5cd1177819cb2d404a85fa8ae74e6a757f35561c32befabd47a637d0d352c620f54a0e7d5f2a21ef85b4719fc8704fb97b9df375fa662dea5165802e0f175d56caaa1631cdae1326759fc92d1db400902236491469f79bc75ca11791634267e53093db4b180d34505c5c32ccf13a2e5e27698a523ab6f7f17543724bdfb9925071e6b3ca8eb57e04b24d1a0c40f8f17451cd9fc1ca4fe55206c9f9535c72696e9504f08f4730dfc7a8a1abdafb9dc7606f8a7d861cbb7cb3a4b78726cae2715a9e9580da290afc81f2c1a4726f9e786515d26c3aff8e2de8784523c107bf0b7255a836f045da11f6f91f8c539386557c152a5bab756e020e8a9ccec50a251eb73a21f39b2b9614a6a7f78f84953fb75594b361fce730fc6ce33410f9d6e6e970096ce1dadcfd59dad6fbc99b237b88e4672a8afcb836bb172647df46d09789d4845df8540d227ac40c99d5baca90dbb91294c33a8817ac3c190f5e2e9c34b6f4937c0712f44b7c3872a375dd8fb230fdcdb40fc94b318f57eac847fada5ec1db6339ba3ae94d7e03bc788487c80c50dbc0a6b0b7edc04e23db59cd5c1d3626b4317b1d1075ac6ab0b35db8a353b68121da018cb673b26fab0e117a8fe5134160f722b8cb2553dbd80fa32e7df91deb520e01894245c8ee9a4968944ecd43c86690b8887eae3419fef1482d32e161b52a1c60366a776ff95807635de29a1ad8bad5437b6c5608c728061df2cfbe928fe8faf08472d6d1ef998701a9656b8e8acfacc0c249bc8ca7a9ee8f55a601b60f8a1394796907f2b040989bf75083bc9f85b01ac975202eee3d60491206a94258606d7261c5a05fe82727996081fb572f66ecac67dd16456d6bc9156aacf43e55d69d10e5418c9427063470d4b2c298e79878bfb84de23473aa12392ae2d0d1480de2fdc6b74fdcc2d60e8a78d05645011ba6323926298f06e59fcf68ab29ffb977a9fbc0f10c3d5c7c18311e66a545b7242c81bb2179835fcbdcdc809516963d789553f4607f5c7a129135b3f0eefb285b7e9f3f305692a36ee5d68a83251cf2e15cb61ffb635f98d039784a5b37e8750d07c7719d0b8810d4df523955b1bd2d835a674b2ecf83d3a4bb96be8253c132942e69b1464fe99869906100d822ab556ae09f4965ccfe6cace6eb931022ab5c376f8db4d3f5e36f73ad05c3520f824e9307a4c5e5d65951aed5ac2dedd1dde8f3079f22cc2910baf2f8c318a6ee19c474883cb5ae46c19494606ef0c190104cf21136e41f7700985b33adef2bf8ccdfe2e360b2ec80ea15f830616cdcc437275ee6232adaa4c2a1239332368dcb382d4299520719ce326dde72f105c6807691b1c152eb2005abbce395d9954998b72b2464b3d35a947d69c35cbbad9530044ea42127ae633653875b3432868b4d73cfa18607f7d53b361973c57c75acaac2eacda35f021908b65b09300c6db4e58cfc9f8d3b092e6676612c0cefe5646a2677be2e742b38db02833d52164eba0944081b3374685ae43576ee4c7c16ab5cf67236f0bc047b7c1a0762f2246523c8371e7913ed0cdedd1bd8bc6a50f8b81669329aff0a1031868c3da120e5d1338b856721f8cd86ee1da3282e1e9a7285df1b904c7b39549428bac89d0aadd655a3ad4ebe1683ca7588a8c90a5fbb0da33919a65140e5ad72470d025799c70a7b84c728104b4fccd521510e18d721a742bb012965e64a8d7cafba6967e2b9a7016e5540f2bfc930296cfb810edde61ed99774db33d2915958e43c45fb43918ce274967f69e8362b22a11a3c5f3da599dc86142309c4413249900fffaf8c041a519d08126b82211127b9695b7041a5913bb084540291bafcf3b81cc7463ddd1504f43265fda2efe743d7d1b03a24f484920975a621742ba958643846b4c24f92c864df7dadc19629e01ae2c898aa3f98896170e1a477ae24fad7760a9bbde8fa562a55df09831972936b1ed86119342e1ec82617e630a2589671dc0b03a08463a4e34b5e9ecaa75124da114022f9b885b81320e2a323805988003686c54d10189fe2f2108d384a8cd5e9098483affa2e17e56941cb51f4c9d26ad66cd63acb47f63bca900354afaedad02c45d0af48a99d04f7695a452c6b43105b3300b8dbad2d7fd776a5626c4d67ff470a00b61d7099b52647d1259000d81cfa6caf5a8e118299e26e5a329703e21a95a829f22b9e1e276b18aef8f81e9e12b8e8ea10fa714e07d55e65093d0300bc85a13c1f7637fa8082bbc7efe7980d45e170aeb11bc52cf23a76cc85537e8ef274aa6729958104348021ede2e50b14302775239c81e10640f94d78afa358f3c2d3714fad112e8b2f87483614bf08d385345bdfdc4c73fdc3d245632230d5a2b02be4994bbf4ceb857edcb29d6d4bf2d7bf668034ae0c8f8380c8c7f81969971720cc77c8e1c6b06b26c4bb2ab3d43b2f414c8e0f0ab99d11c4fdc9275de5fa793ea8483d8e7bef41e0284856034c9be8a1b4b06a46b69bdabe90276540e125ce8c307a514f974859938b0acec2e2be4305556b1ed977ab4ac7d2d7928c46c81b7b7df3d670dfb24b621db9be85b1be59446045a2c927dbde97774c462e59742de3e279b2600553239f70359c044f7859dcf75ab08a41f5303b2c5078a02d81d225bdb53e94cc82f9af52554ac629ba19231bd41da8a1d5b2e246d5a067580b782928442ac5bbabe1c4ae6670124f34ae30912922070c8b98fd4c921e3ab02ade3fed05da9884cdb1102a2c8b29d305c2921a4cb5631e52223dc9df085f46a502303786ef826df7e56c7772000b47ba41d6015be7347927398c728498999a3b0a972f20cf06523731dcaa4cfcf4aee51a668437c725c9425b46a17a89494d34b03c9c452a3386115c3d4f56f903ae4caf169d21f7c0d2a14d1b673f7b2e9bee8373d14e814c7bc59838df9602affd4be393892a8ada960d6b32270a6ab889052533ae24aecf10f91c36c2fe330aa63b7275c0fa06238605744123226d045fe93565db58347cc245b23b6cbe5ef59fb6240cc3f261dc6927c3ab175fe90467c18b700d4149f3ddeb66ae123d12840bf6c8c6b08af90c32a136d4b161b6be10dc6a8d3ce49893604551a6bada3e73336fd5b2d789b6ba059275825a2110f5e4f80b3de350a3168332e9ae7b93f8756367b58aa5c027a767967832689b842c97df46c39ccf3c1319bb8337bba470022d56b9541aaeb5c5b3c8e654562ba6576d7c5b137a96af226e4af3b3576d7a8a060abb2d0ebbb5f499bfbc00c8b4a24ae38bf091ec9a9c4d0e0ee6c01a726ee021cb19a29a8ee4b64eab5b38b584780b19965159782a6317e1befa19d7c60b2bd73bbd1cdd8a89000cb7b2f0242ebe58d5af4692b879307cbde2709b43fc0566e34fdb2dc9a2857c4116dc27d0726fe2833252db845792e56ad50585f8a901c27fd2438f590d526291b8bd350daba7bb62dec63bcb14a37d77f24b0b0294e3d703e8d6d130fdaae1937bb3ae1aec416c6d897e1be8d49696a08dc3535eb2b90e23601017e64e9bcadfc2af6c798ba6170de73bd029faae308c8a2353662a0abd5b02c41270cb78093373a9663ce5e8daa99dc479b63949270294b41e0e764864c32a38626b04c3acada1e8c55b6e1b3f80bf3782d88ccfde19aadfd21dec24316cb2c40b826a854dc0cd67a8512eba44263c3fe0db5617ca1e423e114fb1f3e1745d13c3909522a4f72573dc6477e6c733db717f34805c2b1ee03c01e0616171663d1c1806e13f6989f9fa72a34dcc673bceb9c0a0ede1bebb3b3789fe9e36a13799c3f805804381b24f4f3ab4b67222d235fdfb7a4f3c07fce9e932814bbc0d981be6c1768f31a67d80e72abd23e28d675b827b061cda548b2bfc5a41bc92ac138979690e37550b953b2dc7dc7e24da22ffa85c7ec7d10291f7cc09eea5202acf7789d1857e13454e04ffb9f7006a22f23b1afdf783d4e520956f3ecdf4580012350ae7397a5c163af3969c689f7029669e8061a810f114df05423ae64cb2f0d7704c500b14121b08119adf68a87735e1c0713546b9ec66e09221b135ce60652aadbc3438b27880a91ff62dd9022601b4f211cbbffe0c825fd8e70723f18e67bb5d95a652f5ce88195d09587bed64a89a7a3bdb8bdfadfa95abc8334e0d29459ec772b0fa65169bcf77c94eea04918dd28d49e348dc2f59826ecdbe59335a25679e658b2ee6a115a29df86ceda482dfd61819aa948527d7979a05395b3b4373abbb3c7871f28daf381f40d341fba38c76b8efabfbc6ec2986bf472b57939f575473f1f8f6c5cd485a0039050776e91a5b4e07e035ae162d834b0066c8544378745f2520b2d1c833aa3d666aa862df651246fba73227d25bdde4f751c2f573321f63a2fe0ae118f62b37a989d6ba60bad7ab2e724b6f210a5e62660cfcc9340a2fff8e2c31ead6eace5cb5c3fe6b2df879a846ae8e0e5c3e55b19e90366de839390a9d81056b0353542f0966d1c843654d396ab566074434a5abf0640a778f407c9f04f72827d8f98cc04d94ff5022dd14ba8cbd1db382c07d41a795edece327ff14cb72114e1297df7858039a5794104d48f62a282bf76600511933355</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>é¢è¯•å¸¸è§çš„è¶£å‘³é¢˜</title>
    <url>/interest/</url>
    <content><![CDATA[<h3 id="8å‡ã€5å‡ã€3å‡æ°´æ¡¶å„ä¸€ä¸ª-å¦‚ä½•åˆ†æˆä¸¤ä¸ª4å‡"><a href="#8å‡ã€5å‡ã€3å‡æ°´æ¡¶å„ä¸€ä¸ª-å¦‚ä½•åˆ†æˆä¸¤ä¸ª4å‡" class="headerlink" title="8å‡ã€5å‡ã€3å‡æ°´æ¡¶å„ä¸€ä¸ª,å¦‚ä½•åˆ†æˆä¸¤ä¸ª4å‡"></a>8å‡ã€5å‡ã€3å‡æ°´æ¡¶å„ä¸€ä¸ª,å¦‚ä½•åˆ†æˆä¸¤ä¸ª4å‡</h3><p><img src="/interest/3_5_8.png" alt="åˆ†æˆä¸¤ä¸ª4å‡"></p>
<h3 id="ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³è®¾è®¡é•¿æ–¹å½¢å’Œæ­£æ–¹å½¢"><a href="#ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³è®¾è®¡é•¿æ–¹å½¢å’Œæ­£æ–¹å½¢" class="headerlink" title="ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³è®¾è®¡é•¿æ–¹å½¢å’Œæ­£æ–¹å½¢"></a>ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³è®¾è®¡é•¿æ–¹å½¢å’Œæ­£æ–¹å½¢</h3><ul>
<li>æ–¹å¼1ï¼šè®¾è®¡æ¥å£ï¼Œç„¶åé•¿æ–¹å½¢å’Œæ­£æ–¹å½¢å„è‡ªå®ç°è¿™ä¸ªæ¥å£<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å½¢çŠ¶ç±»ï¼šç»“ç®—é¢ç§¯å’Œå‘¨é•¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span></span>;</span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">perimeter</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é•¿æ–¹å½¢ï¼šå®ç°æ¥å£å¹¶å®ç°æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">true<span class="keyword">private</span> <span class="keyword">double</span> width;</span><br><span class="line">true<span class="keyword">private</span> <span class="keyword">double</span> height;</span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="title">Rectangle</span><span class="params">(<span class="keyword">double</span> width,<span class="keyword">double</span> height)</span></span>&#123;</span><br><span class="line">truetrue<span class="keyword">this</span>.width=width;</span><br><span class="line">truetrue<span class="keyword">this</span>.height=height;</span><br><span class="line">true&#125;	</span><br><span class="line">true<span class="meta">@Override</span></span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">truetrue<span class="keyword">return</span> <span class="keyword">this</span>.width*<span class="keyword">this</span>.height;</span><br><span class="line">true&#125;</span><br><span class="line">true<span class="meta">@Override</span></span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">perimeter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">truetrue<span class="keyword">return</span> <span class="number">2</span>*(<span class="keyword">this</span>.width+<span class="keyword">this</span>.height);</span><br><span class="line">true&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­£æ–¹å½¢ï¼šå®ç°æ¥å£å¹¶å®ç°æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">true<span class="keyword">private</span> <span class="keyword">double</span> side;</span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="title">Square</span><span class="params">(<span class="keyword">double</span> side)</span></span>&#123;</span><br><span class="line">truetrue<span class="keyword">this</span>.side=side;</span><br><span class="line">true&#125;</span><br><span class="line">true<span class="meta">@Override</span></span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">truetrue<span class="keyword">return</span> side*side;</span><br><span class="line">true&#125;</span><br><span class="line"> </span><br><span class="line">true<span class="meta">@Override</span></span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">perimeter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">truetrue<span class="keyword">return</span> <span class="number">4</span>*side;</span><br><span class="line">true&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ–¹å¼2ï¼šä½¿ç”¨extents<br>å› ä¸ºæ­£æ–¹å½¢ <strong>is a</strong> é•¿æ–¹å½¢ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç»§æ‰¿æ¥è®¾è®¡æ­£æ–¹å½¢ï¼Œç„¶ååœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨superå‡½æ•°ï¼›</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Rectangle</span></span>&#123;</span><br><span class="line">true<span class="keyword">private</span> <span class="keyword">double</span> side;</span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="title">Square</span><span class="params">(<span class="keyword">double</span> side)</span></span>&#123;</span><br><span class="line">truetrue<span class="keyword">super</span>(side,side);</span><br><span class="line">truetrue<span class="keyword">this</span>.side=side;</span><br><span class="line">true&#125;</span><br><span class="line">true<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">truetrueSquare s=<span class="keyword">new</span> Square(<span class="number">2.5</span>);</span><br><span class="line">truetrueSystem.out.println(s.perimeter());</span><br><span class="line">truetrueSystem.out.println(s.area());</span><br><span class="line">true&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="javaä½¿ç”¨é€’å½’è®¡ç®—1-2-3-â€¦-nä¹‹é—´çš„å’Œ"><a href="#javaä½¿ç”¨é€’å½’è®¡ç®—1-2-3-â€¦-nä¹‹é—´çš„å’Œ" class="headerlink" title="javaä½¿ç”¨é€’å½’è®¡ç®—1+2+3+â€¦+nä¹‹é—´çš„å’Œ"></a>javaä½¿ç”¨é€’å½’è®¡ç®—1+2+3+â€¦+nä¹‹é—´çš„å’Œ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SumNumber</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(sumN(<span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨é€’å½’çš„æ–¹æ³•è®¡ç®—1+2+3+4+....nçš„å’Œ; åˆ‡è®°æ³¨æ„nä¸èƒ½å°äº1</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">sumN</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n+ sumN(n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="javaè¯»å–ä¸€ç¯‡è‹±æ–‡æ–‡ç« ï¼Œå¹¶è¾“å‡ºå…¶ä¸­å‡ºç°å•è¯æ¬¡æ•°æœ€å¤šçš„3ä¸ªå•è¯ä»¥åŠæ¬¡æ•°"><a href="#javaè¯»å–ä¸€ç¯‡è‹±æ–‡æ–‡ç« ï¼Œå¹¶è¾“å‡ºå…¶ä¸­å‡ºç°å•è¯æ¬¡æ•°æœ€å¤šçš„3ä¸ªå•è¯ä»¥åŠæ¬¡æ•°" class="headerlink" title="javaè¯»å–ä¸€ç¯‡è‹±æ–‡æ–‡ç« ï¼Œå¹¶è¾“å‡ºå…¶ä¸­å‡ºç°å•è¯æ¬¡æ•°æœ€å¤šçš„3ä¸ªå•è¯ä»¥åŠæ¬¡æ•°"></a>javaè¯»å–ä¸€ç¯‡è‹±æ–‡æ–‡ç« ï¼Œå¹¶è¾“å‡ºå…¶ä¸­å‡ºç°å•è¯æ¬¡æ•°æœ€å¤šçš„3ä¸ªå•è¯ä»¥åŠæ¬¡æ•°</h3><p>æ–‡ä»¶æ–‡ç« ä¸­å­˜åœ¨,.ä»¥åŠç©ºæ ¼</p>
<ul>
<li>è¯»å–æ–‡ä»¶å†…å®¹</li>
<li>å¯¹æ–‡ä»¶è¿›è¡Œå†…å®¹åŒ¹é…</li>
<li>ä½¿ç”¨map ä¿å­˜å•è¯ã€æ¬¡æ•°</li>
<li>mapæ’åº</li>
<li>è¾“å‡º<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1. ä½¿ç”¨æµè¯»å–æ–‡ä»¶</span></span><br><span class="line">            BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">&quot;d:/n.txt&quot;</span>));</span><br><span class="line">            StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sb.append(line);</span><br><span class="line">            &#125;</span><br><span class="line">            reader.close();</span><br><span class="line">            <span class="comment">//æ›¿æ¢æ‰€æœ‰çš„è‹±æ–‡é€—å·å’Œå¥å·</span></span><br><span class="line">            String temp = sb.toString().replaceAll(<span class="string">&quot;/[\\w\\,\\.]+/&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="comment">//2.ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</span></span><br><span class="line">            Pattern pattern = Pattern.compile(<span class="string">&quot;/[a-zA-Z\\w\\,\\.]+/&quot;</span>);</span><br><span class="line">            Matcher matcher = pattern.matcher(temp);</span><br><span class="line">            Map&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">            String word;</span><br><span class="line">            <span class="keyword">int</span> count;</span><br><span class="line">            <span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">                word = matcher.group();</span><br><span class="line">                <span class="keyword">if</span> (map.containsKey(word)) &#123;</span><br><span class="line">                    count = map.get(word);</span><br><span class="line">                    map.put(word, count + <span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    map.put(word, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å°†mapçš„æ•°æ®æ ¹æ®countæ’åºï¼›</span></span><br><span class="line">            List&lt;Map.Entry&lt;String, Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(map.entrySet());</span><br><span class="line">            Collections.sort(list, Comparator.comparing(Map.Entry::getValue));</span><br><span class="line">            <span class="keyword">int</span> last = list.size() - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = last; i &gt; last - <span class="number">5</span>; i--) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;key=&quot;</span> + list.get(i).getKey() + <span class="string">&quot; value=&quot;</span> + list.get(i).getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="java-è·å–å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°é‡å¤çš„å­—ç¬¦"><a href="#java-è·å–å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°é‡å¤çš„å­—ç¬¦" class="headerlink" title="java è·å–å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°é‡å¤çš„å­—ç¬¦"></a>java è·å–å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°é‡å¤çš„å­—ç¬¦</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">findDuplicate</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span>[] chars = str.toCharArray();</span><br><span class="line">    Set&lt;Character&gt; uniqueChars = <span class="keyword">new</span> HashSet(chars.length,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!uniqueChars.add(chars[i]))&#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå†…éƒ¨ç±»åˆå§‹åŒ–</title>
    <url>/java-inner-class-01/</url>
    <content><![CDATA[<h3 id="1-åœ¨åŒä¸ªjavaæ–‡ä»¶ä¸­ï¼Œä½†ä¸æ˜¯å†…éƒ¨ç±»"><a href="#1-åœ¨åŒä¸ªjavaæ–‡ä»¶ä¸­ï¼Œä½†ä¸æ˜¯å†…éƒ¨ç±»" class="headerlink" title="1. åœ¨åŒä¸ªjavaæ–‡ä»¶ä¸­ï¼Œä½†ä¸æ˜¯å†…éƒ¨ç±»"></a>1. åœ¨åŒä¸ªjavaæ–‡ä»¶ä¸­ï¼Œä½†ä¸æ˜¯å†…éƒ¨ç±»</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ¨åŒä¸€ä¸ªJavaæ–‡ä»¶ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªpublicç±»ï¼Œé™¤å†…éƒ¨ç±»å¤–</span></span><br><span class="line"><span class="comment">//åªå…è®¸ä½¿ç”¨â€œpublicâ€ã€â€œabstractâ€å’Œâ€œfinalâ€ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®ä¾‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    D d = <span class="keyword">new</span> D();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-å¸¸è§„å†…éƒ¨ç±»"><a href="#2-å¸¸è§„å†…éƒ¨ç±»" class="headerlink" title="2. å¸¸è§„å†…éƒ¨ç±»"></a>2. å¸¸è§„å†…éƒ¨ç±»</h3><p>è¦å®ä¾‹åŒ–å†…éƒ¨ç±»å¯¹è±¡ï¼Œå¿…é¡»å…ˆæœ‰å¤–éƒ¨ç±»å¯¹è±¡ï¼Œé€šè¿‡å¤–éƒ¨ç±»å¯¹è±¡.new å†…éƒ¨ç±»();æ¥å®ä¾‹åŒ–å†…éƒ¨ç±»å¯¹è±¡ï¼Œåœ¨å…¶ä»–æ–‡ä»¶æˆ–è€…å…¶ä»–åŒ…å†…éƒ½æ˜¯è¿™æ ·ï¼Œåªæ˜¯è¦èƒ½åœ¨å…¶ä»–åŒ…å®ä¾‹åŒ–çš„è¯ï¼Œå†…éƒ¨ç±»Innerè¿˜å¾—åŠ ä¸Šä¿®é¥°ç¬¦publicã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outter</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outter out = <span class="keyword">new</span> Outter();</span><br><span class="line">        Outter.Inner in = out.<span class="function">new <span class="title">Inner</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§æƒ…å†µï¼šé€šè¿‡æä¾›æ–¹æ³•æ¥è·å–å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="number">111</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> B <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> B();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A a = <span class="keyword">new</span> A();</span><br><span class="line">        B b = a.getInstance();</span><br><span class="line">        b.test();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-é™æ€å†…éƒ¨ç±»"><a href="#3-é™æ€å†…éƒ¨ç±»" class="headerlink" title="3. é™æ€å†…éƒ¨ç±»"></a>3. é™æ€å†…éƒ¨ç±»</h3><p>å®ä¾‹åŒ–é™æ€å†…éƒ¨ç±»å’Œå®ä¾‹åŒ–å¸¸è§„å†…éƒ¨ç±»æœ‰ç±»ä¼¼çš„åœ°æ–¹ï¼Œè€Œä¸åŒä¹‹å¤„åœ¨ä¸é™æ€å†…éƒ¨ç±»ç”±äºæ˜¯é™æ€çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤–éƒ¨ç±»å¯¹è±¡å°±å¯ä»¥å®ä¾‹åŒ–ï¼Œå¦‚ä¸Šä¾‹Outter.Inner in = new Outter.Inner();<br>åœ¨å…¶ä»–Javaæ–‡ä»¶ä¹Ÿæ˜¯è¿™ä¹ˆå®ä¾‹åŒ–çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outter.Inner in = <span class="keyword">new</span> Outter.Inner();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-å±€éƒ¨å†…éƒ¨ç±»"><a href="#4-å±€éƒ¨å†…éƒ¨ç±»" class="headerlink" title="4. å±€éƒ¨å†…éƒ¨ç±»"></a>4. å±€éƒ¨å†…éƒ¨ç±»</h3><p>å±€éƒ¨å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨ä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªä½œç”¨åŸŸé‡Œé¢çš„ç±»ï¼Œå®ƒå’Œæˆå‘˜å†…éƒ¨ç±»çš„åŒºåˆ«åœ¨äºå±€éƒ¨å†…éƒ¨ç±»çš„è®¿é—®ä»…é™äºæ–¹æ³•å†…æˆ–è€…è¯¥ä½œç”¨åŸŸå†…ï¼Œæ‰€ä»¥åªèƒ½åœ¨æ–¹æ³•æˆ–è€…è¯¥ä½œç”¨åŸŸå†…å®ä¾‹åŒ–,å±€éƒ¨å†…éƒ¨ç±»ä¸èƒ½æœ‰è®¿é—®è¯´æ˜ç¬¦,å› ä¸ºå®ƒä¸æ˜¯å¤–å›´ç±»çš„ä¸€éƒ¨åˆ†,ä½†æ˜¯å¯ä»¥è®¿é—®å½“å‰ä»£ç å—çš„å¸¸é‡,ä»¥åŠæ­¤å¤–å›´ç±»çš„æ‰€æœ‰æˆå‘˜</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">new</span> C();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pint</span><span class="params">(<span class="keyword">boolean</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (b) &#123;</span><br><span class="line">            <span class="class"><span class="keyword">class</span> <span class="title">D</span> </span>&#123;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">new</span> D();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-åŒ¿åå†…éƒ¨ç±»"><a href="#5-åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="5. åŒ¿åå†…éƒ¨ç±»"></a>5. åŒ¿åå†…éƒ¨ç±»</h3><p>åŒ¿åå†…éƒ¨ç±»å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»æˆ–å®ç°ä¸€ä¸ªæ¥å£ï¼Œè¿™é‡Œçš„ClassOrInterfaceNameæ˜¯åŒ¿åå†…éƒ¨ç±»æ‰€ç»§æ‰¿çš„ç±»åæˆ–å®ç°çš„æ¥å£åã€‚ä½†åŒ¿åå†…éƒ¨ç±»ä¸èƒ½åŒæ—¶å®ç°ä¸€ä¸ªæ¥å£å’Œç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä¹Ÿä¸èƒ½å®ç°å¤šä¸ªæ¥å£ã€‚å¦‚æœå®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œè¯¥ç±»æ˜¯Objectç±»çš„ç›´æ¥å­ç±»ï¼ŒåŒ¿åç±»ç»§æ‰¿ä¸€ä¸ªç±»æˆ–å®ç°ä¸€ä¸ªæ¥å£ï¼Œä¸éœ€è¦extendså’Œimplementså…³é”®å­—</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;() &#123;&#123;</span><br><span class="line">        add(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        add(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        add(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Thread(</span><br><span class="line">        <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line">        &#125;</span><br><span class="line">).start();</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>å†…éƒ¨ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 8å­¦ä¹ </title>
    <url>/java8%E7%89%B9%E6%80%A7/</url>
    <content><![CDATA[<h2 id="1-Optional"><a href="#1-Optional" class="headerlink" title="1. Optional"></a>1. Optional</h2><p>Optional ç±»ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯è‡­åæ˜­è‘—çš„ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNullPointerException)ã€‚<br>æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…å«æœ‰å¯é€‰å€¼çš„åŒ…è£…ç±»ï¼Œè¿™æ„å‘³ç€ Optional ç±»æ—¢å¯ä»¥å«æœ‰å¯¹è±¡ä¹Ÿå¯ä»¥ä¸ºç©º</p>
<h3 id="1-1-optionalæ„é€ æ–¹å¼"><a href="#1-1-optionalæ„é€ æ–¹å¼" class="headerlink" title="1.1. optionalæ„é€ æ–¹å¼"></a>1.1. optionalæ„é€ æ–¹å¼</h3><ul>
<li><p>Optional.of(T)</p>
<p>  è¯¥æ–¹å¼çš„å…¥å‚ä¸èƒ½ä¸ºnullï¼Œå¦åˆ™ä¼šæœ‰NPEï¼Œåœ¨ç¡®å®šå…¥å‚ä¸ä¸ºç©ºæ—¶ä½¿ç”¨è¯¥æ–¹å¼ã€‚</p>
</li>
<li><p>Optional.ofNullable(T)</p>
<p>  è¯¥æ–¹å¼çš„å…¥å‚å¯ä»¥ä¸ºnullï¼Œå½“å…¥å‚ä¸ç¡®å®šä¸ºénullæ—¶ä½¿ç”¨ã€‚</p>
</li>
<li><p>Optional.empty()</p>
<p>  è¿™ç§æ–¹å¼æ˜¯è¿”å›ä¸€ä¸ªç©ºOptionalï¼Œç­‰æ•ˆOptional.ofNullable(null)</p>
</li>
</ul>
<h3 id="1-2-å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨Optional"><a href="#1-2-å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨Optional" class="headerlink" title="1.2. å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨Optional"></a>1.2. å¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨Optional</h3><ul>
<li><p>å°½é‡é¿å…ä½¿ç”¨çš„åœ°æ–¹</p>
<ol>
<li><p>é¿å…ä½¿ç”¨Optional.isPresent()æ¥æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå› ä¸ºè¿™ç§æ–¹å¼å’Œnull != objæ²¡æœ‰åŒºåˆ«ï¼Œè¿™æ ·ç”¨å°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†ã€‚</p>
</li>
<li><p>é¿å…ä½¿ç”¨Optional.get()æ–¹å¼æ¥è·å–å®ä¾‹å¯¹è±¡ï¼Œå› ä¸ºä½¿ç”¨å‰éœ€è¦ä½¿ç”¨Optional.isPresent()æ¥æ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦åˆ™ä¼šå‡ºç°NPEé—®é¢˜ã€‚</p>
</li>
<li><p>é¿å…ä½¿ç”¨Optionalä½œä¸ºç±»æˆ–è€…å®ä¾‹çš„å±æ€§ï¼Œè€Œåº”è¯¥åœ¨è¿”å›å€¼ä¸­ç”¨æ¥åŒ…è£…è¿”å›å®ä¾‹å¯¹è±¡ã€‚</p>
</li>
<li><p>é¿å…ä½¿ç”¨Optionalä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼ŒåŸå› åŒ3ã€‚</p>
</li>
</ol>
</li>
<li><p>æ­£ç¡®ä½¿ç”¨æ–¹å¼</p>
<ol>
<li><p>å®ä¾‹å¯¹è±¡å­˜åœ¨åˆ™è¿”å›ï¼Œå¦åˆ™æä¾›é»˜è®¤å€¼æˆ–è€…é€šè¿‡æ–¹æ³•æ¥è®¾ç½®è¿”å›å€¼ï¼Œå³ä½¿ç”¨orElse/orElseGetæ–¹å¼ï¼š</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å­˜åœ¨åˆ™è¿”å›</span></span><br><span class="line">User king = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">&quot;king&quot;</span>);</span><br><span class="line">Optional&lt;User&gt; userOpt = Optional.of(king);</span><br><span class="line">User user =  userOpt.orElse(<span class="keyword">null</span>);</span><br><span class="line">System.out.println(user.getName());</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸å­˜åœ¨æä¾›é»˜è®¤å€¼</span></span><br><span class="line">User user2 = <span class="keyword">null</span>;</span><br><span class="line">Optional&lt;User&gt; userOpt2 = Optional.ofNullable(user2);</span><br><span class="line">User user3 = userOpt2.orElse(unknown);</span><br><span class="line">System.out.println(user3.getName());</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡æ–¹æ³•æä¾›å€¼</span></span><br><span class="line">User user4 = userOpt2.orElseGet(() -&gt; <span class="keyword">new</span> User(<span class="number">0</span>, <span class="string">&quot;DEFAULT&quot;</span>)); </span><br><span class="line">System.out.println(user4.getName())</span><br><span class="line">    </span><br><span class="line"> <span class="comment">//ä¸å»ºè®®ä¸‹é¢è¿™ç§ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">if</span>(userOpt.isPresent()) &#123;</span><br><span class="line">    System.out.println(userOpt.get().getName());</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ä½¿ç”¨ifPresent()æ¥è¿›è¡Œå¯¹è±¡æ“ä½œï¼Œå­˜åœ¨åˆ™æ“ä½œï¼Œå¦åˆ™ä¸æ“ä½œã€‚</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®ä¾‹å­˜åœ¨åˆ™æ“ä½œï¼Œå¦åˆ™ä¸æ“ä½œ</span></span><br><span class="line">userOpt.ifPresent(u -&gt; System.out.println(u.getName()));</span><br><span class="line">userOpt2.ifPresent(u -&gt; System.out.println(u.getName()));</span><br></pre></td></tr></table></figure></li>
<li><p>ä½¿ç”¨map/flatMapæ¥è·å–å…³è”æ•°æ®</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨mapæ–¹æ³•è·å–å…³è”æ•°æ®</span></span><br><span class="line">System.out.println(userOpt.map(u -&gt; u.getName()).orElse(<span class="string">&quot;Unknown&quot;</span>));</span><br><span class="line">System.out.println(userOpt2.map(u -&gt; u.getName()).orElse(<span class="string">&quot;Default&quot;</span>));</span><br><span class="line"><span class="comment">//ä½¿ç”¨flatMapæ–¹æ³•è·å–å…³è”æ•°æ®</span></span><br><span class="line">List&lt;String&gt; interests = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">interests.add(<span class="string">&quot;a&quot;</span>);interests.add(<span class="string">&quot;b&quot;</span>);interests.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">user.setInterests(interests);</span><br><span class="line">List&lt;String&gt; interests2 = Optional.of(user)</span><br><span class="line">    .flatMap(u -&gt; Optional.ofNullable(u.getInterests()))</span><br><span class="line">    .orElse(Collections.emptyList());</span><br><span class="line">System.out.println(interests2.isEmpty());</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<h3 id="1-3-Optionalåˆ¤æ–­ç¬¬ä¸‰æ–¹æ¥å£"><a href="#1-3-Optionalåˆ¤æ–­ç¬¬ä¸‰æ–¹æ¥å£" class="headerlink" title="1.3.Optionalåˆ¤æ–­ç¬¬ä¸‰æ–¹æ¥å£"></a>1.3.Optionalåˆ¤æ–­ç¬¬ä¸‰æ–¹æ¥å£</h3><p>ä½¿ç”¨java8çš„optionalå¯ä»¥å‡å°‘å¾ˆå¤šçš„NPEï¼Œå†ä¹Ÿä¸ç”¨å½“å¿ƒåˆ«äººçš„æ¥å£è¿”å›å€¼é—®é¢˜äº†ï¼Œä¹Ÿä¸ç”¨æ»¡å±çš„ifï¼ˆa != nullï¼‰è¿™ç§åˆ¤æ–­ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠå¦‚ä½•ä½¿ç”¨Optionalè§£å†³ã€‚</p>
<h4 id="1-3-1-æ¥å£è¿”å›å‚æ•°é—®é¢˜"><a href="#1-3-1-æ¥å£è¿”å›å‚æ•°é—®é¢˜" class="headerlink" title="1.3.1. æ¥å£è¿”å›å‚æ•°é—®é¢˜"></a>1.3.1. æ¥å£è¿”å›å‚æ•°é—®é¢˜</h4><ol>
<li>åœ¨å¾®æœåŠ¡ä¸­ä½¿ç”¨feignè°ƒç”¨å…¶ä»–æ¥å£ï¼Œæ€»æ‹…å¿ƒåˆ«äººè¿”å›çš„å‚æ•°æ˜¯å¦ç¬¦åˆæ ‡å‡†</li>
<li>å‚æ•°ç¬¦åˆæ ‡å‡†åï¼Œç„¶åå†è¿›è¡Œæ•°æ®åˆ¤æ–­ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦codeä¸º200ï¼Œç„¶ååˆ¤æ–­æ•°æ®å­˜ä¸å­˜åœ¨ï¼Œè¿™æ ·å†—ä½™çš„ä»£ç å°±å¾ˆå¤š</li>
</ol>
<p>è¿™æ˜¯æˆ‘ä»¬æœŸæœ›çš„è¿”å›æ ¼å¼</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">true<span class="attr">&quot;code&quot;</span>: <span class="string">&quot;200&quot;</span>,</span><br><span class="line">true<span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;è°ƒç”¨æˆåŠŸ!&quot;</span>,</span><br><span class="line">true<span class="attr">&quot;data&quot;</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¨¡æ‹Ÿæ¥å£è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">Map&lt;String,Object&gt; map = serviceImpl.queryList();</span><br><span class="line"><span class="comment">//å³ä½¿mapä¸ºç©ºä¹Ÿèƒ½æ­£å¸¸è¿”å›ï¼Œé…åˆmapç›´æ¥æ˜ å°„æ•°æ®å€¼</span></span><br><span class="line"><span class="keyword">return</span> Optional.ofNullable(map).map(r-&gt; r.get(<span class="string">&quot;data&quot;</span>)).orElseGet(ArrayList:: <span class="keyword">new</span>)</span><br><span class="line">    </span><br><span class="line"> <span class="comment">//JSONObject åˆ¤æ–­æ˜¯å¦è¿”å›æˆåŠŸï¼Œå¦‚æœæˆåŠŸè¿”å›200ï¼Œ ä¸æˆåŠŸè¿”å›400   </span></span><br><span class="line">JSONObject jsonObject = service.updateDate();</span><br><span class="line">Optional.ofNullable(jsonObject).map(r-&gt;r.getInteger(<span class="string">&quot;code&quot;</span>)).orElse(<span class="number">400</span>)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-é¿å…åˆ¤æ–­é£æš´"><a href="#1-3-2-é¿å…åˆ¤æ–­é£æš´" class="headerlink" title="1.3.2. é¿å…åˆ¤æ–­é£æš´"></a>1.3.2. é¿å…åˆ¤æ–­é£æš´</h4><p>å¯¹è±¡å±‚å±‚åµŒå¥—ï¼Œä¸ºäº†é€»è¾‘ä¸¥è°¨å¿…é¡»è¦è¿›è¡Œç©ºåˆ¤æ–­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹äºä¸€ä¸ªå¯¹è±¡é‡Œé¢åµŒå¥—å¯¹è±¡ï¼Œé‚£ä¹ˆéœ€è¦å±‚å±‚å»åˆ¤æ–­éç©º</span></span><br><span class="line">School school = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(school != <span class="keyword">null</span>)&#123;</span><br><span class="line">    Clazz clazz = school.getClazz();</span><br><span class="line">    <span class="keyword">if</span>(clazz != <span class="keyword">null</span>)&#123;</span><br><span class="line">        Student student = clazz.getStudent();</span><br><span class="line">        <span class="keyword">if</span>(student != <span class="keyword">null</span>)&#123;</span><br><span class="line">            String name = student.getName();</span><br><span class="line">            <span class="keyword">if</span>(name == <span class="keyword">null</span> || <span class="string">&quot;&quot;</span>.equals(name))&#123;</span><br><span class="line">                name = <span class="string">&quot;å­¦ç”Ÿçš„å§“åä¸ºç©º&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä½¿ç”¨Optionalå</span></span><br><span class="line"> String name = Optional.ofNullable(school)</span><br><span class="line">                .map(School::getClazz)</span><br><span class="line">                .map(Clazz::getStudent)</span><br><span class="line">                .map(Student::getName)</span><br><span class="line">                .orElse(<span class="string">&quot;å­¦ç”Ÿçš„å§“åä¸ºç©º&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="2-Stream"><a href="#2-Stream" class="headerlink" title="2. Stream"></a>2. Stream</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ‰¾å‡ºæŸä¸€ä¸ªå­—æ®µç­‰äºæŸä¸ªå€¼çš„é‚£ä¸€æ¡æ•°æ®</span></span><br><span class="line">JaponicaRiceCheck1 streamCheck = listItemRice.stream()</span><br><span class="line">.filter(o -&gt; o.getSYS_PARENTID().equals(check.getSYS_ID())).findAny().orElse(<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>çŸ¥è¯†æ•´ç†</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>é”ä¼˜åŒ–</title>
    <url>/lock01/</url>
    <content><![CDATA[<h2 id="1-ä¼˜åŒ–æ€è·¯ä»¥åŠæ–¹æ³•"><a href="#1-ä¼˜åŒ–æ€è·¯ä»¥åŠæ–¹æ³•" class="headerlink" title="1. ä¼˜åŒ–æ€è·¯ä»¥åŠæ–¹æ³•"></a>1. ä¼˜åŒ–æ€è·¯ä»¥åŠæ–¹æ³•</h2><ul>
<li>å‡å°‘é”æŒæœ‰æ—¶é—´</li>
<li>å‡å°é”ç²’åº¦</li>
<li>é”åˆ†ç¦»</li>
<li>é”ç²—åŒ–</li>
<li>é”æ¶ˆé™¤</li>
</ul>
<h3 id="1-1-å‡å°‘é”æŒæœ‰æ—¶é—´"><a href="#1-1-å‡å°‘é”æŒæœ‰æ—¶é—´" class="headerlink" title="1.1 å‡å°‘é”æŒæœ‰æ—¶é—´"></a>1.1 å‡å°‘é”æŒæœ‰æ—¶é—´</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">syncMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    othercode1();</span><br><span class="line">    mutextMethod();</span><br><span class="line">    othercode2();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åƒä¸Šè¿°ä»£ç ï¼Œåœ¨è¿›å…¥æ–¹æ³•å‰å°±è¦å¾—åˆ°é”ï¼Œå…¶ä»–çº¿ç¨‹å°±è¦åœ¨å¤–é¢ç­‰å¾…ã€‚</p>
<p>åˆ†æï¼šé”é‡Œé¢çš„èµ„æºåœ¨åŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œæˆ‘ä»¬ä¸ä»…è¦å‡å°‘å…¶ä»–çº¿ç¨‹ç­‰å¾…çš„æ—¶é—´ï¼Œä¹Ÿè¦å°½åŠ›å‡å°‘çº¿ç¨‹åœ¨é”é‡Œé¢çš„æ‰§è¡Œæ—¶é—´ï¼Œæ‰€ä»¥ï¼Œå°½é‡åªæœ‰åœ¨æœ‰çº¿ç¨‹å®‰å…¨è¦æ±‚çš„ç¨‹åºä»£ç ä¸ŠåŠ é”ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">syncMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    othercode1();</span><br><span class="line">    <span class="keyword">synchronized</span>(<span class="keyword">this</span>)&#123;</span><br><span class="line">        metextMethod();</span><br><span class="line">    &#125;</span><br><span class="line">    othercode2();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-å‡å°é”ç²’åº¦"><a href="#1-2-å‡å°é”ç²’åº¦" class="headerlink" title="1.2 å‡å°é”ç²’åº¦"></a>1.2 å‡å°é”ç²’åº¦</h3><p>å°†å¤§å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡å¯èƒ½ä¼šè¢«å¾ˆå¤šçº¿ç¨‹è®¿é—®ï¼‰æ‹†æˆå°å¯¹è±¡ï¼Œå¤§å¤§å¢åŠ å¹¶è¡Œåº¦ã€‚</p>
<p>é™ä½é”ç«äº‰ï¼Œé‚£ä¹ˆåå‘é”ã€è½»é‡çº§é”æˆåŠŸç‡æ‰ä¼šæé«˜ã€‚</p>
<p>æœ€æœ€å…¸å‹çš„å‡å°é”ç²’åº¦çš„æ¡ˆä¾‹å°±æ˜¯ConcurrentHashMapã€‚åœ¨HashMapçš„åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œä½¿ç”¨äº†casä¸synchronizedæ¥ç¡®ä¿å®‰å…¨æ€§ï¼Œåœ¨ä¿è¯å®‰å…¨æ€§çš„åŸºç¡€ä¸Šä¸ºäº†å……åˆ†åˆ©ç”¨çº¿ç¨‹èµ„æºï¼Œæ›´æ˜¯å·§å¦™çš„è®¾è®¡äº†å¤šçº¿ç¨‹åŒæ‰©å®¹çš„æ¨¡å¼ã€‚</p>
<h3 id="1-3-é”åˆ†ç¦»"><a href="#1-3-é”åˆ†ç¦»" class="headerlink" title="1.3 é”åˆ†ç¦»"></a>1.3 é”åˆ†ç¦»</h3><p>æœ€å¸¸è§çš„é”åˆ†ç¦»å°±æ˜¯è¯»å†™é”ReadWriteLockï¼Œæ ¹æ®åŠŸèƒ½è¿›è¡Œåˆ†ç¦»æˆè¯»é”å’Œå†™é”ã€‚è¿™æ ·è¯»è¯»ä¸äº’æ–¥ï¼Œè¯»å†™äº’æ–¥ï¼Œå†™å†™äº’æ–¥ã€‚æ—¢ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œåˆæé«˜äº†æ€§èƒ½ã€‚</p>
<p>åˆ†æï¼šè¯»å†™åˆ†ç¦»è¿™ç§æ€æƒ³å¯ä»¥å»¶ä¼¸åˆ°æˆ‘ä»¬å…¶ä»–çš„è®¾è®¡ä¸­ï¼Œåªè¦æ“ä½œä¸Šäº’ä¸å½±å“ï¼Œé‚£é”å°±å¯ä»¥è¿›è¡Œåˆ†ç¦»ï¼Œæ¯”å¦‚ï¼šLinkedBlockingQueue</p>
<img src="..\images/read_writer_Lock1.png" alt="read_writer_Lock1" style="zoom: 67%;">

<p>ä»å¤´éƒ¨è·å–æ•°æ®ï¼Œä»å°¾éƒ¨æ”¾å…¥æ•°æ®ï¼Œä½¿ç”¨ä¸¤æŠŠé”ã€‚</p>
<h3 id="1-4-é”ç²—åŒ–"><a href="#1-4-é”ç²—åŒ–" class="headerlink" title="1.4 é”ç²—åŒ–"></a>1.4 é”ç²—åŒ–</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¿è¯å¤šçº¿ç¨‹é—´çš„æœ‰æ•ˆå¹¶å‘ï¼Œä¼šè¦æ±‚æ¯ä¸ªçº¿ç¨‹æŒæœ‰é”çš„æ—¶é—´å°½é‡çŸ­ï¼Œå³åœ¨ä½¿ç”¨å®Œå…¬å…±èµ„æºåï¼Œåº”è¯¥ç«‹å³é‡Šæ”¾é”ï¼Œåªæœ‰è¿™æ ·ï¼Œç­‰å¾…åœ¨è¿™ä¸ªé”ä¸Šçš„å…¶ä»–çº¿ç¨‹æ‰èƒ½å°½æ—©çš„è·å–èµ„æºæ‰§è¡Œä»»åŠ¡ï¼›ä½†æ˜¯å‡¡äº‹éƒ½æœ‰ä¸€ä¸ªåº¦ï¼Œå¦‚æœå¯¹åŒä¸€ä¸ªé”ä¸åœçš„è¿›è¡Œè¯·æ±‚ã€åŒæ­¥å’Œé‡Šæ”¾ï¼Œå…¶æœ¬èº«ä¹Ÿä¼šæ¶ˆè€—ç³»ç»Ÿå®è´µçš„èµ„æºï¼Œåè€Œä¸åˆ©äºæ€§èƒ½çš„ä¼˜åŒ–ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demoMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span>&#123;</span><br><span class="line">    	<span class="comment">//dow sth.</span></span><br><span class="line">true&#125;</span><br><span class="line">    <span class="comment">//....åšå…¶ä»–ä¸éœ€è¦åŒæ­¥çš„å·¥ä½œï¼Œä½†èƒ½å¾ˆå¿«æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">    <span class="keyword">synchronized</span>&#123;</span><br><span class="line">        <span class="comment">//do sth.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æƒ…å†µï¼Œæ ¹æ®é”ç²—åŒ–çš„æ€æƒ³ï¼Œåº”è¯¥åˆå¹¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demoMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//æ•´åˆæˆä¸€æ¬¡é”è¯·æ±‚,å‰ææ—¶ä¸­é—´å“ªäº›ä¸éœ€è¦åŒæ­¥çš„å·¥ä½œå¾ˆå¿«å°±æ‰§è¡Œå®Œæˆ</span></span><br><span class="line">    <span class="keyword">synchronized</span>(lock)&#123;</span><br><span class="line">        <span class="comment">//do sth.</span></span><br><span class="line">        <span class="comment">//....åšå…¶ä»–ä¸éœ€è¦åŒæ­¥çš„å·¥ä½œï¼Œä½†èƒ½å¾ˆå¿«æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†ä¸¾ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>; i &lt; circle; i++)&#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(lock)&#123;</span><br><span class="line">        <span class="comment">//.....</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸€ä¸ªå¾ªç¯å†…ä¸åŒå¾—è·å¾—é”ã€‚è™½ç„¶JDKå†…éƒ¨ä¼šå¯¹è¿™ä¸ªä»£ç åšäº›ä¼˜åŒ–ï¼Œä½†æ˜¯è¿˜ä¸å¦‚ç›´æ¥å†™æˆï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(lock)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>; i &lt; circle; i++)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶å¦‚æœæœ‰éœ€æ±‚è¯´ï¼Œè¿™æ ·çš„å¾ªç¯å¤ªä¹…ï¼Œéœ€è¦ç»™å…¶ä»–çº¿ç¨‹ä¸è¦ç­‰å¾…å¤ªä¹…ï¼Œé‚£åªèƒ½å†™æˆä¸Šé¢é‚£ç§ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·ç±»ä¼¼çš„éœ€æ±‚ï¼Œè¿˜æ˜¯ç›´æ¥å†™æˆåè€…é‚£ç§æ¯”è¾ƒå¥½ã€‚<br><strong>åˆ†æ</strong>: é”ç²—åŒ–æ˜¯JVMé»˜è®¤å¯åŠ¨çš„ä¸€ç§æœºåˆ¶ï¼Œé”ç²—åŒ–é’ˆå¯¹çš„æ˜¯å¯¹è¿ç»­çš„åŒºåŸŸè¿›è¡Œåˆ†æ®µåŠ é”è¿™ç§åœºæ™¯ï¼ŒJVMä¼šè‡ªå‘è¿›è¡Œä¼˜åŒ–ã€‚ä½†ä½œä¸ºå¼€å‘è€…è€Œè¨€åœ¨æ»¡è¶³ä¸šåŠ¡çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å‡å°‘é”çš„ä½¿ç”¨ã€‚</p>
<h3 id="1-5-é”æ¶ˆé™¤"><a href="#1-5-é”æ¶ˆé™¤" class="headerlink" title="1.5 é”æ¶ˆé™¤"></a>1.5 é”æ¶ˆé™¤</h3><p>é”æ¶ˆé™¤æ˜¯åœ¨ç¼–è¯‘å™¨çº§åˆ«çš„äº‹æƒ…ã€‚åœ¨å³æ—¶ç¼–è¯‘å™¨(JIT)æ—¶ï¼Œå¦‚æœå‘ç°ä¸å¯èƒ½è¢«å…±äº«çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥æ¶ˆé™¤è¿™äº›å¯¹è±¡çš„é”æ“ä½œã€‚ä¹Ÿè®¸ä½ ä¼šè§‰å¾—å¥‡æ€ªï¼Œæ—¢ç„¶æœ‰äº›å¯¹è±¡ä¸å¯èƒ½è¢«å¤šçº¿ç¨‹è®¿é—®ï¼Œé‚£ä¸ºä»€ä¹ˆè¦åŠ é”å‘¢ï¼Ÿå†™ä»£ç æ—¶ç›´æ¥ä¸åŠ é”ä¸å°±å¥½äº†ã€‚<br>ä½†æ˜¯æœ‰æ—¶ï¼Œè¿™äº›é”å¹¶ä¸æ˜¯ç¨‹åºå‘˜æ‰€å†™çš„ï¼Œæœ‰çš„æ˜¯JDKå®ç°ä¸­å°±æœ‰é”çš„ï¼Œæ¯”å¦‚Vectorå’ŒStringBufferè¿™æ ·çš„ç±»ï¼Œå®ƒä»¬ä¸­çš„å¾ˆå¤šæ–¹æ³•éƒ½æ˜¯æœ‰é”çš„ã€‚å½“æˆ‘ä»¬åœ¨ä¸€äº›ä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹ä½¿ç”¨è¿™äº›ç±»çš„æ–¹æ³•æ—¶ï¼Œè¾¾åˆ°æŸäº›æ¡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†é”æ¶ˆé™¤æ¥æé«˜æ€§èƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> InterrruptedException</span>&#123;</span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeTimeMillis();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; <span class="number">20000</span>; i++)&#123;</span><br><span class="line">        createStringBuffer(<span class="string">&quot;JVM&quot;</span>,<span class="string">&quot;asdfasdfasdf&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">long</span> bufferCost = System.currentTimeTimeMillis() - start;</span><br><span class="line">    System.out.println(<span class="string">&quot;createStringBuffer:&quot;</span>+bufferCost+<span class="string">&quot;ms&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createStringBuffer</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    sb.append(s1);</span><br><span class="line">    sb.append(s2);</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¸­çš„StringBuffer.appendæ˜¯ä¸€ä¸ªåŒæ­¥æ“ä½œï¼Œä½†æ˜¯StringBufferå´æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”æ–¹æ³•ä¹Ÿå¹¶æ²¡æœ‰æŠŠStringBufferè¿”å›ï¼Œæ‰€ä»¥ä¸å¯èƒ½ä¼šæœ‰å¤šçº¿ç¨‹å»è®¿é—®å®ƒã€‚é‚£ä¹ˆæ­¤æ—¶StringBufferä¸­çš„åŒæ­¥æ“ä½œå°±æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚<br>å¼€å¯é”æ¶ˆé™¤æ˜¯åœ¨JVMå‚æ•°ä¸Šè®¾ç½®çš„ï¼Œå½“ç„¶éœ€è¦åœ¨serveræ¨¡å¼ä¸‹ï¼š</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">-server -XX:+DoEscapeAnalysis -XX:+EliminateLocks</span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”è¦å¼€å¯é€ƒé€¸åˆ†æã€‚ é€ƒé€¸åˆ†æçš„ä½œç”¨å‘¢ï¼Œå°±æ˜¯çœ‹çœ‹å˜é‡æ˜¯å¦æœ‰å¯èƒ½é€ƒå‡ºä½œç”¨åŸŸçš„èŒƒå›´ã€‚<br>æ¯”å¦‚ä¸Šè¿°çš„StringBufferï¼Œä¸Šè¿°ä»£ç ä¸­craeteStringBufferçš„è¿”å›æ˜¯ä¸€ä¸ªStringï¼Œæ‰€ä»¥è¿™ä¸ªå±€éƒ¨å˜é‡StringBufferåœ¨å…¶ä»–åœ°æ–¹éƒ½ä¸ä¼šè¢«ä½¿ç”¨ã€‚å¦‚æœå°†craeteStringBufferæ”¹æˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StringBuffer <span class="title">createStringBuffer</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    sb.append(s1);</span><br><span class="line">    sb.append(s2);</span><br><span class="line">    <span class="keyword">return</span> sb;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆè¿™ä¸ª StringBufferè¢«è¿”å›åï¼Œæ˜¯æœ‰å¯èƒ½è¢«ä»»ä½•å…¶ä»–åœ°æ–¹æ‰€ä½¿ç”¨çš„ï¼ˆè­¬å¦‚è¢«ä¸»å‡½æ•°å°†è¿”å›ç»“æœputè¿›mapå•Šç­‰ç­‰ï¼‰ã€‚é‚£ä¹ˆJVMçš„é€ƒé€¸åˆ†æå¯ä»¥åˆ†æå‡ºï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡ StringBufferé€ƒå‡ºäº†å®ƒçš„ä½œç”¨åŸŸã€‚<br>æ‰€ä»¥åŸºäºé€ƒé€¸åˆ†æï¼ŒJVMå¯ä»¥åˆ¤æ–­ï¼Œå¦‚æœè¿™ä¸ªå±€éƒ¨å˜é‡StringBufferå¹¶æ²¡æœ‰é€ƒå‡ºå®ƒçš„ä½œç”¨åŸŸï¼Œé‚£ä¹ˆå¯ä»¥ç¡®å®šè¿™ä¸ªStringBufferå¹¶ä¸ä¼šè¢«å¤šçº¿ç¨‹æ‰€è®¿é—®ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠè¿™äº›å¤šä½™çš„é”ç»™å»æ‰æ¥æé«˜æ€§èƒ½ã€‚<br>å½“JVMå‚æ•°ä¸ºï¼š</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">-server -XX:+DoEscapeAnalysis -XX:+EliminateLocks</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">createStringBuffer: 302ms</span><br></pre></td></tr></table></figure>

<p>JVMå‚æ•°ä¸ºï¼š</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">-server -XX:+DoEscapeAnalysis -XX:-EliminateLocks</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">createStringBuffer: 660ms</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç„¶ï¼Œé”æ¶ˆé™¤çš„æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚</p>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>lock</tag>
      </tags>
  </entry>
  <entry>
    <title>MVCCå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</title>
    <url>/mvcc/</url>
    <content><![CDATA[<h3 id="1-MVCC"><a href="#1-MVCC" class="headerlink" title="1. MVCC"></a>1. MVCC</h3><p>å…¨ç§°Multi-Version Concurrency Controlå³å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚MVCCæ˜¯ä¸€ç§å¹¶å‘æ§åˆ¶çš„æ–¹æ³•ï¼Œä¸€èˆ¬åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œå®ç°å¯¹æ•°æ®åº“çš„å¹¶å‘è®¿é—®ï¼Œåœ¨ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯å¿ƒå•Šäº‹åŠ¡å†…å­˜ã€‚<br>MVCCåœ¨mysql Innodbä¸­çš„å®ç°ä¸»è¦æ˜¯ä¸ºäº†æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ï¼Œç”¨æ›´å¥½çš„æ–¹å¼å»å¤„ç†è¯»-å†™å†²çªï¼Œåšåˆ°å³ä½¿è¯»å†™å†²çªæ—¶ï¼Œä¹Ÿèƒ½åšåˆ°ä¸åŠ é”ï¼Œéé˜»å¡å¹¶å‘è¯»</p>
<h3 id="2-å½“å‰è¯»å’Œå¿«ç…§è¯»"><a href="#2-å½“å‰è¯»å’Œå¿«ç…§è¯»" class="headerlink" title="2. å½“å‰è¯»å’Œå¿«ç…§è¯»"></a>2. å½“å‰è¯»å’Œå¿«ç…§è¯»</h3><ul>
<li><p>å½“å‰è¯»</p>
<p>  åƒselect lock in share modeï¼ˆå…±äº«é”ï¼‰ï¼Œselect for updateï¼Œ update, insert,delete(æ’ä»–é”)è¿™äº›æ“ä½œéƒ½æ˜¯ä¸€ç§å½“å‰è¯»ï¼›<strong>å½“å‰è¯»å°±æ˜¯è¯»å–è®°å½•çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯»å–æ—¶è¿˜è¦ä¿è¯å…¶ä»–å¹¶å‘äº‹åŠ¡ä¸èƒ½ä¿®æ”¹å½“å‰è®°å½•ï¼Œä¼šå¯¹è¯»å–çš„è®°å½•è¿›è¡ŒåŠ é”</strong>ã€‚</p>
</li>
<li><p>å¿«ç…§è¯»</p>
<p>  åƒä¸åŠ é”çš„selectæ“ä½œå°±æ˜¯å¿«ç…§è¯»ï¼Œå³ä¸åŠ é”çš„éé˜»å¡è¯»ï¼›å¿«ç…§è¯»çš„å‰ææ˜¯éš”ç¦»çº§åˆ«ä¸æ˜¯ä¸²è¡Œçº§åˆ«ï¼ˆä¸²è¡Œçº§åˆ«å¿«ç…§è¯»ä¼šå˜æˆå½“å‰è¯»ï¼‰ï¼›å¿«ç…§è¯»çš„å®ç°æ˜¯åŸºäºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆå³MVCCï¼‰ï¼›å¯ä»¥ä»»åŠ¡MVCCæ˜¯è¡Œé”çš„ä¸€ä¸ªå˜ç§ï¼Œä½†å®ƒåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé¿å…äº†åŠ é”æ“ä½œï¼Œé™ä½äº†å¼€é”€ï¼›<br>  æ—¢ç„¶æ˜¯åŸºäºå¤šç‰ˆæœ¬ï¼Œå³å¿«ç…§è¯»å¯èƒ½è¯»åˆ°çš„å¹¶ä¸ä¸€å®šæ˜¯æœ€æ–°ç‰ˆæœ¬çš„æ•°æ®ï¼Œæœ‰å¯èƒ½æ˜¯ä¹‹å‰çš„å†å²ç‰ˆæœ¬</p>
</li>
</ul>
<p><strong>MVCCå°±æ˜¯ä¸ºäº†å®ç°è¯»ï¼ˆå¿«ç…§è¯»ï¼‰-å†™å†²çªä¸åŠ é”ï¼Œå½“å‰è¯»å®é™…ä¸Šæ˜¯ä¸€ç§åŠ é”çš„æ“ä½œï¼Œæ˜¯æ‚²è§‚é”çš„å®ç°ã€‚</strong></p>
<hr>
<h3 id="3-å½“å‰è¯»ã€å¿«ç…§è¯»å’ŒMVCCçš„å…³ç³»"><a href="#3-å½“å‰è¯»ã€å¿«ç…§è¯»å’ŒMVCCçš„å…³ç³»" class="headerlink" title="3. å½“å‰è¯»ã€å¿«ç…§è¯»å’ŒMVCCçš„å…³ç³»"></a>3. å½“å‰è¯»ã€å¿«ç…§è¯»å’ŒMVCCçš„å…³ç³»</h3><p>MVCCå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æŒ‡çš„æ˜¯â€ç»´æŒä¸€ä¸ªæ•°æ®çš„å¤šä¸ªç‰ˆæœ¬ï¼Œä½¿å¾—è¯»å†™æ“ä½œæ²¡æœ‰å†²çªâ€ï¼›<br>Mysqlé€šè¿‡å¿«ç…§è¯»çš„æ–¹å¼å»å®ç°MVCCç†æƒ³æ¨¡å‹çš„å…¶ä¸­ä¸€ä¸ªå…·ä½“éé˜»å¡è¯»åŠŸèƒ½ï¼Œç›¸å¯¹è€Œè¨€ï¼Œå½“å‰è¯»å°±æ˜¯æ‚²è§‚é”çš„å…·ä½“åŠŸèƒ½å®ç°</p>
<p>MVCCæ¨¡å‹åœ¨Mysqlä¸­å…·ä½“å®ç°æœ‰3ä¸ªéšå¼å­—æ®µï¼šundoæ—¥å¿—ã€Read Viewç­‰å»å®Œæˆçš„</p>
<h3 id="4-MVCCçš„ä½œç”¨ä¸å¥½å¤„"><a href="#4-MVCCçš„ä½œç”¨ä¸å¥½å¤„" class="headerlink" title="4. MVCCçš„ä½œç”¨ä¸å¥½å¤„"></a>4. MVCCçš„ä½œç”¨ä¸å¥½å¤„</h3><p>æ•°æ®åº“å¹¶å‘åœºæ™¯åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li>è¯»-è¯»ï¼šæ²¡æœ‰é—®é¢˜ï¼Œä¹Ÿä¸éœ€è¦å¹¶å‘æ§åˆ¶</li>
<li>è¯»-å†™ï¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯èƒ½ä¼šé€ æˆäº‹åŠ¡éš”ç¦»æ€§é—®é¢˜ï¼Œï¼ˆè„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»ï¼‰</li>
<li>å†™-å†™ï¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯èƒ½ä¼šå­˜åœ¨æ›´æ–°ä¸¢å¤±é—®é¢˜</li>
</ul>
<p><strong>MVCCå¸¦æ¥çš„å¥½å¤„ï¼š</strong></p>
<p>MVCCæ˜¯ä¸€ç§ç”¨æ¥è§£å†³è¯»-å†™å†²çªçš„æ— æ‰€å¹¶å‘æ§åˆ¶ï¼ˆåœ¨MVCCæå‡ºä¹‹å‰é‡‡ç”¨çš„æ˜¯é‡‡ç”¨<strong>æ‚²è§‚é”</strong>ï¼‰ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡åˆ†é…å¢é•¿çš„æ—¶é—´æˆ³ï¼Œä¸ºæ¯ä¸ªä¿®æ”¹ä¿å­˜ä¸€ä¸ªç‰ˆæœ¬ï¼Œç‰ˆæœ¬ä¸äº‹åŠ¡æ—¶é—´æˆ³å…³è”ï¼Œè¯»æ“ä½œåªè¯»è¯¥äº‹åŠ¡å‰çš„æ•°æ®åº“å¿«ç…§ï¼Œä¸»è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>åœ¨å¹¶å‘è¯»å†™æ•°æ®åº“æ—¶ï¼Œå¯ä»¥åšåˆ°åœ¨è¯»æ“ä½œæ˜¯ä¸ç”¨é˜»å¡å†™æ“ä½œï¼Œå†™æ“ä½œä¹Ÿä¸ç”¨é˜»å¡è¯»æ“ä½œï¼Œæé«˜äº†æ•°æ®åº“å¹¶å‘è¯»å†™çš„æ€§èƒ½ï¼›</li>
<li>è§£å†³è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»ç­‰äº‹åŠ¡éš”ç¦»æ€§é—®é¢˜ï¼Œä½†ä¸èƒ½è§£å†³æ›´æ–°ä¸¢å¤±é—®é¢˜</li>
</ul>
<p><strong>MVCCç»„åˆæ–¹æ³•</strong></p>
<ul>
<li>MVCC + æ‚²è§‚é”ï¼š MVCCè§£å†³è¯»å†™å†²çªï¼Œæ‚²è§‚é”è§£å†³å†™å†™å†²çª</li>
<li>MVCC + ä¹è§‚é”ï¼š MVCCè§£å†³è¯»å†™å†²çªï¼Œä¹è§‚é”è§£å†³å†™å†™å†²çªï¼Œè¿™ç§æ–¹å¼å¯èƒ½æœ€å¤§ç¨‹åº¦çš„æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ï¼Œå¹¶è§£å†³è¯»å†™å†²çªå’Œå†™å†™å†²çªå¯¼è‡´çš„é—®é¢˜</li>
</ul>
<h3 id="5-MVCCçš„å®ç°åŸç†"><a href="#5-MVCCçš„å®ç°åŸç†" class="headerlink" title="5. MVCCçš„å®ç°åŸç†"></a>5. MVCCçš„å®ç°åŸç†</h3><p>å®ç°åŸç†ä¸»è¦æ˜¯ä¾èµ–è®°å½•ä¸­çš„ 3ä¸ªéšå¼å­—æ®µã€undoæ—¥å¿— ã€ReadView æ¥å®ç°çš„</p>
<p>åœ¨Mysqlçš„InnoDBå¼•æ“ä¸­å°±æ˜¯æŒ‡åœ¨å·²æäº¤è¯»(READ COMMITTD)å’Œå¯é‡å¤è¯»(REPEATABLE READ)è¿™ä¸¤ç§éš”ç¦»çº§åˆ«ä¸‹çš„äº‹åŠ¡å¯¹äºSELECTæ“ä½œä¼šè®¿é—®ç‰ˆæœ¬é“¾ä¸­çš„è®°å½•çš„è¿‡ç¨‹<br>è¿™å°±ä½¿å¾—åˆ«çš„äº‹åŠ¡å¯ä»¥ä¿®æ”¹è¿™æ¡è®°å½•ï¼Œåæ­£æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šåœ¨ç‰ˆæœ¬é“¾ä¸­è®°å½•ã€‚SELECTå¯ä»¥å»ç‰ˆæœ¬é“¾ä¸­æ‹¿è®°å½•ï¼Œè¿™å°±å®ç°äº†è¯»-å†™ï¼Œå†™-è¯»çš„å¹¶å‘æ‰§è¡Œï¼Œæå‡äº†ç³»ç»Ÿçš„æ€§èƒ½ã€‚</p>
<h4 id="5-1-ç‰ˆæœ¬é“¾"><a href="#5-1-ç‰ˆæœ¬é“¾" class="headerlink" title="5.1 ç‰ˆæœ¬é“¾"></a>5.1 ç‰ˆæœ¬é“¾</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">begin</span>;</span><br><span class="line">#è§¦å‘åˆ†é…TRX_ID</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_role;</span><br><span class="line">#æŒ‡å®šTRX_MYSQL_THREAD_ID<span class="operator">=</span>å½“å‰CONNECTION_ID,è¡¨ç¤ºæŸ¥è¯¢å½“å‰è¿æ¥</span><br><span class="line"><span class="keyword">select</span> TRX_ID, ROLL_PTR, ROW_ID  <span class="keyword">from</span> INFORMATION_SCHEMA.INNODB_TRX <span class="keyword">where</span> TRX_MYSQL_THREAD_ID <span class="operator">=</span> CONNECTION_ID();</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨InnoDBå¼•æ“è¡¨ä¸­ï¼Œå®ƒçš„èšç°‡ç´¢å¼•è®°å½•ä¸­æœ‰ä¸¤ä¸ªå¿…è¦çš„éšè—åˆ—ï¼š</p>
<ul>
<li><p>TRX_ID</p>
<p>6byteï¼Œè¿™ä¸ªidç”¨æ¥å­˜å‚¨çš„æ¯æ¬¡å¯¹æŸæ¡èšç°‡ç´¢å¼•è®°å½•è¿›è¡Œä¿®æ”¹çš„æ—¶å€™çš„äº‹åŠ¡id</p>
</li>
<li><p>roll_pointer</p>
<p>æ¯æ¬¡å¯¹å“ªæ¡èšç°‡ç´¢å¼•è®°å½•æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œéƒ½ä¼šæŠŠè€ç‰ˆæœ¬å†™å…¥undoæ—¥å¿—ä¸­ã€‚è¿™ä¸ªroll_pointerå°±æ˜¯å­˜äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘è¿™æ¡èšç°‡ç´¢å¼•è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„ä½ç½®ï¼Œé€šè¿‡å®ƒæ¥è·å¾—ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„è®°å½•ä¿¡æ¯ã€‚(æ³¨æ„æ’å…¥æ“ä½œçš„undoæ—¥å¿—æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è€ç‰ˆæœ¬)</p>
</li>
<li><p>ROW_ID</p>
<p>6byteï¼Œéšå«çš„è‡ªå¢IDï¼ˆéšè—ä¸»é”®ï¼‰ï¼Œå¦‚æœæ•°æ®è¡¨æ²¡æœ‰ä¸»é”®ï¼ŒInnoDBä¼šè‡ªåŠ¨ä»¥DB_ROW_IDäº§ç”Ÿä¸€ä¸ªèšç°‡ç´¢å¼•</p>
</li>
<li><p>å®é™…è¿˜æœ‰ä¸€ä¸ªåˆ é™¤flagéšè—å­—æ®µ, æ—¢è®°å½•è¢«æ›´æ–°æˆ–åˆ é™¤å¹¶ä¸ä»£è¡¨çœŸçš„åˆ é™¤ï¼Œè€Œæ˜¯åˆ é™¤flagå˜äº†<br><img src="/mvcc/02.png"></p>
</li>
</ul>
<p>æ¯”å¦‚ç°åœ¨æœ‰ä¸ªäº‹åŠ¡idæ˜¯60çš„æ‰§è¡Œçš„è¿™æ¡è®°å½•çš„ä¿®æ”¹è¯­å¥</p>
<p><img src="/mvcc/03.png"></p>
<p>æ­¤æ—¶åœ¨undoæ—¥å¿—ä¸­å°±å­˜åœ¨ç‰ˆæœ¬é“¾<br><img src="/mvcc/04.png"></p>
<h4 id="5-2-ReadView"><a href="#5-2-ReadView" class="headerlink" title="5.2 ReadView"></a>5.2 ReadView</h4><p>å·²æäº¤è¯»å’Œå¯é‡å¤è¯»çš„åŒºåˆ«å°±åœ¨äºå®ƒä»¬ç”ŸæˆReadViewçš„ç­–ç•¥ä¸åŒ<br>ReadViewä¸­ä¸»è¦å°±æ˜¯æœ‰ä¸ªåˆ—è¡¨æ¥å­˜å‚¨æˆ‘ä»¬ç³»ç»Ÿä¸­å½“å‰æ´»è·ƒç€çš„è¯»å†™äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯beginäº†è¿˜æœªæäº¤çš„äº‹åŠ¡ã€‚é€šè¿‡è¿™ä¸ªåˆ—è¡¨æ¥åˆ¤æ–­è®°å½•çš„æŸä¸ªç‰ˆæœ¬æ˜¯å¦å¯¹å½“å‰äº‹åŠ¡å¯è§ã€‚å‡è®¾å½“å‰åˆ—è¡¨é‡Œçš„äº‹åŠ¡idä¸º[80,100]ã€‚</p>
<ul>
<li>å¦‚æœä½ è¦è®¿é—®çš„è®°å½•ç‰ˆæœ¬çš„äº‹åŠ¡idä¸º50ï¼Œæ¯”å½“å‰åˆ—è¡¨æœ€å°çš„id80å°ï¼Œé‚£è¯´æ˜è¿™ä¸ªäº‹åŠ¡åœ¨ä¹‹å‰å°±æäº¤äº†ï¼Œæ‰€ä»¥å¯¹å½“å‰æ´»åŠ¨çš„äº‹åŠ¡æ¥è¯´æ˜¯å¯è®¿é—®çš„ã€‚</li>
<li>å¦‚æœä½ è¦è®¿é—®çš„è®°å½•ç‰ˆæœ¬çš„äº‹åŠ¡idä¸º90,å‘ç°æ­¤äº‹åŠ¡åœ¨åˆ—è¡¨idæœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹é—´ï¼Œé‚£å°±å†åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦åœ¨åˆ—è¡¨å†…ï¼Œå¦‚æœåœ¨é‚£å°±è¯´æ˜æ­¤äº‹åŠ¡è¿˜æœªæäº¤ï¼Œæ‰€ä»¥ç‰ˆæœ¬ä¸èƒ½è¢«è®¿é—®ã€‚å¦‚æœä¸åœ¨é‚£è¯´æ˜äº‹åŠ¡å·²ç»æäº¤ï¼Œæ‰€ä»¥ç‰ˆæœ¬å¯ä»¥è¢«è®¿é—®ã€‚</li>
<li>å¦‚æœä½ è¦è®¿é—®çš„è®°å½•ç‰ˆæœ¬çš„äº‹åŠ¡idä¸º110ï¼Œé‚£æ¯”äº‹åŠ¡åˆ—è¡¨æœ€å¤§id100éƒ½å¤§ï¼Œé‚£è¯´æ˜è¿™ä¸ªç‰ˆæœ¬æ˜¯åœ¨ReadViewç”Ÿæˆä¹‹åæ‰å‘ç”Ÿçš„ï¼Œæ‰€ä»¥ä¸èƒ½è¢«è®¿é—®ã€‚<br>è¿™äº›è®°å½•éƒ½æ˜¯å»ç‰ˆæœ¬é“¾é‡Œé¢æ‰¾çš„ï¼Œå…ˆæ‰¾æœ€è¿‘è®°å½•ï¼Œå¦‚æœæœ€è¿‘è¿™ä¸€æ¡è®°å½•äº‹åŠ¡idä¸ç¬¦åˆæ¡ä»¶ï¼Œä¸å¯è§çš„è¯ï¼Œå†å»æ‰¾ä¸Šä¸€ä¸ªç‰ˆæœ¬å†æ¯”è¾ƒå½“å‰äº‹åŠ¡çš„idå’Œè¿™ä¸ªç‰ˆæœ¬äº‹åŠ¡idçœ‹èƒ½ä¸èƒ½è®¿é—®ï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°è¿”å›å¯è§çš„ç‰ˆæœ¬æˆ–è€…ç»“æŸã€‚</li>
</ul>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqlç´¢å¼•</title>
    <url>/mysql-index/</url>
    <content><![CDATA[<p>æ‹¿æ±‰è¯­å­—å…¸çš„ç›®å½•é¡µï¼ˆç´¢å¼•ï¼‰æ‰“æ¯”æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰æ‹¼éŸ³ã€ç¬”ç”»ã€åæ—éƒ¨é¦–ç­‰æ’åºçš„ç›®å½•ï¼ˆç´¢å¼•ï¼‰å¿«é€ŸæŸ¥æ‰¾åˆ°éœ€è¦çš„å­—ã€‚<br>ç´¢å¼•åˆ†å•åˆ—ç´¢å¼•å’Œç»„åˆç´¢å¼•ã€‚</p>
<ul>
<li>å•åˆ—ç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•ï¼Œä½†è¿™ä¸æ˜¯ç»„åˆç´¢å¼•ã€‚ </li>
<li>ç»„åˆç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ã€‚</li>
</ul>
<p>åˆ›å»ºç´¢å¼•æ—¶ï¼Œä½ éœ€è¦ç¡®ä¿è¯¥ç´¢å¼•æ˜¯åº”ç”¨åœ¨ SQL æŸ¥è¯¢è¯­å¥çš„æ¡ä»¶(ä¸€èˆ¬ä½œä¸º WHERE å­å¥çš„æ¡ä»¶)ã€‚<br>å®é™…ä¸Šï¼Œç´¢å¼•ä¹Ÿæ˜¯ä¸€å¼ è¡¨ï¼Œè¯¥è¡¨ä¿å­˜äº†ä¸»é”®ä¸ç´¢å¼•å­—æ®µï¼Œå¹¶æŒ‡å‘å®ä½“è¡¨çš„è®°å½•ã€‚<br>ä¸Šé¢éƒ½åœ¨è¯´ä½¿ç”¨ç´¢å¼•çš„å¥½å¤„ï¼Œä½†è¿‡å¤šçš„ä½¿ç”¨ç´¢å¼•å°†ä¼šé€ æˆæ»¥ç”¨ã€‚å› æ­¤ç´¢å¼•ä¹Ÿä¼šæœ‰å®ƒçš„ç¼ºç‚¹ï¼š<br>è™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŒæ—¶å´ä¼šé™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦ï¼Œå¦‚å¯¹è¡¨è¿›è¡ŒINSERTã€UPDATEå’ŒDELETEã€‚å› ä¸ºæ›´æ–°è¡¨æ—¶ï¼ŒMySQLä¸ä»…è¦ä¿å­˜æ•°æ®ï¼Œè¿˜è¦ä¿å­˜ä¸€ä¸‹ç´¢å¼•æ–‡ä»¶ã€‚<br>å»ºç«‹ç´¢å¼•ä¼šå ç”¨ç£ç›˜ç©ºé—´çš„ç´¢å¼•æ–‡ä»¶ã€‚</p>
<h2 id="1-æ™®é€šç´¢å¼•"><a href="#1-æ™®é€šç´¢å¼•" class="headerlink" title="1.æ™®é€šç´¢å¼•"></a>1.æ™®é€šç´¢å¼•</h2><ul>
<li>åˆ›å»ºç´¢å¼•  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å¦‚æœæ˜¯CHARï¼ŒVARCHARç±»å‹ï¼Œlengthå¯ä»¥å°äºå­—æ®µå®é™…é•¿åº¦ï¼›å¦‚æœæ˜¯BLOBå’ŒTEXTç±»å‹ï¼Œå¿…é¡»æŒ‡å®š lengthã€‚</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX indexName <span class="keyword">on</span> table_name (column_name )</span><br></pre></td></tr></table></figure></li>
<li>æ·»åŠ ç´¢å¼•ï¼ˆä¿®æ”¹è¡¨ç»“æ„ï¼‰  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è¡¨ç»“æ„å·²ç»å­˜åœ¨äº†ï¼Œç„¶åä½¿ç”¨alterä¿®æ”¹è¡¨ç»“æ„æ·»åŠ ç´¢å¼•</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> table_name  <span class="keyword">add</span> INDEX indexName(column_name )</span><br></pre></td></tr></table></figure></li>
<li>åˆ›å»ºè¡¨æŒ‡å®š  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line">    ID <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   </span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  </span><br><span class="line">    INDEX [indexName] (username(length))  </span><br><span class="line">); </span><br></pre></td></tr></table></figure></li>
<li>åˆ é™¤ç´¢å¼•  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> index [indexName] <span class="keyword">on</span>  table_name </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-å”¯ä¸€ç´¢å¼•"><a href="#2-å”¯ä¸€ç´¢å¼•" class="headerlink" title="2. å”¯ä¸€ç´¢å¼•"></a>2. å”¯ä¸€ç´¢å¼•</h2><p>ä»–å’Œæ™®é€šç´¢å¼•ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼šç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰æ§åˆ¶ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€ã€‚</p>
<ul>
<li>åˆ›å»ºç´¢å¼•  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX indexName <span class="keyword">ON</span> table_name (column_name (length ))</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹è¡¨ç»“æ„  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> mytable <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> [indexName] (column_name(length))</span><br></pre></td></tr></table></figure></li>
<li>åˆ›å»ºè¡¨çš„æ—¶å€™æŒ‡å®š  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line">    ID <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   </span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  </span><br><span class="line">    <span class="keyword">UNIQUE</span> [indexName] (username(length))  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="3-ç»„åˆç´¢å¼•"><a href="#3-ç»„åˆç´¢å¼•" class="headerlink" title="3.ç»„åˆç´¢å¼•"></a>3.ç»„åˆç´¢å¼•</h2></li>
<li>ä¿®æ”¹è¡¨ç»“æ„æŒ‡å®šç´¢å¼•  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> INDEX indexName (column_name1 , column_name2,...)</span><br></pre></td></tr></table></figure></li>
<li>åˆ›å»ºè¡¨çš„æ—¶å€™æŒ‡å®š  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line">    ID <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   </span><br><span class="line">    username <span class="type">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  </span><br><span class="line">    KEY [indexName] (column_name1 , column_name2,...)  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="3-1-ç»„åˆç´¢å¼•æŸ¥è¯¢é—®é¢˜"><a href="#3-1-ç»„åˆç´¢å¼•æŸ¥è¯¢é—®é¢˜" class="headerlink" title="3.1 ç»„åˆç´¢å¼•æŸ¥è¯¢é—®é¢˜"></a>3.1 ç»„åˆç´¢å¼•æŸ¥è¯¢é—®é¢˜</h3></li>
</ul>
<p><strong>é—®é¢˜æè¿°ï¼š</strong>åœ¨mysqlä¸­æœ‰å¼ è¡¨test_aï¼Œæœ‰3ä¸ªå­—æ®µid,name,numï¼›å¯¹è¿™ä¸‰ä¸ªå­—æ®µå»ºç«‹ç»„åˆç´¢å¼•ï¼Œé‚£ä¹ˆæŸ¥è¯¢æ—¶ä½¿ç”¨å…¶ä¸­æŸä¸¤ä¸ªæˆ–è€…ä¸€ä¸ªä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œæ˜¯å¦è¿˜ä¼šèµ°ç´¢å¼•<br><img src="/mysql-index/01.png" alt="è¡¨ç»“æ„"><br>æ ¹æ®æŸ¥è¯¢å­—æ®µçš„ä½ç½®ä¸åŒæ¥å†³å®šï¼Œå¦‚æŸ¥è¯¢<strong>id</strong>ã€<strong>id,num</strong>ã€<strong>id,num,name</strong>ã€ <strong>id, name</strong> éƒ½å¯ä»¥èµ°ç´¢å¼•çš„ï¼Œå…¶ä»–æ¡ä»¶çš„æŸ¥è¯¢ä¸èƒ½èµ°ç´¢å¼•ã€‚</p>
<p><strong>ç»„åˆç´¢å¼• æœ‰â€œæœ€å·¦å‰ç¼€â€åŸåˆ™ã€‚å°±æ˜¯åªä»æœ€å·¦é¢çš„å¼€å§‹ç»„åˆï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åªè¦å«æœ‰è¿™ä¸‰åˆ—å­˜åœ¨çš„å­—æ®µçš„æŸ¥è¯¢éƒ½ä¼šç”¨åˆ°è¯¥ç»„åˆç´¢å¼•</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ·»åŠ ç»„åˆç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test_a <span class="keyword">ADD</span> INDEX <span class="string">&#x27;lianhe&#x27;</span>(id, num, name)</span><br></pre></td></tr></table></figure>
<ol>
<li><p>ä½¿ç”¨ä¸‰ä¸ªå­—æ®µid, num, nameæŸ¥è¯¢</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åªè¦ä¸‰ä¸ªæ¡ä»¶éƒ½æœ‰ï¼Œå¯ä»¥éšæ„å˜æ¢ä½ç½®ï¼Œç»“æœéƒ½ä¼šèµ°ç´¢å¼•</span></span><br><span class="line"><span class="comment">-- ä¼˜åŒ–å™¨ä¼šå°†æ¡ä»¶é¡ºåºä¼˜åŒ–æˆä¸Šé¢ä¸‰ç§æƒ…å†µåæ‰§è¡Œ</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_a <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> num<span class="operator">=</span><span class="string">&#x27;001&#x27;</span> <span class="keyword">AND</span> name <span class="operator">=</span> <span class="string">&#x27;1#&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src="/mysql-index/02.png" alt="ä½¿ç”¨ä¸‰ä¸ªå­—æ®µid, num, nameæŸ¥è¯¢"><br>ä»æ‰§è¡Œç»“æœä¸Šå¯ä»¥çœ‹åˆ°æ˜¯ä»èµ°ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢çš„</p>
</li>
<li><p>ä½¿ç”¨num, name æŸ¥è¯¢</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_a <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;1#&#x27;</span></span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_a <span class="keyword">WHERE</span> num<span class="operator">=</span><span class="string">&#x27;001&#x27;</span> </span><br></pre></td></tr></table></figure>
<p><img src="/mysql-index/03.png" alt="ä½¿ç”¨id, name æŸ¥è¯¢"></p>
</li>
<li><p>ä½¿ç”¨id, nameæˆ–è€…id, num æŸ¥è¯¢</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åªè¦åŒ…æ‹¬idï¼Œå¯ä»¥éšæ„å˜æ¢ä½ç½®ï¼Œç»“æœéƒ½ä¼šèµ°ç´¢å¼•</span></span><br><span class="line"><span class="comment">-- ä¼˜åŒ–å™¨ä¼šå°†æ¡ä»¶é¡ºåºä¼˜åŒ–æˆä¸Šé¢ä¸‰ç§æƒ…å†µåæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">--å¦‚æœåªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œåªæœ‰idæ¡ä»¶å‘½ä¸­ï¼Œnumæˆ–è€…name æ¡ä»¶ä¸èµ°è”åˆç´¢å¼•ã€‚</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_a <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">AND</span> name <span class="operator">=</span> <span class="string">&#x27;1#&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src="/mysql-index/02.png" alt="ä½¿ç”¨id, name æŸ¥è¯¢"></p>
</li>
</ol>
<p>éœ€è¦é¿å…ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µï¼Œå¦‚ï¼šLIKE %xxxï¼Œæˆ–è€…æ¡ä»¶ä¸­ä½¿ç”¨å‡½æ•°ç­‰ã€‚<br>4. ä½¿ç”¨idæŸ¥è¯¢</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_a <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><img src="/mysql-index/02.png" alt="ä½¿ç”¨idæŸ¥è¯¢"></p>
<ol start="5">
<li>ä½¿ç”¨nameæˆ–è€…numæŸ¥è¯¢<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_a <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;1#&#x27;</span></span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test_a <span class="keyword">WHERE</span> num <span class="operator">=</span> <span class="string">&#x27;001&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-2-åˆ›å»ºç»„åˆç´¢å¼•é€‰æ‹©è§„åˆ™"><a href="#3-2-åˆ›å»ºç»„åˆç´¢å¼•é€‰æ‹©è§„åˆ™" class="headerlink" title="3.2 åˆ›å»ºç»„åˆç´¢å¼•é€‰æ‹©è§„åˆ™"></a>3.2 åˆ›å»ºç»„åˆç´¢å¼•é€‰æ‹©è§„åˆ™</h3><ul>
<li>ç»å¸¸ç”¨çš„åˆ—ä¼˜å…ˆï¼ˆæœ€å·¦åŒ¹é…åŸåˆ™ï¼‰</li>
<li>ç¦»æ•£åº¦é«˜çš„åˆ—ä¼˜å…ˆï¼ˆç¦»æ•£åº¦é«˜åŸåˆ™ï¼‰</li>
<li>å®½åº¦å°çš„åˆ—ä¼˜å…ˆï¼ˆæœ€å°‘ç©ºé—´åŸåˆ™ï¼‰</li>
</ul>
<h2 id="4-ä½¿ç”¨alterå‘½ä»¤æ·»åŠ ç´¢å¼•"><a href="#4-ä½¿ç”¨alterå‘½ä»¤æ·»åŠ ç´¢å¼•" class="headerlink" title="4.ä½¿ç”¨alterå‘½ä»¤æ·»åŠ ç´¢å¼•"></a>4.ä½¿ç”¨alterå‘½ä»¤æ·»åŠ ç´¢å¼•</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è¯¥è¯­å¥æ·»åŠ ä¸€ä¸ªä¸»é”®ï¼Œè¿™æ„å‘³ç€ç´¢å¼•å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸èƒ½ä¸ºNULLã€‚</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (column_list): </span><br><span class="line">    </span><br><span class="line"><span class="comment">--  è¿™æ¡è¯­å¥åˆ›å»ºç´¢å¼•çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼ˆé™¤äº†NULLå¤–ï¼ŒNULLå¯èƒ½ä¼šå‡ºç°å¤šæ¬¡ï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> index_name (column_list):</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ æ™®é€šç´¢å¼•ï¼Œç´¢å¼•å€¼å¯å‡ºç°å¤šæ¬¡ã€‚</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> INDEX index_name (column_list):</span><br><span class="line"></span><br><span class="line"><span class="comment">--è¯¥è¯­å¥æŒ‡å®šäº†ç´¢å¼•ä¸º FULLTEXT ï¼Œç”¨äºå…¨æ–‡ç´¢å¼•ã€‚</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> FULLTEXT index_name (column_list):</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqläº‹åŠ¡</title>
    <url>/mysql-transcation/</url>
    <content><![CDATA[<h2 id="äº‹åŠ¡çš„å®šä¹‰"><a href="#äº‹åŠ¡çš„å®šä¹‰" class="headerlink" title="äº‹åŠ¡çš„å®šä¹‰"></a>äº‹åŠ¡çš„å®šä¹‰</h2><p>äº‹åŠ¡æ˜¯æ•°æ®ç®¡ç†ç³»ç»ŸDBMSæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ª<strong>é€»è¾‘å•ä½</strong>ï¼Œæœ‰ä¸€ä¸ªæœ‰é™çš„æ•°æ®åº“<strong>æ“ä½œåºåˆ—</strong>æ„æˆ</p>
<h2 id="äº‹åŠ¡å››å¤§ç‰¹æ€§"><a href="#äº‹åŠ¡å››å¤§ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡å››å¤§ç‰¹æ€§"></a>äº‹åŠ¡å››å¤§ç‰¹æ€§</h2><ol>
<li> åŸå­æ€§atomicityï¼šä¾èµ–undo logåšåˆ°å…¨éƒ¨å¤±è´¥</li>
<li> éš”ç¦»æ€§isolationï¼šå®ç°æ–¹å¼LBCC å’Œ MVCC</li>
<li> æŒä¹…æ€§durability ï¼šå®ç°æ–¹å¼redo logå’Œdouble write</li>
<li> ä¸€è‡´æ€§consistencyï¼šé€šè¿‡ä¸Šé¢çš„ä¸‰ç§æ–¹å¼å®ç°</li>
</ol>
<p>æ•°æ®æ¢å¤ï¼š</p>
<ul>
<li>  redo log å´©æºƒæ¢å¤</li>
<li>  åŒå†™ç¼“å†²ï¼ˆdouble writeï¼‰</li>
</ul>
<p>Mysqlä¸­insertã€deleteã€update è‡ªå¸¦äº‹åŠ¡</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> veriables <span class="keyword">like</span> â€˜autocommitâ€™;</span><br><span class="line"><span class="keyword">set</span> session autocommit <span class="operator">=</span> <span class="keyword">on</span>;</span><br><span class="line">update xxx <span class="keyword">where</span> <span class="keyword">set</span> xx <span class="operator">=</span><span class="number">1</span> ;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<p>ç»“æŸäº‹åŠ¡ä¸¤ç§æ–¹å¼ï¼šrollback     commit</p>
<h2 id="äº‹åŠ¡å¹¶å‘çš„ä¸‰å¤§é—®é¢˜"><a href="#äº‹åŠ¡å¹¶å‘çš„ä¸‰å¤§é—®é¢˜" class="headerlink" title="äº‹åŠ¡å¹¶å‘çš„ä¸‰å¤§é—®é¢˜"></a>äº‹åŠ¡å¹¶å‘çš„ä¸‰å¤§é—®é¢˜</h2><p>æ•°æ®å¹¶å‘çš„ä¸‰å¤§é—®é¢˜å…¶å®éƒ½æ˜¯æ•°æ®åº“è¯»ä¸€è‡´æ€§é—®é¢˜ï¼Œå¿…é¡»æœ‰æ•°æ®åº“æä¾›ä¸€å®šçš„äº‹åŠ¡éš”ç¦»æœºåˆ¶æ¥è§£å†³ã€‚</p>
<h3 id="è„è¯»"><a href="#è„è¯»" class="headerlink" title="è„è¯»"></a>è„è¯»</h3><p><img src="/mysql-transcation/image-20201202210510525.png" alt="image-20200727224117281"></p>
<h3 id="ä¸å¯é‡å¤è¯»"><a href="#ä¸å¯é‡å¤è¯»" class="headerlink" title="ä¸å¯é‡å¤è¯»"></a>ä¸å¯é‡å¤è¯»</h3><p><img src="/mysql-transcation/image-20201202210235089.png" alt="image-20200727224117281"></p>
<h3 id="å¹»è¯»"><a href="#å¹»è¯»" class="headerlink" title="å¹»è¯»"></a>å¹»è¯»</h3><p><img src="/mysql-transcation/image-20201202210357906.png" alt="image-20200727224117281"></p>
<h2 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h2><p><a href="http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt">http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt</a><br><img src="/mysql-transcation/image-20201202210817094.png" alt="image-20200727224117281"><br><img src="/mysql-transcation/image-20201202211406282.png" alt="image-20200727224117281"></p>
<p><img src="/mysql-transcation/image-20201202211752764.png" alt="image-20201202211752764"></p>
<h3 id="MVCCæ€æƒ³"><a href="#MVCCæ€æƒ³" class="headerlink" title="MVCCæ€æƒ³"></a>MVCCæ€æƒ³</h3><p><img src="/mysql-transcation/image-20201202212103393.png" alt="image-20201202212103393"></p>
<h4 id="Read-Viewï¼ˆä¸€è‡´æ€§è¯•å›¾ï¼‰"><a href="#Read-Viewï¼ˆä¸€è‡´æ€§è¯•å›¾ï¼‰" class="headerlink" title="Read Viewï¼ˆä¸€è‡´æ€§è¯•å›¾ï¼‰"></a>Read Viewï¼ˆä¸€è‡´æ€§è¯•å›¾ï¼‰</h4><p>å­˜å‚¨å†…å®¹</p>
<p><img src="/mysql-transcation/image-20201202213520136.png" alt="image-20201202213520136"></p>
<h4 id="Read-Viewåˆ¤æ–­è§„åˆ™"><a href="#Read-Viewåˆ¤æ–­è§„åˆ™" class="headerlink" title="Read Viewåˆ¤æ–­è§„åˆ™"></a>Read Viewåˆ¤æ–­è§„åˆ™</h4><p><img src="/mysql-transcation/image-20201202213757692.png" alt="image-20201202213757692"></p>
<h4 id="RCä¸RR-read-View-çš„åŒºåˆ«"><a href="#RCä¸RR-read-View-çš„åŒºåˆ«" class="headerlink" title="RCä¸RR read View çš„åŒºåˆ«"></a>RCä¸RR read View çš„åŒºåˆ«</h4><p><img src="/mysql-transcation/image-20201202214418001.png" alt="image-20201202214418001"></p>
<p>æ‰€ä»¥RCè§£å†³ä¸äº†è„è¯»çš„é—®é¢˜</p>
<h1 id="Mysql-InnoDbæ‰€å¾—åŸºæœ¬ç±»å‹"><a href="#Mysql-InnoDbæ‰€å¾—åŸºæœ¬ç±»å‹" class="headerlink" title="Mysql InnoDbæ‰€å¾—åŸºæœ¬ç±»å‹"></a>Mysql InnoDbæ‰€å¾—åŸºæœ¬ç±»å‹</h1><p>InnoDBæ”¯æŒè¡Œé”</p>
<p>MyiSAMæ”¯æŒè¡Œé”</p>
<p>è¡¨é”å’Œè¡Œé”çš„åŒºåˆ«</p>
<ul>
<li>  é”åŠ›åº¦ï¼šè¡¨é” &gt; è¡Œé”</li>
<li>  åŠ é”æ•ˆç‡ï¼šè¡¨é” &gt; è¡Œé”</li>
<li>  å†²çªæ¦‚ç‡ï¼šè¡¨é” &gt; è¡Œé”</li>
<li>  å¹¶å‘æ€§èƒ½ï¼šè¡¨é” &lt; è¡Œé”</li>
</ul>
<h2 id="è¡¨é”"><a href="#è¡¨é”" class="headerlink" title="è¡¨é”"></a>è¡¨é”</h2><p><img src="/mysql-transcation/image-20201202214957559.png" alt="image-20201202214957559"></p>
<p>ä¸€ä¸ªäº‹åŠ¡èƒ½å¤Ÿç»™ä¸€å¼ è¡¨åŠ ä¸Šé”çš„å‰ææ˜¯ï¼šæ²¡æœ‰å…¶ä»–ä»»ä½•ä¸€ä¸ªäº‹åŠ¡é”å®šäº†è¿™å¼ è¡¨çš„ä»»æ„ä¸€è¡Œæ•°æ®ã€‚å¦‚æœæ²¡æœ‰æ„å‘é”çš„è¯ï¼Œé‚£ä¹ˆåŠ è¡¨é”éœ€è¦æ‰«æè¡¨ä¸­çš„æ¯è¡Œæ•°æ®ï¼Œå¤§å¤§çš„æµªè´¹æ—¶é—´ï¼›</p>
<p>å¦‚æœåœ¨æ·»åŠ è¡Œé”çš„æ—¶å€™ï¼Œä¼šåœ¨è¡¨ä¸Šæ·»åŠ æ„å‘é”ï¼Œé‚£ä¹ˆåœ¨æ·»åŠ è¡¨é”çš„æ—¶å€™å°±ä¸éœ€è¦å»æ‰«ææ‰€æœ‰è¡¨æ•°æ®äº†ï¼Œåªéœ€è¦çœ‹ä¸‹è¡¨ä¸Šæ˜¯å¦ç”±æ„å‘é”å°±å¯ï¼›</p>
<h2 id="è¡Œé”"><a href="#è¡Œé”" class="headerlink" title="è¡Œé”"></a>è¡Œé”</h2><h3 id="å…±äº«é”shared-locks"><a href="#å…±äº«é”shared-locks" class="headerlink" title="å…±äº«é”shared locks"></a>å…±äº«é”shared locks</h3><p><img src="/mysql-transcation/image-20201202215350319.png" alt="image-20201202215350319"></p>
<h3 id="æ’å®ƒé”Exclusive-locks"><a href="#æ’å®ƒé”Exclusive-locks" class="headerlink" title="æ’å®ƒé”Exclusive locks"></a>æ’å®ƒé”Exclusive locks</h3><p><img src="/mysql-transcation/image-20201202215717524.png" alt="image-20201202215717524"></p>
<h3 id="Innodbè¡Œé”é”å®šçš„æ˜¯ä»€ä¹ˆ"><a href="#Innodbè¡Œé”é”å®šçš„æ˜¯ä»€ä¹ˆ" class="headerlink" title="Innodbè¡Œé”é”å®šçš„æ˜¯ä»€ä¹ˆ"></a>Innodbè¡Œé”é”å®šçš„æ˜¯ä»€ä¹ˆ</h3><p>é”å®šçš„æ˜¯indexç´¢å¼•ï¼Œå¦‚æœè¡¨ä¸­æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆInnodbä¼šæŠŠéšè—åˆ—DB_ROW_IDå½“ä½œèšé›†ç´¢å¼•</p>
<p>åŠ é”ä¸€å®šè¦åŠ ä¸Šæ¡ä»¶ï¼Œä¸ç„¶ä¼šé”è¡¨</p>
<p><img src="/mysql-transcation/image-20201202222250939.png" alt="image-20201202222250939"></p>
<h3 id="è®°å½•é”Rcord-Lock-é”å®šè®°å½•"><a href="#è®°å½•é”Rcord-Lock-é”å®šè®°å½•" class="headerlink" title="è®°å½•é”Rcord Lock é”å®šè®°å½•"></a>è®°å½•é”Rcord Lock é”å®šè®°å½•</h3><p><img src="/mysql-transcation/image-20201202222823984.png" alt="image-20201202222823984"></p>
<h3 id="é—´éš™é”Gap-Lock-é”å®šèŒƒå›´"><a href="#é—´éš™é”Gap-Lock-é”å®šèŒƒå›´" class="headerlink" title="é—´éš™é”Gap Lock é”å®šèŒƒå›´"></a>é—´éš™é”Gap Lock é”å®šèŒƒå›´</h3><p>ä¸“é—¨ç”¨äºé˜»å¡æ’å…¥ï¼Œé—´éš™é”å¦‚æœæ²¡æœ‰å‘½ä¸­çš„è¯ï¼Œä¼šé”å®šæœ€åä¸€ä¸ªå€¼åˆ°æ­£æ— ç©·ï¼Œé‚£ä¹ˆåœ¨æœ€åä¸€ä¸ªå€¼å’Œæ­£æ— ç©·ä¹‹é—´çš„æ’å…¥éƒ½ä¸èƒ½æˆåŠŸã€‚</p>
<p><img src="/mysql-transcation/image-20201202222914087.png" alt="image-20201202222914087"></p>
<h3 id="ä¸´å¥é”Next-key-Lock-ï¼šé”å®šèŒƒå›´åŠ è®°å½•"><a href="#ä¸´å¥é”Next-key-Lock-ï¼šé”å®šèŒƒå›´åŠ è®°å½•" class="headerlink" title="ä¸´å¥é”Next-key Lock ï¼šé”å®šèŒƒå›´åŠ è®°å½•"></a>ä¸´å¥é”Next-key Lock ï¼šé”å®šèŒƒå›´åŠ è®°å½•</h3><p><img src="/mysql-transcation/image-20201202223655445.png" alt="image-20201202223655445"></p>
<p><strong>ä¸ºäº†è§£å†³å¹»è¯»çš„é—®é¢˜</strong></p>
<h3 id="äº‹åŠ¡éš”ç¦»çº§åˆ«çš„å®ç°"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«çš„å®ç°" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«çš„å®ç°"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«çš„å®ç°</h3><p><img src="/mysql-transcation/image-20201202224136052.png" alt="image-20201202224136052"></p>
<h3 id="äº‹åŠ¡éš”ç¦»çº§åˆ«çš„é€‰æ‹©"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«çš„é€‰æ‹©" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«çš„é€‰æ‹©"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«çš„é€‰æ‹©</h3><p><img src="/mysql-transcation/image-20201202224412832.png" alt="image-20201202224412832"></p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqlçŸ¥è¯†æ€»ç»“</title>
    <url>/mysql/</url>
    <content><![CDATA[<h1 id="mysql-åˆè¯†"><a href="#mysql-åˆè¯†" class="headerlink" title="mysql åˆè¯†"></a>mysql åˆè¯†</h1><h2 id="1-ç‰ˆæœ¬å†å²"><a href="#1-ç‰ˆæœ¬å†å²" class="headerlink" title="1. ç‰ˆæœ¬å†å²"></a>1. ç‰ˆæœ¬å†å²</h2><ul>
<li>  1996å¹´ mysql.10å‘å¸ƒ</li>
<li>  1996å¹´10æœˆ3.11.1å‘å¸ƒ</li>
<li>  2000å¹´ISAMå‡çº§æˆMyISAMå¼•æ“ï¼Œmysqlå¼€æº</li>
<li>  2003å¹´ Mysql4.0å‘å¸ƒé›†æˆInnoDBå­˜å‚¨å¼•æ“</li>
<li>  2005å¹´ MySQL 5.0ç‰ˆæœ¬å‘å¸ƒï¼Œæä¾›äº†è¯•å›¾ï¼Œå­˜å‚¨è¿‡ç¨‹ç­‰åŠŸèƒ½</li>
<li>  2010å¹´MySQL5.5å‘å¸ƒï¼ŒInnoDBæˆä¸ºé»˜è®¤çš„å­˜å‚¨å¼•æ“</li>
<li>  2016å¹´å‘å¸ƒ8.0.0ç‰ˆæœ¬</li>
</ul>
<h2 id="2-æµè¡Œåˆ†æ”¯"><a href="#2-æµè¡Œåˆ†æ”¯" class="headerlink" title="2. æµè¡Œåˆ†æ”¯"></a>2. æµè¡Œåˆ†æ”¯</h2><ul>
<li>  Maria DB</li>
<li>  Percona Server</li>
</ul>
<h2 id="3-SQL-æ‰§è¡Œæµç¨‹"><a href="#3-SQL-æ‰§è¡Œæµç¨‹" class="headerlink" title="3. SQL æ‰§è¡Œæµç¨‹"></a>3. SQL æ‰§è¡Œæµç¨‹</h2><h3 id="é€šä¿¡ç±»å‹"><a href="#é€šä¿¡ç±»å‹" class="headerlink" title="é€šä¿¡ç±»å‹"></a>é€šä¿¡ç±»å‹</h3><ul>
<li>  åŒæ­¥</li>
<li>  å¼‚æ­¥</li>
</ul>
<h3 id="è¿æ¥æ–¹å¼"><a href="#è¿æ¥æ–¹å¼" class="headerlink" title="è¿æ¥æ–¹å¼"></a>è¿æ¥æ–¹å¼</h3><ul>
<li>  é•¿è¿æ¥</li>
<li>  çŸ­è¿æ¥</li>
</ul>
<h3 id="è¶…æ—¶æ—¶é—´"><a href="#è¶…æ—¶æ—¶é—´" class="headerlink" title="è¶…æ—¶æ—¶é—´"></a>è¶…æ—¶æ—¶é—´</h3><ul>
<li><p>éäº¤äº’å¼è¶…æ—¶æ—¶é—´ï¼Œå¦‚JDBCç¨‹åºï¼Œå•ä½s</p>
  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;wait_timeout&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>äº¤äº’å¼è¶…æ—¶é—´ï¼Œå¦‚æ•°æ®åº“å·¥å…·</p>
  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> variables <span class="keyword">LIKE</span> <span class="string">&#x27;interactive_timeout&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æŸ¥çœ‹è¿æ¥"><a href="#æŸ¥çœ‹è¿æ¥" class="headerlink" title="æŸ¥çœ‹è¿æ¥"></a>æŸ¥çœ‹è¿æ¥</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">GLOBAL</span> STATUS <span class="keyword">LIKE</span> <span class="string">&#x27;Thread%&#x27;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="center">è¿æ¥åç§°</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Threads_cached</td>
<td align="center">ç¼“å­˜ä¸­çš„çº¿ç¨‹</td>
</tr>
<tr>
<td align="center">Threads_connected</td>
<td align="center">è¿æ¥ä¸­çº¿ç¨‹</td>
</tr>
<tr>
<td align="center">Threads_created</td>
<td align="center">åˆ›å»ºè¿‡çš„çº¿ç¨‹</td>
</tr>
<tr>
<td align="center">Threads_running</td>
<td align="center">æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹</td>
</tr>
</tbody></table>
<h4 id="æŸ¥çœ‹æ‰€æœ‰çš„çº¿ç¨‹"><a href="#æŸ¥çœ‹æ‰€æœ‰çš„çº¿ç¨‹" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰çš„çº¿ç¨‹"></a>æŸ¥çœ‹æ‰€æœ‰çš„çº¿ç¨‹</h4><p>å¦‚æœæ˜¯rootæƒé™ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰ç”¨æˆ·å‘èµ·çš„çº¿ç¨‹ï¼Œå¦åˆ™åªèƒ½çœ‹åˆ°è‡ªå·±çš„çº¿ç¨‹</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> processlist</span><br></pre></td></tr></table></figure>

<p><img src="/mysql/image-20200727224117281.png" alt="image-20200727224117281"></p>
<ul>
<li>  id ï¼šä¸€ä¸ªè¡¨ç¤ºï¼Œkillä¸€ä¸ªè¯­å¥çš„æ—¶å€™å¯ä»¥ä½¿ç”¨</li>
<li>  userï¼šæ˜¾ç¤ºå½“å‰ç”¨æˆ·ï¼Œå¦‚æœä¸æ˜¯rootï¼Œè¿™ä¸ªå‘½ä»¤å°±åªæ˜¾ç¤ºä½ æƒé™èŒƒå›´å†…çš„sqlè¯­å¥</li>
<li>  hostï¼šæ˜¾ç¤ºè¿™ä¸ªè¯­å¥æ˜¯ä»å“ªä¸ªipçš„ç«¯å£ä¸Šå‘å‡ºçš„ï¼Œå¯ä»¥ç”¨æ¥è¿½è¸ªå‡ºé—®é¢˜è¯­å¥çš„ç”¨æˆ·</li>
<li>  dbï¼šæ˜¾ç¤ºè¿™ä¸ªè¿›ç¨‹ç›®å‰è¿æ¥çš„æ˜¯å“ªä¸ªæ•°æ®åº“</li>
<li>  commmandï¼šæ˜¾ç¤ºå½“å¹´è¿æ¥çš„æ‰§è¡Œå‘½ä»¤ï¼Œä¸€èˆ¬åˆ†ä¸ºä¼‘çœ sleeã€æŸ¥è¯¢queryã€è¿æ¥connect</li>
<li>  timeï¼šæ­¤çŠ¶æ€æŒç»­çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’</li>
<li>  stateï¼š æ˜¾ç¤ºä½¿ç”¨å½“å¹´è¿æ¥çš„sqlè¯­å¥çŠ¶æ€ï¼Œstateåªæ˜¯è¯­å¥æ‰§è¡Œä¸­çš„æŸä¸€ä¸ªçŠ¶æ€ï¼Œå¦‚æŸ¥è¯¢ï¼šéœ€è¦ç»è¿‡copying to tmp tableã€sorting resultã€sending dataç­‰è½¬å°æ‰å¯ä»¥å®Œæˆ</li>
<li>  infoï¼šæ˜¾ç¤ºè¿™ä¸ªsqlè¯­å¥ï¼Œå› ä¸ºé•¿åº¦æœ‰é™ï¼Œæ‰€ä»¥é•¿çš„sqlè¯­å¥å°±æ˜¾ç¤ºä¸å…¨</li>
</ul>
<h4 id="æŸ¥çœ‹æœ€å¤§è¿æ¥æ•°"><a href="#æŸ¥çœ‹æœ€å¤§è¿æ¥æ•°" class="headerlink" title="æŸ¥çœ‹æœ€å¤§è¿æ¥æ•°"></a>æŸ¥çœ‹æœ€å¤§è¿æ¥æ•°</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> variables <span class="keyword">LIKE</span> <span class="string">&#x27;max_connections&#x27;</span>; <span class="operator">/</span><span class="operator">/</span>ä¸€èˆ¬é»˜è®¤æ˜¯<span class="number">151</span>ï¼Œæœ€å¤§å¯ä»¥æ˜¯<span class="number">2</span>çš„<span class="number">14</span>æ¬¡æ–¹</span><br></pre></td></tr></table></figure>
<h4 id="mysqlå˜é‡çº§åˆ«"><a href="#mysqlå˜é‡çº§åˆ«" class="headerlink" title="mysqlå˜é‡çº§åˆ«"></a>mysqlå˜é‡çº§åˆ«</h4><ul>
<li><p>globalå…¨å±€</p>
  <figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">åœ¨mysqlä¸­ä¿®æ”¹å…¨å±€å˜é‡globalæœ‰ä¸¤ç§æ–¹æ³•ï¼š</span><br><span class="line">1. ä¿®æ”¹my.inié…ç½®æ–‡ä»¶ï¼ˆæ°¸ä¹…æœ‰æ•ˆï¼‰</span><br><span class="line">2. åœ¨ä¸ä¿®æ”¹é…ç½®æ–‡ä»¶çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨å…³é”®å­—globalè®¾ç½®å…¨å±€å˜é‡</span><br><span class="line">   set global autocommit = 1;å°†autocommitå˜é‡çš„å€¼è®¾ç½®ä¸ºONï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ­¤æ–¹æ³•å¯¹globalå…¨å±€å˜é‡çš„è®¾è®¡è¿›å¯¹äºæ–°å¼€å¯çš„ä¼šè¯æœ‰æ•ˆï¼Œå¯¹å·²å¼€å¯çš„ä¼šè¯æ— æ•ˆï¼ŒåŒç†ï¼Œå¦‚æœä¿®æ”¹å›å“ˆsessionå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨sessionå…³é”®å­—ï¼Œå¦‚set session autocommit = 1ï¼›è¿™ä¸ªä»…å¯¹æœ¬sessionçš„å˜é‡é…ç½®æœ‰æ•ˆï¼Œå¯¹å…¶ä»–çš„sessionæ— æ•ˆï¼›ï¼ˆåœ¨MySQLæœåŠ¡é‡å¯ä¹‹åï¼Œæ•°æ®åº“çš„é…ç½®é‡æ–°æŒ‰ç…§my.iniæ–‡ä»¶ åˆå§‹åŒ–ï¼Œglobalå’Œsession çš„é…ç½®éƒ½ä¼šå¤±æ•ˆï¼‰</span><br></pre></td></tr></table></figure></li>
<li><p>  sessionå½“å‰ä¼šè¯</p>
</li>
</ul>
<h3 id="é€šä¿¡åè®®"><a href="#é€šä¿¡åè®®" class="headerlink" title="é€šä¿¡åè®®"></a>é€šä¿¡åè®®</h3><ul>
<li>  Unix Socket</li>
<li>  TCP/IP</li>
<li>  Named Pipeså‘½åç®¡é“</li>
<li>  Share Memoryå…±äº«å†…å­˜</li>
</ul>
<h3 id="é€šä¿¡æ–¹å¼"><a href="#é€šä¿¡æ–¹å¼" class="headerlink" title="é€šä¿¡æ–¹å¼"></a>é€šä¿¡æ–¹å¼</h3><ul>
<li>  å•å·¥</li>
<li>  åŠåŒå·¥</li>
<li>  å…¨åŒå·¥</li>
</ul>
<p><img src="/mysql/image-20200727231112059.png" alt="image-20200727231112059"></p>
<h3 id="MySQL-ç¼“å­˜"><a href="#MySQL-ç¼“å­˜" class="headerlink" title="MySQL ç¼“å­˜"></a>MySQL ç¼“å­˜</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;query_cache%&#x27;</span></span><br><span class="line">#é»˜è®¤å…³é—­ï¼Œæ˜¯å› ä¸ºmysqlè¦ä¿è¯ä¸¤æ¬¡æ‰§è¡Œçš„<span class="keyword">sql</span>å®Œå…¨ä¸€è‡´ï¼Œè¿ç©ºæ ¼ï¼Œå¤§å°å†™éƒ½ä¸€è‡´ï¼Œè€Œä¸”å½“æ•°æ®è¡¨ä¸­çš„ä»»ä½•ä¸€æ¡æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ•´ä¸ªç¼“å­˜ä¼šå¤±æ•ˆï¼›</span><br></pre></td></tr></table></figure>

<p>#2. åˆ é™¤æ•°æ®</p>
<h2 id="1-æ•°æ®åˆ é™¤æ–¹å¼"><a href="#1-æ•°æ®åˆ é™¤æ–¹å¼" class="headerlink" title="1. æ•°æ®åˆ é™¤æ–¹å¼"></a>1. æ•°æ®åˆ é™¤æ–¹å¼</h2><ul>
<li>DELETE</li>
<li>Truncate</li>
<li>Drop</li>
</ul>
<h2 id="2-æ‰§è¡Œé€Ÿåº¦"><a href="#2-æ‰§è¡Œé€Ÿåº¦" class="headerlink" title="2. æ‰§è¡Œé€Ÿåº¦"></a>2. æ‰§è¡Œé€Ÿåº¦</h2><p>drop &gt; truncate &gt; delete</p>
<h3 id="2-1-DELETE"><a href="#2-1-DELETE" class="headerlink" title="2.1 DELETE"></a>2.1 DELETE</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> XXX</span><br></pre></td></tr></table></figure>

<ul>
<li><p>DELETE æ•°æ®æ•°æ®åº“DMLæ“ä½œè¯­è¨€ï¼Œåªåˆ é™¤æ•°æ®ä¸åˆ é™¤è¡¨çš„ç»“æ„ï¼Œä¼šèµ°äº‹åŠ¡ï¼Œæ‰§è¡Œæ—¶ä¼šè§¦å‘trigger</p>
</li>
<li><p>åœ¨InnoDBä¸­ï¼Œdeleteå…¶å®å¹¶ä¸ä¼šçœŸçš„æŠŠæ•°æ®åˆ é™¤ï¼ŒmysqLå®é™…ä¸Šåªæ˜¯ç»™åˆ é™¤çš„æ•°æ®æ‰“ä¸ªæ ‡è®°ä¸ºåˆ é™¤ï¼Œå› æ­¤deleteåˆ é™¤è¡¨ä¸­çš„æ•°æ®ï¼Œè¡¨æ–‡ä»¶åœ¨ç£ç›˜æ‰€å çš„æ§ä»¶ä¸ä¼šå˜å°ï¼Œå­˜å‚¨æ§ä»¶ä¸ä¼šè¢«é‡Šæ”¾ï¼Œåªæ˜¯æŠŠåˆ é™¤çš„æ•°æ®è®¾ç½®ä¸ºä¸å¯è§ã€‚è™½ç„¶æœªé‡Šæ”¾ç£ç›˜æ§ä»¶ï¼Œä½†æ˜¯ä¸‹æ¬¡æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œä»ç„¶å¯ä»¥é‡ç”¨è¿™éƒ¨åˆ†ç©ºé—´ï¼ˆé‡ç”¨-&gt;è¦†ç›–ï¼‰</p>
</li>
<li><p>deleteæ‰§è¡Œæ—¶ï¼Œä¼šå…ˆæŠŠæ‰€åˆ é™¤æ•°æ®ç¼“å­˜åˆ°rollback segementä¸­ï¼Œäº‹åŠ¡commitä¹‹åç”Ÿæ•ˆ</p>
</li>
<li><p><strong>delete from  table_name</strong> åˆ é™¤è¡¨çš„å…¨éƒ¨æ•°æ®å¯¹äºMyISAMä¼šé‡Šæ”¾ç£ç›˜æ§ä»¶ï¼ŒInnodbä¸ä¼šé‡Šæ”¾ç£ç›˜ç©ºé—´</p>
</li>
<li><p>å¯¹äº<strong>DELETE from table_name where xxx</strong>å¸¦æ¡ä»¶çš„åˆ é™¤ï¼Œä¸ç®¡æ˜¯Innodbè¿˜æ˜¯MyISAMéƒ½ä¸ä¼šé‡Šæ”¾ç£ç›˜æ§ä»¶</p>
</li>
<li><p>delete æ“ä½œä»¥åä½¿ç”¨<strong>optimize table  table_name</strong>ä¼šé‡Œçº§é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼ˆä¸ç®¡æ˜¯Innodbè¿˜æ˜¯MyISAMï¼‰</p>
  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--æŸ¥çœ‹è¡¨å ç”¨ç£ç›˜ç©ºé—´å¤§å°</span></span><br><span class="line"><span class="keyword">select</span> concat(round(<span class="built_in">sum</span>(DATA_LENGTH<span class="operator">/</span><span class="number">1024</span><span class="operator">/</span><span class="number">1024</span>),<span class="number">2</span>),<span class="string">&#x27;M&#x27;</span>) <span class="keyword">as</span> table_size</span><br><span class="line"><span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;demo_db&#x27;</span> <span class="keyword">AND</span> table_name<span class="operator">=</span><span class="string">&#x27;demo_table&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‰§è¡Œç©ºé—´ä¼˜åŒ–è¯­å¥ï¼Œä»¥åŠæ‰§è¡Œåçš„è¡¨sizeå˜åŒ–</span></span><br><span class="line">optimize <span class="keyword">table</span> demo_table</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><strong>delete æ“ä½œæ—¶ä¸€è¡Œä¸€è¡Œæ‰§è¡Œåˆ é™¤çš„ï¼Œå¹¶ä¸”åŒæ—¶å°†è¯¥è¡Œçš„åˆ é™¤æ“ä½œæ—¥å¿—è®°å½•åœ¨redoå’Œundoè¡¨ç©ºé—´ä¸­ä»¥ä¾¿è¿›è¡Œå›æ»šï¼ˆrollbackï¼‰å’Œé‡åšæ“ä½œ</strong>ï¼Œç”Ÿæˆå¤§é‡æ—¥å¿—ä¹Ÿä¼šå ç”¨ç£ç›˜ç©ºé—´</li>
</ul>
<h3 id="2-2-Truncate"><a href="#2-2-Truncate" class="headerlink" title="2.2 Truncate"></a>2.2 Truncate</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--åˆ é™¤è¡¨æ•°æ®ï¼Œ ä¸å¸¦whereæ¡ä»¶</span></span><br><span class="line"><span class="comment">--ä¸ä¸å¸¦whereçš„delete ï¼šåªåˆ é™¤æ•°æ®ï¼Œè€Œä¸åˆ é™¤è¡¨çš„ç»“æ„	</span></span><br><span class="line"><span class="keyword">Truncate</span> <span class="keyword">table</span> table_name</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>Truncateæ•°æ®æ•°æ®åº“DDLå®šä¹‰è¯­è¨€ï¼Œä¸èµ°äº‹åŠ¡ï¼ŒåŸæ•°æ®ä¸æ”¾åˆ°rollback segementä¸­ï¼Œæ“ä½œä¸è§¦å‘trigger</strong>ï¼Œæ‰§è¡Œåé‡Œçº§ç”Ÿæ•ˆï¼Œæ— æ³•æ‰¾å›ï¼›</p>
</li>
<li><p><strong>truncate table table_nameé‡Œçº§é‡Šæ”¾ç£ç›˜ç©ºé—´ä¸ç®¡æ˜¯Innodb å’ŒMyISAM</strong>ï¼›truncate tableå…¶å®æœ‰ç‚¹ç±»ä¼¼ä½™drop tableç„¶åcreateï¼Œåªä¸è¿‡è¿™ä¸ªcrate tableçš„è¿‡ç¨‹åšäº†ä¼˜åŒ–ï¼Œæ¯”å¦‚è¡¨ç»“æ„æ–‡ä»¶ä¹‹å‰å·²ç»æœ‰äº†ç­‰ï¼Œæ‰€ä»¥é€Ÿåº¦ä¸Šåº”è¯¥æ˜¯æ¥è¿‘drop tableçš„é€Ÿåº¦</p>
</li>
<li><p>truncate èƒ½å¿«é€Ÿæ¸…ç©ºä¸€ä¸ªè¡¨ï¼Œå¹¶ä¸”é‡ç½®auto_incrementçš„å€¼</p>
<p>â€‹    ä½†æ˜¯å¯¹äºä¸åŒçš„ç±»å‹å­˜å‚¨å¼•æ“éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼š</p>
<ul>
<li><strong>å¯¹äºMyISAM</strong>ï¼štruncateä¼šé‡ç½®auto_incrementï¼ˆè‡ªå¢åºåˆ—ï¼‰çš„å€¼ä¸º1ï¼Œè€Œdeleteåè¡¨ä»ç„¶ä¿æŒauto_incrementã€‚</li>
<li><strong>å¯¹äºInnodb</strong>ï¼štruncateä¼šé‡ç½®auto_incrementï¼ˆè‡ªå¢åºåˆ—ï¼‰çš„å€¼ä¸º1ï¼Œ è€Œdeleteåè¡¨ä»ç„¶ä¿æŒauto_incrementã€‚ä½†æ˜¯åœ¨åšdeleteæ•´ä¸ªè¡¨ä¹‹åé‡å¯mysqlçš„è¯ï¼Œè€Œé‡å¯åçš„auto_incrementä¼šè¢«ç½®ä¸º1</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒInnodbçš„è¡¨æœ¬èº«æ˜¯æ— æ³•æŒä¹…ä¿å­˜auto_incrementã€‚deleteè¡¨ä¹‹åauto_incrementä»ç„¶ä¿å­˜åœ¨å†…å­˜ï¼Œä½†æ˜¯é‡å¯åå°±ä¸¢å¤±äº†ï¼Œåªèƒ½ä»1å¼€å§‹ï¼Œå®è´¨ä¸Šé‡å¯åçš„auto_incrementä¼šä»SELETE 1+MAX(ai_col) FROM tå¼€å§‹</p>
</li>
<li><p>å°å¿ƒä½¿ç”¨ truncateï¼Œå°¤å…¶æ²¡æœ‰å¤‡ä»½çš„æ—¶å€™ï¼Œå¦‚æœè¯¯åˆ é™¤çº¿ä¸Šçš„è¡¨ï¼Œè®°å¾—åŠæ—¶è”ç³»ä¸­å›½æ°‘èˆªï¼Œè®¢ç¥¨ç”µè¯ï¼š400-806-9553</p>
</li>
</ul>
<h3 id="2-3-Drop"><a href="#2-3-Drop" class="headerlink" title="2.3 Drop"></a>2.3 Drop</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ é™¤è¡¨ç»“æ„ä»¥åŠè¡¨æ•°æ®</span></span><br><span class="line"><span class="keyword">Drop</span> <span class="keyword">table</span> table_name</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>dropï¼šå±äºæ•°æ®åº“DDLå®šä¹‰è¯­è¨€ï¼ŒåŒTruncateï¼›</strong></p>
<p><strong>æ‰§è¡Œåç«‹å³ç”Ÿæ•ˆï¼Œæ— æ³•æ‰¾å›ï¼ æ‰§è¡Œåç«‹å³ç”Ÿæ•ˆï¼Œæ— æ³•æ‰¾å›ï¼ æ‰§è¡Œåç«‹å³ç”Ÿæ•ˆï¼Œæ— æ³•æ‰¾å›ï¼</strong></p>
</li>
<li><p>**drop table table_name ç«‹åˆ»é‡Šæ”¾ç£ç›˜ç©ºé—´ ï¼Œä¸ç®¡æ˜¯ InnoDB å’Œ MyISAM; **drop è¯­å¥å°†åˆ é™¤è¡¨çš„ç»“æ„è¢«ä¾èµ–çš„çº¦æŸ(constrain)ã€è§¦å‘å™¨(trigger)ã€ç´¢å¼•(index); ä¾èµ–äºè¯¥è¡¨çš„å­˜å‚¨è¿‡ç¨‹/å‡½æ•°å°†ä¿ç•™,ä½†æ˜¯å˜ä¸º invalid çŠ¶æ€ã€‚</p>
</li>
<li><p>å°å¿ƒä½¿ç”¨ drop ï¼Œè¦åˆ è¡¨è·‘è·¯çš„å…„å¼Ÿï¼Œè¯·åœ¨è®¢ç¥¨æˆåŠŸååœ¨æ‰§è¡Œæ“ä½œï¼è®¢ç¥¨ç”µè¯ï¼š400-806-9553</p>
</li>
</ul>
<h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p><strong>å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œä¸€æœ¬ä¹¦ï¼Œdeleteæ˜¯æŠŠç›®å½•æ’•äº†ï¼Œtruncateæ˜¯æŠŠä¹¦çš„å†…å®¹æ’•ä¸‹æ¥çƒ§äº†ï¼Œdropæ˜¯æŠŠä¹¦çƒ§äº†</strong></p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå†…å­˜æ³„æ¼æ’æŸ¥</title>
    <url>/outOfMemoryError/</url>
    <content><![CDATA[<h2 id="1-å†…å­˜æº¢å‡º"><a href="#1-å†…å­˜æº¢å‡º" class="headerlink" title="1.å†…å­˜æº¢å‡º"></a>1.å†…å­˜æº¢å‡º</h2><p>java.lang.OutOfMemoryErrorï¼šæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜æ˜¯ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ä¾›å…¶ä½¿ç”¨ï¼Œå‡ºç°OutOfMemoryError</p>
<ol>
<li>äº§ç”ŸåŸå› <ul>
<li>JMMå†…å­˜è¿‡å°</li>
<li>ç¨‹åºä¸ä¸¥è°¨ï¼Œäº§ç”Ÿäº†è¿‡å¤šçš„åƒåœ¾</li>
</ul>
</li>
<li>å…·ä½“è¡¨ç°åœ¨ä»¥ä¸‹é›†ä¸­æƒ…å†µ<ul>
<li>å†…å­˜ä¸­åŠ è½½çš„æ•°æ®é‡è¿‡äºåºå¤§ï¼Œå¦‚ä¸€æ¬¡ä»æ•°æ®åº“å–å‡ºè¿‡å¤šçš„æ•°æ®</li>
<li>é›†åˆç±»ä¸­æœ‰å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œä½¿ç”¨å®Œåæœªæ¸…ç©ºï¼Œä½¿å¾—JVMä¸èƒ½å›æ”¶</li>
<li>ä»£ç ä¸­å­˜åœ¨æ­»å¾ªç¯æˆ–å¾ªç¯è¿‡å¤šäº§ç”Ÿè¿‡å¤šé‡å¤çš„å¯¹è±¡å®ä½“</li>
<li>ä½¿ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶çš„bug</li>
<li>å¯åŠ¨å‚æ•°å†…å­˜å€¼è®¾å®šè¿‡å°</li>
</ul>
</li>
<li>å¸¸è§é”™è¯¯æç¤º<ul>
<li>tomcat:java.lang.OutOfMemoryError: PermGen space </li>
<li>tomcat:java.lang.OutOfMemoryError: Java heap space</li>
<li>weblogic:Root cause of ServletException java.lang.OutOfMemoryError</li>
<li>resin:java.lang.OutOfMemoryError</li>
<li>java:java.lang.OutOfMemoryError</li>
</ul>
</li>
<li>è§£å†³æ–¹æ³•<ul>
<li>å¢åŠ JVMçš„å†…å­˜å¤§å°<br>å¯¹äºtomcatå®¹å™¨ï¼Œæ‰¾åˆ°tomcatåœ¨ç”µè„‘ä¸­çš„å®‰è£…ç›®å½•ï¼Œè¿›å…¥è¿™ä¸ªç›®å½•ï¼Œç„¶åè¿›å…¥binç›®å½•ä¸­ï¼Œåœ¨windowç¯å¢ƒä¸‹æ‰¾åˆ°binç›®å½•ä¸­çš„catalina.batï¼Œåœ¨linuxç¯å¢ƒä¸‹æ‰¾åˆ°catalina.shã€‚<br>ç¼–è¾‘catalina.batæ–‡ä»¶ï¼Œæ‰¾åˆ°JAVA_OPTSï¼ˆå…·ä½“æ¥è¯´æ˜¯ set â€œJAVA_OPTS=%JAVA_OPTS% %LOGGING_MANAGER%â€ï¼‰è¿™ä¸ªé€‰é¡¹çš„ä½ç½®ï¼Œè¿™ä¸ªå‚æ•°æ˜¯Javaå¯åŠ¨çš„æ—¶å€™ï¼Œéœ€è¦çš„å¯åŠ¨å‚æ•°ã€‚<br>ä¹Ÿå¯ä»¥åœ¨æ“ä½œç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­å¯¹JAVA_OPTSè¿›è¡Œè®¾ç½®ï¼Œå› ä¸ºtomcatåœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¯»å–æ“ä½œç³»ç»Ÿä¸­çš„ç¯å¢ƒå˜é‡çš„å€¼ï¼Œè¿›è¡ŒåŠ è½½ã€‚<br>å¦‚æœæ˜¯ä¿®æ”¹äº†æ“ä½œç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œéœ€è¦é‡å¯æœºå™¨ï¼Œå†é‡å¯tomcatï¼Œå¦‚æœä¿®æ”¹çš„æ˜¯tomcaté…ç½®æ–‡ä»¶ï¼Œéœ€è¦å°†é…ç½®æ–‡ä»¶ä¿å­˜ï¼Œç„¶åé‡å¯tomcatï¼Œè®¾ç½®å°±èƒ½ç”Ÿæ•ˆäº†</li>
<li>ä¼˜åŒ–ç¨‹åºï¼Œé‡Šæ”¾åƒåœ¾<br>ä¸»è¦æ€è·¯å°±æ˜¯é¿å…ç¨‹åºä½“ç°ä¸Šå‡ºç°çš„æƒ…å†µã€‚é¿å…æ­»å¾ªç¯ï¼Œé˜²æ­¢ä¸€æ¬¡è½½å…¥å¤ªå¤šçš„æ•°æ®ï¼Œæé«˜ç¨‹åºå¥å£®å‹åŠæ—¶é‡Šæ”¾ã€‚å› æ­¤ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³Javaå†…å­˜æº¢å‡ºçš„å”¯ä¸€æ–¹æ³•å°±æ˜¯ä¿®æ”¹ç¨‹åºï¼ŒåŠæ—¶åœ°é‡Šæ”¾æ²¡ç”¨çš„å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´  </li>
</ul>
</li>
</ol>
<h2 id="2-å†…å­˜æ³„æ¼"><a href="#2-å†…å­˜æ³„æ¼" class="headerlink" title="2. å†…å­˜æ³„æ¼"></a>2. å†…å­˜æ³„æ¼</h2><p>Memory Leakï¼Œæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åï¼Œæ— æ³•é‡Šæ”¾å·²ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œä¸€æ¬¡å†…å­˜æ³„éœ²å±å®³å¯ä»¥å¿½ç•¥ï¼Œä½†å†…å­˜æ³„éœ²å †ç§¯åæœå¾ˆä¸¥é‡ï¼Œæ— è®ºå¤šå°‘å†…å­˜ï¼Œè¿Ÿæ—©ä¼šè¢«å å…‰ã€‚<br>åœ¨Javaä¸­ï¼Œå†…å­˜æ³„æ¼å°±æ˜¯å­˜åœ¨ä¸€äº›è¢«åˆ†é…çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æœ‰ä¸‹é¢ä¸¤ä¸ªç‰¹ç‚¹ï¼š<br>1ï¼‰é¦–å…ˆï¼Œè¿™äº›å¯¹è±¡æ˜¯å¯è¾¾çš„ï¼Œå³åœ¨æœ‰å‘å›¾ä¸­ï¼Œå­˜åœ¨é€šè·¯å¯ä»¥ä¸å…¶ç›¸è¿ï¼›<br>2ï¼‰å…¶æ¬¡ï¼Œè¿™äº›å¯¹è±¡æ˜¯æ— ç”¨çš„ï¼Œå³ç¨‹åºä»¥åä¸ä¼šå†ä½¿ç”¨è¿™äº›å¯¹è±¡ã€‚<br>å¦‚æœå¯¹è±¡æ»¡è¶³è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œè¿™äº›å¯¹è±¡å°±å¯ä»¥åˆ¤å®šä¸ºJavaä¸­çš„å†…å­˜æ³„æ¼ï¼Œè¿™äº›å¯¹è±¡ä¸ä¼šè¢«GCæ‰€å›æ”¶ï¼Œç„¶è€Œå®ƒå´å ç”¨å†…å­˜ã€‚<br>å…³äºå†…å­˜æ³„éœ²çš„å¤„ç†é¡µå°±æ˜¯æé«˜ç¨‹åºçš„å¥å£®å‹ï¼Œå› ä¸ºå†…å­˜æ³„éœ²æ˜¯çº¯ä»£ç å±‚é¢çš„é—®é¢˜</p>
<h2 id="3-å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼çš„è”ç³»"><a href="#3-å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼çš„è”ç³»" class="headerlink" title="3.å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼çš„è”ç³»"></a>3.å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„æ¼çš„è”ç³»</h2><p>å†…å­˜æ³„éœ²ä¼šæœ€ç»ˆä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€‚<br><strong>ç›¸åŒç‚¹</strong>ï¼šéƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºè¿è¡Œå‡ºç°é—®é¢˜ï¼Œæ€§èƒ½ä¸‹é™æˆ–æŒ‚èµ·ã€‚<br><strong>ä¸åŒç‚¹</strong>ï¼š<br>    1) å†…å­˜æ³„éœ²æ˜¯å¯¼è‡´å†…å­˜æº¢å‡ºçš„åŸå› ä¹‹ä¸€ï¼Œå†…å­˜æ³„éœ²ç§¯ç´¯èµ·æ¥å°†å¯¼è‡´å†…å­˜æº¢å‡ºã€‚<br>    2) å†…å­˜æ³„éœ²å¯ä»¥é€šè¿‡å®Œå–„ä»£ç æ¥é¿å…ï¼Œå†…å­˜æº¢å‡ºå¯ä»¥é€šè¿‡è°ƒæ•´é…ç½®æ¥å‡å°‘å‘ç”Ÿé¢‘ç‡ï¼Œä½†æ— æ³•å½»åº•é¿å…ã€‚</p>
<h2 id="4-æ’æŸ¥æ¡ˆä¾‹"><a href="#4-æ’æŸ¥æ¡ˆä¾‹" class="headerlink" title="4.æ’æŸ¥æ¡ˆä¾‹"></a>4.æ’æŸ¥æ¡ˆä¾‹</h2><p>Javaçš„å†…å­˜æ³„éœ²å¤šåŠæ˜¯å› ä¸ºå¯¹è±¡å­˜åœ¨æ— æ•ˆçš„å¼•ç”¨ï¼Œå¯¹è±¡å¾—ä¸åˆ°é‡Šæ”¾ï¼Œå¦‚æœå‘ç°Javaåº”ç”¨ç¨‹åºå ç”¨çš„å†…å­˜å‡ºç°äº†æ³„éœ²çš„è¿¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨ä¸‹é¢çš„æ­¥éª¤åˆ†æï¼š</p>
<ol>
<li>ç”¨å·¥å…·ç”Ÿæˆjavaåº”ç”¨ç¨‹åºçš„heap dumpï¼ˆå¦‚jmapï¼‰</li>
<li>ä½¿ç”¨Java heapåˆ†æå·¥å…·ï¼ˆå¦‚MATï¼‰ï¼Œæ‰¾å‡ºå†…å­˜å ç”¨è¶…å‡ºé¢„æœŸçš„å«Œç–‘å¯¹è±¡</li>
<li>æ ¹æ®æƒ…å†µï¼Œåˆ†æå«Œç–‘å¯¹è±¡å’Œå…¶ä»–å¯¹è±¡çš„å¼•ç”¨å…³ç³»ã€‚</li>
<li>åˆ†æç¨‹åºçš„æºä»£ç ï¼Œæ‰¾å‡ºå«Œç–‘å¯¹è±¡æ•°é‡è¿‡å¤šçš„åŸå› ã€‚</li>
</ol>
<p>å®é™…æ“ä½œå¦‚ä¸‹ï¼š<br>1.ç™»å½•linuxæœåŠ¡å™¨ï¼Œè·å–tomcatçš„pid</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps -ef|grep java</span><br></pre></td></tr></table></figure>
<p>2.åˆ©ç”¨jmapåˆæ­¥åˆ†æå†…å­˜æ˜ å°„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jmap -histo:live pid | head -7</span><br></pre></td></tr></table></figure>
<p><img src="/outOfMemoryError/01.png" alt="jmap"><br>ç¬¬2è¡Œæ˜¯æˆ‘ä»¬ä¸šåŠ¡ç³»ç»Ÿçš„å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å¯ä»¥åˆæ­¥åˆ†æå‡ºåˆ°åº•æ˜¯å“ªé‡Œå‡ºç°äº†å¼•ç”¨æœªè¢«åƒåœ¾å›æ”¶æ”¶é›†ï¼Œé€šçŸ¥å¼€å‘äººå‘˜ä¼˜åŒ–ç›¸å…³ä»£ç </p>
<p>3.å¦‚æœä¸Šé¢ä¸€æ­¥è¿˜æ— æ³•å®šä½åˆ°å…³é”®ä¿¡æ¯ï¼Œé‚£ä¹ˆéœ€è¦æ‹¿åˆ°heap dumpï¼Œç”Ÿæˆç¦»çº¿æ–‡ä»¶ï¼Œåšè¿›ä¸€æ­¥åˆ†æ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jmap -dump:live,format=b,file=heap.hprof 3514 </span><br></pre></td></tr></table></figure>
<p><img src="/outOfMemoryError/02.png" alt="jmap"><br>4. æ‹¿åˆ°heap dumpæ–‡ä»¶ï¼Œåˆ©ç”¨eclipseæ’ä»¶MATæ¥åˆ†æheap profileã€‚ </p>
<ul>
<li>1.å®‰è£…MATæ’ä»¶ </li>
<li>2.åœ¨eclipseé‡Œåˆ‡æ¢åˆ°Memory Analysisè§†å›¾</li>
<li>3.ç”¨MATæ‰“å¼€heap profileæ–‡ä»¶ã€‚<br><img src="/outOfMemoryError/03.png" alt="jmap"><br>ç›´æ¥çœ‹åˆ°ä¸‹é¢Actionçª—å£ï¼Œæœ‰4ç§Actionæ¥åˆ†æheap profileï¼Œä»‹ç»å…¶ä¸­æœ€å¸¸ç”¨çš„2ç§:</li>
<li><strong>Histogram</strong>ï¼šè¿™ä¸ªä½¿ç”¨çš„æœ€å¤šï¼Œè·Ÿä¸Šé¢çš„jmap -histo å‘½ä»¤ç±»ä¼¼ï¼Œåªæ˜¯åœ¨MATé‡Œé¢å¯ä»¥ç”¨GUIæ¥å±•ç¤ºåº”ç”¨ç³»ç»Ÿå„ä¸ªç±»äº§ç”Ÿçš„å®ä¾‹ã€‚<br><img src="/outOfMemoryError/04.png" alt="jmap"><br>Shllow Heapæ’åºåå‘ç° Cms_Organization è¿™ä¸ªç±»å ç”¨çš„å†…å­˜æ¯”è¾ƒå¤šï¼ˆæ²¡æœ‰å¾—åˆ°åŠæ—¶GCï¼‰ï¼ŒæŸ¥çœ‹å¼•ç”¨<br><img src="/outOfMemoryError/05.png" alt="jmap"><br>åˆ†æå¼•ç”¨æ ˆï¼Œæ‰¾åˆ°æ— æ•ˆå¼•ç”¨ï¼Œæ‰“å¼€æºç <br><img src="/outOfMemoryError/06.png" alt="jmap"><br><strong>æŸ¥çœ‹æºç ï¼ï¼ï¼</strong></li>
</ul>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>å†…å­˜æº¢å‡º</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqlæ•°æ®åº“é”</title>
    <url>/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%81/</url>
    <content><![CDATA[<p>å½“æ•°æ®åº“æœ‰äº‹åŠ¡çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ•°æ®çš„ä¸ä¸€è‡´ï¼Œè¿™æ—¶å°±éœ€è¦ä¸€äº›æœºåˆ¶æ¥ä¿è¯è®¿é—®çš„æ¬¡åºï¼Œè¿™å°±æ˜¯é”çš„æœºåˆ¶ï¼›<br><strong>é”çš„ä½œç”¨</strong>ï¼šç”¨äºæŒ‚ä½ å¯¹å…±äº«èµ„æºçš„å¹¶å‘è®¿é—®ï¼Œä¿è¯æ•°æ®åº“çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚<br>##1. ä¸åŒå¼•æ“çš„é”ä»¥åŠé”åˆ†ç±»<br><strong>Mysqlæ•°æ®åº“ä¸­ï¼ŒInnoDBæ”¯æŒè¡¨ã€è¡Œçº§é”ï¼Œè€ŒMyISAMæ”¯æŒè¡¨çº§é”</strong><br><br><br>Mysqlå¤§è‡´å¯ä»¥å½’çº³ä¸ºä»¥ä¸‹3ç§é”ï¼š</p>
<ul>
<li>è¡¨çº§é”ï¼šå¼€é”€å°ï¼ŒåŠ é”å—ï¼Œä¸ä¼šå‡ºç°æ­»é”ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚</li>
<li>è¡Œçº§é”ï¼šå¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼Œä¼šå‡ºç°æ­»é”ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦æœ€é«˜ã€‚</li>
<li>é¡µé¢é”ï¼šå¼€é”€å’ŒåŠ é”çš„æ—¶é—´ä»‹äºè¡¨çº§é”å’Œè¡Œçº§é”ä¹‹é—´ï¼Œä¼šå‡ºç°æ­»é”ï¼Œé”ç²’åº¦ä»‹äºä¸¤è€…ä¹‹é—´ï¼›å¹¶å‘åº¦ä¸€èˆ¬ï¼Œä¸€æ¬¡é”å®šç›¸é‚»ä¸€ç»„è®°å½•</li>
</ul>
<p>Mysqlè¡¨çº§é”ä¸¤ç§æ¨¡å¼: <strong>è¡¨å…±äº«é”ï¼ˆTable Read Lockï¼‰å’Œ è¡¨ç‹¬å å†™é”ï¼ˆTable Write Lockï¼‰</strong>ï¼Œè¡¨ç°å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¯¹ä¸€ä¸ªè¡¨çš„è¯»æ“ä½œï¼Œä¸ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨è¯·æ±‚ï¼Œä½†ä¼šé˜»å¡å¯¹åŒä¸€è¡¨çš„å†™è¯·æ±‚ï¼›</li>
<li>å¯¹MyISAMçš„å†™æ“ä½œï¼Œåˆ™ä¼šåˆ™è‰²å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»å’Œå†™æ“ä½œï¼›</li>
<li>MyISAMè¡¨çš„è¯»æ“ä½œå’Œå†™æ“ä½œä¹‹é—´ï¼Œä»¥åŠå†™æ“ä½œä¹‹é—´æ˜¯ä¸²è¡Œçš„ã€‚<br>å½“ä¸€ä¸ªçº¿ç¨‹è·å¾—å¯¹ä¸€ä¸ªè¡¨çš„å†™é”åï¼Œåªæœ‰æŒæœ‰é”çš„çº¿ç¨‹å¯ä»¥å¯¹è¡¨è¿›è¡Œæ›´æ–°æ“ä½œï¼Œå…¶ä»–çº¿ç¨‹çš„è¯»ã€å†™æ“ä½œéƒ½ä¼šç­‰å¾…ã€‚</li>
</ul>
<h2 id="2-åŠ è¡¨çº§é”"><a href="#2-åŠ è¡¨çº§é”" class="headerlink" title="2.åŠ è¡¨çº§é”"></a>2.åŠ è¡¨çº§é”</h2><p>MyISAMåœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼ˆSELECTï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„æ‰€æœ‰è¡¨åŠ è¯»é”ï¼Œåœ¨æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆUPDATEã€DELETEã€INSERTç­‰ï¼‰å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶ä¸éœ€è¦ç”¨æˆ·å¹²é¢„ï¼Œå› æ­¤ç”¨æˆ·ä¸€èˆ¬ä¸éœ€è¦ç›´æ¥ç”¨LOCK TABLEå‘½ä»¤ç»™MyISAMè¡¨æ˜¾å¼åŠ é”ã€‚<br>ç»™MyISAMè¡¨æ˜¾å¼åŠ é”ï¼Œä¸€èˆ¬æ˜¯ä¸ºäº†ä¸€å®šç¨‹åº¦æ¨¡æ‹Ÿäº‹åŠ¡æ“ä½œï¼Œå®ç°å¯¹æŸä¸€æ—¶é—´ç‚¹å¤šä¸ªè¡¨çš„ä¸€è‡´æ€§è¯»å–ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªè®¢å•è¡¨ordersï¼Œå…¶ä¸­è®°å½•æœ‰è®¢å•çš„æ€»é‡‘é¢totalï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªè®¢å•æ˜ç»†è¡¨order_detailï¼Œå…¶ä¸­è®°å½•æœ‰è®¢å•æ¯ä¸€äº§å“çš„é‡‘é¢å°è®¡subtotalï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦æ£€æŸ¥è¿™ä¸¤ä¸ªè¡¨çš„é‡‘é¢åˆè®¡æ˜¯å¦ç›¸ç­‰ï¼Œå¯èƒ½å°±éœ€è¦æ‰§è¡Œå¦‚ä¸‹ä¸¤æ¡SQL</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç¯å¢ƒä¸‹å®‰è£…Redis</title>
    <url>/redis_install/</url>
    <content><![CDATA[<h5 id="1-å®‰è£…gcc"><a href="#1-å®‰è£…gcc" class="headerlink" title="1. å®‰è£…gcc"></a>1. å®‰è£…gcc</h5>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install gcc gcc-c++</span><br></pre></td></tr></table></figure>
<h5 id="2-ä¸‹è½½å®‰è£…åŒ…"><a href="#2-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="2. ä¸‹è½½å®‰è£…åŒ…"></a>2. ä¸‹è½½å®‰è£…åŒ…</h5>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://download.redis.io/redis-stable.tar.gz </span><br></pre></td></tr></table></figure>
<h5 id="3-è§£å‹"><a href="#3-è§£å‹" class="headerlink" title="3. è§£å‹"></a>3. è§£å‹</h5>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar xvzf redis-stable.tar.gz</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ç§»åŠ¨redisç›®å½•ï¼Œä¸€èˆ¬éƒ½ä¼šå°†redisç›®å½•æ”¾ç½®åˆ° /usr/<span class="built_in">local</span>/redisç›®å½•</span></span><br><span class="line">mv redis-6.2.6 /usr/local/redis</span><br></pre></td></tr></table></figure>
<h5 id="4-ç¼–è¯‘"><a href="#4-ç¼–è¯‘" class="headerlink" title="4. ç¼–è¯‘"></a>4. ç¼–è¯‘</h5>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/redis</span><br><span class="line">make</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœæ‰§è¡Œmakeå‘½ä»¤æŠ¥é”™ï¼šcc æœªæ‰¾åˆ°å‘½ä»¤ï¼ŒåŸå› æ˜¯è™šæ‹Ÿæœºç³»ç»Ÿä¸­ç¼ºå°‘gccï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…gccï¼šyum -y install gcc automake autoconf libtool make</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¦‚æœä½¿ç”¨makeå¤±è´¥ï¼Œè‡´å‘½é”™è¯¯:jemalloc/jemalloc.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œåˆ™éœ€è¦åœ¨makeæŒ‡å®šåˆ†é…å™¨ä¸ºlibc make MALLOC=libc</span></span><br><span class="line">//makeä¹‹åå¦‚æœå‡ºç°Hint: To run &#x27;make test&#x27; is a good idea ;</span><br><span class="line">//è¿è¡Œmake test, ä¼šæç¤ºéœ€è¦å®‰è£…tcl,æ‰§è¡Œyum install tcl</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…redisï¼Œå¹¶æŒ‡å®šå®‰è£…ç›®å½•</span></span><br><span class="line">make install PREFIX=/usr/local/redis</span><br></pre></td></tr></table></figure>

<h5 id="5-é…ç½®å¯†ç ä»¥åŠå…è®¸å¤–ç½‘ipè®¿é—®"><a href="#5-é…ç½®å¯†ç ä»¥åŠå…è®¸å¤–ç½‘ipè®¿é—®" class="headerlink" title="5. é…ç½®å¯†ç ä»¥åŠå…è®¸å¤–ç½‘ipè®¿é—®"></a>5. é…ç½®å¯†ç ä»¥åŠå…è®¸å¤–ç½‘ipè®¿é—®</h5>   <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨redis.confä¸­é…ç½®requirepass å¯†ç ä»¥åŠportç«¯å£å·ï¼ˆéå¿…é¡»ï¼‰</span></span><br><span class="line"><span class="attr">requirepass</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">port</span> <span class="string">6379 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#å¼€å¯rediså…è®¸å¤–ç½‘ipè®¿é—®ï¼Œåœ¨ Linux ä¸­å®‰è£…äº†redis æœåŠ¡ï¼Œå½“åœ¨å®¢æˆ·ç«¯é€šè¿‡è¿œç¨‹è¿æ¥çš„æ–¹å¼è¿æ¥æ—¶ï¼ŒæŠ¥could not connecté”™è¯¯ã€‚é”™è¯¯çš„åŸå› ä¸ºï¼šredisé‡‡ç”¨çš„å®‰å…¨ç­–ç•¥ï¼Œé»˜è®¤ä¼šåªå‡†è®¸æœ¬åœ°è®¿é—®ã€‚</span></span><br><span class="line"><span class="comment">#å°†æ‰€æœ‰çš„bingä¿¡æ¯å…¨éƒ¨å±è”½</span></span><br><span class="line"><span class="comment">#bind 192.168.1.100 10.0.0.1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#é…ç½®redisåå°å¯åŠ¨ï¼Œå¦‚æœä¸é…ç½®çš„è¯å¯ä»¥ä½¿ç”¨hohupå¯åŠ¨</span></span><br><span class="line"><span class="attr">daemonize</span> <span class="string">yes</span></span><br></pre></td></tr></table></figure>
<h5 id="6-å¯åŠ¨redisæœåŠ¡"><a href="#6-å¯åŠ¨redisæœåŠ¡" class="headerlink" title="6. å¯åŠ¨redisæœåŠ¡"></a>6. å¯åŠ¨redisæœåŠ¡</h5>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ./src</span><br><span class="line">nohup ./redis-server ../redis.conf &amp;</span><br></pre></td></tr></table></figure>
<h5 id="7-æŸ¥çœ‹redisè¿›ç¨‹"><a href="#7-æŸ¥çœ‹redisè¿›ç¨‹" class="headerlink" title="7. æŸ¥çœ‹redisè¿›ç¨‹"></a>7. æŸ¥çœ‹redisè¿›ç¨‹</h5>   <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost redis]# pstree</span><br></pre></td></tr></table></figure>
<p>   <img src="/redis_install/image-20201201155441018.png" alt="image-20201210103251475"></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>rediså¸¸è§ä½¿ç”¨åœºæ™¯</title>
    <url>/redis-usage-scenario/</url>
    <content><![CDATA[<h2 id="1-ç¼“å­˜"><a href="#1-ç¼“å­˜" class="headerlink" title="1. ç¼“å­˜"></a>1. ç¼“å­˜</h2><p>Stringç±»å‹<br>ä¾‹å¦‚ï¼šçƒ­ç‚¹æ•°æ®ç¼“å­˜ã€å¯¹è±¡ç¼“å­˜ã€å…¨é¡µç¼“å­˜å¯ä»¥æå‡çƒ­ç‚¹æ•°æ®çš„è®¿é—®æ•ˆç‡</p>
<h2 id="2-æ•°æ®å…±äº«åˆ†å¸ƒå¼"><a href="#2-æ•°æ®å…±äº«åˆ†å¸ƒå¼" class="headerlink" title="2. æ•°æ®å…±äº«åˆ†å¸ƒå¼"></a>2. æ•°æ®å…±äº«åˆ†å¸ƒå¼</h2><p>Stringç±»å‹ï¼Œå› ä¸ºredisæ˜¯åˆ†å¸ƒå¼çš„ç‹¬ç«‹æœåŠ¡ï¼Œå¯ä»¥åœ¨å¤šä¸ªåº”ç”¨æœåŠ¡ä¹‹é—´å…±äº«ï¼Œä¾‹å¦‚åˆ†å¸ƒå¼session</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.session<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-session-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-åˆ†å¸ƒå¼é”"><a href="#3-åˆ†å¸ƒå¼é”" class="headerlink" title="3. åˆ†å¸ƒå¼é”"></a>3. åˆ†å¸ƒå¼é”</h2><p>Stringç±»å‹ setnxæ–¹æ³•ï¼Œåªæœ‰ä¸å­˜åœ¨æ—¶æ‰èƒ½æ·»åŠ æˆåŠŸè¿”å›true</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">getLock</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">    Long flag = jedis.setnx(key, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (flag == <span class="number">1</span>) &#123;</span><br><span class="line">        jedis.expire(key, <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag == <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">releaseLock</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">    jedis.del(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-å…¨å±€ID"><a href="#4-å…¨å±€ID" class="headerlink" title="4. å…¨å±€ID"></a>4. å…¨å±€ID</h2><p>int ç±»å‹ï¼Œ incrby, åˆ©ç”¨åŸå­æ€§</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">incrby userid 1000</span><br></pre></td></tr></table></figure>
<p>åˆ†åº“åˆ†è¡¨çš„åœºæ™¯ï¼Œä¸€æ¬¡æ€§æ‹¿ä¸€æ®µã€‚</p>
<h2 id="5-è®¡æ•°å™¨"><a href="#5-è®¡æ•°å™¨" class="headerlink" title="5. è®¡æ•°å™¨"></a>5. è®¡æ•°å™¨</h2><p>int ç±»å‹ï¼Œincræ–¹æ³•<br>ä¾‹å¦‚ï¼šæ–‡ç« çš„é˜…è¯»é‡ã€å¾®åšç‚¹èµæ•°ï¼›å…è®¸ä¸€å®šçš„å»¶è¿Ÿï¼Œå…ˆå†™å…¥redisåœ¨å®šæ—¶åŒæ­¥åˆ°æ•°æ®åº“</p>
<ol>
<li><p>ç¬¬ä¸€ç§æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    RedisTemplate&lt;String,Object&gt; redisTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Resource(name=&quot;redisTemplate&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ValueOperations&lt;String,Object&gt; ops;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">testRedis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æ­¤æ–¹æ³•ä¼šå…ˆæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨+1ï¼Œä¸å­˜åœ¨å…ˆåˆå§‹åŒ–ï¼Œå†+1</span></span><br><span class="line">            ops.increment(<span class="string">&quot;success&quot;</span>, <span class="number">1</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//return (int) ops.get(&quot;success&quot;); //ä½¿ç”¨è¿™ä¸ªä¼šå‡ºç°é”™è¯¯ï¼ŒæŠ¥é”™ä¿¡æ¯ Caused by: org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.EOFExceptionã€‚</span></span><br><span class="line">            <span class="keyword">return</span> Integer.valueOf(redisTemplate.boundValueOps(<span class="string">&quot;success&quot;</span>).get(<span class="number">0</span>, -<span class="number">1</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¬¬äºŒç§æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    RedisTemplate&lt;String,Object&gt; redisTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Resource(name=&quot;redisTemplate&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ValueOperations&lt;String,Object&gt; ops;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">testRedis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æ­¤æ–¹æ³•ä¼šå…ˆæ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨+1ï¼Œä¸å­˜åœ¨å…ˆåˆå§‹åŒ–ï¼Œå†+1</span></span><br><span class="line">            ops.increment(<span class="string">&quot;success&quot;</span>, <span class="number">1</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//return (int) ops.get(&quot;success&quot;);</span></span><br><span class="line">            <span class="comment">//return Integer.valueOf(redisTemplate.boundValueOps(&quot;success&quot;).get(0, -1));</span></span><br><span class="line">            <span class="keyword">return</span> (<span class="keyword">int</span>) getKey(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getKey</span><span class="params">(<span class="keyword">final</span> String key)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> redisTemplate.execute(<span class="keyword">new</span> RedisCallback&lt;Long&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Long <span class="title">doInRedis</span><span class="params">(RedisConnection connection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</span><br><span class="line">                </span><br><span class="line">                RedisSerializer&lt;String&gt; redisSerializer = redisTemplate.getStringSerializer();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">byte</span>[] rowkey = redisSerializer.serialize(key);</span><br><span class="line">                <span class="keyword">byte</span>[] rowval = connection.get(rowkey);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    String val = redisSerializer.deserialize(rowval);</span><br><span class="line">                    <span class="keyword">return</span> Long.parseLong(val);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0L</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®æ¯å¤©é›¶ç‚¹è¿‡æœŸï¼Œé‡æ–°è®¡æ•°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å½“å¤©æ—¶é—´</span></span><br><span class="line">Date date = <span class="keyword">new</span> Date();</span><br><span class="line"><span class="comment">//å½“å¤©é›¶ç‚¹</span></span><br><span class="line">date = DateUtils.truncate(date, Calendar.DAY_OF_MONTH);</span><br><span class="line"><span class="comment">//ç¬¬äºŒå¤©é›¶ç‚¹</span></span><br><span class="line">date = DateUtils.addDays(date, +<span class="number">1</span>);</span><br><span class="line">redisTemplate.expireAt(<span class="string">&quot;success&quot;</span>, date);</span><br></pre></td></tr></table></figure>
<h2 id="6-é™æµ"><a href="#6-é™æµ" class="headerlink" title="6. é™æµ"></a>6. é™æµ</h2><p>intç±»å‹ï¼Œincræ–¹æ³•<br>ä»¥è®¿é—®è€…çš„IPå’Œå…¶ä»–ä¿¡æ¯ä½œä¸ºkey,è®¿é—®ä¸€æ¬¡å¢åŠ ä¸€æ¬¡æ¬¡æ•°ï¼Œè¶…è¿‡æ¬¡æ•° åˆ™è¿”å›false</p>
</li>
</ol>
<h2 id="7-ä½ç»Ÿè®¡"><a href="#7-ä½ç»Ÿè®¡" class="headerlink" title="7. ä½ç»Ÿè®¡"></a>7. ä½ç»Ÿè®¡</h2><p>Stringç±»å‹çš„bitcount<br>å­—ç¬¦æ˜¯ä»¥8ä½äºŒè¿›åˆ¶å­˜å‚¨çš„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">set k1 a</span><br><span class="line">setbit k1 6 1</span><br><span class="line">setbit k1 7 0</span><br><span class="line">get k1 </span><br><span class="line">/* 6 7 ä»£è¡¨çš„açš„äºŒè¿›åˆ¶ä½çš„ä¿®æ”¹</span><br><span class="line"></span><br><span class="line">a å¯¹åº”çš„ASCIIç æ˜¯97ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®æ˜¯01100001</span><br><span class="line">b å¯¹åº”çš„ASCIIç æ˜¯98ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®æ˜¯01100010</span><br><span class="line"></span><br><span class="line">å› ä¸ºbitéå¸¸èŠ‚çœç©ºé—´ï¼ˆ1 MB=8388608 bitï¼‰ï¼Œå¯ä»¥ç”¨æ¥åšå¤§æ•°æ®é‡çš„ç»Ÿè®¡ã€‚</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼šåœ¨çº¿ç”¨æˆ·ç»Ÿè®¡ï¼Œç•™å­˜ç”¨æˆ·ç»Ÿè®¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">setbit onlineusers 01 </span><br><span class="line">setbit onlineusers 11 </span><br><span class="line">setbit onlineusers 20</span><br></pre></td></tr></table></figure>
<p>æ”¯æŒæŒ‰ä½ä¸ã€æŒ‰ä½æˆ–ç­‰ç­‰æ“ä½œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">BITOPANDdestkeykey[key...] ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘å¹¶ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚       </span><br><span class="line">BITOPORdestkeykey[key...] ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘æˆ–ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚ </span><br><span class="line">BITOPXORdestkeykey[key...] ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key æ±‚é€»è¾‘å¼‚æˆ–ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚ </span><br><span class="line">BITOPNOTdestkeykey ï¼Œå¯¹ç»™å®š key æ±‚é€»è¾‘éï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ã€‚</span><br></pre></td></tr></table></figure>
<p>è®¡ç®—å‡º7å¤©éƒ½åœ¨çº¿çš„ç”¨æˆ·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">BITOP &quot;AND&quot; &quot;7_days_both_online_users&quot; &quot;day_1_online_users&quot; &quot;day_2_online_users&quot; ...  &quot;day_7_online_users&quot;</span><br></pre></td></tr></table></figure>

<h2 id="8-è´­ç‰©è½¦"><a href="#8-è´­ç‰©è½¦" class="headerlink" title="8. è´­ç‰©è½¦"></a>8. è´­ç‰©è½¦</h2><p>String æˆ–hashã€‚æ‰€æœ‰Stringå¯ä»¥åšçš„hashéƒ½å¯ä»¥<br>hashç±»å‹æ˜¯ä¸€ä¸ªStringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œæ¯ä¸ªhashéƒ½å¯ä»¥å­˜å‚¨2^32 -1é”®å€¼å¯¹<br><strong>ä½¿ç”¨hashåšè´­ç‰©è½¦ï¼šä»¥ç”¨æˆ·idä¸ºkey, å•†å“idä¸ºfieldï¼Œå•†å“æ•°é‡ä¸ºvalueã€‚</strong><br><img src="/redis-usage-scenario/01.png"></p>
<h2 id="9-ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline"><a href="#9-ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline" class="headerlink" title="9. ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline"></a>9. ç”¨æˆ·æ¶ˆæ¯æ—¶é—´çº¿timeline</h2><p>listï¼ŒåŒå‘é“¾è¡¨ï¼Œç›´æ¥ä½œä¸ºtimelineå°±å¥½äº†ã€‚æ’å…¥æœ‰åº</p>
<h2 id="10-æ¶ˆæ¯é˜Ÿåˆ—"><a href="#10-æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="10. æ¶ˆæ¯é˜Ÿåˆ—"></a>10. æ¶ˆæ¯é˜Ÿåˆ—</h2><p>Listæä¾›äº†ä¸¤ä¸ªé˜»å¡çš„å¼¹å‡ºæ“ä½œï¼šblpop/brpopï¼Œå¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´</p>
<ul>
<li><p>blpopï¼šblpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</p>
</li>
<li><p>brpopï¼šbrpop key1 timeout ç§»é™¤å¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚<br>ä¸Šé¢çš„æ“ä½œã€‚å…¶å®å°±æ˜¯javaçš„é˜»å¡é˜Ÿåˆ—ã€‚å­¦ä¹ çš„ä¸œè¥¿è¶Šå¤šã€‚å­¦ä¹ æˆæœ¬è¶Šä½</p>
</li>
<li><p>é˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆé™¤ï¼šrpush blpopï¼Œå·¦å¤´å³å°¾ï¼Œå³è¾¹è¿›å…¥é˜Ÿåˆ—ï¼Œå·¦è¾¹å‡ºé˜Ÿåˆ—</p>
</li>
<li><p>æ ˆï¼šå…ˆè¿›åå‡ºï¼šrpush brpop</p>
</li>
</ul>
<h2 id="11-æŠ½å¥–"><a href="#11-æŠ½å¥–" class="headerlink" title="11. æŠ½å¥–"></a>11. æŠ½å¥–</h2><p>è‡ªå¸¦ä¸€ä¸ªéšæœºè·å¾—å€¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">spop myset</span><br></pre></td></tr></table></figure>

<h2 id="12-ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡"><a href="#12-ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡" class="headerlink" title="12. ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡"></a>12. ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡</h2><p><img src="/redis-usage-scenario/02.png" alt="ç‚¹èµã€ç­¾åˆ°ã€æ‰“å¡"><br>å‡å¦‚ä¸Šé¢çš„å¾®åšIDæ˜¯t1001ï¼Œç”¨æˆ·IDæ˜¯u3001</p>
<p>ç”¨ like:t1001 æ¥ç»´æŠ¤ t1001 è¿™æ¡å¾®åšçš„æ‰€æœ‰ç‚¹èµç”¨æˆ·</p>
<ul>
<li>ç‚¹èµäº†è¿™æ¡å¾®åšï¼šsadd like:t1001 u3001</li>
<li>å–æ¶ˆç‚¹èµï¼šsrem like:t1001 u3001</li>
<li>æ˜¯å¦ç‚¹èµï¼šsismember like:t1001 u3001</li>
<li>ç‚¹èµçš„æ‰€æœ‰ç”¨æˆ·ï¼šsmembers like:t1001</li>
<li>ç‚¹èµæ•°ï¼šscard like:t1001</li>
</ul>
<h2 id="13-å•†å“æ ‡ç­¾"><a href="#13-å•†å“æ ‡ç­¾" class="headerlink" title="13. å•†å“æ ‡ç­¾"></a>13. å•†å“æ ‡ç­¾</h2><p><img src="/redis-usage-scenario/03.png" alt="å•†å“æ ‡ç­¾"><br>ç”¨ tags:i5001 æ¥ç»´æŠ¤å•†å“æ‰€æœ‰çš„æ ‡ç­¾ã€‚</p>
<ul>
<li>sadd tags:i5001 ç”»é¢æ¸…æ™°ç»†è…»</li>
<li>sadd tags:i5001 çœŸå½©æ¸…æ™°æ˜¾ç¤ºå±</li>
<li>sadd tags:i5001 æµç¨‹è‡³æ</li>
</ul>
<h2 id="14-å•†å“ç­›é€‰"><a href="#14-å•†å“ç­›é€‰" class="headerlink" title="14.å•†å“ç­›é€‰"></a>14.å•†å“ç­›é€‰</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">// è·å–å·®é›†</span><br><span class="line">sdiff set1 set2</span><br><span class="line">// è·å–äº¤é›†ï¼ˆintersection ï¼‰</span><br><span class="line">sinter set1 set2</span><br><span class="line">// è·å–å¹¶é›†</span><br><span class="line">sunion set1 set2</span><br></pre></td></tr></table></figure>
<p><img src="/redis-usage-scenario/04.png" alt="å•†å“ç­›é€‰"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sadd brand:apple iPhone11</span><br><span class="line"></span><br><span class="line">sadd brand:ios iPhone11</span><br><span class="line"></span><br><span class="line">sad screensize:6.0-6.24 iPhone11</span><br><span class="line"></span><br><span class="line">sad screentype:lcd iPhone 11</span><br></pre></td></tr></table></figure>
<p>ç­›é€‰å•†å“ï¼Œè‹¹æœçš„ã€iosçš„ã€å±å¹•åœ¨6.0-6.24ä¹‹é—´çš„ï¼Œå±å¹•æè´¨æ˜¯LCDå±å¹•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sinter brand:apple brand:ios screensize:6.0-6.24 screentype:lcd</span><br></pre></td></tr></table></figure>
<h2 id="15-ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹"><a href="#15-ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹" class="headerlink" title="15. ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹"></a>15. ç”¨æˆ·å…³æ³¨ã€æ¨èæ¨¡å‹</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># follow å…³æ³¨ fans ç²‰ä¸</span></span></span><br><span class="line">sadd 1:follow 2</span><br><span class="line">sadd 2:fans 1</span><br><span class="line">sadd 1:fans 2</span><br><span class="line">sadd 2:follow 1</span><br></pre></td></tr></table></figure>
<p>æˆ‘å…³æ³¨çš„äººä¹Ÿå…³æ³¨äº†ä»–(å–äº¤é›†)ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sinter 1:follow 2:fans</span><br></pre></td></tr></table></figure>
<p>å¯èƒ½è®¤è¯†çš„äººï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ç”¨æˆ·1å¯èƒ½è®¤è¯†çš„äºº(å·®é›†)ï¼š</span></span></span><br><span class="line">sdiff 2:follow 1:follow</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ç”¨æˆ·2å¯èƒ½è®¤è¯†çš„äººï¼š</span></span></span><br><span class="line">sdiff 1:follow 2:follow</span><br></pre></td></tr></table></figure>

<h2 id="16-æ’è¡Œæ¦œ"><a href="#16-æ’è¡Œæ¦œ" class="headerlink" title="16. æ’è¡Œæ¦œ"></a>16. æ’è¡Œæ¦œ</h2><p>id ä¸º6001 çš„æ–°é—»ç‚¹å‡»æ•°åŠ 1ï¼šzincrby hotNews:20190926 1 n6001<br>è·å–ä»Šå¤©ç‚¹å‡»æœ€å¤šçš„15æ¡ï¼šzrevrange hotNews:20190926 0 15 withscores<br><img src="/redis-usage-scenario/05.png" alt="æ’è¡Œæ¦œ"></p>
<hr>
<p><img src="/redis-usage-scenario/06.png"></p>
<h2 id="redisä¸é€‚ç”¨çš„åœºæ™¯"><a href="#redisä¸é€‚ç”¨çš„åœºæ™¯" class="headerlink" title="redisä¸é€‚ç”¨çš„åœºæ™¯"></a>redisä¸é€‚ç”¨çš„åœºæ™¯</h2><p>Redisæ˜¯ä¸€ç§ç¼“å­˜æŠ€æœ¯ï¼Œä¸»è¦ç”¨æ¥æé«˜åº”ç”¨çš„æ€§èƒ½ï¼Œæ›´å¤šçš„åº”ç”¨åœºæ™¯æ˜¯å¯¹æ•°æ®åº“è¯»æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå‡è½»æ•°æ®åº“çš„IOçš„è®¿é—®å‹åŠ›ï¼Œä»¥ä¸‹åœºæ™¯ä¸å¤ªé€‚åˆä½¿ç”¨Redis:</p>
<ul>
<li><p>æ•°æ®è§„æ¨¡å¤§å°è§’åº¦</p>
<p>  Redisæ˜¯å°†æ•°æ®æ”¾åœ¨å†…å­˜è¿›è¡Œç¼“å­˜çš„ï¼Œå†…å­˜ç›¸å¯¹äºç£ç›˜æ¥é”ä»·æ ¼æ˜¯æ¯”è¾ƒè´µçš„ã€‚<strong>å¦‚æœæˆæœ¬æ˜¯éœ€è¦è€ƒè™‘çš„é‡è¦å› ç´ ï¼Œé‚£ä¹ˆå¤§è§„æ¨¡çš„æ•°æ®å°±ä¸å¤ªé€‚åˆ</strong>ï¼›</p>
</li>
<li><p>æ•°æ®å†·çƒ­ç¨‹åº¦è§’åº¦</p>
<p>  å¾ˆå¤šä¸šåŠ¡æ•°æ®å¯ä»¥æ ¹æ®æ•°æ®è¯»çš„é¢‘ç¹ç¨‹åº¦åˆ†ä¸ºçƒ­æ•°æ®å’Œå†·æ•°æ®ï¼›<strong>é¢‘ç¹ä½¿ç”¨çš„çƒ­æ•°æ®ä¸€èˆ¬é€‚åˆç”¨redisï¼Œå†·æ•°æ®ä¸€èˆ¬ä¸å¤ªé€‚åˆç”¨redis</strong>,å¦‚æœå¤§é‡çš„å†·æ•°æ®è¿›è¡Œäº†ç¼“å­˜ï¼Œé‚£æ˜¯å¯¹å†…å­˜èµ„æºçš„æµªè´¹ï¼Œ<br>æ‰€ä»¥åœ¨åº”ç”¨åœºæ™¯ä¸ŠåŒºåˆ†å†·çƒ­æ•°æ®ï¼Œå°†çƒ­æ•°æ®æ”¾åœ¨å†…å­˜ä¸­ï¼Œè¿›è€Œæé«˜æ€§èƒ½ã€‚</p>
</li>
</ul>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>springbootè¯»å–ymlé…ç½®çš„æ–¹å¼</title>
    <url>/springboot-yml/</url>
    <content><![CDATA[<p>springbooté¡¹ç›®ä¸­é»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯application.propertiesï¼›</p>
<h3 id="1-ymlæ–‡ä»¶è§„åˆ™"><a href="#1-ymlæ–‡ä»¶è§„åˆ™" class="headerlink" title="1.ymlæ–‡ä»¶è§„åˆ™"></a>1.ymlæ–‡ä»¶è§„åˆ™</h3><ul>
<li>æ ‘çŠ¶ç»“æ„ï¼Œç»“æ„æ¸…æ™°</li>
<li>ä¸æ”¯æŒtabç¼©è¿›</li>
<li>å¯ä»¥ä½¿ç”¨â€_â€æˆ–â€-â€œæ¶ˆåå­—æ¯ä»£æ›¿å¤§å†™å­—æ¯ï¼›å¦‚userName ä¸user-nameï¼Œ user_nameå«ä¹‰æ˜¯ä¸€æ ·çš„ï¼ˆå®½æ¾ç»‘å®šåŸåˆ™ relaxed bindingï¼‰; key: valueæ ¼å¼ä¹¦å†™ï¼Œvalueå‰é¢æœ‰ä¸ªç©ºæ ¼</li>
</ul>
<h3 id="2-æ•°æ®æ ¼å¼"><a href="#2-æ•°æ®æ ¼å¼" class="headerlink" title="2. æ•°æ®æ ¼å¼"></a>2. æ•°æ®æ ¼å¼</h3><ul>
<li>æ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰å¦‚ï¼š  <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">port:</span> <span class="number">123</span>      </span><br><span class="line"><span class="attr">name:</span> <span class="string">abc</span>      </span><br><span class="line"><span class="attr">flag:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
  å­—ç¬¦ä¸²é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–è€…åŒå¼•å·ï¼›  â€œâ€ï¼šåŒå¼•å·ï¼›ä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦ï¼›ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€,name: â€œzhangsan \n lisiâ€ï¼šè¾“å‡ºï¼›zhangsan æ¢è¡Œ lisi  â€˜â€™ï¼šå•å¼•å·ï¼›ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®,name: â€˜zhangsan \n lisiâ€™ï¼šè¾“å‡ºï¼›zhangsan \n lisi</li>
<li>å¯¹è±¡ã€Map(å±æ€§å’Œå€¼)å¦‚ï¼š  <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#k: vï¼šåœ¨ä¸‹ä¸€è¡Œæ¥å†™å¯¹è±¡çš„å±æ€§å’Œå€¼çš„å…³ç³»ï¼›æ³¨æ„ç¼©è¿›(ä¸æ”¯æŒtab,ä½¿ç”¨ç©ºæ ¼)</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8123</span></span><br><span class="line">  <span class="attr">tomcat:</span></span><br><span class="line">    <span class="attr">uri-encoding:</span> <span class="string">utf-8</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/app</span></span><br></pre></td></tr></table></figure></li>
<li>æ•°ç»„ï¼ˆlistï¼Œ setï¼‰  <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”¨- å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="attr">hands:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">left</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">right</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-è¯»å–æ–¹å¼"><a href="#3-è¯»å–æ–¹å¼" class="headerlink" title="3. è¯»å–æ–¹å¼"></a>3. è¯»å–æ–¹å¼</h3><ol>
<li><p>@Valueæ³¨è§£</p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br></pre></td></tr></table></figure>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Value(&quot;$&#123;server.port&#125;&quot;)</span><br><span class="line">public String port;</span><br></pre></td></tr></table></figure>
<p> æ­¤å¤„çš„portæ‰€åœ¨çš„ç±»éœ€è¦æ˜¯ä¸€ä¸ªç»„ä»¶,å¦‚æœæ˜¯å®ä½“ç±»éœ€è¦åŠ ä¸Š@Component</p>
</li>
<li><p>@ConfigurationProperties</p>
<p>éœ€è¦ä¸€ä¸ªJavaBean æ¥ä¸“é—¨æ˜ å°„é…ç½®çš„è¯,æˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨@ConfigurationPropertiesæ¥è¯»å–.</p>
<p>ä½¿ç”¨çš„ä½¿ç”¨éœ€è¦@EnableConfigurationPropertiesæ³¨è§£è®©ç±»è¢«springbootæ‰«æåˆ°ï¼›</p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3307/app?useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8&amp;useLegacyDatetimeCode=false</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//prefix æŒ‡å®šå‰ç¼€</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDataSourceProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String driverClassName;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//çœç•¥getter setteræ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å‰ç¼€å®šä¹‰äº†å“ªäº›å¤–éƒ¨å±æ€§å°†ç»‘å®šåˆ°ç±»çš„å­—æ®µä¸Š</li>
<li>æ ¹æ® Spring Boot å®½æ¾çš„ç»‘å®šè§„åˆ™ï¼Œç±»çš„å±æ€§åç§°å¿…é¡»ä¸å¤–éƒ¨å±æ€§çš„åç§°åŒ¹é…</li>
<li>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ç”¨ä¸€ä¸ªå€¼åˆå§‹åŒ–ä¸€ä¸ªå­—æ®µæ¥å®šä¹‰ä¸€ä¸ªé»˜è®¤å€¼</li>
<li>ç±»æœ¬èº«å¯ä»¥æ˜¯åŒ…ç§æœ‰çš„</li>
<li>ç±»çš„å­—æ®µå¿…é¡»æœ‰å…¬å…± setter æ–¹æ³•</li>
</ul>
</li>
<li><p>Environment</p>
<p>Spring Environment bean</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestC</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Environment env;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;index&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;environment : &quot;</span>+ env.getProperty(<span class="string">&quot;spring.datasource.druid.url&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸è§sqlä¼˜åŒ–æ–¹å¼</title>
    <url>/sql-01/</url>
    <content><![CDATA[<ol>
<li><p>å¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œåº”å°½é‡é¿å…å…¨è¡¨æ‰«æï¼Œé¦–å…ˆåº”è€ƒè™‘åœ¨ where åŠ order by æ¶‰åŠçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ã€‚</p>
</li>
<li><p>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š    </p>
 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num <span class="keyword">is</span> <span class="keyword">null</span>    </span><br><span class="line"><span class="comment">-- å¯ä»¥åœ¨numä¸Šè®¾ç½®é»˜è®¤å€¼0ï¼Œç¡®ä¿è¡¨ä¸­numåˆ—æ²¡æœ‰nullå€¼ï¼Œç„¶åè¿™æ ·æŸ¥è¯¢ï¼š    </span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num<span class="operator">=</span><span class="number">0</span></span><br></pre></td></tr></table></figure></li>
<li><p>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚</p>
</li>
<li><p>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ or æ¥è¿æ¥æ¡ä»¶ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š    </p>
 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num<span class="operator">=</span><span class="number">10</span> <span class="keyword">or</span> num<span class="operator">=</span><span class="number">20</span>    </span><br><span class="line"><span class="comment">--å¯ä»¥è¿™æ ·æŸ¥è¯¢ï¼š    </span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num<span class="operator">=</span><span class="number">10</span>    </span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span>    </span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num<span class="operator">=</span><span class="number">20</span></span><br></pre></td></tr></table></figure></li>
<li><p>in å’Œ not in ä¹Ÿè¦æ…ç”¨ï¼Œå¦åˆ™ä¼šå¯¼è‡´å…¨è¡¨æ‰«æï¼Œå¦‚ï¼š    </p>
 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)    </span><br><span class="line"><span class="comment">--å¯¹äºè¿ç»­çš„æ•°å€¼ï¼Œèƒ½ç”¨ between å°±ä¸è¦ç”¨ in äº†ï¼š    </span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span></span><br></pre></td></tr></table></figure></li>
<li><p>ä¸‹é¢çš„æŸ¥è¯¢ä¹Ÿå°†å¯¼è‡´å…¨è¡¨æ‰«æï¼š</p>
 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%abc%&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œï¼Œè¿™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚å¦‚ï¼š    </p>
 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num<span class="operator">/</span><span class="number">2</span><span class="operator">=</span><span class="number">100</span>    </span><br><span class="line"><span class="comment">---åº”æ”¹ä¸º:    </span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> num<span class="operator">=</span><span class="number">100</span><span class="operator">*</span><span class="number">2</span></span><br></pre></td></tr></table></figure></li>
<li><p>åº”å°½é‡é¿å…åœ¨whereå­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œï¼Œè¿™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚å¦‚ï¼š    </p>
 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> <span class="built_in">substring</span>(name,<span class="number">1</span>,<span class="number">3</span>)<span class="operator">=</span><span class="string">&#x27;abc&#x27;</span><span class="comment">--nameä»¥abcå¼€å¤´çš„id    </span></span><br><span class="line"><span class="comment">---åº”æ”¹ä¸º:    </span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> t <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;abc%&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>ä¸è¦åœ¨ where å­å¥ä¸­çš„â€œ=â€å·¦è¾¹è¿›è¡Œå‡½æ•°ã€ç®—æœ¯è¿ç®—æˆ–å…¶ä»–è¡¨è¾¾å¼è¿ç®—ï¼Œå¦åˆ™ç³»ç»Ÿå°†å¯èƒ½æ— æ³•æ­£ç¡®ä½¿ç”¨ç´¢å¼•ã€‚</p>
</li>
<li><p>åœ¨ä½¿ç”¨ç´¢å¼•å­—æ®µä½œä¸ºæ¡ä»¶æ—¶ï¼Œå¦‚æœè¯¥ç´¢å¼•æ˜¯å¤åˆç´¢å¼•ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨åˆ°è¯¥ç´¢å¼•ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µä½œä¸ºæ¡ä»¶æ—¶æ‰èƒ½ä¿è¯ç³»ç»Ÿä½¿ç”¨è¯¥ç´¢å¼•ï¼Œå¦åˆ™è¯¥ç´¢å¼•å°†ä¸ä¼šè¢«ä½¿ç”¨ï¼Œå¹¶ä¸”åº”å°½å¯èƒ½çš„è®©å­—æ®µé¡ºåºä¸ç´¢å¼•é¡ºåºç›¸ä¸€è‡´ã€‚</p>
</li>
<li><p>ä¸è¦å†™ä¸€äº›æ²¡æœ‰æ„ä¹‰çš„æŸ¥è¯¢ï¼Œå¦‚éœ€è¦ç”Ÿæˆä¸€ä¸ªç©ºè¡¨ç»“æ„ï¼š    </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> col1,col2 <span class="keyword">into</span> #t <span class="keyword">from</span> t <span class="keyword">where</span> <span class="number">1</span><span class="operator">=</span><span class="number">0</span>    </span><br><span class="line"><span class="comment">--è¿™ç±»ä»£ç ä¸ä¼šè¿”å›ä»»ä½•ç»“æœé›†ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºçš„ï¼Œåº”æ”¹æˆè¿™æ ·ï¼š    </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> #t(...)</span><br></pre></td></tr></table></figure></li>
<li><p>å¾ˆå¤šæ—¶å€™ç”¨ exists ä»£æ›¿ in æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼š    </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> num <span class="keyword">from</span> a <span class="keyword">where</span> num <span class="keyword">in</span>(<span class="keyword">select</span> num <span class="keyword">from</span> b)    </span><br><span class="line"><span class="comment">--ç”¨ä¸‹é¢çš„è¯­å¥æ›¿æ¢ï¼š    </span></span><br><span class="line"><span class="keyword">select</span> num <span class="keyword">from</span> a <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> b <span class="keyword">where</span> num<span class="operator">=</span>a.num)</span><br></pre></td></tr></table></figure></li>
<li><p>å¹¶ä¸æ˜¯æ‰€æœ‰ç´¢å¼•å¯¹æŸ¥è¯¢éƒ½æœ‰æ•ˆï¼ŒSQLæ˜¯æ ¹æ®è¡¨ä¸­æ•°æ®æ¥è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„ï¼Œå½“ç´¢å¼•åˆ—æœ‰å¤§é‡æ•°æ®é‡å¤æ—¶ï¼ŒSQLæŸ¥è¯¢å¯èƒ½ä¸ä¼šå»åˆ©ç”¨ç´¢å¼•ï¼Œå¦‚ä¸€è¡¨ä¸­æœ‰å­—æ®µsexï¼Œmaleã€femaleå‡ ä¹å„ä¸€åŠï¼Œé‚£ä¹ˆå³ä½¿åœ¨sexä¸Šå»ºäº†ç´¢å¼•ä¹Ÿå¯¹æŸ¥è¯¢æ•ˆç‡èµ·ä¸äº†ä½œç”¨ã€‚</p>
</li>
<li><p>ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œç´¢å¼•å›ºç„¶å¯ä»¥æé«˜ç›¸åº”çš„ select çš„æ•ˆç‡ï¼Œä½†åŒæ—¶ä¹Ÿé™ä½äº† insert åŠ update çš„æ•ˆç‡ï¼Œå› ä¸º insert æˆ– update æ—¶æœ‰å¯èƒ½ä¼šé‡å»ºç´¢å¼•ï¼Œæ‰€ä»¥æ€æ ·å»ºç´¢å¼•éœ€è¦æ…é‡è€ƒè™‘ï¼Œè§†å…·ä½“æƒ…å†µè€Œå®šã€‚<br>ä¸€ä¸ªè¡¨çš„ç´¢å¼•æ•°æœ€å¥½ä¸è¦è¶…è¿‡6ä¸ªï¼Œè‹¥å¤ªå¤šåˆ™åº”è€ƒè™‘ä¸€äº›ä¸å¸¸ä½¿ç”¨åˆ°çš„åˆ—ä¸Šå»ºçš„ç´¢å¼•æ˜¯å¦æœ‰å¿…è¦ã€‚</p>
</li>
<li><p>å°½é‡ä½¿ç”¨æ•°å­—å‹å­—æ®µï¼Œè‹¥åªå«æ•°å€¼ä¿¡æ¯çš„å­—æ®µå°½é‡ä¸è¦è®¾è®¡ä¸ºå­—ç¬¦å‹ï¼Œè¿™ä¼šé™ä½æŸ¥è¯¢å’Œè¿æ¥çš„æ€§èƒ½ï¼Œå¹¶ä¼šå¢åŠ å­˜å‚¨å¼€é”€ã€‚<br>è¿™æ˜¯å› ä¸ºå¼•æ“åœ¨å¤„ç†æŸ¥è¯¢å’Œè¿æ¥æ—¶ä¼šé€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œå¯¹äºæ•°å­—å‹è€Œè¨€åªéœ€è¦æ¯”è¾ƒä¸€æ¬¡å°±å¤Ÿäº†ã€‚</p>
</li>
<li><p>å°½å¯èƒ½çš„ä½¿ç”¨ varchar ä»£æ›¿ char ï¼Œå› ä¸ºé¦–å…ˆå˜é•¿å­—æ®µå­˜å‚¨ç©ºé—´å°ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œå…¶æ¬¡å¯¹äºæŸ¥è¯¢æ¥è¯´ï¼Œåœ¨ä¸€ä¸ªç›¸å¯¹è¾ƒå°çš„å­—æ®µå†…æœç´¢æ•ˆç‡æ˜¾ç„¶è¦é«˜äº›ã€‚</p>
</li>
<li><p>ä»»ä½•åœ°æ–¹éƒ½ä¸è¦ä½¿ç”¨ select * from t ï¼Œç”¨å…·ä½“çš„å­—æ®µåˆ—è¡¨ä»£æ›¿â€œ*â€ï¼Œä¸è¦è¿”å›ç”¨ä¸åˆ°çš„ä»»ä½•å­—æ®µã€‚</p>
</li>
<li><p>é¿å…é¢‘ç¹åˆ›å»ºå’Œåˆ é™¤ä¸´æ—¶è¡¨ï¼Œä»¥å‡å°‘ç³»ç»Ÿè¡¨èµ„æºçš„æ¶ˆè€—ã€‚</p>
</li>
<li><p>ä¸´æ—¶è¡¨å¹¶ä¸æ˜¯ä¸å¯ä½¿ç”¨ï¼Œé€‚å½“åœ°ä½¿ç”¨å®ƒä»¬å¯ä»¥ä½¿æŸäº›ä¾‹ç¨‹æ›´æœ‰æ•ˆï¼Œä¾‹å¦‚ï¼Œå½“éœ€è¦é‡å¤å¼•ç”¨å¤§å‹è¡¨æˆ–å¸¸ç”¨è¡¨ä¸­çš„æŸä¸ªæ•°æ®é›†æ—¶ã€‚ä½†æ˜¯ï¼Œå¯¹äºä¸€æ¬¡æ€§äº‹ä»¶ï¼Œæœ€å¥½ä½¿ç”¨å¯¼å‡ºè¡¨ã€‚</p>
</li>
<li><p>åœ¨æ–°å»ºä¸´æ—¶è¡¨æ—¶ï¼Œå¦‚æœä¸€æ¬¡æ€§æ’å…¥æ•°æ®é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ select into ä»£æ›¿ create tableï¼Œé¿å…é€ æˆå¤§é‡ log ï¼Œä»¥æé«˜é€Ÿåº¦ï¼›å¦‚æœæ•°æ®é‡ä¸å¤§ï¼Œä¸ºäº†ç¼“å’Œç³»ç»Ÿè¡¨çš„èµ„æºï¼Œåº”å…ˆcreate tableï¼Œç„¶åinsertã€‚</p>
</li>
<li><p>å¦‚æœä½¿ç”¨åˆ°äº†ä¸´æ—¶è¡¨ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹çš„æœ€ååŠ¡å¿…å°†æ‰€æœ‰çš„ä¸´æ—¶è¡¨æ˜¾å¼åˆ é™¤ï¼Œå…ˆ truncate table ï¼Œç„¶å drop table ï¼Œè¿™æ ·å¯ä»¥é¿å…ç³»ç»Ÿè¡¨çš„è¾ƒé•¿æ—¶é—´é”å®šã€‚</p>
</li>
<li><p>å°½é‡é¿å…ä½¿ç”¨æ¸¸æ ‡ï¼Œå› ä¸ºæ¸¸æ ‡çš„æ•ˆç‡è¾ƒå·®ï¼Œå¦‚æœæ¸¸æ ‡æ“ä½œçš„æ•°æ®è¶…è¿‡1ä¸‡è¡Œï¼Œé‚£ä¹ˆå°±åº”è¯¥è€ƒè™‘æ”¹å†™ã€‚</p>
</li>
<li><p>ä½¿ç”¨åŸºäºæ¸¸æ ‡çš„æ–¹æ³•æˆ–ä¸´æ—¶è¡¨æ–¹æ³•ä¹‹å‰ï¼Œåº”å…ˆå¯»æ‰¾åŸºäºé›†çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³é—®é¢˜ï¼ŒåŸºäºé›†çš„æ–¹æ³•é€šå¸¸æ›´æœ‰æ•ˆã€‚</p>
</li>
<li><p>ä¸ä¸´æ—¶è¡¨ä¸€æ ·ï¼Œæ¸¸æ ‡å¹¶ä¸æ˜¯ä¸å¯ä½¿ç”¨ã€‚å¯¹å°å‹æ•°æ®é›†ä½¿ç”¨ FAST_FORWARD æ¸¸æ ‡é€šå¸¸è¦ä¼˜äºå…¶ä»–é€è¡Œå¤„ç†æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å¿…é¡»å¼•ç”¨å‡ ä¸ªè¡¨æ‰èƒ½è·å¾—æ‰€éœ€çš„æ•°æ®æ—¶ã€‚<br>åœ¨ç»“æœé›†ä¸­åŒ…æ‹¬â€œåˆè®¡â€çš„ä¾‹ç¨‹é€šå¸¸è¦æ¯”ä½¿ç”¨æ¸¸æ ‡æ‰§è¡Œçš„é€Ÿåº¦å¿«ã€‚å¦‚æœå¼€å‘æ—¶é—´å…è®¸ï¼ŒåŸºäºæ¸¸æ ‡çš„æ–¹æ³•å’ŒåŸºäºé›†çš„æ–¹æ³•éƒ½å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œçœ‹å“ªä¸€ç§æ–¹æ³•çš„æ•ˆæœæ›´å¥½ã€‚</p>
</li>
<li><p>å°½é‡é¿å…å¤§äº‹åŠ¡æ“ä½œï¼Œæé«˜ç³»ç»Ÿå¹¶å‘èƒ½åŠ›ã€‚</p>
</li>
<li><p>å°½é‡é¿å…å‘å®¢æˆ·ç«¯è¿”å›å¤§æ•°æ®é‡ï¼Œè‹¥æ•°æ®é‡è¿‡å¤§ï¼Œåº”è¯¥è€ƒè™‘ç›¸åº”éœ€æ±‚æ˜¯å¦åˆç†ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹</title>
    <url>/thread-01/</url>
    <content><![CDATA[<p>ç”¨æˆ·çº¿ç¨‹ï¼šæˆ‘ä»¬å¹³å¸¸åˆ›å»ºçš„æ™®é€šçº¿ç¨‹ã€‚</p>
<p>å®ˆæŠ¤çº¿ç¨‹ï¼šç”¨æ¥æœåŠ¡äºç”¨æˆ·çº¿ç¨‹ï¼›ä¸éœ€è¦ä¸Šå±‚é€»è¾‘ä»‹å…¥</p>
<p>javaçº¿ç¨‹åˆ†ä¸ºå®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“java jvmæ£€æµ‹ä¸»çº¿ç¨‹æˆ–å…¶ä»–å­çº¿ç¨‹æ‰§è¡Œå®Œä¹‹åï¼Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šé©¬ä¸Šåœæ­¢æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Thread.setDaemon(tureæˆ–false)æ¥è®¾ç½®ä¸€ä¸ªçº¿ç¨‹æ˜¯å®ˆæŠ¤çº¿ç¨‹è¿˜æ˜¯éå®ˆæŠ¤çº¿ç¨‹ï¼Œé»˜è®¤ä¸ºfalseï¼Œå¯ä»¥é€šè¿‡Thread.isDaemon()æ–¹æ³•æŸ¥è¯¢è¯¥çº¿ç¨‹æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹</p>
<p>å®ˆæŠ¤çº¿ç¨‹æ˜¯æ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸï¼Œå®ˆæŠ¤çº¿ç¨‹æ‰ä¼šç»“æŸç”Ÿå‘½å‘¨æœŸï¼Œåªè¦æœ‰ä¸€ä¸ªç”¨æˆ·çº¿ç¨‹å­˜åœ¨ï¼Œé‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹å°±ä¸ä¼šç»“æŸï¼Œä¾‹å¦‚Javaä¸­çš„åƒåœ¾ å›æ”¶å™¨å°±æ˜¯ä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ï¼Œåªæœ‰åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰çš„çº¿ç¨‹ç»“æŸï¼Œå®ƒæ‰ä¼šç»“æŸã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DaemonThread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(DaemonThread::print);</span><br><span class="line">        thread.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸»çº¿ç¨‹main ç»“æŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> counter = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">//å†™ä¸€ä¸ªæ­»å¾ªç¯çš„æ–¹æ³•æ¥æµ‹è¯•</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Counter:&quot;</span> + counter++);</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä¸»çº¿ç¨‹main ç»“æŸ</span><br><span class="line">Counter:1</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬å°†daemonè®¾ç½®ä¸ºéå®ˆæŠ¤çº¿ç¨‹ï¼Œä»£ç å¦‚ä¸‹:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">thread.setDaemon(<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™å°±ä¸ä¼šé€€å‡ºwhile(true)å¾ªç¯äº†ï¼Œä¼šä¸€ç›´æ‰§è¡Œä¸‹å»ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä¸»çº¿ç¨‹main ç»“æŸ</span><br><span class="line">Counter:1</span><br><span class="line">Counter:2</span><br><span class="line">Counter:3</span><br><span class="line">Counter:4</span><br><span class="line">Counter:5</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<p><strong>æ€»ç»“ï¼šå®ˆæŠ¤çº¿ç¨‹æ˜¯ä¸ºç”¨æˆ·çº¿ç¨‹æœåŠ¡çš„ï¼Œå½“ç”¨æˆ·çº¿ç¨‹å…¨éƒ¨ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šè‡ªåŠ¨ç»“æŸã€‚</strong></p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ol>
<li>thread.setDaemon(true)å¿…é¡»åœ¨thread.start()ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™ä¼šè·‘å‡ºä¸€ä¸ªIllegalThreadStateExceptionå¼‚å¸¸ã€‚ä½ ä¸èƒ½æŠŠæ­£åœ¨è¿è¡Œçš„å¸¸è§„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</li>
<li>åœ¨Daemonçº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯Daemonçš„ã€‚</li>
<li>å®ˆæŠ¤çº¿ç¨‹ä¸èƒ½ç”¨äºå»è®¿é—®å›ºæœ‰èµ„æºï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘ã€‚å› ä¸ºå®ƒä¼šåœ¨ä»»ä½•æ—¶å€™ç”šè‡³åœ¨ä¸€ä¸ªæ“ä½œçš„ä¸­é—´å‘ç”Ÿä¸­æ–­ã€‚</li>
<li>Javaè‡ªå¸¦çš„å¤šçº¿ç¨‹æ¡†æ¶ï¼Œæ¯”å¦‚ExecutorServiceï¼Œä¼šå°†å®ˆæŠ¤çº¿ç¨‹è½¬æ¢ä¸ºç”¨æˆ·çº¿ç¨‹ï¼Œæ‰€ä»¥å¦‚æœè¦ä½¿ç”¨åå°çº¿ç¨‹å°±ä¸èƒ½ç”¨Javaçš„çº¿ç¨‹æ± ã€‚</li>
</ol>
<p><strong>æ„ä¹‰ä»¥åŠåº”ç”¨åœºæ™¯:</strong></p>
<p>å½“ä¸»çº¿ç¨‹ç»“æŸæ—¶ï¼Œç»“æŸå…¶ä½™çš„å­çº¿ç¨‹ï¼ˆå®ˆæŠ¤çº¿ç¨‹ï¼‰è‡ªåŠ¨å…³é—­ï¼Œå°±å…å»äº†è¿˜è¦ç»§ç»­å…³é—­å­çº¿ç¨‹çš„éº»çƒ¦ã€‚å¦‚ï¼šJavaåƒåœ¾å›æ”¶çº¿ç¨‹å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹ï¼›å†…å­˜èµ„æºæˆ–è€…çº¿ç¨‹çš„ç®¡ç†ï¼Œä½†æ˜¯éå®ˆæŠ¤çº¿ç¨‹ä¹Ÿå¯ä»¥ã€‚</p>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>å®ˆæŠ¤çº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoæ·»åŠ è¯„è®ºç³»ç»ŸValine</title>
    <url>/valine/</url>
    <content><![CDATA[<p>Hexoçš„è¯„è®ºç³»ç»Ÿæœ‰å¾ˆå¤šï¼Œå¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ä¸ª</p>
<ul>
<li><del>å¤šè¯´</del></li>
<li><del>ç½‘æ˜“äº‘è·Ÿå¸–</del></li>
<li>ç•…è¨€</li>
<li>æ¥å¿…åŠ›ï¼ˆLiveReï¼‰</li>
<li>Disqus</li>
<li>Hypercomments</li>
<li>valine</li>
</ul>
<p>é¦–å…ˆå¤šè¯´å’Œç½‘æ˜“äº‘å·²ç»å€’ä¸‹äº†ï¼Œå…¶æ¬¡ç•…è¨€éœ€è¦å¤‡æ¡ˆï¼ŒDisqusï¼ŒHypercommentså’ŒLiveReéƒ½æ˜¯å›½å¤–çš„ï¼ŒåŠ è½½é€Ÿåº¦è´¼æ…¢ï¼Œç”šè‡³æœ‰è¢«å¢™çš„å¯èƒ½ï¼Œå¯»è§…äº†å¾ˆä¹…ä¹‹åï¼Œä»Materialä¸»é¢˜æ¢æˆnextä¸»é¢˜ä¹‹åï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªå¥½ç”¨çš„è¯„è®ºç³»ç»Ÿï¼Œé‚£å°±æ˜¯ valine</p>
<p>æˆ‘ä½¿ç”¨çš„æ˜¯Next 6.xç‰ˆæœ¬ï¼Œæœ¬èº«å°±å·²ç»é›†æˆäº†valineï¼Œå› æ­¤æ­£å¸¸æƒ…å†µä¸‹æ˜¯æŒ‰ç…§å®˜æ–¹æ–‡æ¡£èµ°å°±å¯ä»¥äº†ï¼Œ5åˆ†é’Ÿå¼€å¯ä½ çš„è¯„è®ºç³»ç»Ÿ~</p>
<ol>
<li>æ³¨å†ŒLeanCloudæˆ‘ä»¬çš„è¯„è®ºç³»ç»Ÿå…¶å®æ˜¯æ”¾åœ¨Leancloudä¸Šçš„ï¼Œå› æ­¤é¦–å…ˆéœ€è¦å»æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œæ³¨å†Œåœ°å€ï¼š<a href="https://www.leancloud.cn/">https://www.leancloud.cn/</a><br><img src="/valine/1.png"></li>
<li>è·å–AppIdæ³¨å†Œå®Œäº†ä¹‹å åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œåå­—éšä¾¿èµ·ï¼›ç„¶åè¿›å…¥åº”ç”¨-&gt;è®¾ç½®-&gt;åº”ç”¨å‡­è¯ ä¸­è·å–appid å’Œ appkey<br><img src="/valine/2.png"></li>
<li>é…ç½®valineæ‹¿åˆ°appidå’Œappkeyä¹‹åï¼Œæ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶_config.yml æœç´¢ valineï¼Œå¡«å…¥appid å’Œ appkey<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">comment:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">valine</span>  <span class="comment"># å¯ç”¨å“ªç§è¯„è®ºç³»ç»Ÿ</span></span><br><span class="line">    <span class="attr">valine:</span> <span class="comment"># Valine. https://valine.js.org</span></span><br><span class="line">       <span class="attr">appid:</span> <span class="string">your</span> <span class="string">leancloud</span> <span class="string">application</span> <span class="string">appid</span></span><br><span class="line">       <span class="attr">appkey:</span> <span class="string">your</span> <span class="string">leancloud</span> <span class="string">application</span> <span class="string">appkey</span></span><br><span class="line">       <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line">       <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">       <span class="attr">placeholder:</span> <span class="string">Just</span> <span class="string">go</span> <span class="string">go</span> <span class="comment"># comment box placeholder</span></span><br><span class="line">       <span class="attr">avatar:</span> <span class="string">mm</span> <span class="comment"># gravatar style</span></span><br><span class="line">       <span class="attr">meta:</span> <span class="string">nick,mail</span> <span class="comment">#,link      #   custom comment header</span></span><br><span class="line">       <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># pagination size</span></span><br><span class="line">       <span class="attr">visitor:</span> <span class="literal">true</span> <span class="comment"># Article reading statistic https://valine.js.org/visitor.html</span></span><br></pre></td></tr></table></figure></li>
<li>LeanCloud å®‰å…¨åŸŸåé…ç½®åœ¨LeanCloud -&gt; è®¾ç½® -&gt; å®‰å…¨ä¸­å¿ƒ -&gt; Web å®‰å…¨åŸŸå æŠŠä½ çš„åŸŸååŠ è¿›å»<br><img src="/valine/3.png"></li>
<li>æŸ¥çœ‹è¯„è®ºæ•°æ®åœ¨æ•°æ®å­˜å‚¨ -&gt; ç»“æ„åŒ–æ•°æ® ä¸­å¯ä»¥æŸ¥çœ‹åˆ°æ‰€æœ‰çš„å­˜å‚¨çš„æ•°æ®ä¿¡æ¯<br><img src="/valine/4.png"></li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>volatileå…³é”®å­—</title>
    <url>/volatile/</url>
    <content><![CDATA[<h2 id="1-volatileä½œç”¨"><a href="#1-volatileä½œç”¨" class="headerlink" title="1.volatileä½œç”¨"></a>1.volatileä½œç”¨</h2><p>  volatileä¿è¯æœ‰åºæ€§ï¼Œå¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§</p>
<ol>
<li>ç¦æ­¢æŒ‡ä»¤é‡æ’</li>
<li>ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡å€¼ï¼Œè¿™ä¸ªæ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹ç«‹å³å¯è§çš„</li>
<li>ä¸èƒ½ä¿è¯åŸå­æ€§(çº¿ç¨‹ä¸å®‰å…¨)</li>
</ol>
<h2 id="2-å®ç°åŸç†"><a href="#2-å®ç°åŸç†" class="headerlink" title="2. å®ç°åŸç†"></a>2. å®ç°åŸç†</h2><ol>
<li>é€šè¿‡æ’å…¥å†…å­˜å±éšœæŒ‡ä»¤ç¦æ­¢ç¼–è¯‘å™¨å’ŒCPUå¯¹ç¨‹åºè¿›è¡Œé‡æ’åºã€‚</li>
<li>å½“å¯¹å£°æ˜äº†volatileçš„å˜é‡è¿›è¡Œå†™æ“ä½œæ—¶ï¼ŒJVMå°±ä¼šå‘å¤„ç†å™¨å‘é€ä¸€æ¡Lockå‰ç¼€çš„æŒ‡ä»¤ï¼Œè¿™æ¡Lockå‰ç¼€æŒ‡ä»¤äº§ç”Ÿå¦‚ä¸‹ä¸¤ä¸ªä½œç”¨ï¼š<ul>
<li>Lockå‰ç¼€æŒ‡ä»¤ä¼šå¼•èµ·å¤„ç†å™¨ç¼“å­˜å›å†™åˆ°ç³»ç»Ÿå†…å­˜ï¼Œå¹¶ä½¿ç”¨ç¼“å­˜ä¸€è‡´æ€§æœºåˆ¶æ¥ç¡®ä¿å›å†™çš„åŸå­æ€§ã€‚</li>
<li>ä¸€ä¸ªå¤„ç†å™¨çš„ç¼“å­˜å›å†™åˆ°ç³»ç»Ÿå†…å­˜ä¼šå¯¼è‡´å…¶ä»–å¤„ç†å™¨çš„ç¼“å­˜æ— æ•ˆã€‚å¤„ç†å™¨ä½¿ç”¨MESIæ§åˆ¶åè®®å»ç»´æŠ¤å†…éƒ¨ç¼“å­˜å’Œå…¶ä»–å¤„ç†å™¨ç¼“å­˜çš„ä¸€è‡´æ€§ã€‚å¤„ç†å™¨èƒ½å—…æ¢å…¶ä»–å¤„ç†å™¨è®¿é—®ç³»ç»Ÿå†…å­˜å’Œå®ƒä»¬çš„å†…éƒ¨ç¼“å­˜ã€‚å¤„ç†å™¨ä½¿ç”¨å—…æ¢æŠ€æœ¯ä¿è¯å®ƒçš„å†…éƒ¨ç¼“å­˜ã€ç³»ç»Ÿå†…å­˜å’Œå…¶ä»–å¤„ç†å™¨çš„ç¼“å­˜çš„æ•°æ®åœ¨æ€»çº¿ä¸Šä¿æŒä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œåœ¨Pentiumå’ŒP6 familyå¤„ç†å™¨ä¸­ï¼Œå¦‚æœé€šè¿‡å—…æ¢ä¸€ä¸ªå¤„ç†å™¨æ¥æ£€æµ‹å…¶ä»–å¤„ç†å™¨æ‰“ç®—å†™å†…å­˜åœ°å€ï¼Œè€Œè¿™ä¸ªåœ°å€å½“å‰å¤„äºå…±äº«çŠ¶æ€ï¼Œé‚£ä¹ˆæ­£åœ¨å—…æ¢çš„å¤„ç†å™¨å°†ä½¿å®ƒçš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œåœ¨ä¸‹æ¬¡è®¿é—®ç›¸åŒå†…å­˜åœ°å€æ—¶ï¼Œå¼ºåˆ¶æ‰§è¡Œç¼“å­˜è¡Œå¡«å……<h2 id="3-synchronizedä¸volatileæ¯”è¾ƒ"><a href="#3-synchronizedä¸volatileæ¯”è¾ƒ" class="headerlink" title="3.synchronizedä¸volatileæ¯”è¾ƒ"></a>3.synchronizedä¸volatileæ¯”è¾ƒ</h2></li>
</ul>
</li>
<li>volatileå…³é”®å­—æ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡çº§å®ç°ï¼Œæ€§èƒ½è¾ƒsynchronizedå¥½ï¼›ä½†æ˜¯volatileå…³é”®å­—åªèƒ½ç”¨äºå˜é‡ï¼Œè€Œsynchronizedå…³é”®å­—å¯ä»¥ä¿®é¥°æ–¹æ³•ä»¥åŠä»£ç å—</li>
<li>synchronizedå…³é”®å­—åœ¨java1.6ä¹‹åè¿›è¡Œäº†ä¸»è¦åŒ…æ‹¬ä¸ºäº†å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—è€Œå¼•å…¥çš„åå‘é”å’Œè½»é‡çº§é”ä»¥åŠå…¶ä»–å„ç§ä¼˜åŒ–ä¹‹åæ‰§è¡Œæ•ˆç‡æœ‰äº†æ˜¾è‘—çš„æå‡ï¼›</li>
<li>å¤šçº¿ç¨‹è®¿é—®volatileå…³é”®å­—ä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œè€Œsynchronizedå…³é”®å­—å¯èƒ½ä¼šå‘ç”Ÿé˜»å¡</li>
<li>volatileå…³é”®å­—ä¿è¯æ•°æ®çš„å¯è§æ€§ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯æ•°æ®çš„åŸå­æ€§ï¼›synchronizedå…³é”®å­—ä¸¤è€…éƒ½èƒ½ä¿è¯ï¼ˆsynchronizedä¿è¯åŸå­æ€§ï¼Œæœ‰åºæ€§ï¼Œå¯è§æ€§ï¼‰</li>
<li>volatileå…³é”®å­—ä¸»è¦ç”¨äºè§£å†³å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œè€Œsynchronizedå…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ã€‚</li>
<li>synchronizedæ˜¯åŒæ­¥é”ï¼ŒåŒæ­¥å¿«å†…çš„ä»£ç ç›¸å½“äºåŒä¸€æ—¶åˆ»å•çº¿ç¨‹æ‰§è¡Œ</li>
</ol>
<h2 id="4-å¯è§æ€§é—®é¢˜"><a href="#4-å¯è§æ€§é—®é¢˜" class="headerlink" title="4. å¯è§æ€§é—®é¢˜"></a>4. å¯è§æ€§é—®é¢˜</h2><p>Javaè™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰äº†ä¸€ç§Javaå†…å­˜ æ¨¡å‹ï¼ˆJava Memory Modelï¼Œå³JMMï¼‰æ¥å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä»¥å®ç°è®©Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å¹¶å‘æ•ˆæœã€‚Javaå†…å­˜æ¨¡å‹çš„ä¸»è¦ç›®æ ‡å°±æ˜¯å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡è¿™æ ·çš„ç»†èŠ‚ã€‚</p>
<p>JMMä¸­è§„å®šæ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰ä¸­ï¼Œæ¯æ¡çº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼ˆWork Memoryï¼‰ï¼Œçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†è¯¥çº¿ç¨‹æ‰€ä½¿ç”¨çš„å˜é‡çš„ä»ä¸»å†…å­˜ä¸­æ‹·è´çš„å‰¯æœ¬ã€‚çº¿ç¨‹å¯¹äºå˜é‡çš„è¯»ã€å†™éƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»ã€å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ã€‚åŒæ—¶ï¼Œæœ¬çº¿ç¨‹çš„å·¥ä½œå†…å­˜çš„å˜é‡ä¹Ÿæ— æ³•è¢«å…¶ä»–çº¿ç¨‹ç›´æ¥è®¿é—®ï¼Œå¿…é¡»é€šè¿‡ä¸»å†…å­˜å®Œæˆ<br>æ•´ä½“å†…å­˜æ¨¡å‹å¦‚ä¸‹ï¼š<br><img src="/volatile/01.png" alt="image-20201210103251475"></p>
<h3 id="4-1-synchronized"><a href="#4-1-synchronized" class="headerlink" title="4.1 synchronized"></a>4.1 synchronized</h3><p>synchronizedå…³é”®å­—çš„è¯­ä¹‰JMMï¼ˆJava Main Memoryï¼‰æœ‰ä¸¤ä¸ªè§„å®šï¼Œä¿è¯å…¶å®ç°å†…å­˜å¯è§æ€§ï¼š<br>    - <strong>çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡çš„æœ€æ–°å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­</strong><br>    - <strong>çº¿ç¨‹åŠ é”å‰ï¼Œå°†æ¸…ç©ºå·¥ä½œå†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ï¼Œä»ä¸»å†…å­˜ä¸­é‡æ–°å–å€¼</strong></p>
<h3 id="4-2-volatile"><a href="#4-2-volatile" class="headerlink" title="4.2 volatile"></a>4.2 volatile</h3><ul>
<li>å½“å¯¹volatileå˜é‡æ‰§è¡Œå†™æ“ä½œåï¼ŒJMMä¼šæŠŠå·¥ä½œå†…å­˜ä¸­çš„æœ€æ–°å˜é‡å€¼å¼ºåˆ¶åˆ·æ–°åˆ°ä¸»å†…å­˜</li>
<li>å†™æ“ä½œä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹ä¸­çš„ç¼“å­˜æ— æ•ˆ<br>è¿™æ ·ï¼Œå…¶ä»–çº¿ç¨‹ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œå‘ç°æœ¬åœ°å·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡æ— æ•ˆï¼Œä¾¿ä»ä¸»å†…å­˜ä¸­è·å–ï¼Œè¿™æ ·è·å–åˆ°çš„å˜é‡ä¾¿æ˜¯æœ€æ–°çš„å€¼ï¼Œå®ç°äº†çº¿ç¨‹çš„å¯è§æ€§ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>thread</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨çº¿ä¿®æ”¹é™æ€æ–‡ä»¶</title>
    <url>/%E5%9C%A8%E7%BA%BF%E4%BF%AE%E6%94%B9%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<p>é¡¹ç›®è¿è¡Œæ—¶ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹æŸä¸ªcssã€jsã€htmlç­‰æ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦è‡ªå·±è¿æ¥åˆ°æœåŠ¡å™¨ç„¶åä¿®æ”¹ï¼Œæ›´æœ‰ç”šè€…éœ€è¦è¿æ¥vpnã€å ¡å’æœºç­‰ç­‰ï¼Œç‰¹åˆ«çƒ¦ï¼ï¼ï¼ï¼äºæ˜¯å¼„äº†ä¸€ä¸ªåœ¨çº¿ä¿®æ”¹é™æ€æ–‡ä»¶çš„å·¥å…·ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚</p>
<h4 id="1-å¼•å…¥pom"><a href="#1-å¼•å…¥pom" class="headerlink" title="1. å¼•å…¥pom"></a>1. å¼•å…¥pom</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoyuge5201<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>static-file-modify-online<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-æ·»åŠ å‰åå°ä»£ç "><a href="#2-æ·»åŠ å‰åå°ä»£ç " class="headerlink" title="2. æ·»åŠ å‰åå°ä»£ç "></a>2. æ·»åŠ å‰åå°ä»£ç </h4><p>å‰å°ä½¿ç”¨çš„æ˜¯thymeleafï¼Œæ ¹æ®è‡ªå·±é¡¹ç›®çš„å®é™…æƒ…å†µä¿®æ”¹ï¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é“¾æ¥: https://pan.baidu.com/s/1oW38vpj74yKOOtbu5xGCOQ  </span><br><span class="line">å¯†ç : tcmg</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¬æ¢æˆå°å†™å­—æ¯</title>
    <url>/algoright-2/</url>
    <content><![CDATA[<p>å®ç°å‡½æ•° ToLowerCase()ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° strï¼Œå¹¶å°†è¯¥å­—ç¬¦ä¸²ä¸­çš„å¤§å†™å­—æ¯è½¬æ¢æˆå°å†™å­—æ¯ï¼Œä¹‹åè¿”å›æ–°çš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line">è¾“å…¥: &quot;Hello&quot;</span><br><span class="line">è¾“å‡º: &quot;hello&quot;</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹2ï¼š</span><br><span class="line">è¾“å…¥: &quot;LOVELY&quot;</span><br><span class="line">è¾“å‡º: &quot;lovely&quot;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•ä¸€ï¼š-ASCCIIç "><a href="#æ–¹æ³•ä¸€ï¼š-ASCCIIç " class="headerlink" title="æ–¹æ³•ä¸€ï¼š ASCCIIç "></a>æ–¹æ³•ä¸€ï¼š ASCCIIç </h3><p><strong>è§£é¢˜æ€è·¯ï¼šé€šè¿‡asciiç è¡¨æ“ä½œå­—ç¬¦ä¸²å³å¯,aå’ŒAç›¸å·®32ï¼›</strong></p>
<ul>
<li>a-z: 97 - 122</li>
<li>A-Z: 65 - 90</li>
<li>0-9: 48 - 57<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toLowerCase</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> ch : str.toCharArray()) &#123;</span><br><span class="line">        <span class="comment">// a-zï¼š97-122  A-Zï¼š65-90  0-9ï¼š48-57</span></span><br><span class="line">        <span class="keyword">if</span> (ch &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; ch &lt;= <span class="string">&#x27;Z&#x27;</span>) &#123;</span><br><span class="line">            sb.append((<span class="keyword">char</span>)(ch + <span class="number">32</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sb.append(ch);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æˆ–è€…ï¼š<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toLowerCase</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span>[] ch = str.toCharArray();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (ch[i] &gt;= <span class="string">&#x27;A&#x27;</span> &amp;&amp; ch[i] &lt;= <span class="string">&#x27;Z&#x27;</span>) &#123;</span><br><span class="line">            ch[i] += <span class="number">32</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> String.valueOf(ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æ–¹æ³•äºŒï¼š-ä½è¿ç®—"><a href="#æ–¹æ³•äºŒï¼š-ä½è¿ç®—" class="headerlink" title="æ–¹æ³•äºŒï¼š ä½è¿ç®—"></a>æ–¹æ³•äºŒï¼š ä½è¿ç®—</h3><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p>
<ul>
<li>å¤§å†™å˜å°å†™ã€å°å†™å˜å¤§å†™ï¼šå­—ç¬¦ ^= 32;</li>
<li>å¤§å†™å˜å°å†™ã€å°å†™å˜å°å†™ï¼šå­—ç¬¦ |= 32;</li>
<li>å¤§å†™å˜å¤§å†™ã€å°å†™å˜å¤§å†™ï¼šå­—ç¬¦ &amp;= 33;</li>
</ul>
<p>ASCIIç è¡¨ä¸­å¤§å†™çš„Aæ˜¯65ï¼Œå°å†™çš„aæ˜¯97ï¼Œå®ƒä»¬çš„å·®æ˜¯32<br>65 | 32 è½¬ä¸ºäºŒè¿›åˆ¶ï¼ˆæŒ‰8ä½æ¥ç®—ï¼‰å¯ä»¥å¾—åˆ° 0100 0001 | 0010 0000 = 0110 0001 = 97 = a</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toLowerCase</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">char</span>[] ch = str.toCharArray();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">        ch[i] |= <span class="number">32</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> String.valueOf(ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqldumpslowåˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—</title>
    <url>/mysqldumpslow%E5%88%86%E6%9E%90%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97/</url>
    <content><![CDATA[<p>æŒ‰ç…§å¹³å‡æŸ¥è¯¢è¾“å‡º5è¡Œæ…¢æŸ¥è¯¢è®°å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysqldumpslow -s at -t 5 /phpstudy/data/slowquery.log</span><br></pre></td></tr></table></figure>
<ul>
<li>-s   æ’åºæ–¹å¼ï¼Œå¯é€‰å€¼æœ‰cï¼ˆè®°å½•æ¬¡æ•°ï¼‰ã€tï¼ˆæŸ¥è¯¢æ—¶é—´ï¼‰ã€lï¼ˆé”å®šæ—¶é—´ï¼‰ã€rï¼ˆè¿”å›è®°å½•ï¼‰ã€aï¼ˆå¹³å‡ï¼‰</li>
<li>-t    æ˜¾ç¤ºçš„è®°å½•æ•°Spawn failedè§£å†³æ–¹å¼</li>
<li>-g   åé¢è·Ÿæ­£åˆ™è¡¨è¾¾å¼ï¼ˆå¦‚ left joinï¼‰ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚</li>
<li>-r   æ­£åºæ’åºï¼Œå³ä»å°åˆ°å¤§æ’åºã€‚</li>
<li>-d  è°ƒè¯• debug</li>
<li>-v   æŸ¥çœ‹ç‰ˆæœ¬</li>
</ul>
<p>æŒ‰ç…§å¹³å‡æŸ¥è¯¢æ—¶é—´æ’åºä¸”åªæ˜¾ç¤ºå«æœ‰left joinçš„è®°å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysqldumpslow -s at -g &#x27;left join&#x27; /phpstudy/data/slowquery.log</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>mysqlè¡Œåˆ—è½¬ç½®</title>
    <url>/mysql%E8%A1%8C%E5%88%97%E8%BD%AC%E7%BD%AE/</url>
    <content><![CDATA[<p>æ•°æ®è¡¨ï¼š<br><img src="/mysql%E8%A1%8C%E5%88%97%E8%BD%AC%E7%BD%AE/01.png" alt="åŸå§‹æ•°æ®"></p>
<p>è¡Œè½¬åˆ—ç»“æœä¸ºï¼š<br><img src="/mysql%E8%A1%8C%E5%88%97%E8%BD%AC%E7%BD%AE/02.png" alt="è½¬ç½®åç»“æœ"><br>æ•°æ®åº“è¡¨è¯­å¥ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_score(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,  #åå­—</span><br><span class="line">    Subject <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>, #ç§‘ç›®</span><br><span class="line">    Fraction <span class="keyword">double</span> <span class="keyword">default</span> <span class="number">0</span>  #åˆ†æ•°</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `t_score`(name,Subject,Fraction) <span class="keyword">VALUES</span></span><br><span class="line">     (<span class="string">&#x27;ç‹æµ·&#x27;</span>, <span class="string">&#x27;è¯­æ–‡&#x27;</span>, <span class="number">86</span>),</span><br><span class="line">     (<span class="string">&#x27;ç‹æµ·&#x27;</span>, <span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="number">83</span>),</span><br><span class="line">     (<span class="string">&#x27;ç‹æµ·&#x27;</span>, <span class="string">&#x27;è‹±è¯­&#x27;</span>, <span class="number">93</span>),</span><br><span class="line">     (<span class="string">&#x27;é™¶ä¿Š&#x27;</span>, <span class="string">&#x27;è¯­æ–‡&#x27;</span>, <span class="number">88</span>),</span><br><span class="line">     (<span class="string">&#x27;é™¶ä¿Š&#x27;</span>, <span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="number">84</span>),</span><br><span class="line">     (<span class="string">&#x27;é™¶ä¿Š&#x27;</span>, <span class="string">&#x27;è‹±è¯­&#x27;</span>, <span class="number">94</span>),</span><br><span class="line">     (<span class="string">&#x27;åˆ˜å¯&#x27;</span>, <span class="string">&#x27;è¯­æ–‡&#x27;</span>, <span class="number">80</span>),</span><br><span class="line">     (<span class="string">&#x27;åˆ˜å¯&#x27;</span>, <span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="number">86</span>),</span><br><span class="line">     (<span class="string">&#x27;åˆ˜å¯&#x27;</span>, <span class="string">&#x27;è‹±è¯­&#x27;</span>, <span class="number">88</span>),</span><br><span class="line">     (<span class="string">&#x27;ææ˜¥&#x27;</span>, <span class="string">&#x27;è¯­æ–‡&#x27;</span>, <span class="number">89</span>),</span><br><span class="line">     (<span class="string">&#x27;ææ˜¥&#x27;</span>, <span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="number">80</span>),</span><br><span class="line">     (<span class="string">&#x27;ææ˜¥&#x27;</span>, <span class="string">&#x27;è‹±è¯­&#x27;</span>, <span class="number">87</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>æ–¹æ³•ä¸€ï¼šä½¿ç”¨if <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    name <span class="keyword">as</span> åå­— ,</span><br><span class="line">    <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;è¯­æ–‡&#x27;</span>,Fraction,<span class="number">0</span>)) <span class="keyword">as</span> è¯­æ–‡,</span><br><span class="line">    <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;æ•°å­¦&#x27;</span>,Fraction,<span class="number">0</span>))<span class="keyword">as</span> æ•°å­¦, </span><br><span class="line">    <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;è‹±è¯­&#x27;</span>,Fraction,<span class="number">0</span>))<span class="keyword">as</span> è‹±è¯­,</span><br><span class="line">    round(<span class="built_in">AVG</span>(Fraction),<span class="number">2</span>) <span class="keyword">as</span> å¹³å‡åˆ†,</span><br><span class="line">    <span class="built_in">SUM</span>(Fraction) <span class="keyword">as</span> æ€»åˆ†</span><br><span class="line"><span class="keyword">from</span> t_score <span class="keyword">group</span> <span class="keyword">by</span> name</span><br><span class="line"><span class="comment">-- å¦‚æœä¸ç”¨æ±‚æ€»åˆ†çš„è¯ï¼Œä¸éœ€è¦ä¸‹é¢çš„union</span></span><br><span class="line"><span class="keyword">union</span>(</span><br><span class="line">    <span class="keyword">select</span> name <span class="keyword">as</span> åå­— , <span class="built_in">sum</span>(è¯­æ–‡) Chinese,<span class="built_in">sum</span>(æ•°å­¦) Math,<span class="built_in">sum</span>(è‹±è¯­) English,round(<span class="built_in">AVG</span>(æ€»åˆ†),<span class="number">2</span>)<span class="keyword">as</span> å¹³å‡åˆ†,<span class="built_in">sum</span>(æ€»åˆ†) score  <span class="keyword">from</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="string">&#x27;TOTAL&#x27;</span> <span class="keyword">as</span> name,</span><br><span class="line">        <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;è¯­æ–‡&#x27;</span>,Fraction,<span class="number">0</span>)) <span class="keyword">as</span> è¯­æ–‡,</span><br><span class="line">        <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;æ•°å­¦&#x27;</span>,Fraction,<span class="number">0</span>))<span class="keyword">as</span> æ•°å­¦, </span><br><span class="line">        <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;è‹±è¯­&#x27;</span>,Fraction,<span class="number">0</span>))<span class="keyword">as</span> è‹±è¯­,</span><br><span class="line">        <span class="built_in">SUM</span>(Fraction) <span class="keyword">as</span> æ€»åˆ†</span><br><span class="line">        <span class="keyword">from</span> t_score <span class="keyword">group</span> <span class="keyword">by</span> Subject </span><br><span class="line">    )t <span class="keyword">GROUP</span> <span class="keyword">BY</span> t.`name`</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li>æ–¹æ³•äºŒï¼šä½¿ç”¨case <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> name <span class="keyword">as</span> name,</span><br><span class="line"><span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> Subject <span class="operator">=</span> <span class="string">&#x27;è¯­æ–‡&#x27;</span> <span class="keyword">then</span> Fraction <span class="keyword">end</span>) <span class="keyword">as</span> Chinese,</span><br><span class="line"><span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> Subject <span class="operator">=</span> <span class="string">&#x27;æ•°å­¦&#x27;</span> <span class="keyword">then</span> Fraction <span class="keyword">end</span>) <span class="keyword">as</span> Math,</span><br><span class="line"><span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> Subject <span class="operator">=</span> <span class="string">&#x27;è‹±è¯­&#x27;</span> <span class="keyword">then</span> Fraction <span class="keyword">end</span>) <span class="keyword">as</span> English,</span><br><span class="line"><span class="built_in">sum</span>(fraction)<span class="keyword">as</span> score</span><br><span class="line"><span class="keyword">from</span> t_score <span class="keyword">group</span> <span class="keyword">by</span> name</span><br><span class="line"><span class="comment">-- å¦‚æœä¸ç”¨æ±‚æ€»åˆ†çš„è¯ï¼Œä¸éœ€è¦ä¸‹é¢çš„union</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">select</span> name <span class="keyword">as</span> Name,<span class="built_in">sum</span>(Chinese) <span class="keyword">as</span> Chinese,<span class="built_in">sum</span>(Math) <span class="keyword">as</span> Math,<span class="built_in">sum</span>(English) <span class="keyword">as</span> English,<span class="built_in">sum</span>(score) <span class="keyword">as</span> score <span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="string">&#x27;TOTAL&#x27;</span> <span class="keyword">as</span> name,</span><br><span class="line">    <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> Subject <span class="operator">=</span> <span class="string">&#x27;è¯­æ–‡&#x27;</span> <span class="keyword">then</span> Fraction <span class="keyword">end</span>) <span class="keyword">as</span> Chinese,</span><br><span class="line">    <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> Subject <span class="operator">=</span> <span class="string">&#x27;æ•°å­¦&#x27;</span> <span class="keyword">then</span> Fraction <span class="keyword">end</span>) <span class="keyword">as</span> Math,</span><br><span class="line">    <span class="built_in">sum</span>(<span class="keyword">case</span> <span class="keyword">when</span> Subject <span class="operator">=</span> <span class="string">&#x27;è‹±è¯­&#x27;</span> <span class="keyword">then</span> Fraction <span class="keyword">end</span>) <span class="keyword">as</span> English,</span><br><span class="line">    <span class="built_in">sum</span>(fraction)<span class="keyword">as</span> score</span><br><span class="line">    <span class="keyword">from</span> t_score <span class="keyword">group</span> <span class="keyword">by</span> Subject,name)t <span class="keyword">GROUP</span> <span class="keyword">BY</span> t.`name`</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li>æ–¹æ³•ä¸‰ï¼šä½¿ç”¨with rollup<br>åœ¨groupåˆ†ç»„å­—æ®µçš„åŸºç¡€ä¸Šåœ¨è¿›è¡Œç»Ÿè®¡æ•°æ®ï¼› <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="comment">-- coalesce(name,&#x27;TOTAL&#x27;) name,</span></span><br><span class="line">    ifnull(name,<span class="string">&#x27;TOTAL&#x27;</span>) name,</span><br><span class="line">    <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;è¯­æ–‡&#x27;</span>,Fraction,<span class="number">0</span>)) <span class="keyword">as</span> è¯­æ–‡,</span><br><span class="line">    <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;è‹±è¯­&#x27;</span>,Fraction,<span class="number">0</span>)) <span class="keyword">as</span> è‹±è¯­,</span><br><span class="line">    <span class="built_in">sum</span>(if(Subject<span class="operator">=</span><span class="string">&#x27;æ•°å­¦&#x27;</span>,Fraction,<span class="number">0</span>))<span class="keyword">as</span> æ•°å­¦,</span><br><span class="line">    <span class="built_in">sum</span>(Fraction) æ€»åˆ†</span><br><span class="line"><span class="keyword">from</span> t_score <span class="keyword">group</span> <span class="keyword">by</span> name <span class="keyword">with</span> <span class="keyword">rollup</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>å®‰è£…Centosç³»ç»Ÿä»¥åŠé…ç½®IP</title>
    <url>/Installing-CentOS-system/</url>
    <content><![CDATA[<h2 id="1-ç³»ç»Ÿå®‰è£…"><a href="#1-ç³»ç»Ÿå®‰è£…" class="headerlink" title="1. ç³»ç»Ÿå®‰è£…"></a>1. ç³»ç»Ÿå®‰è£…</h2><ol>
<li><p>å®‰è£…<br> <img src="/Installing-CentOS-system/1.png"></p>
</li>
<li><p>é€‰æ‹©è¯­è¨€<br> <img src="/Installing-CentOS-system/2.png"></p>
</li>
<li><p>è®¾ç½®æ—¶åŒºä»¥åŠè½¯ä»¶å®‰è£…<br> <img src="/Installing-CentOS-system/3.png"></p>
</li>
<li><p>é€‰æ‹©GNOMEæ¡Œé¢ï¼Œå¼€å‘å·¥å…·ã€‚ç„¶åç‚¹å‡»å·¦ä¸Šè§’çš„å®Œæˆ<br><img src="/Installing-CentOS-system/4.png"></p>
</li>
<li><p>é…ç½®åˆ†åŒºï¼Œé€‰å€æœ¬åœ°æ ‡å‡†ç£ç›˜ï¼Œå¹¶ä¸”åœ¨åˆ†åŒºä¸­å‹¾é€‰â€æˆ‘è¦é…ç½®åˆ†åŒºâ€,â€æˆ‘æƒ³è®©é¢å¤–ç©ºé—´å¯ç”¨â€ï¼›åˆå­¦è€…å¯ä»¥ä½¿ç”¨è‡ªåŠ¨é…ç½®åˆ†åŒº<br><img src="/Installing-CentOS-system/5.png"></p>
</li>
<li><p>å¼€å§‹å®‰è£…<br><img src="/Installing-CentOS-system/6.png"></p>
</li>
<li><p>è®¾ç½®Rootè´¦æˆ·<br><img src="/Installing-CentOS-system/7.png"> </p>
</li>
<li><p>ç­‰å¾…å®‰è£…æˆåŠŸ,å®‰è£…æˆåŠŸåä¼šæç¤ºé‡å¯ï¼›<br><img src="/Installing-CentOS-system/8.png"> </p>
</li>
</ol>
<h2 id="2-æ°¸ä¹…å…³é—­é˜²ç«å¢™"><a href="#2-æ°¸ä¹…å…³é—­é˜²ç«å¢™" class="headerlink" title="2. æ°¸ä¹…å…³é—­é˜²ç«å¢™"></a>2. æ°¸ä¹…å…³é—­é˜²ç«å¢™</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ä¸€ã€ä¸‹é¢æ˜¯red hat/CentOs7å…³é—­é˜²ç«å¢™çš„å‘½ä»¤!</span><br><span class="line"><span class="meta">#</span><span class="bash">1:æŸ¥çœ‹é˜²ç«çŠ¶æ€</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line">service iptables status</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">2:æš‚æ—¶å…³é—­é˜²ç«å¢™</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">service iptables stop</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">3:æ°¸ä¹…å…³é—­é˜²ç«å¢™</span></span><br><span class="line">systemctl disable firewalld</span><br><span class="line">chkconfig iptables off</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">4:é‡å¯é˜²ç«å¢™</span></span><br><span class="line"></span><br><span class="line">systemctl enable firewalld</span><br><span class="line">service iptables restart</span><br></pre></td></tr></table></figure>
<h2 id="3-é…ç½®SELinux"><a href="#3-é…ç½®SELinux" class="headerlink" title="3. é…ç½®SELinux"></a>3. é…ç½®SELinux</h2><p>SELinuxæ˜¯Linux å†…æ ¸ä¸­æä¾›çš„å¼ºåˆ¶è®¿é—®æ§åˆ¶ç³»ç»Ÿã€‚selinuxæœ‰disabledã€permissiveã€enforcing ä¸‰ç§é€‰æ‹©ï¼š</p>
<ul>
<li>disabled ï¼šä¸å¯ç”¨æ§åˆ¶ç³»ç»Ÿã€‚</li>
<li>permissiveï¼šå¼€å¯æ§åˆ¶ç³»ç»Ÿï¼Œä½†æ˜¯å¤„äºè­¦å‘Šæ¨¡å¼ã€‚å³ä½¿ä½ è¿åäº†ç­–ç•¥çš„è¯å®ƒè®©ä½ ç»§ç»­æ“ä½œï¼Œä½†æ˜¯æŠŠä½ çš„è¿åçš„å†…å®¹è®°å½•ä¸‹æ¥ã€‚</li>
<li>Enforcingï¼šå¼€å¯æ§åˆ¶ç³»ç»Ÿï¼Œå¤„äºå¼ºåˆ¶çŠ¶æ€ã€‚ä¸€æ—¦è¿åäº†ç­–ç•¥ï¼Œå°±æ— æ³•ç»§ç»­æ“ä½œä¸‹å»</li>
</ul>
<p>ä½¿ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /etc/sysconfig/</span><br><span class="line">vim selinux</span><br></pre></td></tr></table></figure>
<p><img src="/Installing-CentOS-system/3-1.png"> </p>
<h2 id="4-ä¿®æ”¹ipé…ç½®æ–‡ä»¶"><a href="#4-ä¿®æ”¹ipé…ç½®æ–‡ä»¶" class="headerlink" title="4.ä¿®æ”¹ipé…ç½®æ–‡ä»¶"></a>4.ä¿®æ”¹ipé…ç½®æ–‡ä»¶</h2><ol>
<li><p>è¿›å…¥æ–‡ä»¶ç›®å½•</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /etc/sysconfig/network-scripts/   #è¿›å…¥é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p> <img src="/Installing-CentOS-system/4-1.png"> </p>
</li>
<li><p>å†™å…¥é…ç½®ä¿¡æ¯å¹¶ä¿å­˜é€€å‡º</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim ifcfg-ens33 #ç¼–è¾‘é…ç½®æ–‡ä»¶ifcfg-ens33</span><br></pre></td></tr></table></figure>
<p> å¦‚æœè¦è®¾ç½®å›ºå®šIPçš„è¯ï¼Œå¸¸è§è®¾ç½®å±æ€§æœ‰ï¼šBOOTPROTOã€ONBOOTã€IPADDRã€NETMASKã€GATEWAY</p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä»¥ä¸‹ä¸ºé…ç½®æ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line"><span class="string">TYPE=&quot;Ethernet&quot;</span>		<span class="comment">#ç½‘å¡ç±»å‹ï¼ˆé€šå¸¸æ˜¯Ethemetä»¥å¤ªç½‘ï¼‰</span></span><br><span class="line"><span class="string">PROXY_METHOD=&quot;none&quot;</span>	<span class="comment">#ä»£ç†æ–¹å¼ï¼šä¸ºå…³é—­çŠ¶æ€</span></span><br><span class="line"><span class="string">BROWSER_ONLY=&quot;no&quot;</span>	<span class="comment">#åªæ˜¯æµè§ˆå™¨ï¼šå¦</span></span><br><span class="line"><span class="string">BOOTPROTO=&quot;static&quot;</span>	<span class="comment">#ç½‘å¡çš„å¼•å¯¼åè®®ã€staticï¼šé™æ€IP(æŒ‡å®šé™æ€åIPåœ°å€å°±å›ºå®šäº†,ä¸å»ºè®®é‡‡ç”¨åŠ¨æ€åˆ†é…)  dhcpï¼šåŠ¨æ€IP   noneï¼šä¸æŒ‡å®šï¼Œä¸æŒ‡å®šå®¹æ˜“å‡ºç°å„ç§å„æ ·çš„ç½‘ç»œå—é™ã€‘</span></span><br><span class="line"><span class="string">DEFROUTE=&quot;yes&quot;</span>		<span class="comment">#é»˜è®¤è·¯ç”±</span></span><br><span class="line"><span class="string">IPV4_FAILURE_FATAL=&quot;no&quot;</span>		<span class="comment">#æ˜¯å¦å¼€å¯IPV4è‡´å‘½é”™è¯¯æ£€æµ‹</span></span><br><span class="line"><span class="string">IPV6INIT=&quot;yes&quot;</span>		<span class="comment">#IPV6æ˜¯å¦è‡ªåŠ¨åˆå§‹åŒ–ï¼šæ˜¯ï¼ˆç°åœ¨è¿˜æœªç”¨åˆ°IPV6ï¼Œä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼‰</span></span><br><span class="line"><span class="string">IPV6_AUTOCONF=&quot;yes&quot;</span>	<span class="comment">#IPV6æ˜¯å¦è‡ªåŠ¨é…ç½®ï¼šæ˜¯ï¼ˆç°åœ¨è¿˜æœªç”¨åˆ°IPV6ï¼Œä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼‰</span></span><br><span class="line"><span class="string">IPV6_DEFROUTE=&quot;yes&quot;</span>	<span class="comment">#IPV6æ˜¯å¦å¯ä»¥ä¸ºé»˜è®¤è·¯ç”±ï¼šæ˜¯ï¼ˆç°åœ¨è¿˜æœªç”¨åˆ°IPV6ï¼Œä¸ä¼šæœ‰ä»»ä½•å½±å“ï¼‰</span></span><br><span class="line"><span class="string">IPV6_FAILURE_FATAL=&quot;no&quot;</span>		<span class="comment">#æ˜¯å¦å¼€å¯IPV6è‡´å‘½é”™è¯¯æ£€æµ‹</span></span><br><span class="line"><span class="string">IPV6_ADDR_GEN_MODE=&quot;stable-privacy&quot;</span>	<span class="comment">#IPV6åœ°å€ç”Ÿæˆæ¨¡å‹</span></span><br><span class="line"><span class="string">NAME=&quot;ens33&quot;</span>		<span class="comment">#ç½‘å¡ç‰©ç†è®¾å¤‡åç§°</span></span><br><span class="line"><span class="string">UUID=&quot;ab60d501-535b-49f5-a76b-3336a4120f64&quot;</span> <span class="comment">#é€šç”¨å”¯ä¸€è¯†åˆ«ç ï¼Œæ¯ä¸€ä¸ªç½‘å¡éƒ½ä¼šæœ‰ï¼Œä¸èƒ½é‡å¤ï¼Œå¦åˆ™ä¸¤å°linuxæœºå™¨åªæœ‰ä¸€å°å¯ä¸Šç½‘,å¯ä¸å†™</span></span><br><span class="line"><span class="string">DEVICE=&quot;ens33&quot;</span>		<span class="comment">#ç½‘å¡è®¾å¤‡åç§°ï¼Œå¿…é¡»å’Œâ€˜NAMEâ€™å€¼ä¸€æ ·</span></span><br><span class="line"><span class="string">ONBOOT=&quot;yes&quot;</span>		<span class="comment">#æ˜¯å¦å¼€æœºå¯åŠ¨(å¦‚æœyesåˆ™å¼€æœºåè‡ªåŠ¨åŠ è½½ä½¿ç”¨å½“å‰é…ç½®æ–‡ä»¶)ï¼Œè¦æƒ³ç½‘å¡å¼€æœºå°±å¯åŠ¨æˆ–é€šè¿‡ `systemctl restart network`æ§åˆ¶ç½‘å¡,å¿…é¡»è®¾ç½®ä¸º `yes`</span></span><br><span class="line"><span class="string">IPADDR=192.168.1.111</span>		<span class="comment"># æœ¬æœºIP è®¾ç½®å›ºå®šIP å¯¹åº”ä¸Šé¢çš„BOOTPROTO</span></span><br><span class="line"><span class="string">NETMASK=255.255.255.0</span>		<span class="comment">#å­ç½‘æ©ç  ,å¯ä¸å†™</span></span><br><span class="line"><span class="string">GATEWAY=192.168.137.2</span>		<span class="comment">#é»˜è®¤ç½‘å…³ ,å¯ä¸å†™</span></span><br><span class="line"><span class="string">DNS1=8.8.8.8</span> <span class="comment"># å¯ä¸å†™</span></span><br><span class="line"><span class="string">DNS2=8.8.8.5</span> <span class="comment"># å¯ä¸å†™</span></span><br><span class="line"><span class="string">ZONE=public</span> <span class="comment"># å¯ä¸å†™</span></span><br></pre></td></tr></table></figure></li>
<li><p>é‡å¯ç½‘ç»œæœåŠ¡</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service network restart  #é‡å¯ç½‘å¡</span><br></pre></td></tr></table></figure>
<p> <img src="/Installing-CentOS-system/4-2.png"> </p>
</li>
<li><p>æŸ¥çœ‹IP</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ip addr</span><br></pre></td></tr></table></figure>
<p> <img src="/Installing-CentOS-system/4-3.png"> </p>
</li>
<li><p>é‡å¯ç³»ç»Ÿ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaä¸­å°†Liståˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²</title>
    <url>/list-to-string/</url>
    <content><![CDATA[<h3 id="1-toString-æ–¹æ³•"><a href="#1-toString-æ–¹æ³•" class="headerlink" title="1. toString() æ–¹æ³•"></a>1. toString() æ–¹æ³•</h3><p>List.toString()æ˜¯æœ€ç®€å•çš„ï¼Œä½†å®ƒåœ¨å¼€å¤´å’Œç»“å°¾æ·»åŠ æ–¹æ‹¬å·ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²ç”¨é€—å·åˆ†éš”ç¬¦åˆ†éš”ã€‚<br>ç¼ºç‚¹æ˜¯æˆ‘ä»¬ä¸èƒ½ç”¨å¦ä¸€ä¸ªåˆ†éš”ç¬¦æ›¿æ¢é€—å·ï¼Œä¹Ÿä¸èƒ½å»æ‰æ–¹æ‹¬å·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListToStringUsingToStringExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// creating a list with strings.</span></span><br><span class="line">    List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;One&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;Two&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;Three&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;Four&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;Five&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// converting List&lt;String&gt; to String using toString() method</span></span><br><span class="line">    String stringFromList = list.toString();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// priting the string</span></span><br><span class="line">    System.out.println(<span class="string">&quot;String : &quot;</span>+stringFromList);        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šString : [One, Two, Three, Four, Five]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Java-8-String-join"><a href="#2-Java-8-String-join" class="headerlink" title="2. Java 8 String.join()"></a>2. Java 8 String.join()</h3><p>java 8 Stringæ·»åŠ äº†ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•String.join()ä»¥å°†é›†åˆè½¬æ¢ä¸ºå…·æœ‰ç»™å®šåˆ†éš”ç¬¦çš„å­—ç¬¦ä¸²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListToStringUsingString_JoinExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// creating a list with strings.</span></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;One&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Two&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Three&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Four&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Five&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// converting List&lt;String&gt; to String using toString() method</span></span><br><span class="line">        String stringFromList = String.join(<span class="string">&quot;~&quot;</span>, list);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// priting the string</span></span><br><span class="line">        System.out.println(<span class="string">&quot;String with tilde delimiter: &quot;</span>+stringFromList);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// delimiting with pipe | symbol.</span></span><br><span class="line">        String stringPipe = String.join(<span class="string">&quot;|&quot;</span>, list);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// printing</span></span><br><span class="line">        System.out.println(<span class="string">&quot;String with pipe delimiter : &quot;</span>+stringPipe);</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">//  String with tilde delimiter: One~Two~Three~Four~Five</span></span><br><span class="line"><span class="comment">//  String with pipe delimiter : One|Two|Three|Four|Five</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Collectors-joining"><a href="#3-Collectors-joining" class="headerlink" title="3. Collectors.joining()"></a>3. Collectors.joining()</h3><p>Collectors.join()æ–¹æ³•æ¥è‡ª java 8 stream apiã€‚Collctors.joining()æ–¹æ³•å°†åˆ†éš”ç¬¦ã€å‰ç¼€å’Œåç¼€ä½œä¸ºå‚æ•°ã€‚æ­¤æ–¹æ³•å°†åˆ—è¡¨è½¬æ¢ä¸ºå…·æœ‰ç»™å®šåˆ†éš”ç¬¦ã€å‰ç¼€å’Œåç¼€çš„å­—ç¬¦ä¸²ã€‚</p>
<p>æŸ¥çœ‹ä»¥ä¸‹æœ‰å…³ä½¿ç”¨ä¸åŒåˆ†éš”ç¬¦çš„ join() æ–¹æ³•çš„ç¤ºä¾‹ã€‚ä½†æ˜¯ï¼ŒString.join() æ–¹æ³•ä¸æä¾›å‰ç¼€å’Œåç¼€é€‰é¡¹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListToStringUsingString_JoinExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// creating a list with strings.</span></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;One&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Two&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Three&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Four&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Five&quot;</span>);</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// using java 8 Collectors.joining with delimiter, prefix and suffix</span></span><br><span class="line">        String joiningString = list.stream().collect(Collectors.joining(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&#123;&quot;</span>, <span class="string">&quot;&#125;&quot;</span>));</span><br><span class="line">        <span class="comment">// printing</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Collectors.joining string : &quot;</span>+joiningString);</span><br><span class="line">        String joiningString3 = list.stream().collect(Collectors.joining(<span class="string">&quot;@&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="comment">// printing</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Collectors.joining string with @ separator : &quot;</span>+joiningString3);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">//Collectors.joining string : &#123;One-Two-Three-Four-Five&#125;</span></span><br><span class="line"><span class="comment">//Collectors.joining string with @ separator : One@Two@Three@Four@Five</span></span><br></pre></td></tr></table></figure>
<h3 id="4-Apache-Commons-StringUtils-join"><a href="#4-Apache-Commons-StringUtils-join" class="headerlink" title="4. Apache Commons StringUtils.join()"></a>4. Apache Commons StringUtils.join()</h3><p>ä½¿ç”¨æ¥è‡ª apache commons åŒ…çš„å¤–éƒ¨åº“ã€‚è¯¥åº“æœ‰ä¸€ä¸ªæ–¹æ³•StringUtils.join() ï¼Œå®ƒé‡‡ç”¨ç±»ä¼¼äº String.join() æ–¹æ³•çš„åˆ—è¡¨å’Œåˆ†éš”ç¬¦</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListToStringUsingStringUtils_JoinExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// creating a list with strings.</span></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;One&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Two&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Three&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Four&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;Five&quot;</span>);</span><br><span class="line">    </span><br><span class="line">        <span class="comment">// using java 8 Collectors.joining with delimiter, prefix and suffix</span></span><br><span class="line">        String joiningString = StringUtils.join(list, <span class="string">&quot;^&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// printing</span></span><br><span class="line">        System.out.println(<span class="string">&quot;StringUtils.join string with ^ delimiter : &quot;</span>+joiningString);</span><br><span class="line">        </span><br><span class="line">        String joiningString3 = StringUtils.join(list, <span class="string">&quot;$&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// printing</span></span><br><span class="line">        System.out.println(<span class="string">&quot;StringUtils.join string with @ separator : &quot;</span>+joiningString3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">//  StringUtils.join string with ^ delimiter : One^Two^Three^Four^Five</span></span><br><span class="line"><span class="comment">//  StringUtils.join string with @ separator : One$Two$Three$Four$Five</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>é›†åˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>linuxå…³æœºå‘½ä»¤</title>
    <url>/shutdown/</url>
    <content><![CDATA[<h3 id="1-shutdownå‘½ä»¤"><a href="#1-shutdownå‘½ä»¤" class="headerlink" title="1. shutdownå‘½ä»¤"></a>1. shutdownå‘½ä»¤</h3><p>shutdownä¼šç»™ç³»ç»Ÿè®¡åˆ’ä¸€ä¸ªæ—¶é—´å…³æœºã€‚å®ƒå¯ä»¥è¢«ç”¨äºåœæ­¢ã€å…³æœºã€é‡å¯æœºå™¨ã€‚<br>ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²ï¼ˆé€šå¸¸æ˜¯ nowæˆ–è€…ç”¨hh:mm æŒ‡å®šå°æ—¶/åˆ†é’Ÿï¼‰ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<p>shutdownå‘½ä»¤ç¤ºä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">shutdown</span><br><span class="line"></span><br><span class="line">shutdown now  #ç«‹å³å…³æœº</span><br><span class="line"></span><br><span class="line">shutdown 13:20  # ä¸‹åˆ13ï¼š20å…³æœº</span><br><span class="line"></span><br><span class="line">shutdown -p now  ### å…³é—­æœºå™¨</span><br><span class="line"></span><br><span class="line">shutdown -H now  ### åœæ­¢æœºå™¨      </span><br><span class="line"></span><br><span class="line">shutdown -r09:35 ### åœ¨ 09:35am é‡å¯æœºå™¨</span><br><span class="line"></span><br><span class="line">shutdown -c  ## å–æ¶ˆå…³æœº</span><br></pre></td></tr></table></figure>

<h3 id="2-halt-å‘½ä»¤"><a href="#2-halt-å‘½ä»¤" class="headerlink" title="2. halt å‘½ä»¤"></a>2. halt å‘½ä»¤</h3><p>halté€šçŸ¥ç¡¬ä»¶æ¥åœæ­¢æ‰€æœ‰çš„ CPU åŠŸèƒ½ï¼Œä½†æ˜¯ä»ç„¶ä¿æŒé€šç”µã€‚ä½ å¯ä»¥ç”¨å®ƒä½¿ç³»ç»Ÿå¤„äºä½å±‚ç»´æŠ¤çŠ¶æ€ã€‚<br>æ³¨æ„åœ¨æœ‰äº›æƒ…å†µä¼šå®ƒä¼šå®Œå…¨å…³é—­ç³»ç»Ÿã€‚</p>
<p>halt å‘½ä»¤ç¤ºä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">halt             ### åœæ­¢æœºå™¨</span><br><span class="line"></span><br><span class="line">halt -p          ### å…³é—­æœºå™¨</span><br><span class="line"></span><br><span class="line">halt --reboot    ### é‡å¯æœºå™¨</span><br></pre></td></tr></table></figure>

<h3 id="3-poweroff-å‘½ä»¤"><a href="#3-poweroff-å‘½ä»¤" class="headerlink" title="3.poweroff å‘½ä»¤"></a>3.poweroff å‘½ä»¤</h3><p>poweroffä¼šå‘é€ä¸€ä¸ª ACPI ä¿¡å·æ¥é€šçŸ¥ç³»ç»Ÿå…³æœº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">poweroff           ### å…³é—­æœºå™¨</span><br><span class="line"></span><br><span class="line">poweroff --halt    ### åœæ­¢æœºå™¨</span><br><span class="line"></span><br><span class="line">poweroff --reboot  ### é‡å¯æœºå™¨</span><br></pre></td></tr></table></figure>

<h3 id="4-reboot-å‘½ä»¤"><a href="#4-reboot-å‘½ä»¤" class="headerlink" title="4.reboot å‘½ä»¤"></a>4.reboot å‘½ä»¤</h3><p>reboot é€šçŸ¥ç³»ç»Ÿé‡å¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reboot           ### é‡å¯æœºå™¨</span><br><span class="line"></span><br><span class="line">reboot --halt    ### åœæ­¢æœºå™¨</span><br><span class="line"></span><br><span class="line">reboot -p        ### å…³é—­æœºå™¨</span><br></pre></td></tr></table></figure>

<h3 id="5-init-å‘½ä»¤"><a href="#5-init-å‘½ä»¤" class="headerlink" title="5. init å‘½ä»¤"></a>5. init å‘½ä»¤</h3><p>ä¸€. initæ˜¯Linuxç³»ç»Ÿæ“ä½œä¸­ä¸å¯ç¼ºå°‘çš„ç¨‹åºä¹‹ä¸€ã€‚<br>æ‰€è°“çš„initè¿›ç¨‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”±å†…æ ¸å¯åŠ¨çš„ç”¨æˆ·çº§è¿›ç¨‹ã€‚<br>å†…æ ¸è‡ªè¡Œå¯åŠ¨ï¼ˆå·²ç»è¢«è½½å…¥å†…å­˜ï¼Œå¼€å§‹è¿è¡Œï¼Œå¹¶å·²åˆå§‹åŒ–æ‰€æœ‰çš„è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œæ•°æ®ç»“æ„ç­‰ï¼‰ä¹‹åï¼Œå°±é€šè¿‡å¯åŠ¨ä¸€ä¸ªç”¨æˆ·çº§ç¨‹åºinitçš„æ–¹å¼ï¼Œå®Œæˆå¼•å¯¼è¿›ç¨‹ã€‚æ‰€ä»¥,initå§‹ç»ˆæ˜¯ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆå…¶è¿›ç¨‹ç¼–å·å§‹ç»ˆä¸º1ï¼‰ã€‚<br>å†…æ ¸ä¼šåœ¨è¿‡å»æ›¾ä½¿ç”¨è¿‡initçš„å‡ ä¸ªåœ°æ–¹æŸ¥æ‰¾å®ƒï¼Œå®ƒçš„æ­£ç¡®ä½ç½®ï¼ˆå¯¹Linuxç³»ç»Ÿæ¥è¯´ï¼‰æ˜¯/sbin/initã€‚å¦‚æœå†…æ ¸æ‰¾ä¸åˆ°initï¼Œå®ƒå°±ä¼šè¯•ç€è¿è¡Œ/bin/shï¼Œå¦‚æœè¿è¡Œå¤±è´¥ï¼Œç³»ç»Ÿçš„å¯åŠ¨ä¹Ÿä¼šå¤±è´¥ã€‚</p>
<p>äºŒ. initä¸€å…±åˆ†ä¸º7ä¸ªçº§åˆ«ï¼Œè¿™7ä¸ªçº§åˆ«çš„æ‰€ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹</p>
<p>0ï¼šåœæœºæˆ–è€…å…³æœºï¼ˆåƒä¸‡ä¸èƒ½å°†initdefaultè®¾ç½®ä¸º0ï¼‰</p>
<p>1ï¼šå•ç”¨æˆ·æ¨¡å¼ï¼Œåªrootç”¨æˆ·è¿›è¡Œç»´æŠ¤</p>
<p>2ï¼šå¤šç”¨æˆ·æ¨¡å¼ï¼Œä¸èƒ½ä½¿ç”¨NFS(Net File System)</p>
<p>3ï¼šå®Œå…¨å¤šç”¨æˆ·æ¨¡å¼ï¼ˆæ ‡å‡†çš„è¿è¡Œçº§åˆ«ï¼‰</p>
<p>4ï¼šå®‰å…¨æ¨¡å¼</p>
<p>5ï¼šå›¾å½¢åŒ–ï¼ˆå³å›¾å½¢ç•Œé¢ï¼‰</p>
<p>6ï¼šé‡å¯ï¼ˆåƒä¸‡ä¸è¦æŠŠinitdefaultè®¾ç½®ä¸º6ï¼‰</p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>shutdown</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒåˆ†æ³•æŸ¥æ‰¾é¢˜</title>
    <url>/algorithm-dinary-search/</url>
    <content><![CDATA[<h3 id="1-ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬"><a href="#1-ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬" class="headerlink" title="1. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬"></a>1. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬</h3><h3 id="1-1-é¢˜ç›®æè¿°"><a href="#1-1-é¢˜ç›®æè¿°" class="headerlink" title="1.1 é¢˜ç›®æè¿°"></a>1.1 é¢˜ç›®æè¿°</h3><p>ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚<br>å‡è®¾ä½ æœ‰ n ä¸ªç‰ˆæœ¬ [1, 2, â€¦, n]ï¼Œä½ æƒ³æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚<br>ä½ å¯ä»¥é€šè¿‡è°ƒç”¨bool isBadVersion(version)æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· version æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚<br>ç¤ºä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 5, bad = 4</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">    è°ƒç”¨ isBadVersion(3) -&gt; false </span><br><span class="line">    è°ƒç”¨ isBadVersion(5) -&gt; true </span><br><span class="line">    è°ƒç”¨ isBadVersion(4) -&gt; true</span><br><span class="line">æ‰€ä»¥ï¼Œ4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬</span><br></pre></td></tr></table></figure>

<h3 id="1-2-è§£é¢˜æ€è·¯"><a href="#1-2-è§£é¢˜æ€è·¯" class="headerlink" title="1.2 è§£é¢˜æ€è·¯"></a>1.2 è§£é¢˜æ€è·¯</h3><p>å½“ä¸€ä¸ªç‰ˆæœ¬ä¸ºæ­£ç¡®ç‰ˆæœ¬ï¼Œåˆ™è¯¥ç‰ˆæœ¬ä¹‹å‰çš„æ‰€æœ‰ç‰ˆæœ¬å‡ä¸ºæ­£ç¡®ç‰ˆæœ¬ï¼›å½“ä¸€ä¸ªç‰ˆæœ¬ä¸ºé”™è¯¯ç‰ˆæœ¬ï¼Œåˆ™è¯¥ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬å‡ä¸ºé”™è¯¯ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ€§è´¨è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚</p>
<p>å…·ä½“åœ°ï¼Œå°†å·¦å³è¾¹ç•Œåˆ†åˆ«åˆå§‹åŒ–ä¸º 1å’Œ n ï¼Œå…¶ä¸­ n æ˜¯ç»™å®šçš„ç‰ˆæœ¬æ•°é‡ã€‚è®¾å®šå·¦å³è¾¹ç•Œä¹‹åï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½ä¾æ®å·¦å³è¾¹ç•Œæ‰¾åˆ°å…¶ä¸­é—´çš„ç‰ˆæœ¬ï¼Œæ£€æŸ¥å…¶æ˜¯å¦ä¸ºæ­£ç¡®ç‰ˆæœ¬ã€‚å¦‚æœè¯¥ç‰ˆæœ¬ä¸ºæ­£ç¡®ç‰ˆæœ¬ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬å¿…ç„¶ä½äºè¯¥ç‰ˆæœ¬çš„å³ä¾§ï¼Œæˆ‘ä»¬ç¼©ç´§å·¦è¾¹ç•Œï¼›å¦åˆ™ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬å¿…ç„¶ä½äºè¯¥ç‰ˆæœ¬åŠè¯¥ç‰ˆæœ¬çš„å·¦ä¾§ï¼Œæˆ‘ä»¬ç¼©ç´§å³è¾¹ç•Œã€‚<br>è¿™æ ·æˆ‘ä»¬æ¯åˆ¤æ–­ä¸€æ¬¡éƒ½å¯ä»¥ç¼©ç´§ä¸€æ¬¡è¾¹ç•Œï¼Œè€Œæ¯æ¬¡ç¼©ç´§æ—¶ä¸¤è¾¹ç•Œè·ç¦»å°†å˜ä¸ºåŸæ¥çš„ä¸€åŠï¼Œå› æ­¤æˆ‘ä»¬è‡³å¤šåªéœ€è¦ç¼©ç´§ O(logn) æ¬¡ã€‚</p>
<h3 id="1-3-ä»£ç "><a href="#1-3-ä»£ç " class="headerlink" title="1.3 ä»£ç "></a>1.3 ä»£ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">firstBadVersion</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">1</span>, right = n;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;    <span class="comment">// é˜²æ­¢è®¡ç®—æ—¶æº¢å‡º</span></span><br><span class="line">        <span class="keyword">if</span> (isBadVersion(mid))&#123;</span><br><span class="line">            <span class="comment">// ç­”æ¡ˆåœ¨åŒºé—´ [left, mid] ä¸­</span></span><br><span class="line">           right = mid; <span class="comment">//å¦‚æœä¸­é—´ç‰ˆæœ¬æ˜¯é”™è¯¯çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå®ƒä¹‹åçš„éƒ½æ˜¯é”™è¯¯çš„;</span></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ç­”æ¡ˆåœ¨åŒºé—´ [mid+1, right] ä¸­</span></span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ­¤æ—¶æœ‰ left == right,é€€å‡ºäº†whileå¾ªç¯</span></span><br><span class="line">    <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>TIDBè®¾ç½®sql_mode</title>
    <url>/sql-model/</url>
    <content><![CDATA[<h3 id="1-ä½¿ç”¨å‘½ä»¤æŸ¥è¯¢å½“å‰sql-mode"><a href="#1-ä½¿ç”¨å‘½ä»¤æŸ¥è¯¢å½“å‰sql-mode" class="headerlink" title="1. ä½¿ç”¨å‘½ä»¤æŸ¥è¯¢å½“å‰sql_mode"></a>1. ä½¿ç”¨å‘½ä»¤æŸ¥è¯¢å½“å‰sql_mode</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> @<span class="variable">@sql</span>_mode</span><br><span class="line"><span class="comment">-- æˆ–è€…</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@GLOBAL</span>.sql_mode</span><br></pre></td></tr></table></figure>
<p><img src="/sql-model/1.png" alt="sql_mode"></p>
<h5 id="sql-modeå¸¸ç”¨å€¼ï¼š"><a href="#sql-modeå¸¸ç”¨å€¼ï¼š" class="headerlink" title="sql_modeå¸¸ç”¨å€¼ï¼š"></a>sql_modeå¸¸ç”¨å€¼ï¼š</h5><ul>
<li><p>ONLY_FULL_GROUP_BY<br>å¯¹äºGROUP BYèšåˆæ“ä½œï¼Œå¦‚æœåœ¨SELECTä¸­çš„åˆ—ï¼Œæ²¡æœ‰åœ¨GROUP BYä¸­å‡ºç°ï¼Œé‚£ä¹ˆè¿™ä¸ªSQLæ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸ºåˆ—ä¸åœ¨GROUP BYä»å¥ä¸­</p>
</li>
<li><p>NO_AUTO_VALUE_ON_ZERO<br>è¯¥å€¼å½±å“è‡ªå¢é•¿åˆ—çš„æ’å…¥ã€‚é»˜è®¤è®¾ç½®ä¸‹ï¼Œæ’å…¥0æˆ–NULLä»£è¡¨ç”Ÿæˆä¸‹ä¸€ä¸ªè‡ªå¢é•¿å€¼ã€‚å¦‚æœç”¨æˆ·å¸Œæœ›æ’å…¥çš„å€¼ä¸º0ï¼Œè€Œè¯¥åˆ—åˆæ˜¯è‡ªå¢é•¿çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªé€‰é¡¹å°±æœ‰ç”¨äº†ã€‚</p>
</li>
<li><p>STRICT_TRANS_TABLES<br>åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œå¦‚æœä¸€ä¸ªå€¼ä¸èƒ½æ’å…¥åˆ°ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåˆ™ä¸­æ–­å½“å‰çš„æ“ä½œï¼Œå¯¹éäº‹åŠ¡è¡¨ä¸åšé™åˆ¶</p>
</li>
<li><p>NO_ZERO_IN_DATE<br>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¸å…è®¸æ—¥æœŸå’Œæœˆä»½ä¸ºé›¶</p>
</li>
<li><p>NO_ZERO_DATE<br>è®¾ç½®è¯¥å€¼ï¼Œmysqlæ•°æ®åº“ä¸å…è®¸æ’å…¥é›¶æ—¥æœŸï¼Œæ’å…¥é›¶æ—¥æœŸä¼šæŠ›å‡ºé”™è¯¯è€Œä¸æ˜¯è­¦å‘Š</p>
</li>
<li><p>ERROR_FOR_DIVISION_BY_ZERO<br>åœ¨insertæˆ–updateè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ•°æ®è¢«é›¶é™¤ï¼Œåˆ™äº§ç”Ÿé”™è¯¯è€Œéè­¦å‘Šã€‚å¦‚æœæœªç»™å‡ºè¯¥æ¨¡å¼ï¼Œé‚£ä¹ˆæ•°æ®è¢«é›¶é™¤æ—¶Mysqlè¿”å›NULL</p>
</li>
<li><p>NO_AUTO_CREATE_USER<br>ç¦æ­¢GRANTåˆ›å»ºå¯†ç ä¸ºç©ºçš„ç”¨æˆ·</p>
</li>
<li><p>NO_ENGINE_SUBSTITUTION<br>å¦‚æœéœ€è¦çš„å­˜å‚¨å¼•æ“è¢«ç¦ç”¨æˆ–æœªç¼–è¯‘ï¼Œé‚£ä¹ˆæŠ›å‡ºé”™è¯¯ã€‚ä¸è®¾ç½®æ­¤å€¼æ—¶ï¼Œç”¨é»˜è®¤çš„å­˜å‚¨å¼•æ“æ›¿ä»£ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</p>
</li>
<li><p>PIPES_AS_CONCAT<br>å°†â€||â€è§†ä¸ºå­—ç¬¦ä¸²çš„è¿æ¥æ“ä½œç¬¦è€Œéæˆ–è¿ç®—ç¬¦ï¼Œè¿™å’ŒOracleæ•°æ®åº“æ˜¯ä¸€æ ·æ˜¯ï¼Œä¹Ÿå’Œå­—ç¬¦ä¸²çš„æ‹¼æ¥å‡½æ•°Concatæƒ³ç±»ä¼¼</p>
</li>
<li><p>ANSI_QUOTES<br>å¯ç”¨ANSI_QUOTESåï¼Œä¸èƒ½ç”¨åŒå¼•å·æ¥å¼•ç”¨å­—ç¬¦ä¸²ï¼Œå› ä¸ºå®ƒè¢«è§£é‡Šä¸ºè¯†åˆ«ç¬¦</p>
</li>
</ul>
<h3 id="2-ä¸´æ—¶è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¹‹å‰çš„sql-modeï¼‰"><a href="#2-ä¸´æ—¶è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¹‹å‰çš„sql-modeï¼‰" class="headerlink" title="2. ä¸´æ—¶è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¹‹å‰çš„sql_modeï¼‰"></a>2. ä¸´æ—¶è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¹‹å‰çš„sql_modeï¼‰</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> sql_mode<span class="operator">=</span>â€˜ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLESâ€™;</span><br></pre></td></tr></table></figure>

<h3 id="3-å…¨å±€è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¿®æ”¹åçš„sql-modeï¼‰"><a href="#3-å…¨å±€è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¿®æ”¹åçš„sql-modeï¼‰" class="headerlink" title="3. å…¨å±€è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¿®æ”¹åçš„sql_modeï¼‰"></a>3. å…¨å±€è®¾ç½®ï¼ˆæ–°sessionä»ç„¶ä½¿ç”¨ä¿®æ”¹åçš„sql_modeï¼‰</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> @<span class="variable">@global</span>.sql_mode<span class="operator">=</span><span class="string">&#x27;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATEâ€˜ï¼›</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>tidb</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlæ·»åŠ /ä¿®æ”¹/åˆ é™¤å­—æ®µ</title>
    <url>/mysql-column/</url>
    <content><![CDATA[<h3 id="1-æ·»åŠ å­—æ®µ"><a href="#1-æ·»åŠ å­—æ®µ" class="headerlink" title="1. æ·»åŠ å­—æ®µ"></a>1. æ·»åŠ å­—æ®µ</h3><h4 id="1-1-åœ¨æœ«å°¾æ·»åŠ å­—æ®µ"><a href="#1-1-åœ¨æœ«å°¾æ·»åŠ å­—æ®µ" class="headerlink" title="1.1 åœ¨æœ«å°¾æ·»åŠ å­—æ®µ"></a>1.1 åœ¨æœ«å°¾æ·»åŠ å­—æ®µ</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="operator">&lt;</span>å­—æ®µå<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [çº¦æŸæ¡ä»¶];</span><br></pre></td></tr></table></figure>
<p>è¯­æ³•æ ¼å¼çš„è¯´æ˜ï¼š</p>
<ul>
<li>&lt;è¡¨å&gt; ä¸ºæ•°æ®è¡¨çš„åå­—ï¼›</li>
<li>&lt;å­—æ®µå&gt; ä¸ºæ‰€è¦æ·»åŠ çš„å­—æ®µçš„åå­—ï¼›</li>
<li>&lt;æ•°æ®ç±»å‹&gt; ä¸ºæ‰€è¦æ·»åŠ çš„å­—æ®µèƒ½å­˜å‚¨æ•°æ®çš„æ•°æ®ç±»å‹ï¼›</li>
<li>[çº¦æŸæ¡ä»¶] æ˜¯å¯é€‰çš„ï¼Œç”¨æ¥å¯¹æ·»åŠ çš„å­—æ®µè¿›è¡Œçº¦æŸã€‚</li>
<li>è¿™ç§è¯­æ³•æ ¼å¼é»˜è®¤åœ¨è¡¨çš„æœ€åä½ç½®ï¼ˆæœ€åä¸€åˆ—çš„åé¢ï¼‰æ·»åŠ æ–°å­—æ®µ</li>
</ul>
<p>2ï¼‰ç¤ºä¾‹ï¼šåœ¨userè¡¨æœ«å°¾æ·»åŠ å­—æ®µphone</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> phone <span class="type">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”µè¯å·ç &#x27;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="1-2-åœ¨å¼€å¤´æ·»åŠ å­—æ®µ"><a href="#1-2-åœ¨å¼€å¤´æ·»åŠ å­—æ®µ" class="headerlink" title="1.2 åœ¨å¼€å¤´æ·»åŠ å­—æ®µ"></a>1.2 åœ¨å¼€å¤´æ·»åŠ å­—æ®µ</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="operator">&lt;</span>å­—æ®µå<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [çº¦æŸæ¡ä»¶] <span class="keyword">FIRST</span>;</span><br></pre></td></tr></table></figure>
<p>FIRST å…³é”®å­—ä¸€èˆ¬æ”¾åœ¨è¯­å¥çš„æœ«å°¾<br>2ï¼‰ç¤ºä¾‹ï¼šåœ¨userè¡¨å¼€å¤´æ·»åŠ å­—æ®µuser_id</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> user_id <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·ä¸»é”®&#x27;</span> <span class="keyword">FIRST</span>;</span><br></pre></td></tr></table></figure>
<h4 id="1-3-åœ¨ä¸­é—´æ·»åŠ å­—æ®µ"><a href="#1-3-åœ¨ä¸­é—´æ·»åŠ å­—æ®µ" class="headerlink" title="1.3 åœ¨ä¸­é—´æ·»åŠ å­—æ®µ"></a>1.3 åœ¨ä¸­é—´æ·»åŠ å­—æ®µ</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">ADD</span> <span class="operator">&lt;</span>å­—æ®µå<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [çº¦æŸæ¡ä»¶] AFTER <span class="operator">&lt;</span>å·²ç»å­˜åœ¨çš„å­—æ®µå<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>
<p>AFTER çš„ä½œç”¨æ˜¯å°†æ–°å­—æ®µæ·»åŠ åˆ°æŸä¸ªå·²æœ‰å­—æ®µåé¢ã€‚<br>æ³¨æ„ï¼šåªèƒ½åœ¨æŸä¸ªå·²æœ‰å­—æ®µçš„åé¢æ·»åŠ æ–°å­—æ®µï¼Œä¸èƒ½åœ¨å®ƒçš„å‰é¢æ·»åŠ æ–°å­—æ®µ</p>
<p>2ï¼‰ç¤ºä¾‹ï¼šåœ¨userè¡¨çš„user_idå­—æ®µåæ·»åŠ usernameå­—æ®µ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> username <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span> AFTER `user_id`;</span><br></pre></td></tr></table></figure>
<h3 id="2-ä¿®æ”¹å­—æ®µ"><a href="#2-ä¿®æ”¹å­—æ®µ" class="headerlink" title="2. ä¿®æ”¹å­—æ®µ"></a>2. ä¿®æ”¹å­—æ®µ</h3><h4 id="2-1-ä¿®æ”¹å­—æ®µå±æ€§"><a href="#2-1-ä¿®æ”¹å­—æ®µå±æ€§" class="headerlink" title="2.1 ä¿®æ”¹å­—æ®µå±æ€§"></a>2.1 ä¿®æ”¹å­—æ®µå±æ€§</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> MODIFY <span class="operator">&lt;</span>å­—æ®µå<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [çº¦æŸæ¡ä»¶];</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ç¤ºä¾‹1ï¼šä¿®æ”¹å­—æ®µå±æ€§</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å°†emailå­—æ®µVARCHAR(50)ä¿®æ”¹æˆVARCHAR(200)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> MODIFY email <span class="type">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;email@163.com&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šä¿®æ”¹æ—¶å¦‚æœä¸å¸¦å®Œæ•´æ€§çº¦æŸæ¡ä»¶ï¼ŒåŸæœ‰çš„çº¦æŸæ¡ä»¶å°†ä¸¢å¤±ï¼Œå¦‚æœæƒ³ä¿ç•™ä¿®æ”¹æ—¶å°±å¾—å¸¦ä¸Šå®Œæ•´æ€§çº¦æŸæ¡ä»¶</p>
<p>3ï¼‰ç¤ºä¾‹2ï¼š å°†emailç§»åˆ°phoneåé¢</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> MODIFY email <span class="type">VARCHAR</span>(<span class="number">50</span>) AFTER `phone`;</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ç¤ºä¾‹3ï¼šæ”¾ç½®ç¬¬ä¸€ä¸ªï¼Œä¿ç•™åŸå®Œæˆæ€§çº¦æŸæ¡ä»¶</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span>`MODIFY email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;test@163.com&#x27;</span> <span class="keyword">FIRST</span>;</span><br></pre></td></tr></table></figure>
<p>5ï¼‰ç¤ºä¾‹4ï¼šä¿®æ”¹æˆå¤§å°å†™æ•æ„Ÿï¼Œå³æŸ¥è¯¢åŒºåˆ†å¤§å°å†™</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> MODIFY username <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="type">BINARY</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-ä¿®æ”¹å­—æ®µåç§°å’Œå±æ€§"><a href="#2-2-ä¿®æ”¹å­—æ®µåç§°å’Œå±æ€§" class="headerlink" title="2.2 ä¿®æ”¹å­—æ®µåç§°å’Œå±æ€§"></a>2.2 ä¿®æ”¹å­—æ®µåç§°å’Œå±æ€§</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> CHANGE <span class="operator">&lt;</span>åŸå­—æ®µå<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ–°å­—æ®µå<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [çº¦æŸæ¡ä»¶];</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ç¤ºä¾‹ï¼šå°†usernameå­—æ®µä¿®æ”¹æˆuser_name</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> CHANGE username user_name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-æ·»åŠ ã€åˆ é™¤é»˜è®¤å€¼"><a href="#2-3-æ·»åŠ ã€åˆ é™¤é»˜è®¤å€¼" class="headerlink" title="2.3 æ·»åŠ ã€åˆ é™¤é»˜è®¤å€¼"></a>2.3 æ·»åŠ ã€åˆ é™¤é»˜è®¤å€¼</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ·»åŠ é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="operator">&lt;</span>å­—æ®µå<span class="operator">&gt;</span> <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> <span class="operator">&lt;</span>é»˜è®¤å€¼<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="operator">&lt;</span>å­—æ®µå<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>;</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ç¤ºä¾‹ï¼šç»™sexæ·»åŠ é»˜è®¤å€¼</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">USER</span> <span class="keyword">ALTER</span> sex <span class="keyword">SET</span> <span class="keyword">DEFAULT</span>  <span class="string">&#x27;éš¾&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç¤ºä¾‹ï¼šåˆ é™¤sexé»˜è®¤å€¼</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ALTER</span> sex <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-æ·»åŠ ã€åˆ é™¤ä¸»é”®"><a href="#2-4-æ·»åŠ ã€åˆ é™¤ä¸»é”®" class="headerlink" title="2.4 æ·»åŠ ã€åˆ é™¤ä¸»é”®"></a>2.4 æ·»åŠ ã€åˆ é™¤ä¸»é”®</h4><ol>
<li>è¯­æ³•ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ·»åŠ ä¸»é”®</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>çº¦æŸå<span class="operator">&gt;</span>] <span class="keyword">PRIMARY</span> KEY (<span class="operator">&lt;</span>å­—æ®µåç§°,...<span class="operator">&gt;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤ä¸»é”®</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure>
2ï¼‰ç¤ºä¾‹ï¼šæ·»åŠ ä¸»é”®<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span>  KEY (user_id)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>3ï¼‰ç¤ºä¾‹ï¼šæ·»åŠ å¤åˆä¸»é”®</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  user_role <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (user_id, role_id);</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ç¤ºä¾‹ï¼šåˆ é™¤ä¸»é”®</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure>
<p>5ï¼‰ç¤ºä¾‹ï¼šåˆ é™¤å¸¦è‡ªå¢é•¿å±æ€§çš„ä¸»é”®</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å…ˆç”¨MODIFYåˆ é™¤è‡ªå¢é•¿å±æ€§ï¼Œæ³¨æ„MODIFYä¸èƒ½å»æ‰ä¸»é”®å±æ€§</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test MODIFY id <span class="type">INT</span> UNSIGNED;</span><br><span class="line"><span class="comment">-- å†æ¥åˆ é™¤ä¸»é”®</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></table></figure>
<h4 id="2-5-æ·»åŠ ã€åˆ é™¤å”¯ä¸€ç´¢å¼•"><a href="#2-5-æ·»åŠ ã€åˆ é™¤å”¯ä¸€ç´¢å¼•" class="headerlink" title="2.5 æ·»åŠ ã€åˆ é™¤å”¯ä¸€ç´¢å¼•"></a>2.5 æ·»åŠ ã€åˆ é™¤å”¯ä¸€ç´¢å¼•</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ·»åŠ å”¯ä¸€æ€§çº¦æŸ</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">ADD</span> [CONSTANT <span class="operator">&lt;</span>çº¦æŸå<span class="operator">&gt;</span>] <span class="keyword">UNIQUE</span> [INDEX <span class="operator">|</span> KEY] [ç´¢å¼•åç§°](<span class="operator">&lt;</span>å­—æ®µåç§°,...<span class="operator">&gt;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤å”¯ä¸€æ€§çº¦æŸ</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> <span class="keyword">DROP</span> [INDEX <span class="operator">|</span> KEY] [ç´¢å¼•åç§°];</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ç¤ºä¾‹ï¼šä¸ºusernameæ·»åŠ å”¯ä¸€æ€§çº¦æŸï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç´¢å¼•åç§°ï¼Œç³»ç»Ÿä¼šä»¥å­—æ®µåå»ºç«‹ç´¢å¼•</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(username);</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç¤ºä¾‹ï¼šä¸ºusernameæ·»åŠ å”¯ä¸€æ€§çº¦æŸï¼Œå¹¶æŒ‡å®šç´¢å¼•åç§°</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> <span class="keyword">UNION</span> KEY uni_username(username);</span><br></pre></td></tr></table></figure>
<p>4ï¼‰ç¤ºä¾‹ï¼šæŸ¥çœ‹ç´¢å¼•</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>
<p>5ï¼‰ç¤ºä¾‹ï¼šæ·»åŠ è”åˆUNIQUE</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> INDEX uni_nickname_username(nickname, username);</span><br></pre></td></tr></table></figure>
<p>6ï¼‰ç¤ºä¾‹ï¼šåˆ é™¤ç´¢å¼•</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">DROP</span> INDEX username;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">DROP</span> KEY uni_username;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">DROP</span> INDEX uni_nickname_username;</span><br></pre></td></tr></table></figure>
<h4 id="2-6-ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“"><a href="#2-6-ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“" class="headerlink" title="2.6 ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“"></a>2.6 ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> ENGINE<span class="operator">=</span><span class="operator">&lt;</span>å­˜å‚¨å¼•æ“åç§°<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
<p>2ï¼‰ç¤ºä¾‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> ENGINE<span class="operator">=</span>MyISAM;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> ENGINE<span class="operator">=</span>INNODB;</span><br></pre></td></tr></table></figure>
<h4 id="2-7-ä¿®æ”¹è‡ªå¢é•¿å€¼"><a href="#2-7-ä¿®æ”¹è‡ªå¢é•¿å€¼" class="headerlink" title="2.7 ä¿®æ”¹è‡ªå¢é•¿å€¼"></a>2.7 ä¿®æ”¹è‡ªå¢é•¿å€¼</h4><p>1ï¼‰è¯­æ³•ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span> AUTO_INCREMENT<span class="operator">=</span>[å€¼];</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ç¤ºä¾‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> AUTO_INCREMENT<span class="operator">=</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure>


<p>åšå®¢åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/Jimc/p/12979319.html">https://www.cnblogs.com/Jimc/p/12979319.html</a><br>å¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ï¼</p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>dockerå®‰è£…</title>
    <url>/docker-01/</url>
    <content><![CDATA[<p>æ–°çš„æœåŠ¡å™¨æ²¡æœ‰å®‰è£…dockerï¼Œä½¿ç”¨dockerå‘½ä»¤æ—¶æç¤ºï¼šdocker: command not foundé”™è¯¯ä¿¡æ¯</p>
<h5 id="1-æ›´æ–°yumåŒ…"><a href="#1-æ›´æ–°yumåŒ…" class="headerlink" title="1. æ›´æ–°yumåŒ…"></a>1. æ›´æ–°yumåŒ…</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure>

<h5 id="2-å®‰è£…ä¾èµ–è½¯ä»¶åŒ…"><a href="#2-å®‰è£…ä¾èµ–è½¯ä»¶åŒ…" class="headerlink" title="2.å®‰è£…ä¾èµ–è½¯ä»¶åŒ…"></a>2.å®‰è£…ä¾èµ–è½¯ä»¶åŒ…</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>

<h5 id="3-è®¾ç½®yumæº"><a href="#3-è®¾ç½®yumæº" class="headerlink" title="3.è®¾ç½®yumæº"></a>3.è®¾ç½®yumæº</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>
<h5 id="4-å®‰è£…docker"><a href="#4-å®‰è£…docker" class="headerlink" title="4.å®‰è£…docker"></a>4.å®‰è£…docker</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">é»˜è®¤å®‰è£…æœ€æ–°çš„dockerç¨³å®šç‰ˆæœ¬ã€‚</span></span><br><span class="line">yum install docker-ce</span><br></pre></td></tr></table></figure>
<h5 id="5-å¯åŠ¨dockeræœåŠ¡"><a href="#5-å¯åŠ¨dockeræœåŠ¡" class="headerlink" title="5.å¯åŠ¨dockeræœåŠ¡"></a>5.å¯åŠ¨dockeræœåŠ¡</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>
<h5 id="6-è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"><a href="#6-è®¾ç½®å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="6.è®¾ç½®å¼€æœºè‡ªå¯åŠ¨"></a>6.è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure>
<h5 id="7-æŸ¥çœ‹dockerç‰ˆæœ¬ä¿¡æ¯"><a href="#7-æŸ¥çœ‹dockerç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="7. æŸ¥çœ‹dockerç‰ˆæœ¬ä¿¡æ¯"></a>7. æŸ¥çœ‹dockerç‰ˆæœ¬ä¿¡æ¯</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure>
<p><img src="/docker-01/1.png" alt="æŸ¥çœ‹dockerç‰ˆæœ¬"><br>è‡³æ­¤ï¼Œè§£å†³ã€‚</p>
<h5 id="8-åœæ­¢æ‰€æœ‰å®¹å™¨"><a href="#8-åœæ­¢æ‰€æœ‰å®¹å™¨" class="headerlink" title="8. åœæ­¢æ‰€æœ‰å®¹å™¨"></a>8. åœæ­¢æ‰€æœ‰å®¹å™¨</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stop $(docker ps -a | awk &#x27;&#123; print $1&#125;&#x27; | tail -n +2)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>dockerå®‰è£…mysql</title>
    <url>/docker-mysql/</url>
    <content><![CDATA[<h5 id="1-æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ"><a href="#1-æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ" class="headerlink" title="1.æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ"></a>1.æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure>
<p><img src="/docker-mysql/1.png"></p>
<h5 id="2-æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ"><a href="#2-æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ" class="headerlink" title="2.æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ"></a>2.æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull mysql</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–è€…æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line">docker pull mysql:8.0.16</span><br></pre></td></tr></table></figure>
<p><img src="/docker-mysql/2.png"></p>
<h5 id="3-åˆ›å»ºæ•°æ®ç›®å½•å’Œé…ç½®æ–‡ä»¶"><a href="#3-åˆ›å»ºæ•°æ®ç›®å½•å’Œé…ç½®æ–‡ä»¶" class="headerlink" title="3.åˆ›å»ºæ•°æ®ç›®å½•å’Œé…ç½®æ–‡ä»¶"></a>3.åˆ›å»ºæ•°æ®ç›®å½•å’Œé…ç½®æ–‡ä»¶</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/mysql/conf /usr/mysql/data</span><br><span class="line"></span><br><span class="line">chmod -R 777 /usr/mysql/</span><br></pre></td></tr></table></figure>
<h5 id="4-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#4-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="4.åˆ›å»ºé…ç½®æ–‡ä»¶"></a>4.åˆ›å»ºé…ç½®æ–‡ä»¶</h5><p>åœ¨ä¸Šé¢åˆ›å»ºçš„é…ç½®æ–‡ä»¶ç›®å½•/usr/mysql/confä¸‹åˆ›å»ºMySQLçš„é…ç½®æ–‡ä»¶my.cnf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch my.cnf;</span><br><span class="line"></span><br><span class="line">vim /usr/mysql/conf/my.cnf;</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ä»¥ä¸‹å†…å®¹åˆ°ä¸Šè¿°åˆ›å»ºçš„é…ç½®æ–‡ä»¶ä¸­</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">[client]</span></span><br><span class="line"><span class="comment">#socket = /usr/mysql/mysqld.sock</span></span><br><span class="line"><span class="meta">default-character-set</span> = <span class="string">utf8mb4</span></span><br><span class="line"><span class="attr">[mysqld]</span></span><br><span class="line"><span class="comment">#pid-file        = /var/run/mysqld/mysqld.pid</span></span><br><span class="line"><span class="comment">#socket          = /var/run/mysqld/mysqld.sock</span></span><br><span class="line"><span class="comment">#datadir         = /var/lib/mysql</span></span><br><span class="line"><span class="comment">#socket = /usr/mysql/mysqld.sock</span></span><br><span class="line"><span class="comment">#pid-file = /usr/mysql/mysqld.pid</span></span><br><span class="line"><span class="attr">datadir</span> = <span class="string">/usr/mysql/data</span></span><br><span class="line"><span class="attr">character_set_server</span> = <span class="string">utf8mb4</span></span><br><span class="line"><span class="attr">collation_server</span> = <span class="string">utf8mb4_bin</span></span><br><span class="line"><span class="meta">secure-file-priv</span>= <span class="string">NULL</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Disabling symbolic-links is recommended to prevent assorted security risks</span></span><br><span class="line"><span class="meta">symbolic-links</span>=<span class="string">0</span></span><br><span class="line"><span class="comment"># Custom config should go here</span></span><br><span class="line"><span class="comment">!includedir /etc/mysql/conf.d/</span></span><br></pre></td></tr></table></figure>
<h5 id="5-å¯åŠ¨åˆ›å»ºå®¹å™¨"><a href="#5-å¯åŠ¨åˆ›å»ºå®¹å™¨" class="headerlink" title="5.å¯åŠ¨åˆ›å»ºå®¹å™¨"></a>5.å¯åŠ¨åˆ›å»ºå®¹å™¨</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=unless-stopped -d --name mysql -v /usr/mysql/conf/my.cnf:/etc/mysql/my.cnf -v /usr/mysql/data:/var/lib/mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=xiaoyuge mysql</span><br></pre></td></tr></table></figure>
<p>å‚æ•°è§£é‡Šï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â€“name mysql5.7 å®¹å™¨åˆ«å</span><br><span class="line">-p 3307:3306 æ˜ å°„å®¹å™¨ç«¯å£å·å’Œå®¿ä¸»æœºç«¯å£å·ï¼ˆæœ¬æœº3307ç«¯å£æ˜ å°„å®¹å™¨3306ç«¯å£ï¼‰</span><br><span class="line">-v /data/mysql/datadir:/var/lib/mysql ç›®å½•æ˜ å°„ï¼ˆæŒ‚è½½å®¿ä¸»æœºç›®å½•å’Œ dockerå®¹å™¨ä¸­çš„ç›®å½•ï¼Œå‰é¢æ˜¯å®¿ä¸»æœºç›®å½•ï¼Œåé¢æ˜¯å®¹å™¨å†…éƒ¨ç›®å½•ï¼‰</span><br><span class="line">-v /data/mysql/conf.d:/etc/mysql/conf.d ç›®å½•æ˜ å°„ï¼ˆmysqlé…ç½®ç›®å½•ï¼‰</span><br><span class="line">-d åå°è¿è¡Œ</span><br><span class="line">-e ç¯å¢ƒå‚æ•°ï¼ŒMYSQL_ROOT_PASSWORDè®¾ç½®rootç”¨æˆ·çš„å¯†ç </span><br></pre></td></tr></table></figure>
<p><img src="/docker-mysql/3.png" alt="å¯åŠ¨åˆ›å»ºå®¹å™¨"><br>æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œæ‰§è¡ŒæŸ¥è¯¢å®¹å™¨çš„å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„mysqlå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>
<p><img src="/docker-mysql/4.png" alt="å¯åŠ¨åˆ›å»ºå®¹å™¨"></p>
<h5 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h5><h6 id="1-è¿œç¨‹æ— æ³•é“¾æ¥"><a href="#1-è¿œç¨‹æ— æ³•é“¾æ¥" class="headerlink" title="1.è¿œç¨‹æ— æ³•é“¾æ¥"></a>1.è¿œç¨‹æ— æ³•é“¾æ¥</h6><p>ä¸Šè¿°è™½ç„¶å®‰è£…å¥½äº†mysqlï¼Œä½†æ˜¯ä½¿ç”¨è¿œç¨‹çš„Navicatè¿æ¥æ—¶æç¤ºé”™è¯¯ï¼Œä¸èƒ½æ­£ç¡®è¿æ¥mysqlï¼Œæ­¤æ—¶éœ€è¦ä¿®æ”¹æŒ‰ç…§ä¸‹é¢è¯´çš„æ­¥éª¤ä¿®æ”¹ä¸€ä¸‹mysqlçš„å¯†ç æ¨¡å¼ä»¥åŠä¸»æœºç­‰å†…å®¹æ‰å¯ä»¥ã€‚<br>ä¿®æ”¹mysqlå¯†ç ä»¥åŠå¯è®¿é—®ä¸»æœº</p>
<ol>
<li>è¿›å…¥å®¹å™¨å†…éƒ¨ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it mysql /bin/bash</span><br></pre></td></tr></table></figure></li>
<li>è¿æ¥mysql <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨mysqlåº“ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">use mysql;</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹è®¿é—®ä¸»æœºä»¥åŠå¯†ç ç­‰ï¼Œè®¾ç½®ä¸ºæ‰€æœ‰ä¸»æœºå¯è®¿é—® <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;æ–°å¯†ç &#x27;;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ³¨æ„ï¼š mysql_native_passwordï¼Œmysql8.xç‰ˆæœ¬å¿…é¡»ä½¿ç”¨è¿™ç§æ¨¡å¼ï¼Œå¦åˆ™navicateæ— æ³•æ­£ç¡®è¿æ¥</span></span><br></pre></td></tr></table></figure></li>
<li>åˆ·æ–° <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">exit;</span><br></pre></td></tr></table></figure></li>
<li>è¿œç¨‹ä½¿ç”¨Navicatè¿æ¥æ•°æ®åº“<br><img src="/docker-mysql/5.png" alt="è¿æ¥"></li>
</ol>
<h6 id="2-dockerå¯åŠ¨mysqlå®¹å™¨æŠ¥é”™"><a href="#2-dockerå¯åŠ¨mysqlå®¹å™¨æŠ¥é”™" class="headerlink" title="2.dockerå¯åŠ¨mysqlå®¹å™¨æŠ¥é”™"></a>2.dockerå¯åŠ¨mysqlå®¹å™¨æŠ¥é”™</h6><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=unless-stopped -d --name mysql -v /usr/mysql/conf/my.cnf:/etc/mysql/my.cnf -v /usr/mysql/data:/var/lib/mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=xiaoyuge mysql</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æ—¶æç¤ºï¼šError response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: process_linux.go:545: container init caused: Running hook #0:: error running hook: signal: segmentation fault (core dumped), stdout: , stderr:: unknown</p>
<p><img src="/docker-mysql/6.png"><br>è§£å†³æ–¹å¼ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo yum upgrade</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…å¯ä»¥è¯•ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rm -rf /usr/mysql/conf/my.cnf</span><br><span class="line">touch /usr/mysql/conf/my.cnf</span><br><span class="line">vim my.cnf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">ç„¶åé‡æ–°é…ç½®ä¸€ä¸‹</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>dockerå®‰è£…nginx</title>
    <url>/docker-nginx/</url>
    <content><![CDATA[<h5 id="1-æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ"><a href="#1-æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ" class="headerlink" title="1.æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ"></a>1.æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search nginx</span><br></pre></td></tr></table></figure>
<p><img src="/docker-nginx/1.png"></p>
<h5 id="2-æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ"><a href="#2-æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ" class="headerlink" title="2.æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ"></a>2.æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–è€…æŒ‡å®šæœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">docker pull nginx:latest</span><br></pre></td></tr></table></figure>
<p><img src="/docker-nginx/2.png"></p>
<h5 id="3-ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æœ¬åœ°é•œåƒï¼Œç¡®å®šnginxé•œåƒå·²ä¸‹è½½åˆ°æœ¬åœ°"><a href="#3-ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æœ¬åœ°é•œåƒï¼Œç¡®å®šnginxé•œåƒå·²ä¸‹è½½åˆ°æœ¬åœ°" class="headerlink" title="3.ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æœ¬åœ°é•œåƒï¼Œç¡®å®šnginxé•œåƒå·²ä¸‹è½½åˆ°æœ¬åœ°"></a>3.ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æœ¬åœ°é•œåƒï¼Œç¡®å®šnginxé•œåƒå·²ä¸‹è½½åˆ°æœ¬åœ°</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>
<p><img src="/docker-nginx/3.png"></p>
<h5 id="4-åˆ›å»ºæŒ‚è½½ç›®å½•"><a href="#4-åˆ›å»ºæŒ‚è½½ç›®å½•" class="headerlink" title="4. åˆ›å»ºæŒ‚è½½ç›®å½•"></a>4. åˆ›å»ºæŒ‚è½½ç›®å½•</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /data/nginx/&#123;conf,conf.d,html,logs&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#5-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="5. åˆ›å»ºé…ç½®æ–‡ä»¶"></a>5. åˆ›å»ºé…ç½®æ–‡ä»¶</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch nginx.cnf</span><br></pre></td></tr></table></figure>
<h5 id="6-Nginxè¯¦æƒ…é…ç½®è¯·å‚è€ƒï¼šhttps-xiaoyuge-work-2021-12-05-nginx-02"><a href="#6-Nginxè¯¦æƒ…é…ç½®è¯·å‚è€ƒï¼šhttps-xiaoyuge-work-2021-12-05-nginx-02" class="headerlink" title="6. Nginxè¯¦æƒ…é…ç½®è¯·å‚è€ƒï¼šhttps://xiaoyuge.work/2021/12/05/nginx-02/"></a>6. Nginxè¯¦æƒ…é…ç½®è¯·å‚è€ƒï¼š<a href="https://xiaoyuge.work/2021/12/05/nginx-02/">https://xiaoyuge.work/2021/12/05/nginx-02/</a></h5><h5 id="7-æŸ¥çœ‹å®¹å™¨"><a href="#7-æŸ¥çœ‹å®¹å™¨" class="headerlink" title="7. æŸ¥çœ‹å®¹å™¨"></a>7. æŸ¥çœ‹å®¹å™¨</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker stop xxx  åœæ­¢æŸä¸ªå®¹å™¨è¿è¡Œ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker rm xxx  åˆ é™¤å®¹å™¨</span></span><br></pre></td></tr></table></figure>
<p><img src="/docker-nginx/6.png" alt="æŸ¥çœ‹å®¹å™¨"></p>
<h5 id="8-å¯åŠ¨å®¹å™¨ï¼ŒæŒ‚è½½é…ç½®æ–‡ä»¶"><a href="#8-å¯åŠ¨å®¹å™¨ï¼ŒæŒ‚è½½é…ç½®æ–‡ä»¶" class="headerlink" title="8.å¯åŠ¨å®¹å™¨ï¼ŒæŒ‚è½½é…ç½®æ–‡ä»¶"></a>8.å¯åŠ¨å®¹å™¨ï¼ŒæŒ‚è½½é…ç½®æ–‡ä»¶</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --name mynginx -d -p 80:80 -v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /data/nginx/logs:/var/log/nginx -d docker.io/nginx</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡å‘½ä»¤docker exec -it nginx-test bashè¿›å…¥å®¹å™¨å†…å®¹ä¿®æ”¹é…ç½®</p>
<p><img src="/docker-nginx/4.png"></p>
<h5 id="9-å®‰è£…å®Œæ¯•ï¼Œè®¿é—®åœ°å€-http-localhost-8080ï¼Œå‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œå®‰è£…æˆåŠŸï¼ï¼ï¼"><a href="#9-å®‰è£…å®Œæ¯•ï¼Œè®¿é—®åœ°å€-http-localhost-8080ï¼Œå‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œå®‰è£…æˆåŠŸï¼ï¼ï¼" class="headerlink" title="9.å®‰è£…å®Œæ¯•ï¼Œè®¿é—®åœ°å€ http://localhost:8080ï¼Œå‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œå®‰è£…æˆåŠŸï¼ï¼ï¼"></a>9.å®‰è£…å®Œæ¯•ï¼Œè®¿é—®åœ°å€ <a href="http://localhost:8080ï¼Œå‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œå®‰è£…æˆåŠŸï¼ï¼ï¼">http://localhost:8080ï¼Œå‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œå®‰è£…æˆåŠŸï¼ï¼ï¼</a></h5><p><img src="/docker-nginx/5.png"></p>
<h5 id="10-åŸŸåè§£æé…ç½®"><a href="#10-åŸŸåè§£æé…ç½®" class="headerlink" title="10.åŸŸåè§£æé…ç½®"></a>10.åŸŸåè§£æé…ç½®</h5><p>æˆ‘ä¹°çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ä»¥åŠåŸŸåï¼Œä¸Šé¢æ“ä½œåï¼Œå¿˜è®°åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­å»é…ç½®<br><img src="/docker-nginx/7.png"><br><img src="/docker-nginx/8.png" alt="åŸŸåè§£æ"></p>
<h5 id="11-é…ç½®å¤šä¸ªäºŒçº§åŸŸå"><a href="#11-é…ç½®å¤šä¸ªäºŒçº§åŸŸå" class="headerlink" title="11.é…ç½®å¤šä¸ªäºŒçº§åŸŸå"></a>11.é…ç½®å¤šä¸ªäºŒçº§åŸŸå</h5><p>åœ¨ç¬¬8æ­¥çš„æ—¶å€™å°†dockerå®¹å™¨ä¸­çš„nginxé…ç½®æ˜ å°„åˆ°äº†ç›®å½•/data/nginx/confä¸‹é¢ï¼›<br>ä¿®æ”¹nginx.conf</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    #gzip  on;</span><br><span class="line">    </span><br><span class="line">    #å¼•å…¥conf.dä¸‹é¢æ‰€æœ‰çš„é…ç½®æ–‡ä»¶</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨conf.dç›®å½•ä¸‹é¢åˆ›å»ºäº†ä¸¤ä¸ªå­åŸŸååå‘ä»£ç†é…ç½®æ–‡ä»¶,å…¶ä»–çš„åŸŸåä»£ç†ç›¸åŒï¼Œåªè¦æ”¹server_nameå’Œproxy_passä»£ç†ç«¯å£ï¼Œé…ç½®æ–‡ä»¶éœ€ä»¥.confç»“å°¾<br><img src="/docker-nginx/8.png" alt="åŸŸåè§£æ"></p>
<ul>
<li>note.xiaoyuge520.vip.conf<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">########   Nginxçš„main(å…¨å±€é…ç½®)æ–‡ä»¶</span><br><span class="line">#æŒ‡å®šnginxè¿è¡Œçš„ç”¨æˆ·åŠç”¨æˆ·ç»„,é»˜è®¤ä¸ºnobody</span><br><span class="line">#user  nobody;</span><br><span class="line">#å¼€å¯çš„çº¿ç¨‹æ•°ï¼Œä¸€èˆ¬è·Ÿé€»è¾‘CPUæ ¸æ•°ä¸€è‡´</span><br><span class="line">worker_processes  1;</span><br><span class="line">events &#123;</span><br><span class="line">#è®¾ç½®å·¥ä½œæ¨¡å¼ä¸ºepoll,é™¤æ­¤ä¹‹å¤–è¿˜æœ‰select,poll,kqueue,rtsigå’Œ/dev/pollæ¨¡å¼</span><br><span class="line">#use epoll;</span><br><span class="line">    #å®šä¹‰æ¯ä¸ªè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°,å—ç³»ç»Ÿè¿›ç¨‹çš„æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°é‡é™åˆ¶ã€‚</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">#######Nginxçš„HttpæœåŠ¡å™¨é…ç½®,Gzipé…ç½®</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    #æ ¸å¿ƒæ¨¡å—æŒ‡ä»¤ï¼Œæ™ºåŠ›é»˜è®¤è®¾ç½®ä¸ºäºŒè¿›åˆ¶æµï¼Œä¹Ÿå°±æ˜¯å½“æ–‡ä»¶ç±»å‹æœªå®šä¹‰æ—¶ä½¿ç”¨è¿™ç§æ–¹å¼</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    ########Nginxçš„serverè™šæ‹Ÿä¸»æœºé…ç½®</span><br><span class="line">    server &#123;</span><br><span class="line">        #ç›‘å¬ç«¯å£ä¸º 80</span><br><span class="line">        listen       80;</span><br><span class="line">        #è®¾ç½®ä¸»æœºåŸŸå</span><br><span class="line">        server_name  note.xiaoyuge520.vip;</span><br><span class="line">        #è®¾ç½®è®¿é—®çš„è¯­è¨€ç¼–ç </span><br><span class="line">        #charset koi8-r;</span><br><span class="line">        #è®¾ç½®è™šæ‹Ÿä¸»æœºè®¿é—®æ—¥å¿—çš„å­˜æ”¾è·¯å¾„åŠæ—¥å¿—çš„æ ¼å¼ä¸ºmain</span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        #è®¾ç½®è™šæ‹Ÿä¸»æœºçš„åŸºæœ¬ä¿¡æ¯</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_set_header  Host  $http_host;</span><br><span class="line">            proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http://47.101.130.163:8086/note; # ä»£ç†ip:ç«¯å£</span><br><span class="line">        &#125;</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>record.xiaoyuge520.vip.conf  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">#######Nginxçš„HttpæœåŠ¡å™¨é…ç½®,Gzipé…ç½®</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  record.xiaoyuge520.vip;</span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_set_header  Host  $http_host;</span><br><span class="line">            proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http://47.101.130.163:8888/record; # ä»£ç†ip:ç«¯å£</span><br><span class="line">        &#125;</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>å¦‚æœæŒ‚è½½ä¹‹åå®¹å™¨è¿è¡Œæ­£å¸¸å´ä¾ç„¶ä¸èƒ½é€šè¿‡åŸŸåè®¿é—®å¯å°è¯•ä»¥ä¸‹æ“ä½œ</strong><br>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹æ‰€æœ‰å®¹å™¨,è·å–nginxçš„container åç§°</span></span><br><span class="line">docker ps -a</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å‘åç§°ä¸ºnginxçš„å®¹å™¨å‘é€è„šæœ¬å‘½ä»¤, mynginx ä¸ºå®¹å™¨åç§°</span></span><br><span class="line">docker exec -it mynginx /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">é‡æ–°åŠ è½½é…ç½®å‘½ä»¤</span></span><br><span class="line">cd /etc/nginx/conf.d</span><br><span class="line">service nginx reload</span><br><span class="line"><span class="meta">#</span><span class="bash">æ£€æŸ¥é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®</span></span><br></pre></td></tr></table></figure></p>
<p><strong>æ¯ä¸€æ¬¡æ›´æ”¹é…ç½®æ–‡ä»¶éƒ½éœ€è¦é‡å¯å®¹å™¨</strong><br>  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯nginxå®¹å™¨</span></span><br><span class="line">docker restart nginx </span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹å®¹å™¨çŠ¶æ€</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¦‚æœæŒ‚è½½å¤±è´¥ï¼ŒæŸ¥çœ‹nginxå®¹å™¨<span class="built_in">log</span>,æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯ æ›´æ”¹é…ç½®æ–‡ä»¶ç­‰</span></span><br><span class="line">docker logs -t nginx</span><br></pre></td></tr></table></figure></p>
<hr>
<p>ä»¥ä¸Šé…ç½®å®Œæˆä¹‹åèƒ½å¤Ÿé€šè¿‡åŸŸåè®¿é—®ç½‘ç«™ï¼Œä½†æ˜¯cssæ ·å¼å´è¢«nginxè§£ææˆtext/plainï¼Œæ‰“å¼€æ§åˆ¶å°å¯çœ‹åˆ°warnä¿¡æ¯</p>
<p><strong>è§£å†³nginxå°†cssæ–‡ä»¶è§£æä¸ºtext/plain</strong></p>
<ul>
<li><p>æ–¹æ³•ä¸€ï¼š ngin.confä¸­httpæ·»åŠ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">include       /etc/nginx/mime.types;</span><br><span class="line">default_type  application/octet-stream;</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šæ­¤åŠæ³•å¹¶ä¸èƒ½ä½¿æˆ‘ç½‘ç«™çš„cssæ­£ç¡®è§£æï¼Œå› ä¸ºåœ¨æ‹·è´nginxé•œåƒä¸­çš„åŸé…ç½®æ–‡ä»¶æ—¶ï¼Œå°±å·²ç»æ·»åŠ mime.typesäº†ã€‚å´ä¾ç„¶ä¸èƒ½æ­£ç¡®è§£æã€‚</p>
</li>
<li><p>æ–¹æ³•äºŒï¼šè§£ææˆåŠŸï¼ŒåŸå› æœªçŸ¥</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">å°†index.htmlä¸­<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span>å»æ‰ã€‚</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡åŸŸåè®¿é—®ï¼šæˆåŠŸï¼ï¼</p>
</li>
</ul>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>NginxåŸºç¡€ç¯‡ï¼ˆäºŒï¼‰å®‰è£…</title>
    <url>/nginx-02/</url>
    <content><![CDATA[<h2 id="1-Nginxå®‰è£…"><a href="#1-Nginxå®‰è£…" class="headerlink" title="1.Nginxå®‰è£…"></a>1.Nginxå®‰è£…</h2><ol>
<li><p>å®‰è£…nginxå‰é¦–å…ˆè¦ç¡®è®¤ç³»ç»Ÿä¸­æ˜¯å¦å®‰è£…äº†gcc ã€pcre-develã€zlib-develã€openssl-devel</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">1ã€rpmåŒ…å®‰è£…çš„ï¼Œå¯ä»¥ç”¨ rpm -qa çœ‹åˆ°ï¼Œå¦‚æœè¦æŸ¥æ‰¾æŸè½¯ä»¶åŒ…æ˜¯å¦å®‰è£…ï¼Œç”¨ rpm -qa | grep <span class="string">&quot;è½¯ä»¶æˆ–è€…åŒ…çš„åå­—&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">2ã€ä»¥debåŒ…å®‰è£…çš„ï¼Œå¯ä»¥ç”¨ dpkg -l çœ‹åˆ°ã€‚å¦‚æœæ˜¯æŸ¥æ‰¾æŒ‡å®šè½¯ä»¶åŒ…ï¼Œç”¨ dpkg -l | grep <span class="string">&quot;è½¯ä»¶æˆ–è€…åŒ…çš„åå­—&quot;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">3ã€yumæ–¹æ³•å®‰è£…çš„ï¼Œå¯ä»¥ç”¨ yum list installed æŸ¥æ‰¾ï¼Œå¦‚æœæ˜¯æŸ¥æ‰¾æŒ‡å®šåŒ…ï¼Œç”¨ yum list installed | grep <span class="string">&quot;è½¯ä»¶åæˆ–è€…åŒ…å&quot;</span></span></span><br><span class="line">yum list installed | grep &quot;gcc&quot;</span><br></pre></td></tr></table></figure>
<p><img src="/nginx-02/image-20201210100736952.png" alt="image-20201210103251475"></p>
</li>
<li><p>å®‰è£…ä¾èµ–åŒ…</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install gcc pcre-devel zlib-devel openssl openssl-devel</span><br></pre></td></tr></table></figure></li>
<li><p>ä¸‹è½½å¹¶è§£å‹å®‰è£…åŒ…</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//åˆ›å»ºnginxå­˜æ”¾æ–‡ä»¶å¤¹</span><br><span class="line">cd /usr/local</span><br><span class="line"><span class="meta">#</span><span class="bash">ä¸‹è½½taråŒ…</span></span><br><span class="line">wget http://nginx.org/download/nginx-1.23.2.tar.gz</span><br><span class="line">tar -xvf nginx-1.23.2.tar.gz</span><br><span class="line"><span class="meta">#</span></span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd nginx-1.23.2</span><br><span class="line">./configure  --prefix=/usr/local/nginx</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/nginx</span><br><span class="line">./sbin/nginx -t</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®nginx.conf</p>
 <figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">vim</span> <span class="string">/usr/local/nginx/cong/nginx.conf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹å¦‚ä¸‹</span></span><br><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">  <span class="string">listen</span> <span class="number">80</span><span class="string">;</span></span><br><span class="line">  <span class="string">server_name</span> <span class="string">localhost;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># æ³¨æ„è®¾å®š rootè·¯å¾„æ˜¯æœ‰distçš„</span></span><br><span class="line">  <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">    <span class="string">root</span> <span class="string">/usr/local/webapp/dist;</span></span><br><span class="line">    <span class="string">index</span> <span class="string">/index.html;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#è·¨åŸŸ ipå’Œportè‡ªè¡Œæ›¿æ¢</span></span><br><span class="line">  <span class="string">location</span> <span class="string">/adminApi</span> &#123;</span><br><span class="line">    <span class="string">proxy_pass</span> <span class="string">http://ip:port;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å¯åŠ¨nginx</span></span><br><span class="line">cd /usr/local/nginx/sbin</span><br><span class="line">./nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¸¸è§é—®é¢˜</p>
<ol>
<li>nginxå¯åŠ¨æç¤ºï¼šnginx: [emerg] bind() to 0.0.0.0:8080 failed (98: Address already in use)</li>
</ol>
<ul>
<li>ä¿®æ”¹ç«¯å£  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#é¦–å…ˆè¿›å…¥nginx/confç›®å½•ï¼ˆæ ¹æ®è‡ªå·±çš„ç›®å½•æ¥å†™ï¼‰</span><br><span class="line"># vi /usr/nginx/conf/nginx.conf</span><br><span class="line"></span><br><span class="line">#ä¿®æ”¹nginx.confï¼Œå°†8080ç«¯å£ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£å·</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8080;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ›´æ¢ç«¯å£ä¹‹åï¼Œç„¶åé‡å¯nginxå°±å¯ä»¥äº†</span><br><span class="line">server &#123;</span><br><span class="line">    listen       8888;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å–æ¶ˆå ç”¨ç«¯å£å·è¿›ç¨‹  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹è¢«å ç”¨çš„ç«¯å£</span></span><br><span class="line">netstat -nlp|grep :8080</span><br><span class="line">tcp      0     0 0.0.0.0:8888       0.0.0.0:*          LISTEN     24594/nginx: master</span><br><span class="line"><span class="meta">#</span><span class="bash">ç»“æŸè¿›ç¨‹24594</span></span><br><span class="line">kill -9 24594</span><br><span class="line"><span class="meta">#</span><span class="bash">ç„¶åå†é‡å¯nginxå°±å¯ä»¥äº†</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å¸¸ç”¨å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ä¿®æ”¹é…ç½®åé‡æ–°å¯åŠ¨</span></span><br><span class="line">./nginx -s reload</span><br><span class="line"><span class="meta">#</span><span class="bash">å¦‚æœå‡ºç°ï¼šnginx: [error] open() ï¼‚/usr/<span class="built_in">local</span>/nginx/logs/nginx.pidï¼‚ failed</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">å†æ¬¡å¯åŠ¨å³å¯</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹nginxè¿›ç¨‹æ˜¯å¦å¯åŠ¨</span></span><br><span class="line">ps -ef|grep nginx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¹³æ»‘å¯åŠ¨nginx</span></span><br><span class="line">kill -HUP</span><br><span class="line"><span class="meta">#</span><span class="bash">ä¸»è¿›ç¨‹å·æˆ–è¿›ç¨‹å·æ–‡ä»¶è·¯å¾„ æˆ–è€…ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">/usr/nginx/sbin/nginx -s reload</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ³¨æ„ï¼Œä¿®æ”¹äº†é…ç½®æ–‡ä»¶åæœ€å¥½å…ˆæ£€æŸ¥ä¸€ä¸‹ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ ç¡®ï¼Œä»¥å…é‡å¯åNginxå‡ºç°é”™è¯¯å½±å“æœåŠ¡å™¨ç¨³å®šè¿è¡Œã€‚</span></span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ¤æ–­Nginxé…ç½®æ˜¯å¦æ­£ç¡®å‘½ä»¤å¦‚ä¸‹ï¼š</span></span><br><span class="line">nginx -t -c /usr/nginx/conf/nginx.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–è€…ä½¿ç”¨</span></span><br><span class="line">/usr/nginx/sbin/nginx -t</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">é‡å¯</span></span><br><span class="line">nginx reload</span><br><span class="line">/usr/local/nginx/sbin/nginx -s reload </span><br><span class="line">service nginx restart</span><br><span class="line"><span class="meta">#</span><span class="bash">æ£€æŸ¥ nginx.conf é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é”™</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -t</span><br><span class="line"><span class="meta">#</span><span class="bash">nginxå¯åŠ¨å‘½ä»¤:</span></span><br><span class="line">/usr/local/nginx/sbin/nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line"><span class="meta">#</span><span class="bash">å…³é—­å‘½ä»¤:</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -s stop</span><br><span class="line"><span class="meta">#</span><span class="bash">é‡å¯å‘½ä»¤:</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -s reload</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¯åŠ¨</span></span><br><span class="line">./nginx</span><br><span class="line"><span class="meta">#</span><span class="bash">å…³é—­</span></span><br><span class="line">./nginx -s stop</span><br></pre></td></tr></table></figure>
<p> <img src="/nginx-02/image-20210606160947369.png" alt="image-20201210103251475"></p>
<p> å¯åŠ¨åè®¿é—®localhost æ•ˆæœå¦‚ä¸‹ï¼š<br> <img src="/nginx-02/image-20201210103251475.png" alt="image-20201210103251475"></p>
</li>
</ol>
<h2 id="2-Nginxé…ç½®"><a href="#2-Nginxé…ç½®" class="headerlink" title="2.Nginxé…ç½®"></a>2.Nginxé…ç½®</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">...... å…¨å±€å—</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">true//events å—</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##æ•°æ®åº“é…ç½®</span></span></span><br><span class="line">stream &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">       listen 3306;</span><br><span class="line">       proxy_pass db;    </span><br><span class="line">    &#125;</span><br><span class="line">    upstream db &#123;</span><br><span class="line">       server 192.168.18.130:3305;</span><br><span class="line">       server 192.168.18.129:3305;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http&#123;</span><br><span class="line">    ##httpå…¨å±€å—</span><br><span class="line">true  server+&#123;</span><br><span class="line">truetruelocation +[]</span><br><span class="line">true&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1é…ç½®å†…å®¹è§„åˆ™"><a href="#2-1é…ç½®å†…å®¹è§„åˆ™" class="headerlink" title="2.1é…ç½®å†…å®¹è§„åˆ™"></a>2.1é…ç½®å†…å®¹è§„åˆ™</h3><p>å®˜ç½‘é…ç½®æ•™ç¨‹ï¼š<a href="https://nginx.org/en/docs/dirindex.html">https://nginx.org/en/docs/dirindex.html</a><br>å˜é‡åº”ç”¨ï¼š<a href="https://nginx.org/en/docs/varindex.html">https://nginx.org/en/docs/varindex.html</a></p>
<ul>
<li>ç”¨#è¡¨ç¤ºæ³¨é‡Š</li>
<li>æ¯è¡Œé…ç½®çš„ç»“å°¾éœ€è¦åŠ ä¸Šåˆ†å·</li>
<li>å¦‚æœé…ç½®é¡¹å€¼ä¸­åŒ…æ‹¬è¯­æ³•ç¬¦å·ï¼Œæ¯”å¦‚ç©ºæ ¼ç¬¦ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·è¡Œæ‹¬ä½é…ç½®é¡¹å€¼ï¼Œå¦åˆ™ngin xä¼šæŠ¥è¯­æ³•é”™è¯¯</li>
<li>å•ä½ç®€å†™ï¼š<ul>
<li>Kæˆ–è€…kåƒå­—èŠ‚ï¼ˆkilo byte, KBï¼‰</li>
<li>Mæˆ–è€…må…†å­—èŠ‚ï¼ˆmegabyte MBï¼‰</li>
<li>ms(æ¯«ç§’)ï¼Œs(ç§’)ï¼Œ m(åˆ†)ï¼Œ h(å°æ—¶) ï¼Œ d (å¤©)ï¼Œ wï¼ˆå‘¨ï¼‰ï¼Œ Mï¼ˆæœˆï¼ŒåŒ…å«30å¤©ï¼‰ï¼Œyï¼ˆå¹´ï¼‰</li>
</ul>
</li>
</ul>
<h3 id="2-2-è¯¦ç»†é…ç½®å†…å®¹"><a href="#2-2-è¯¦ç»†é…ç½®å†…å®¹" class="headerlink" title="2.2 è¯¦ç»†é…ç½®å†…å®¹"></a>2.2 è¯¦ç»†é…ç½®å†…å®¹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">########   Nginxçš„main(å…¨å±€é…ç½®)æ–‡ä»¶</span><br><span class="line">#æŒ‡å®šnginxè¿è¡Œçš„ç”¨æˆ·åŠç”¨æˆ·ç»„,é»˜è®¤ä¸ºnobody</span><br><span class="line">#user  nobody;</span><br><span class="line"></span><br><span class="line">#å¼€å¯çš„çº¿ç¨‹æ•°ï¼Œä¸€èˆ¬è·Ÿé€»è¾‘CPUæ ¸æ•°ä¸€è‡´</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">#å®šä½å…¨å±€é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼Œçº§åˆ«ä»¥noticeæ˜¾ç¤ºï¼Œè¿˜æœ‰debug,info,warn,error,critæ¨¡å¼ï¼Œdebugè¾“å‡ºæœ€å¤šï¼Œcrirè¾“å‡ºæœ€å°‘ï¼Œæ ¹æ®å®é™…ç¯å¢ƒè€Œå®š</span><br><span class="line">#error_log  logs/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line"></span><br><span class="line">#æŒ‡å®šè¿›ç¨‹idçš„å­˜å‚¨æ–‡ä»¶ä½ç½®</span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#æŒ‡å®šä¸€ä¸ªnginxè¿›ç¨‹æ‰“å¼€çš„æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ•°ç›®ï¼Œå—ç³»ç»Ÿè¿›ç¨‹çš„æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°é‡é™åˆ¶</span><br><span class="line">#worker_rlimit_nofile 65535</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    #è®¾ç½®å·¥ä½œæ¨¡å¼ä¸ºepoll,é™¤æ­¤ä¹‹å¤–è¿˜æœ‰select,poll,kqueue,rtsigå’Œ/dev/pollæ¨¡å¼</span><br><span class="line">    #use epoll;</span><br><span class="line"></span><br><span class="line">    #å®šä¹‰æ¯ä¸ªè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°,å—ç³»ç»Ÿè¿›ç¨‹çš„æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°é‡é™åˆ¶ã€‚</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">###æ•°æ®åº“çš„è´Ÿè½½å‡è¡¡</span><br><span class="line">stream &#123;</span><br><span class="line">  upstream mysql_nginx &#123;</span><br><span class="line">      hash $remote_addr consistent;</span><br><span class="line">      server 192.168.18.128:3306 weight=5 max_fails=3 fail_timeout=30s;</span><br><span class="line">      server 192.168.18.129:3306;</span><br><span class="line">      server 192.168.18.130:3306;</span><br><span class="line">      ##last_conn; #æœ€å°è¿æ¥</span><br><span class="line">  &#125;</span><br><span class="line">  server &#123;</span><br><span class="line">      listen 3306; # æ•°æ®åº“æœåŠ¡å™¨ç›‘å¬ç«¯å£</span><br><span class="line">      proxy_connect_timeout 10s;</span><br><span class="line">      proxy_timeout 300s; # è®¾ç½®å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡ä¹‹é—´çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœ5åˆ†é’Ÿå†…æ²¡æ“ä½œå°†è‡ªåŠ¨æ–­å¼€ã€‚</span><br><span class="line">      proxy_pass mysql_nginx;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#######Nginxçš„HttpæœåŠ¡å™¨é…ç½®,Gzipé…ç½®</span><br><span class="line">http &#123;</span><br><span class="line">    #ä¸»æ¨¡å—æŒ‡ä»¤ï¼Œå®ç°å¯¹é…ç½®æ–‡ä»¶æ‰€åŒ…å«çš„æ–‡ä»¶çš„è®¾å®šï¼Œå¯ä»¥å‡å°‘ä¸»é…ç½®æ–‡ä»¶çš„å¤æ‚åº¦ï¼ŒDNSä¸»é…ç½®æ–‡ä»¶ä¸­çš„zonerfc1912,aclåŸºæœ¬ä¸Šéƒ½æ˜¯ç”¨includeè¯­å¥ã€‚</span><br><span class="line">    include       mime.types;</span><br><span class="line"></span><br><span class="line">    #æ ¸å¿ƒæ¨¡å—æŒ‡ä»¤ï¼Œæ™ºåŠ›é»˜è®¤è®¾ç½®ä¸ºäºŒè¿›åˆ¶æµï¼Œä¹Ÿå°±æ˜¯å½“æ–‡ä»¶ç±»å‹æœªå®šä¹‰æ—¶ä½¿ç”¨è¿™ç§æ–¹å¼</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #ä¸‹é¢ä»£ç ä¸ºæ—¥å¿—æ ¼å¼çš„è®¾å®šï¼Œmainä¸ºæ—¥å¿—æ ¼å¼çš„åç§°ï¼Œå¯è‡ªè¡Œè®¾ç½®ï¼Œåé¢å¼•ç”¨</span><br><span class="line">    #log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">    #                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">    #                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    #å¼•ç”¨æ—¥å¿—mainï¼Œ mainæ˜¯log-formatçš„æ ¼å¼ï¼Œåœ¨ä¸Šé¢é…ç½®äº†ï¼›åé¢å¯ä»¥åŠ ä¸Šæ—¥å¿—ç¼“å†²åŒºå¤§å°ï¼Œå†™æ»¡äº†å°±flushåˆ°ç£ç›˜ä¸­buffer = 1M;</span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line"></span><br><span class="line">    #è®¾ç½®å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§çš„å•ä¸ªæ–‡ä»¶å­—èŠ‚æ•°</span><br><span class="line">    #client_max_body_size 20M;</span><br><span class="line">    #æŒ‡å®šæ¥è‡ªå®¢æˆ·ç«¯è¯·æ±‚å¤´çš„headebufferå¤§å°</span><br><span class="line">    #client_header_buffer_size  32k;</span><br><span class="line">    #æŒ‡å®šè¿æ¥è¯·æ±‚è¯•å›¾å†™å…¥ç¼“å­˜æ–‡ä»¶çš„ç›®å½•è·¯å¾„</span><br><span class="line">    #client_body_temp_path /dev/shm/client_body_temp;</span><br><span class="line">    #æŒ‡å®šå®¢æˆ·ç«¯è¯·æ±‚ä¸­è¾ƒå¤§çš„æ¶ˆæ¯å¤´çš„ç¼“å­˜æœ€å¤§æ•°é‡å’Œå¤§å°ï¼Œç›®å‰è®¾ç½®ä¸º4ä¸ª32KB</span><br><span class="line">    #large client_header_buffers 4 32k;</span><br><span class="line"></span><br><span class="line">    #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼</span><br><span class="line">    sendfile        on;</span><br><span class="line">    #å¼€å¯é˜²æ­¢ç½‘ç»œé˜»å¡</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line">    #å¼€å¯é˜²æ­¢ç½‘ç»œé˜»å¡</span><br><span class="line">    #tcp_nodelay    on;</span><br><span class="line"></span><br><span class="line">    #è®¾ç½®å®¢æˆ·ç«¯è¿æ¥ä¿å­˜æ´»åŠ¨çš„è¶…æ—¶æ—¶é—´</span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #è®¾ç½®å®¢æˆ·ç«¯è¯·æ±‚è¯»å–è¶…æ—¶æ—¶é—´</span><br><span class="line">    #client_header_timeout 10;</span><br><span class="line">    #è®¾ç½®å®¢æˆ·ç«¯è¯·æ±‚ä¸»ä½“è¯»å–è¶…æ—¶æ—¶é—´</span><br><span class="line">    #client_body_timeout 10;</span><br><span class="line">    #ç”¨äºè®¾ç½®ç›¸åº”å®¢æˆ·ç«¯çš„è¶…æ—¶æ—¶é—´</span><br><span class="line">    #send_timeout</span><br><span class="line"></span><br><span class="line">    ####HttpGZipæ¨¡å—é…ç½®</span><br><span class="line">    #httpGzip modules</span><br><span class="line">    #å¼€å¯gzipå‹ç¼©</span><br><span class="line">    #gzip  on;</span><br><span class="line">    #è®¾ç½®å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°</span><br><span class="line">    #gzip_min_length 1k;</span><br><span class="line">    #ç”³è¯·4ä¸ªå•ä½ä¸º16Kçš„å†…å­˜ä½œä¸ºå‹ç¼©ç»“æœæµç¼“å­˜</span><br><span class="line">    #gzip_buffers 4 16k;</span><br><span class="line">    #è®¾ç½®è¯†åˆ«httpåè®®çš„ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸º1.1</span><br><span class="line">    #gzip_http_version 1.1;</span><br><span class="line">    #æŒ‡å®šgzipå‹ç¼©æ¯”ï¼Œ1-9æ•°å­—è¶Šå°ï¼Œå‹ç¼©æ¯”è¶Šå°ï¼Œé€Ÿåº¦è¶Šå¿«</span><br><span class="line">    #gzip_comp_level 2;</span><br><span class="line">    #æŒ‡å®šå‹ç¼©çš„ç±»å‹</span><br><span class="line">    #gzip_types text/plain application/x-javascript text/css application/xml;</span><br><span class="line">    #è®©å‰ç«¯çš„ç¼“å­˜æœåŠ¡å™¨è¿›è¿‡gzipå‹ç¼©çš„é¡µé¢</span><br><span class="line">    #gzip_vary on;</span><br><span class="line"></span><br><span class="line">    #########Nginxçš„serverè™šæ‹Ÿä¸»æœºé…ç½®</span><br><span class="line">    server &#123;</span><br><span class="line">        #ç›‘å¬ç«¯å£ä¸º 80</span><br><span class="line">        listen       80;</span><br><span class="line"></span><br><span class="line">        #è®¾ç½®ä¸»æœºåŸŸå</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #è®¾ç½®è®¿é—®çš„è¯­è¨€ç¼–ç </span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #è®¾ç½®è™šæ‹Ÿä¸»æœºè®¿é—®æ—¥å¿—çš„å­˜æ”¾è·¯å¾„åŠæ—¥å¿—çš„æ ¼å¼ä¸ºmain</span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        #è®¾ç½®è™šæ‹Ÿä¸»æœºçš„åŸºæœ¬ä¿¡æ¯</span><br><span class="line">        location / &#123;</span><br><span class="line">            #è®¾ç½®è™šæ‹Ÿä¸»æœºçš„ç½‘ç«™æ ¹ç›®å½•</span><br><span class="line">            root   html;</span><br><span class="line"></span><br><span class="line">            #è®¾ç½®è™šæ‹Ÿä¸»æœºé»˜è®¤è®¿é—®çš„ç½‘é¡µ</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&#x27;s document root</span><br><span class="line">        # concurs with nginx&#x27;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-æ—¥å¿—"><a href="#2-3-æ—¥å¿—" class="headerlink" title="2.3 æ—¥å¿—"></a>2.3 æ—¥å¿—</h3><p>åœ¨nginxåŒçº§ç›®å½•ä¸‹logsæ–‡ä»¶å¤¹</p>
<ul>
<li>access.log  æ­£å¸¸æ—¥å¿—</li>
<li>error.log é”™è¯¯æ—¥æœŸ</li>
</ul>
<p>éœ€è¦åœ¨nginx.confä¸­çš„httpæ¨¡å—é…ç½®access_log</p>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>NginxåŸºç¡€ç¯‡ï¼ˆä¸‰ï¼‰å®ç°è™šæ‹Ÿä¸»æœº</title>
    <url>/nginx-03/</url>
    <content><![CDATA[<h3 id="1-è™šæ‹Ÿä¸»æœºVirtual-Host"><a href="#1-è™šæ‹Ÿä¸»æœºVirtual-Host" class="headerlink" title="1. è™šæ‹Ÿä¸»æœºVirtual Host"></a>1. è™šæ‹Ÿä¸»æœºVirtual Host</h3><p>ä¸€ç§åœ¨å•ä¸€ä¸»æœºæˆ–ä¸»æœºç¾¤ä¸Šï¼Œå®ç°å¤šç½‘åŸŸæœåŠ¡çš„æ–¹æ³•ï¼Œå¯ä»¥è¿è¡Œå¤šä¸ªç½‘ç«™æˆ–æœåŠ¡çš„æŠ€æœ¯ï¼Œè™šæ‹Ÿä¸»æœºä¹‹é—´å®Œå…¨ç‹¬ç«‹ï¼Œå¹¶å¯ç”±ç”¨æˆ·è‡ªè¡Œç®¡ç†è™šæ‹Ÿå¹¶éæŒ‡ä¸å­˜åœ¨ï¼Œè€Œæ˜¯æŒ‡ç©ºé—´æ˜¯ç”±å®ä½“çš„æœåŠ¡å™¨å»¶ä¼¸è€Œæ¥ï¼Œå…¶ç¡¬ä»¶ç³»ç»Ÿå¯ä»¥æ˜¯åŸºäºæœåŠ¡å™¨ç¾¤ï¼Œæˆ–è€…å•ä¸ªæœåŠ¡å™¨</p>
<p>ä½¿ç”¨åŸŸåè®¿é—®è™šæ‹Ÿä¸»æœºï¼Œè™šæ‹Ÿä¸»æœºä¼šç»™ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œç„¶åéƒ¨ç½²è‡ªå·±çš„å†…å®¹ï¼›è®¿é—®åŸŸåæ—¶å°±ä¼šè®¿é—®æ”¹æ–‡ä»¶å¤¹ä¸‹çš„æŸ ä¸ªèµ„æº</p>
<h3 id="2-ä½¿ç”¨Nginxé…ç½®è™šæ‹Ÿä¸»æœº"><a href="#2-ä½¿ç”¨Nginxé…ç½®è™šæ‹Ÿä¸»æœº" class="headerlink" title="2. ä½¿ç”¨Nginxé…ç½®è™šæ‹Ÿä¸»æœº"></a>2. ä½¿ç”¨Nginxé…ç½®è™šæ‹Ÿä¸»æœº</h3><ol>
<li><p>åœ¨nginxä¸‹å»ºç«‹ä¸€ä¸ªygbçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ–°å»ºä¸€ä¸ªindex.html</p>
</li>
<li><p>åœ¨nginx.confé…ç½®ä¸‹http -&gt; serverå—å†…é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    #ç›‘å¬ç«¯å£ä¸º 80</span><br><span class="line">    listen       80;</span><br><span class="line">    #è®¾ç½®ä¸»æœºåŸŸå</span><br><span class="line">    server_name  www.xiaoyuge.work;</span><br><span class="line">    #è®¾ç½®è®¿é—®çš„è¯­è¨€ç¼–ç </span><br><span class="line">    #charset koi8-r;</span><br><span class="line">    #è®¾ç½®è™šæ‹Ÿä¸»æœºè®¿é—®æ—¥å¿—çš„å­˜æ”¾è·¯å¾„åŠæ—¥å¿—çš„æ ¼å¼ä¸ºmain</span><br><span class="line">    #access_log  logs/host.access.log  main;</span><br><span class="line">   </span><br><span class="line">    #    è¿™ä¸ªæ˜¯åŸŸååé—®çš„è™šæ‹Ÿä¸»æœºçš„æ–‡ä»¶è·¯å¾„</span><br><span class="line">    root  /usr/local/nginx/data/ygb</span><br><span class="line">    #è®¾ç½®è™šæ‹Ÿä¸»æœºçš„åŸºæœ¬ä¿¡æ¯</span><br><span class="line">    location / &#123;</span><br><span class="line">        #è®¾ç½®è™šæ‹Ÿä¸»æœºé»˜è®¤è®¿é—®çš„ç½‘é¡µ</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨,ç„¶ååœ¨æµè§ˆå™¨è®¿é—®åŸŸå<a href="http://www.xiaoyuge.work/">www.xiaoyuge.work</a></p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./nginx -c ./nginx.conf</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>NginxåŸºç¡€ç¯‡ï¼ˆå››ï¼‰Nginxå®ç°åå‘ä»£ç†</title>
    <url>/nginx-04/</url>
    <content><![CDATA[<h3 id="1-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"><a href="#1-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†" class="headerlink" title="1. æ­£å‘ä»£ç†å’Œåå‘ä»£ç†"></a>1. æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</h3><ol>
<li><p>æ­£å‘ä»£ç†ï¼š<br>æ­£å‘ä»£ç†ç±»ä¼¼ä¸€ä¸ªè·³æ¿æœºï¼Œä»£ç†è®¿é—®å¤–éƒ¨èµ„æº<br>æ¯”å¦‚æˆ‘ä»¬å›½å†…è®¿é—®è°·æ­Œï¼Œç›´æ¥è®¿é—®è®¿é—®ä¸åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ­£å‘ä»£ç†æœåŠ¡å™¨ï¼Œè¯·æ±‚å‘åˆ°ä»£ç†æœï¼Œä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿè®¿é—®è°·æ­Œï¼Œè¿™æ ·ç”±ä»£ç†å»è°·æ­Œå–åˆ°è¿”å›æ•°æ®ï¼Œå†è¿”å›ç»™æˆ‘ä»¬ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½è®¿é—®è°·æ­Œäº†<br><img src="/nginx-04/1.png" alt="æ­£å‘ä»£ç†"></p>
<p> <strong>æ­£å‘ä»£ç†çš„ç”¨é€”</strong>ï¼š</p>
<p> ï¼ˆ1ï¼‰è®¿é—®åŸæ¥æ— æ³•è®¿é—®çš„èµ„æºï¼Œå¦‚google</p>
<p> ï¼ˆ2ï¼‰ å¯ä»¥åšç¼“å­˜ï¼ŒåŠ é€Ÿè®¿é—®èµ„æº</p>
<p> ï¼ˆ3ï¼‰å¯¹å®¢æˆ·ç«¯è®¿é—®æˆæƒï¼Œä¸Šç½‘è¿›è¡Œè®¤è¯</p>
<p> ï¼ˆ4ï¼‰ä»£ç†å¯ä»¥è®°å½•ç”¨æˆ·è®¿é—®è®°å½•ï¼ˆä¸Šç½‘è¡Œä¸ºç®¡ç†ï¼‰ï¼Œå¯¹å¤–éšè—ç”¨æˆ·ä¿¡æ¯</p>
<p> <strong>æ­£å‘ä»£ç†å³æ˜¯å®¢æˆ·ç«¯ä»£ç†, ä»£ç†å®¢æˆ·ç«¯, æœåŠ¡ç«¯ä¸çŸ¥é“å®é™…å‘èµ·è¯·æ±‚çš„å®¢æˆ·ç«¯</strong><br><img src="/nginx-04/3.png" alt="æ­£åå‘ä»£ç†"></p>
</li>
<li><p>åå‘ä»£ç†ï¼š<br>åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰å®é™…è¿è¡Œæ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªæœåŠ¡å™¨<br><img src="/nginx-04/2.png" alt="åå‘ä»£ç†"></p>
<p><strong>åå‘ä»£ç†çš„ä½œç”¨</strong>ï¼š</p>
<p>ï¼ˆ1ï¼‰ä¿è¯å†…ç½‘çš„å®‰å…¨ï¼Œé˜»æ­¢webæ”»å‡»ï¼Œå¤§å‹ç½‘ç«™ï¼Œé€šå¸¸å°†åå‘ä»£ç†ä½œä¸ºå…¬ç½‘è®¿é—®åœ°å€ï¼ŒWebæœåŠ¡å™¨æ˜¯å†…ç½‘</p>
<p>ï¼ˆ2ï¼‰è´Ÿè½½å‡è¡¡ï¼Œé€šè¿‡åå‘ä»£ç†æœåŠ¡å™¨æ¥ä¼˜åŒ–ç½‘ç«™çš„è´Ÿè½½</p>
<p><strong>åå‘ä»£ç†å³æ˜¯æœåŠ¡ç«¯ä»£ç†, ä»£ç†æœåŠ¡ç«¯, å®¢æˆ·ç«¯ä¸çŸ¥é“å®é™…æä¾›æœåŠ¡çš„æœåŠ¡ç«¯</strong></p>
</li>
</ol>
<h3 id="2-Nginxé…ç½®åå‘ä»£ç†"><a href="#2-Nginxé…ç½®åå‘ä»£ç†" class="headerlink" title="2. Nginxé…ç½®åå‘ä»£ç†"></a>2. Nginxé…ç½®åå‘ä»£ç†</h3><p>åœ¨http-&gt; serverå—ä¸­é…ç½®server_name</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    #ç›‘å¬ç«¯å£ä¸º 80</span><br><span class="line">    listen       80;</span><br><span class="line">    #è®¾ç½®ä¸»æœºåŸŸå</span><br><span class="line">    server_name  http://192.168.44.99;</span><br><span class="line">    #è®¾ç½®è™šæ‹Ÿä¸»æœºçš„åŸºæœ¬ä¿¡æ¯</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://192.168.44.1:9096;      ###æœ€é‡è¦çš„é…ç½®ï¼Œè½¬å‘åˆ°ç›®æ ‡åœ°å€ï¼Œ ä¹Ÿå¯ä»¥é…ç½®æœåŠ¡å™¨ç»„ï¼Œç„¶åupstreamä¸€ä¸ªæœåŠ¡å™¨ç»„</span><br><span class="line">        proxy_method POST;   #è®¾ç½®è½¬å‘è¯·æ±‚çš„æ ¼å¼</span><br><span class="line">        #Nginxåœ¨headeré‡Œé¢å¢åŠ ä¸€ä¸ªè‡ªå®šä¹‰å­—æ®µ Hostï¼Œ ç”¨äºå­˜æ”¾å½“å‰å®¢æˆ·ç«¯IPåœ°å€</span><br><span class="line">        proxy_set_header  Host $host;</span><br><span class="line">        #è·å–å®¢æˆ·ç«¯çš„çœŸå®IPåœ°å€è®¾ç½®åˆ°headerä¸­çš„å­—æ®µåä¸ºX-Real-IPé‡Œé¢</span><br><span class="line">        proxy_set_header X-Real-IP  $remote_addr;</span><br><span class="line">        #è·å–æ‰€æœ‰è½¬å‘è¯·æ±‚çš„IPä¿¡æ¯åˆ—è¡¨</span><br><span class="line">        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆè®¿é—®<a href="http://192.168.44.99/">http://192.168.44.99</a> ï¼Œ nginxä¼šå°†è¯·æ±‚è½¬å‘ç»™ç›®æ ‡æœåŠ¡å™¨<a href="http://192.168.44.1:9096/">http://192.168.44.1:9096</a></p>
<h4 id="2-1-location-åŒ¹é…è§„åˆ™"><a href="#2-1-location-åŒ¹é…è§„åˆ™" class="headerlink" title="2.1 location åŒ¹é…è§„åˆ™"></a>2.1 location åŒ¹é…è§„åˆ™</h4><p>åŒ¹é…è§„åˆ™ä»ä¸Šåˆ°ä¸‹ï¼ŒåŒ¹é…è§„åˆ™è¶Šå®½æ¾ï¼›</p>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>location=/uri</td>
<td>= è¡¨ç¤ºç²¾ç¡®åŒ¹é…ï¼Œåªæœ‰å®Œå…¨åŒ¹é…æ‰èƒ½ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td>location ^~ /uri</td>
<td>^~ å¼€å¤´å¯¹URLè·¯å¾„è¿›è¡Œå‰ç¼€åŒ¹é…ï¼Œå¹¶ä¸”åœ¨æ­£åˆ™ä¹‹å‰</td>
</tr>
<tr>
<td>location ~ pattern</td>
<td>å¼€å¤´è¡¨ç¤ºåŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…</td>
</tr>
<tr>
<td>location ~* pattern</td>
<td>å¼€å¤´è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…</td>
</tr>
<tr>
<td>location /uri</td>
<td>ä¸å¸¦ä»»ä½•ä¿®é¥°ç¬¦ï¼Œä¹Ÿè¡¨ç¤ºå‰ç¼€åŒ¹é…ï¼Œä½†æ˜¯åœ¨æ­£åˆ™åŒ¹é…ä¹‹å</td>
</tr>
<tr>
<td>location /</td>
<td>é€šç”¨åŒ¹é…ï¼Œä»»ä½•æœªåŒ¹é…åˆ°å…¶ä»–locationçš„è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°ï¼Œç›¸å½“äºswitchä¸­çš„default</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>NginxåŸºç¡€ç¯‡ï¼ˆä¸€ï¼‰æ‰«ç›²</title>
    <url>/nginx-md/</url>
    <content><![CDATA[<h3 id="1-Nginxå‘å±•å²"><a href="#1-Nginxå‘å±•å²" class="headerlink" title="1.Nginxå‘å±•å²"></a>1.Nginxå‘å±•å²</h3><p>ä½œè€…ï¼šlogo Sysoev</p>
<ul>
<li>2000å¹´åœ°æ´ï¼Œcè¯­è¨€ç¼–å†™</li>
<li>2004å¹´å¼€æº</li>
<li>2011å¹´æˆç«‹å•†ä¸šå…¬å¸</li>
<li>2013 å‘å¸ƒå•†ä¸šç‰ˆæœ¬Nginx plus</li>
<li>2019.5æœˆF5 Networksæ”¶è´­nginx</li>
<li>2019.12è¢«Rambleré›†å›¢èµ·è¯‰</li>
</ul>
<h3 id="2-Nginxä¸å…¶ä»–webæœåŠ¡å™¨å¯¹æ¯”"><a href="#2-Nginxä¸å…¶ä»–webæœåŠ¡å™¨å¯¹æ¯”" class="headerlink" title="2.Nginxä¸å…¶ä»–webæœåŠ¡å™¨å¯¹æ¯”"></a>2.Nginxä¸å…¶ä»–webæœåŠ¡å™¨å¯¹æ¯”</h3><ol>
<li>Nginxä¸Apache HTTP server projectåŒºåˆ«<br>ç”¨æ¥å“åº”ç”¨æˆ·è¯·æ±‚çš„webæœåŠ¡å™¨</li>
<li>Nginx å’ŒtomcatåŒºåˆ«<br>Nginxæ˜¯HTTP Serverï¼Œä¸»è¦æ˜¯ç”¨äºè®¿é—®ä¸€äº›é™æ€èµ„æºï¼Œå¯ä»¥ç”¨åšä»£ç†æœåŠ¡å™¨<br>Tomcatæ˜¯Application Serveråº”ç”¨æœåŠ¡å™¨ï¼Œç”¨æ¥å­˜æ”¾å’Œè¿è¡Œç¨‹åºï¼›</li>
<li>HTTP Server å’ŒApplication ServeråŒºåˆ«ä¸è”ç³»</li>
</ol>
<h3 id="3-HTTPçŸ¥è¯†"><a href="#3-HTTPçŸ¥è¯†" class="headerlink" title="3. HTTPçŸ¥è¯†"></a>3. HTTPçŸ¥è¯†</h3><h4 id="3-1-IPå’Œç«¯å£"><a href="#3-1-IPå’Œç«¯å£" class="headerlink" title="3.1 IPå’Œç«¯å£"></a>3.1 IPå’Œç«¯å£</h4><p>120.77.38.160:80</p>
<p>0ä¸ºAç±»ï¼Œ10ä¸ºBç±»ï¼Œ110ä¸ºCç±»ï¼Œ1110ä¸ºDç±»ï¼Œ1111ä¸ºEç±»ã€‚Dç±»åœ°å€ä¾›ç»„æ’­ä½¿ç”¨ï¼ŒEç±»åœ°å€ä¿ç•™ã€‚</p>
<p><img src="/nginx-md/1.png" alt="img"></p>
<p><img src="/nginx-md/2.png" alt="img"></p>
<p>ç«¯å£æ˜¯ï¼š0ï½65535</p>
<h4 id="3-2-åŸŸå"><a href="#3-2-åŸŸå" class="headerlink" title="3.2 åŸŸå"></a>3.2 åŸŸå</h4><p>åè®®ã€å­åŸŸåã€é¡¶çº§åŸŸåã€åŸŸåç±»å‹ã€èµ„æºè·¯å¾„ã€å‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#https åè®®é»˜è®¤ç«¯å£443 å¯ä»¥çœç•¥</span><br><span class="line">https://www.baidu.com:443</span><br><span class="line"></span><br><span class="line">#userï¼šå­åŸŸåï¼Œ comä¸ºåŸŸåç±»å‹ï¼ˆcnä¸­å›½ï¼Œ usç¾å›½...ï¼‰ï¼› 3623252831 ä¸ºèµ„æºè·¯å¾„</span><br><span class="line">https://user.qzone.qq.com/3623252831</span><br><span class="line"></span><br><span class="line">#ï¼Ÿå·åé¢ä¸ºå‚æ•°</span><br><span class="line">https://baike.baidu.com/item/æµ‹è¯•/232323?fr=asdfasdf</span><br></pre></td></tr></table></figure>
<p><strong>åŸŸå(domainName)å’ŒIPçš„å…³ç³»ä»¥åŠåŸŸåçš„ç»„æˆ</strong></p>
<p>åŸŸåï¼š<a href="https://www.baidu.com/member/query?far=adsfad">https://www.baidu.com:443/member/query?far=adsfad</a></p>
<ul>
<li>http/ https: åè®®</li>
<li>baidu: é¡¶çº§åŸŸå</li>
<li>Comï¼š åŸŸåç±»å‹</li>
<li>www: å­åŸŸåï¼Œå¯ä»¥æœ‰å¤šçº§ï¼šuser.qzone.qq.com/232323</li>
<li>far=asdfa: å‚æ•°</li>
<li>member/query: èµ„æºè·¯å¾„<br>DNS(domain name server)å°†åŸŸåè½¬åŒ–ä¸ºip+port</li>
</ul>
<h5 id="3-3-HTTPåè®®çš„ç‰¹ç‚¹"><a href="#3-3-HTTPåè®®çš„ç‰¹ç‚¹" class="headerlink" title="3.3 HTTPåè®®çš„ç‰¹ç‚¹"></a>3.3 HTTPåè®®çš„ç‰¹ç‚¹</h5><ul>
<li>ç®€å•å¿«é€Ÿ</li>
<li>çµæ´»</li>
<li>æ— è¿æ¥ï¼ˆä¸€æ¬¡è¯·æ±‚ï¼Œè¿æ¥å…³é—­ï¼‰</li>
<li>æ— çŠ¶æ€ï¼ˆæ¯æ¬¡è¯·æ±‚éƒ½å’Œä¹‹å‰çš„è¯·æ±‚æ— å…³ï¼‰</li>
</ul>
<h5 id="3-4-HTTPåè®®çš„è¯·æ±‚æ ¼å¼"><a href="#3-4-HTTPåè®®çš„è¯·æ±‚æ ¼å¼" class="headerlink" title="3.4 HTTPåè®®çš„è¯·æ±‚æ ¼å¼"></a>3.4 HTTPåè®®çš„è¯·æ±‚æ ¼å¼</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Request URL: https://prtas.videocc.net/v2/view?pid=1638687363047X1327470&amp;vid=8c8d9388d0b4c16f41ef557fba23dede_8&amp;uid=8c8d9388d0&amp;flow=0&amp;ts=1638688553584&amp;href=aHR0cHM6Ly9rZS5ndXBhb2VkdS5jbi9wbGF5LzI4OD9waGFzZUlkPTU&amp;duration=1278&amp;cts=789&amp;sign=fcf19468eff088e983796d5826268f2d&amp;sd=1190&amp;pd=788&amp;pn=HTML5&amp;pv=v1.15.0&amp;sid=ZDIzZGM4ODUtNDM2My00MTQ3LWJmYTktY2M3MDgwM2U0NDc5&amp;param1=&amp;param2=MTc2MjEyODQ5OTg&amp;param3=&amp;cataid=1591268435818</span><br><span class="line">Request Method: GET</span><br><span class="line">Status Code: 200 </span><br><span class="line">Remote Address: 221.231.81.238:443</span><br><span class="line">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>
<ul>
<li>è¯·æ±‚è¡Œ</li>
<li>è¯·æ±‚ç±»å‹ Request Method<ol>
<li>GET: è¯·æ±‚æŒ‡å®šçš„é¡µé¢ç»†è…»ï¼Œå¹¶è¿”å›å°¸ä½“ä¸»é¢˜</li>
<li>HEAD: ç±»ä¼¼äºGETè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„ç›¸åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´</li>
<li>POSTï¼šæƒ³æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼Œæ•°æ®è¢«é«˜å–Šåœ¨è¯·æ±‚ä½“ä¸­</li>
<li>PUT: ä»å®¢æˆ·ç«¯æƒ³æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šçš„æ–‡æ¡£çš„å†…å®¹</li>
<li>DELETE: è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢</li>
<li>CONNECT: HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ–¹å¼æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨</li>
<li>OPTIONS: å…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½</li>
<li>TRACE: å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•åè¯Šæ–­</li>
</ol>
</li>
<li>è¯·æ±‚å¤´</li>
<li>ç©ºè¡Œå’Œè¯·æ±‚æ•°æ®</li>
</ul>
<h5 id="3-5-HTTPåè®®çš„è¿”å›æ ¼å¼"><a href="#3-5-HTTPåè®®çš„è¿”å›æ ¼å¼" class="headerlink" title="3.5 HTTPåè®®çš„è¿”å›æ ¼å¼"></a>3.5 HTTPåè®®çš„è¿”å›æ ¼å¼</h5><p>çŠ¶æ€è¡Œã€å°æ´—å¤´ã€ç©ºè¡Œå’Œå“åº”æ­£æ–‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 200</span><br><span class="line">Server: nginx/1.20.1</span><br><span class="line">Date: Sun, 05 Dec 2021 07:24:45 GMT</span><br><span class="line">Content-Type: application/json;charset=UTF-8</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Access-Control-Allow-Origin: https://ke.gupaoedu.cn</span><br><span class="line">Access-Control-Allow-Credentials: true</span><br><span class="line">Access-Control-Allow-Methods: PUT,POST,GET,DELETE,OPTIONS,PATCH</span><br><span class="line">Access-Control-Allow-Headers: DNT,web-token,app-token,Authorization,Accept,Origin,Keep-Alive,User-Agent,X-Mx-ReqToken,X-Data-Type,X-Auth-Token,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,token,showerr</span><br><span class="line">Access-Control-Max-Age: 86400</span><br></pre></td></tr></table></figure>

<p><strong>Httpæ ¼å¼å“åº”çŠ¶æ€ç æœ‰å“ªäº›</strong></p>
<ul>
<li>1xx: informational(ä¿¡æ¯æ€§çŠ¶æ€ç ) æ¥å—çš„è¯·æ±‚æ­£åœ¨å¤„ç†</li>
<li>2xx: success(æˆåŠŸçŠ¶æ€ç )  è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯•</li>
<li>3xxï¼šredirectionï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰éœ€è¦è¿›è¡Œå¤æ£€æ“ä½œä»¥å®Œæˆè¯·æ±‚</li>
<li>4xxï¼šclient errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚</li>
<li>5xx: server errorï¼ˆæœåŠ¡å™¨é”™è¯¯é”™è¯¯çŠ¶æ€ç ï¼‰ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™</li>
</ul>
<h5 id="3-6-é€šç”¨å¤´å­—æ®µCommon-Header"><a href="#3-6-é€šç”¨å¤´å­—æ®µCommon-Header" class="headerlink" title="3.6 é€šç”¨å¤´å­—æ®µCommon Header"></a>3.6 é€šç”¨å¤´å­—æ®µCommon Header</h5><table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>Cache-control</td>
<td>æ§åˆ¶ç¼“å­˜çš„è¡Œä¸º</td>
</tr>
<tr>
<td>Connection</td>
<td>æ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„æ”¶ä¸å­—æ®µã€ç®¡ç†æŒä¹…è¿æ¥</td>
</tr>
<tr>
<td>Date</td>
<td>åˆ›å»ºæŠ¥æ–‡çš„æ—¥æœŸæ—¶é—´</td>
</tr>
<tr>
<td>Pragma</td>
<td>æŠ¥æ–‡æŒ‡ä»¤</td>
</tr>
<tr>
<td>Trailer</td>
<td>æŠ¥æ–‡æœ«ç«¯çš„é¦–éƒ¨ä¸€è§ˆ</td>
</tr>
<tr>
<td>Transfer-Encoding</td>
<td>æŒ‡å®šæŠ¥æ–‡ä¸»é¢˜çš„ä¼ è¾“ç¼–ç æ–¹å¼</td>
</tr>
<tr>
<td>Upgrade</td>
<td>å‡çº§ä¸ºå…¶ä»–åè®®</td>
</tr>
<tr>
<td>Via</td>
<td>ä»£ç†æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td>Warning</td>
<td>é”™è¯¯é€šçŸ¥</td>
</tr>
</tbody></table>
<h5 id="3-7-å“åº”å¤´å­—æ®µResponse-Header"><a href="#3-7-å“åº”å¤´å­—æ®µResponse-Header" class="headerlink" title="3.7 å“åº”å¤´å­—æ®µResponse Header"></a>3.7 å“åº”å¤´å­—æ®µResponse Header</h5><table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>Accept-Ranges</td>
<td>æ˜¯å¦æ¥æ”¶å­—èŠ‚èŒƒå›´è¯·æ±‚</td>
</tr>
<tr>
<td>Age</td>
<td>æ¨ç®—èµ„æºåˆ›å»ºç»è¿‡çš„æ—¶é—´</td>
</tr>
<tr>
<td>ETag</td>
<td>èµ„æºçš„åŒ¹é…ä¿¡æ¯</td>
</tr>
<tr>
<td>Location</td>
<td>å¦å®¢æˆ·ç«¯é‡å®šå‘è‡³æŒ‡å®šçš„URI</td>
</tr>
<tr>
<td>Proxy-Authenticate</td>
<td>ä»£ç†æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td>
</tr>
<tr>
<td>Retry-After</td>
<td>å¯¹å†æ¬¡å‘èµ·è¯·æ±‚çš„æ—¶æœºè¦æ±‚</td>
</tr>
<tr>
<td>Vary</td>
<td>ä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„ç®¡ç†ä¿¡æ¯</td>
</tr>
<tr>
<td>WWW-Authenticate</td>
<td>æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯</td>
</tr>
</tbody></table>
<h5 id="3-8-å®ä½“å¤´å­—æ®µ-Entity-Header"><a href="#3-8-å®ä½“å¤´å­—æ®µ-Entity-Header" class="headerlink" title="3.8 å®ä½“å¤´å­—æ®µ Entity Header"></a>3.8 å®ä½“å¤´å­—æ®µ Entity Header</h5><table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>Allow</td>
<td>èµ„æºç§‘æ”¯æŒçš„httpæ–¹æ³•</td>
</tr>
<tr>
<td>Connect-Encoding</td>
<td>å®ä½“ä¸»ä½“é€‚ç”¨çš„ç¼–ç æ ¼å¼</td>
</tr>
<tr>
<td>Content-Language</td>
<td>å®ä½“ä¸»ä½“çš„è‡ªç„¶è¯­è¨€</td>
</tr>
<tr>
<td>Content-length</td>
<td>å®ä½“ä¸»ä½“çš„å¤§å°</td>
</tr>
<tr>
<td>Content-Location</td>
<td>æ›¿ä»£æ•Œè¥èµ„æºçš„URI</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>å®ä½“ä¸»ä½“çš„æŠ¥æ–‡æ‘˜è¦</td>
</tr>
<tr>
<td>Content-Range</td>
<td>å®ä½“ä¸»ä½“çš„ä½ç½®èŒƒå›´</td>
</tr>
<tr>
<td>Content-Type</td>
<td>å®ä½“ä¸»ä½“çš„åª’ä½“ç±»å‹</td>
</tr>
<tr>
<td>Expires</td>
<td>å®ä½“ä¸»ä½“è¿‡æœŸçš„æ—¥æœŸæ—¶é—´</td>
</tr>
<tr>
<td>Last-Modified</td>
<td>èµ„æºçš„æœ€åä¿®æ”¹æ—¥æœŸæ—¶é—´</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>MinIOç®€ä»‹ä»¥åŠLinuxå®‰è£…MinIO</title>
    <url>/linux-minio/</url>
    <content><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯å¯¹è±¡å­˜å‚¨"><a href="#1-ä»€ä¹ˆæ˜¯å¯¹è±¡å­˜å‚¨" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¯¹è±¡å­˜å‚¨"></a>1. ä»€ä¹ˆæ˜¯å¯¹è±¡å­˜å‚¨</h2><p>å¯¹è±¡å­˜å‚¨æœåŠ¡OSSï¼ˆObject Storage Serviceï¼‰æ˜¯ä¸€ç§æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯ç”¨çš„äº‘å­˜å‚¨æœåŠ¡ï¼Œ<strong>é€‚åˆå­˜æ”¾ä»»æ„ç±»å‹çš„æ–‡ä»¶</strong>ã€‚å®¹é‡å’Œå¤„ç†èƒ½åŠ›å¼¹æ€§æ‰©å±•ï¼Œå¤šç§å­˜å‚¨ç±»å‹æä¾›é€‰æ‹©ï¼Œå…¨é¢ä¼˜åŒ–å­˜å‚¨æˆæœ¬ã€‚</p>
<p>æœ€å¤§çš„ä¼˜åŠ¿ï¼šå¯ä»¥å­˜å‚¨å¤§é‡çš„éç»“æ„è¯æ•°æ®ï¼Œä¾‹å¦‚ï¼šå›¾ç‰‡ã€è§†é¢‘ã€æ—¥å¿—æ–‡ä»¶ã€å¤‡ä»½æ•°æ®å’Œå®¹å™¨/è™šæ‹Ÿæœºé•œåƒç­‰ã€‚</p>
<h2 id="2-MinIO"><a href="#2-MinIO" class="headerlink" title="2. MinIO"></a>2. MinIO</h2><p>MinIO æ˜¯ä¸ªåŸºäºGolangç¼–å†™çš„å¼€æºå¯¹è±¡å­˜å‚¨å¥—ä»¶ï¼ŒåŸºäºApache License V2.0å¼€æºåè®®ï¼Œè™½ç„¶è½»é‡ï¼Œå´æ‹¥æœ‰ä¸é”™çš„æ€§èƒ½ï¼Œå…¼å®¹äºšé©¬é€ŠS3äº‘å­˜å‚¨æœåŠ¡æ¥å£ã€‚å¯ä»¥å¾ˆç®€å•çš„å’Œå…¶ä»–åº”ç”¨ç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚ï¼šNodeJSã€Redisã€mysqlç­‰</p>
<p>ä¸­æ–‡æ–‡æ¡£ï¼š <a href="http://docs.minio.org.cn/docs/master/minio-monitoring-guide">http://docs.minio.org.cn/docs/master/minio-monitoring-guide</a></p>
<h3 id="2-1-MinIOåº”ç”¨åœºæ™¯"><a href="#2-1-MinIOåº”ç”¨åœºæ™¯" class="headerlink" title="2.1 MinIOåº”ç”¨åœºæ™¯"></a>2.1 MinIOåº”ç”¨åœºæ™¯</h3><p>å¯ä»¥ä½œä¸ºç§æœ‰äº‘çš„å¯¹è±¡å­˜å‚¨æœåŠ¡æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºäº‘å¯¹è±¡å­˜å‚¨çš„ç½‘å…³å±‚ï¼Œæ— ç¼å¯¹æ¥Amazon S3 æˆ–è€… MicroSoft Azure ã€‚<br><img src="/linux-minio/1.png" alt="åº”ç”¨åœºæ™¯"></p>
<h3 id="2-2-MinIOç‰¹ç‚¹"><a href="#2-2-MinIOç‰¹ç‚¹" class="headerlink" title="2.2 MinIOç‰¹ç‚¹"></a>2.2 MinIOç‰¹ç‚¹</h3><ul>
<li><p>é«˜æ€§èƒ½</p>
<p>  ä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½å­˜å‚¨ï¼Œåœ¨æ ‡å‡†ç¡¬ä»¶æ¡ä»¶ä¸‹ï¼Œå…¶è¯»å†™é€Ÿç‡åˆ†åˆ«å¯ä»¥è¾¾åˆ°55Gb/så’Œ 35Gb/sã€‚å¹¶ä¸”MinIOæ”¯æŒä¸€ä¸ªå¯¹è±¡æ–‡ä»¶æ˜¯ä»»æ„å¤§å°ï¼ˆå‡ KBåˆ°æœ€å¤§5Tä¸ç­‰ï¼‰</p>
</li>
<li><p>å¯æ‰©å±•</p>
<p>  ä¸åŒMinIOé›†ç¾¤å¯ä»¥ç»„æˆè”é‚¦ï¼Œå¹¶å½¢æˆä¸€ä¸ªå…¨å±€çš„å‘½åç©ºé—´ï¼Œå¹¶ä¸”æ”¯æŒè·¨è¶Šå¤šä¸ªæ•°æ®ä¸­å¿ƒ</p>
</li>
<li><p>äº‘åŸç”Ÿ</p>
<p>  å®¹å™¨åŒ–ã€åŸºäºK8Sçš„ç¼–æ’ã€å¤šç§Ÿæˆ·æ”¯æŒ</p>
</li>
<li><p>Amazon S3å…¼å®¹</p>
<p>  ä½¿ç”¨Amazon S3 V2/V4 APIã€‚å¯ä»¥ä½¿ç”¨Minio SDKï¼ŒMinio Clientï¼ŒAWS SDK å’Œ AWS CLI è®¿é—®MinioæœåŠ¡å™¨ã€‚</p>
</li>
<li><p>å¯å¯¹æ¥å¤šç§åç«¯å­˜å‚¨</p>
<p>é™¤äº†Minioè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè¿˜æ”¯æŒ DASã€ JBODsã€NASã€Googleäº‘å­˜å‚¨å’Œ Azure Blobå­˜å‚¨ã€‚</p>
</li>
<li><p>SDKæ”¯æŒ</p>
<p>GO SDKï¼š <a href="https://github.com/minio/minio-go">https://github.com/minio/minio-go</a></p>
<p>JavaSDKï¼š <a href="https://github.com/minio/minio-java">https://github.com/minio/minio-java</a></p>
<p>PythonSDKï¼š <a href="https://github.com/minio/minio-py">https://github.com/minio/minio-py</a></p>
</li>
</ul>
<ul>
<li><p>Lambdaè®¡ç®—</p>
<p>MinioæœåŠ¡å™¨é€šè¿‡å…¶å…¼å®¹AWS SNS / SQSçš„äº‹ä»¶é€šçŸ¥æœåŠ¡è§¦å‘LambdaåŠŸèƒ½ã€‚æ”¯æŒçš„ç›®æ ‡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚Kafkaï¼ŒNATSï¼ŒAMQPï¼ŒMQTTï¼ŒWebhooksä»¥åŠElasticsearchï¼ŒRedisï¼ŒPostgreså’ŒMySQLç­‰æ•°æ®åº“</p>
</li>
<li><p>å›¾å½¢åŒ–ç•Œé¢</p>
<p>  æœ‰æ“ä½œé¡µé¢</p>
</li>
<li><p>åŠŸèƒ½ç®€å•</p>
<p>  ä¸å®¹æ˜“å‡ºé”™ï¼Œå¿«é€Ÿå¯åŠ¨</p>
</li>
<li><p>æ”¯æŒçº åˆ ç </p>
<p>MinIOä½¿ç”¨çº åˆ ç ã€Checksumæ¥é˜²æ­¢ç¡¬ä»¶é”™è¯¯å’Œé™é»˜æ•°æ®æ±¡æŸ“ã€‚åœ¨æœ€é«˜å†—ä½™åº¦é…ç½®ä¸‹ï¼Œå³ä½¿ä¸¢å¤±1/2çš„ç£ç›˜ä¹Ÿèƒ½æ¢å¤æ•°æ®</p>
</li>
</ul>
<h3 id="2-3-å­˜å‚¨æœºåˆ¶"><a href="#2-3-å­˜å‚¨æœºåˆ¶" class="headerlink" title="2.3 å­˜å‚¨æœºåˆ¶"></a>2.3 å­˜å‚¨æœºåˆ¶</h3><p>MinIO ä½¿ç”¨çº åˆ ç erasure codeã€æ ¡éªŒå’Œchecksumã€‚ å³ä½¿ä¸¢ä¸€åŠæ•°æ®ï¼ˆN/2ï¼‰çš„é¹°æ´¾ï¼Œä»ç„¶å¯ä»¥æ¢å¤æ•°æ®ã€‚</p>
<ul>
<li><p>æ ¡éªŒå’Œchecksum</p>
<p>  ä¿æŠ¤æ•°æ®å…å—ç¡¬ä»¶æ•…éšœå’Œæ— å£°æ•°æ®æŸå</p>
</li>
<li><p>çº åˆ ç erasure code</p>
<p>  çº åˆ ç æ˜¯ä¸€ç§æ¢å¤ä¸¢å¤±å’ŒæŸåæ•°æ®çš„æ•°æ®ç®—æ³•ï¼Œç›®å‰çº åˆ ç æŠ€æœ¯åœ¨åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­çš„åº”ç”¨ä¸»è¦æœ‰ä¸‰ç±»ï¼šé˜µåˆ—çº åˆ ç ï¼ˆArray Code : RAID5ã€RAID6ç­‰ï¼‰ã€RSï¼ˆReed-Solomonï¼‰é‡Œå¾·-æ‰€ç½—é—¨ç±»çº åˆ ç å’ŒLDPCï¼ˆLowDensity Parity Check Codeï¼‰<br>  ä½å¯†åº¦å¥‡å¶æ ¡éªŒçº åˆ ç ã€‚</p>
<p>  Erasure code æ˜¯ä¸€ç§ç¼–ç æŠ€æœ¯ï¼Œä»–å¯ä»¥å°†Nä»½åŸå§‹æ•°æ®ï¼Œå¢åŠ mä»½æ•°æ®ï¼Œå¹¶é€šè¿‡n+m ä»½ä¸­çš„ä»»æ„nä»½æ•°æ®ï¼Œè¿˜åŸä¸ºåŸå§‹æ•°æ®ã€‚å³å¦‚æœæœ‰ä»»æ„å°äºç­‰äºmä»½çš„æ•°æ®å¤±æ•ˆï¼Œä»ç„¶èƒ½é€šè¿‡å‰©ä¸‹çš„æ•°æ®è¿˜åŸå‡ºæ¥ã€‚<br>MinIO é‡‡ç”¨Reed-Solomon codeå°†å¯¹è±¡æ‹†åˆ†æˆN/2æ•°æ®å’ŒN/2å¥‡å¶æ ¡éªŒå¿«ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœæ˜¯12å—ç›˜ï¼Œä¸€ä¸ªå¯¹è±¡ä¼šåˆ†æˆ6ä¸ªæ•°æ®å—ã€6ä¸ªå¥‡å¶æ ¡éªŒå—ï¼›å¯ä»¥ä¸¢å¤±ä»»æ„6å—ç›˜ï¼ˆä¸ç®¡æ˜¯å­˜æ”¾çš„æ•°æ®å—è¿˜æ˜¯å¥‡å¶æ ¡éªŒå—ï¼‰ï¼Œä»å¯ä»¥é€šè¿‡å‰©ä¸‹çš„ç›˜è¿›è¡Œæ•°æ®æ¢å¤</p>
</li>
</ul>
<h2 id="3-å®‰è£…å’Œä½¿ç”¨MinIO"><a href="#3-å®‰è£…å’Œä½¿ç”¨MinIO" class="headerlink" title="3. å®‰è£…å’Œä½¿ç”¨MinIO"></a>3. å®‰è£…å’Œä½¿ç”¨MinIO</h2><h3 id="3-1-Linuxå®‰è£…MinIO"><a href="#3-1-Linuxå®‰è£…MinIO" class="headerlink" title="3.1 Linuxå®‰è£…MinIO"></a>3.1 Linuxå®‰è£…MinIO</h3><ol>
<li>ä¸‹è½½ï¼ˆ<a href="https://min.io/download#/linux%EF%BC%89">https://min.io/download#/linuxï¼‰</a> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://dl.min.io/server/minio/release/linux-amd64/minio</span><br></pre></td></tr></table></figure>
</li>
<li>è¿è¡Œ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> chmod +x minio</span><br><span class="line"> ./minio server /usr/software/minio/data      #å°†/usr/software/minio/data æ›¿æ¢ä¸ºæ‚¨å¸Œæœ› MinIO å­˜å‚¨æ•°æ®çš„é©±åŠ¨å™¨æˆ–ç›®å½•çš„è·¯å¾„ã€‚</span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–è€…æŒ‡å®šè´¦å·å¯†ç å¯åŠ¨</span></span><br><span class="line">MINIO_ACCESS_KEY=minioadmin MINIO_SECRET_KEY=minioadmin ./minio server --config-dir /usr/software/minio/config /usr/software/minio/data</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"> #</span><span class="bash">åå°å¯åŠ¨</span></span><br><span class="line">nohup ./minio server /usr/software/minio/data  &gt;  /usr/software/minio/minio.log 2&gt;&amp;1 &amp;#</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–è€…æŒ‡å®šè´¦å·å¯†ç å¯åŠ¨</span></span><br><span class="line">MINIO_ACCESS_KEY=minioadmin MINIO_SECRET_KEY=minioadmin nohup ./minio server --config-dir /usr/software/minio/config /usr/software/minio/data&gt;  /usr/software/minio/minio.log 2&gt;&amp;1 &amp;#</span><br></pre></td></tr></table></figure>
<img src="/linux-minio/8.png"></li>
<li>è®¾ç½®å¯åŠ¨è„šæœ¬ï¼ˆå»ºè®®ï¼‰ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch minio.sh</span><br><span class="line">   </span><br><span class="line">vi minio.sh</span><br></pre></td></tr></table></figure>
åœ¨shæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŒ‡å®šç™»å½•ç”¨æˆ·å</span></span><br><span class="line">export MINIO_ACCESS_KEY=username</span><br><span class="line"><span class="meta">#</span><span class="bash">æŒ‡å®šç™»å½•å¯†ç </span></span><br><span class="line">export MINIO_SECRET_KEY=password</span><br><span class="line"><span class="meta">#</span><span class="bash">æŒ‡å®šç«¯å£ä»¥åŠå­˜å‚¨æ–‡ä»¶å¤¹ï¼Œå¹¶å¯åŠ¨æœåŠ¡ 9000è®¿é—®ç«¯å£ï¼Œ 9001 æ§åˆ¶å°ç•Œé¢è®¿é—®ç«¯å£, è¿™é‡Œ0.0.0.0å¯ä»¥è®¾ç½®ä¸ºå…·ä½“çš„æœåŠ¡å™¨IP</span></span><br><span class="line">nohup ./minio server --address &#x27;0.0.0.0:9000&#x27; --console-address &#x27;0.0.0.0:9001&#x27; ./miniodata &gt; ./miniodata/minio.log 2&gt;&amp;1&amp;</span><br></pre></td></tr></table></figure>
ç»™å½“å‰ç”¨æˆ·åŠ ä¸Šæ‰§è¡Œæƒé™ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod u+x  *.sh</span><br><span class="line">  </span><br><span class="line"><span class="meta"> #</span><span class="bash">å¯åŠ¨</span></span><br><span class="line">sh minio.sh</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-2-å®‰è£…å®¢æˆ·ç«¯-å¯é€‰"><a href="#3-2-å®‰è£…å®¢æˆ·ç«¯-å¯é€‰" class="headerlink" title="3.2 å®‰è£…å®¢æˆ·ç«¯(å¯é€‰)"></a>3.2 å®‰è£…å®¢æˆ·ç«¯(å¯é€‰)</h3><ol>
<li>å®‰è£… <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://dl.min.io/client/mc/release/linux-amd64/mc</span><br><span class="line">chmod +x mc</span><br><span class="line">./mc --help</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨å‘½ä»¤ç»™å®¢æˆ·ç«¯æ·»åŠ ä¸€ä¸ªæœåŠ¡ç«¯ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./mc alias set minio http://172.21.0.7:9000 minioadmin minioadmin</span><br></pre></td></tr></table></figure></li>
<li>åˆ›å»ºbucketï¼Œå¹¶æŸ¥è¯¢æ‰€æœ‰bucket <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@ww xiaoyuge]# ./mc ls minio</span><br><span class="line">[root@ww xiaoyuge]# ./mc mb minio/mybucket</span><br><span class="line">Bucket created successfully `minio/mybucket`</span><br><span class="line">[root@ww xiaoyuge]# ./mc ls minio</span><br><span class="line">[2020-09-02 03:02:36 CST]      0B mybucket/</span><br><span class="line">[root@ww xiaoyuge]# </span><br></pre></td></tr></table></figure></li>
<li>é¡µé¢æŸ¥è¯¢bucket <img src="/linux-minio/6.png"></li>
<li>åˆ›å»ºç”¨æˆ· <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./mc admin user add minio root rootroot</span><br></pre></td></tr></table></figure></li>
<li>ç»™ç”¨æˆ·èµ‹äºˆæƒé™ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./mc admin policy set minio readwrite user=root</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-3-ä½¿ç”¨MinIO"><a href="#3-3-ä½¿ç”¨MinIO" class="headerlink" title="3.3 ä½¿ç”¨MinIO"></a>3.3 ä½¿ç”¨MinIO</h3><ol>
<li><p>å¯åŠ¨</p>
<p> åœ¨æµè§ˆå™¨è¾“å…¥ï¼š <a href="http://localhost:9000/">http://localhost:9000</a><br> <img src="/linux-minio/2.png"><br>åœ¨è¾“å…¥æ§åˆ¶æ‰“å°çš„é»˜è®¤çš„AccessKeyå’ŒSecretKeyï¼š</p>
<p> <strong>AccessKey:</strong> minioadmin</p>
<p> <strong>SecretKeyï¼ˆé»˜è®¤ï¼‰:</strong> minioadmin</p>
<p> ä½¿ç”¨AccessKey å’Œ SecretKey ç™»å½•åå°ã€‚</p>
</li>
<li><p>è¿›å…¥ç³»ç»Ÿåï¼Œæˆ‘ä»¬å…ˆè¦ç‚¹å‡»å³ä¸Šè§’çš„â€œ+â€æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¡¶ï¼ˆè¾“å…¥åç§°åï¼Œå›è½¦å³å¯ï¼‰ï¼Œåœ¨ä¸Šä¼ æ–‡ä»¶åˆ°è¿™ä¸ªæ–‡ä»¶æ¡¶ä¸­ã€‚Create bucketï¼ˆåˆ›å»ºæ–‡ä»¶æ¡¶ï¼‰ï¼Œç„¶åè¾“å…¥bucketåç§°ä¸º <strong>test</strong>, åˆ›å»ºæˆåŠŸåå†Upload fileï¼ˆä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚<br><img src="/linux-minio/3.png"><img src="/linux-minio/3_1.png"><img src="/linux-minio/3_2.png"><img src="/linux-minio/4.png"></p>
<p>ç°åœ¨æˆ‘ä»¬å»æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯åŠ¨æ—¶æŒ‡å®šçš„ç›®å½•å»çœ‹çœ‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ–°å»ºçš„testæ–‡ä»¶ç›®å½•ï¼ˆæ–‡ä»¶æ¡¶ç›¸å½“äºæ–‡ä»¶ç›®å½•ï¼‰ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨çº åˆ ç çš„æ¨¡å¼ï¼Œæ‰€ä»¥ç›´æ¥å°±æ˜¯æºæ–‡ä»¶äº†ã€‚å½“æˆ‘ä»¬çº¿ä¸Šè¿è¡Œçš„é¡¹ç›®å·²ç»æœ‰æºæ–‡ä»¶äº†ï¼Œåœ¨ä½¿ç”¨minioçš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šè¯¥ç›®å½•ä¸ºminioçš„æ–‡ä»¶ç›®å½•å°±è¡Œäº†ã€‚<br><img src="/linux-minio/5.png"><img src="/linux-minio/7.png"></p>
</li>
<li><p>åˆ†äº«æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ–‡ä»¶åˆ†äº«æœ‰æ•ˆæ—¥æœŸ<br> <img src="/linux-minio/11.png"><img src="/linux-minio/12.png" alt="img_1.png"><br>è®¿é—®è¿æ¥ä¼šå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼š<br><img src="/linux-minio/13.png" alt="img_1.png"></p>
</li>
</ol>
<h3 id="3-4-mioIOå¸¸è§å¯åŠ¨é—®é¢˜"><a href="#3-4-mioIOå¸¸è§å¯åŠ¨é—®é¢˜" class="headerlink" title="3.4 mioIOå¸¸è§å¯åŠ¨é—®é¢˜"></a>3.4 mioIOå¸¸è§å¯åŠ¨é—®é¢˜</h3><ol>
<li>å¯åŠ¨æŠ¥é”™â€œWARNING: Console endpoint is listening on a dynamic portâ€¦â€<br> <img src="/linux-minio/9.png" alt="img_1.png"><br>é”™è¯¯æç¤ºå¾ˆæ˜æ˜¾ï¼Œéœ€è¦to choose a static portã€‚<br>å†™äº†ä¸€ä¸ªshellå¯åŠ¨MinIOï¼Œåœ¨shellä¸­ä½¿ç”¨â€“console-address â€˜éƒ¨ç½²minioçš„ip:å¸Œæœ›é€šè¿‡ä»€ä¹ˆç«¯å£æ‰“å¼€minio consoleé¡µé¢â€™ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> export MINIO_ACCESS_KEY=username</span><br><span class="line"><span class="meta">#</span><span class="bash">æŒ‡å®šç™»å½•å¯†ç </span></span><br><span class="line"> export MINIO_SECRET_KEY=password</span><br><span class="line"> nohup ./minio server --address &#x27;0.0.0.0:9000&#x27; --console-address &#x27;0.0.0.0:9001&#x27; ./miniodata &gt; ./miniodata/minio.log 2&gt;&amp;1&amp;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="4-SpringBoot-é›†æˆminIO"><a href="#4-SpringBoot-é›†æˆminIO" class="headerlink" title="4. SpringBoot é›†æˆminIO"></a>4. SpringBoot é›†æˆminIO</h2><p>é¡¹ç›®æºä»£ç åœ°å€ï¼š<a href="https://gitee.com/xiaoyuge520/minio-demo%EF%BC%8C">https://gitee.com/xiaoyuge520/minio-demoï¼Œ</a> ä¸‹é¢æ˜¯åº”ç”¨ä¸»è¦åŠŸèƒ½æˆªå›¾å±•ç¤ºï¼š<br><img src="/linux-minio/14.png" alt="img14.png"><br>åœ¨minIOçš„æ§åˆ¶å°ç•Œé¢é€‰æ‹©å¯¹åº”çš„bucketå¯ä»¥æŸ¥çœ‹åˆ°åˆšæäº¤çš„å†…å®¹<br><img src="/linux-minio/15.png" alt="img14.png"></p>
<p>åŒç†ï¼Œåˆ é™¤ä¹Ÿæ˜¯ä¸€æ ·ï¼ï¼ï¼<br><img src="/linux-minio/16.png" alt="img14.png"></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç³»ç»Ÿä¸‹æŸ¥æ‰¾æ–‡ä»¶å‘½ä»¤æ€»ç»“</title>
    <url>/linux-search-file/</url>
    <content><![CDATA[<h3 id="1-whichæŸ¥å‘½ä»¤ç»å¯¹è·¯å¾„"><a href="#1-whichæŸ¥å‘½ä»¤ç»å¯¹è·¯å¾„" class="headerlink" title="1. whichæŸ¥å‘½ä»¤ç»å¯¹è·¯å¾„"></a>1. whichæŸ¥å‘½ä»¤ç»å¯¹è·¯å¾„</h3><p><strong>which</strong> ä»ç¯å¢ƒå˜é‡PATHä¸­å®šä½/è¿”å›ä¸æŒ‡å®šåå­—ç›¸åŒ¹é…çš„å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„<br><img src="/linux-search-file/1.png" alt="whichå‘½ä»¤"></p>
<p><strong>åŸç†</strong>ï¼šæ‰§è¡Œ<strong>which</strong>å‘½ä»¤æ—¶ï¼Œwhichä¼šåœ¨å½“å‰ç¯å¢ƒå˜é‡PATHä¸­ä¾æ¬¡å¯»æ‰¾èƒ½å¤ŸåŒ¹é…æ‰€æ‰¾å‘½ä»¤åå­—çš„å¯æ‰§è¡Œæ–‡ä»¶åï¼Œä¸åŠ  - aé€‰é¡¹ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œ<br>å¦åˆ™ä¾æ¬¡è¿”å›æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„å</p>
<p><strong>é€‚ç”¨åœºåˆï¼š</strong> ä¸€èˆ¬ç”¨äºæŸ¥æ‰¾å‘½ä»¤/å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ã€‚æœ‰æ—¶å€™å¯èƒ½åœ¨å¤šä¸ªè·¯å¾„ä¸‹å­˜åœ¨ç›¸åŒçš„å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å¯ç”¨äºæŸ¥æ‰¾å½“å‰æ‰€æ‰§è¡Œçš„å‘½ä»¤åˆ°åº•æ˜¯å“ªä¸€ä¸ªä½ç½®å¤„çš„å‘½ä»¤ã€‚</p>
<h3 id="2-whereisæŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶"><a href="#2-whereisæŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶" class="headerlink" title="2. whereisæŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶"></a>2. whereisæŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶</h3><p><strong>whereis</strong> å‘½ä»¤ç”¨æ¥å®šä½æŒ‡ä»¤çš„äºŒè¿›åˆ¶ç¨‹åºã€æºä»£ç æ–‡ä»¶å’Œmanæ‰‹å†Œé¡µç­‰ç›¸å…³æ–‡ä»¶çš„è·¯å¾„ï¼Œ è¯¥å‘½ä»¤åªèƒ½ç”¨äºç¨‹åºåçš„æœç´¢</p>
<ol>
<li>- b   #å®šä½å¯æ‰§è¡Œæ–‡ä»¶</li>
<li>- m   #å®šä½å¸®åŠ©æ–‡ä»¶</li>
<li>- s   å®šä½æºä»£ç æ–‡ä»¶ </li>
<li>- u   æœç´¢é»˜è®¤è·¯å¾„ä¸‹é™¤å¯æ‰§è¡Œæ–‡ä»¶ã€æºä»£ç æ–‡ä»¶ã€å¸®åŠ©æ–‡ä»¶ä»¥å¤–çš„å…¶å®ƒæ–‡ä»¶</li>
<li>- B   æŒ‡å®šæœç´¢å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ã€‚</li>
<li>- M   æŒ‡å®šæœç´¢å¸®åŠ©æ–‡ä»¶çš„è·¯å¾„ã€‚</li>
<li>- S   æŒ‡å®šæœç´¢æºä»£ç æ–‡ä»¶çš„è·¯å¾„<br><img src="/linux-search-file/2.png" alt="whereiså‘½ä»¤"></li>
</ol>
<p><strong>åŸç†ï¼š</strong> whereiså‘½ä»¤é¦–å…ˆä¼šå»æ‰filenameä¸­çš„å‰ç¼€ç©ºæ ¼å’Œä»¥.å¼€å¤´çš„ä»»ä½•å­—ç¬¦ï¼Œç„¶åå†åœ¨æ•°æ®åº“ï¼ˆvar/lib/slocate/slocate.dbï¼‰ä¸­æŸ¥æ‰¾ä¸ä¸Šè¿°å¤„ç†åçš„filenameç›¸åŒ¹é…çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€æºæ–‡ä»¶å’Œå¸®åŠ©æ‰‹å†Œæ–‡ä»¶,ä½¿ç”¨ä¹‹å‰å¯ä»¥ä½¿ç”¨<strong>updatedb</strong>å‘½ä»¤æ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ã€‚</p>
<p><strong>é€‚ç”¨åœºåˆï¼š</strong> äºŒè¿›åˆ¶æ–‡ä»¶ã€æºæ–‡ä»¶å’Œå¸®åŠ©æ‰‹å†Œæ–‡ä»¶è·¯å¾„çš„æŸ¥æ‰¾ã€‚<br>å’Œ<strong>find</strong> ç›¸æ¯”ï¼ŒWhereis æŸ¥æ‰¾çš„é€Ÿåº¦éå¸¸å¿«ï¼Œè¿™æ˜¯å› ä¸ºLinuxç³»ç»Ÿä¼šå°†ç³»ç»Ÿå†…çš„æ‰€æœ‰æ–‡ä»¶éƒ½è®°å½•åœ¨ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ä¸­ï¼Œå½“ä½¿ç”¨<strong>whereis (æˆ–è€…locate)</strong><br>ä¼šä»æ•°æ®åº“æŸ¥æ‰¾æ•°æ®ï¼Œè€Œä¸æ˜¯åƒfindå‘½ä»¤é‚£æ ·ï¼Œé€šè¿‡éå†ç¡¬ç›˜æ¥æŸ¥æ‰¾æ–‡ä»¶ï¼Œæ•ˆç‡æ›´é«˜ï¼</p>
<h3 id="3-locateç¼“å­˜æŸ¥æ‰¾æ–‡ä»¶"><a href="#3-locateç¼“å­˜æŸ¥æ‰¾æ–‡ä»¶" class="headerlink" title="3. locateç¼“å­˜æŸ¥æ‰¾æ–‡ä»¶"></a>3. locateç¼“å­˜æŸ¥æ‰¾æ–‡ä»¶</h3><p><strong>locate</strong> æœç´ ä¸€ä¸ªæ•°æ®åº“ï¼ˆ/var/lib/mlocate/mlocate.dbï¼‰,è¿™ä¸ªæ•°æ®åº“ä¸­å›½å‘¢åŒ…å«æœ¬åœ°æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯ï¼ŒLinuxç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªæ•°æ®åº“ï¼Œå¹¶ä¸”æ¯å¤©æ›´æ–°ä¾æ¬¡ï¼Œæ‰€ä»¥ä½¿ç”¨locateå‘½ä»¤æŸ¥ä¸åˆ°æœ€æ–°å˜åŠ¨è¿‡çš„æ–‡ä»¶ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨ä½¿ç”¨locateä¹‹å‰ï¼Œå…ˆä½¿ç”¨updatedbå‘½ä»¤ï¼Œæ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ï¼Œupdatedbå‘½ä»¤ä¼šæ ¹æ®/etc/updatedb.confæ¥æ›´æ–°æ–‡ä»¶ã€‚</p>
<p><strong>åŸç†ï¼š</strong> é»˜è®¤æƒ…å†µä¸‹(å½“filenameä¸­ä¸åŒ…å«é€šé…ç¬¦*)ï¼Œlocateä¼šç»™å‡ºæ‰€æœ‰ä¸ * filename*ç›¸åŒ¹é…çš„æ–‡ä»¶çš„è·¯å¾„ã€‚<br><strong>é€‚ç”¨åœºåˆï¼š</strong> æ²¡æœ‰æ–‡ä»¶ç±»å‹æ€§è´¨çš„æ¨¡ç³ŠæŸ¥æ‰¾ï¼ˆä½ åªè®°å¾—æŸä¸ªæ–‡ä»¶çš„éƒ¨åˆ†åç§°ï¼‰ã€‚<br><img src="/linux-search-file/3.png" alt="locateå‘½ä»¤"><br><img src="/linux-search-file/4.png" alt="locateå‘½ä»¤"><br><img src="/linux-search-file/5.png" alt="locateå‘½ä»¤"><br><img src="/linux-search-file/6.png" alt="locateå‘½ä»¤"></p>
<h3 id="4-find-éå†æ–‡ä»¶æŸ¥æ‰¾"><a href="#4-find-éå†æ–‡ä»¶æŸ¥æ‰¾" class="headerlink" title="4. find éå†æ–‡ä»¶æŸ¥æ‰¾"></a>4. find éå†æ–‡ä»¶æŸ¥æ‰¾</h3><p>è¯­æ³•ï¼š</p>
<ul>
<li><p>-name                    #æŒ‰æ–‡ä»¶åæŸ¥æ‰¾(find /etc/ -name â€œ??????â€ æŸ¥æ‰¾/etcç›®å½•ä¸‹ï¼Œå¼€å¤´æ˜¯6ä¸ªä»»æ„å­—ç¬¦çš„æ–‡ä»¶ï¼Œ *.logä»¥logç»“å°¾çš„æ–‡ä»¶ï¼›â€[1-3].txtâ€æŒ‡å®šèŒƒå›´ä»¥txtç»“å°¾çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬ 1.txt,2.txt,3.txtï¼‰)</p>
</li>
<li><p>-size                    #æŒ‰å¤§å°æŸ¥æ‰¾ï¼ˆfind /etc/ -size +1M æŸ¥è¯¢å¤§äº1Mçš„æ–‡ä»¶(find /etc/ -size -10K)ï¼Œæ³¨æ„ï¼šå¦‚æœæ²¡æœ‰+ -ï¼Œ åˆ™æ˜¯ç²¾ç¡®åˆ°1M,åŠ ä¸Š+ - è¡¨ç¤ºèŒƒå›´ï¼› find /etc/ -size +1k -a -size -10k æŸ¥æ‰¾1-10Kçš„æ–‡ä»¶ï¼‰</p>
</li>
<li><p>-user                    #æŒ‰å±ä¸»æŸ¥æ‰¾ï¼ˆfind /opt/ -user xiaoyuge æŸ¥æ‰¾/optå±äºxiaoyugeç”¨æˆ·çš„æ–‡ä»¶ï¼›æ³¨æ„ï¼Œç³»ç»Ÿè¦å­˜åœ¨è¯¥ç”¨æˆ·ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰</p>
</li>
<li><p>-perm                    #æŒ‰æƒé™æŸ¥æ‰¾ï¼ˆfind /opt/ -perm 0644 æŸ¥æ‰¾/optç›®å½•æƒé™æ˜¯644æ–‡ä»¶ï¼‰</p>
</li>
<li><p>-type                    #æŒ‰ç±»å‹æŸ¥æ‰¾ï¼ˆfind /usr/bin/ -type f æŸ¥æ‰¾/usr/binä¸‹ç±»å‹æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰</p>
</li>
<li><p>-time                    #æŒ‰å¤©æŸ¥æ‰¾</p>
<ul>
<li><p>atime n                    #å°†n*24å°æ—¶å†…è®¿é—®è¿‡çš„æ–‡ä»¶åˆ—å‡º(access)</p>
</li>
<li><p>ctime n                    #å°†n*24å°æ—¶å†…çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ–‡ä»¶åˆ—å‡ºï¼ˆchangeï¼‰ find /etc/ -ctime +7 åœ¨7å¤©ä¹‹å‰,å±æ€§è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶</p>
</li>
<li><p>mtime n                    #å°†n*24å°æ—¶å†…è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶åˆ—å‡º(modify)</p>
</li>
<li><p>newer file                 #æŠŠæ¯”fileè¿˜è¦å¿ƒçš„æ–‡ä»¶åˆ—å‡º</p>
</li>
<li><p>amin n                     #å°†n åˆ†é’Ÿå†…è®¿é—®è¿‡çš„æ–‡ä»¶åˆ—å‡º(access)   find /etc/ -mmin -120 åœ¨120åˆ†é’Ÿå†…ï¼Œå†…å®¹è¢«ä¿®æ”¹çš„æ–‡ä»¶</p>
</li>
<li><p>cmin n                     #å°†n åˆ†é’Ÿå†…çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ–‡ä»¶åˆ—å‡ºï¼ˆchangeï¼‰</p>
</li>
<li><p>mmin n                     #å°†n åˆ†é’Ÿå†…è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶åˆ—å‡º(modify)</p>
</li>
</ul>
</li>
<li><p>-inum                    #æŒ‰ièŠ‚ç‚¹æŸ¥æ‰¾ æœ‰ä¸€äº›æ–‡ä»¶çš„ç¡¬é“¾æ¥æ•°é‡å¾ˆå¤šï¼Œæœ‰ç›¸åŒçš„ièŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶çš„ièŠ‚ç‚¹å·ï¼Œä¸€æ¬¡æ€§åˆ é™¤ã€‚</p>
</li>
<li><p>-exec                    #æŸ¥æ‰¾åæ‰§è¡Œå‘½ä»¤</p>
</li>
</ul>
<p><strong>åŸç†ï¼š</strong> éå†å½“å‰å·¥ä½œç›®å½•åŠå…¶å­ç›®å½•ï¼Œfindå‘½ä»¤æ˜¯åœ¨ç¡¬ç›˜ä¸Šéå†æŸ¥æ‰¾ï¼Œéå¸¸è€—ç¡¬ç›˜èµ„æºï¼ŒæŸ¥æ‰¾æ•ˆç‡ç›¸æ¯”whereiså’Œlocateè¾ƒä½ã€‚<br><strong>é€‚ç”¨åœºåˆï¼š</strong> èƒ½ç”¨whichã€whereiså’Œlocateçš„æ—¶å€™å°½é‡ä¸è¦ç”¨find.</p>
<h3 id="5-4ç§å‘½ä»¤å¯¹æ¯”"><a href="#5-4ç§å‘½ä»¤å¯¹æ¯”" class="headerlink" title="5. 4ç§å‘½ä»¤å¯¹æ¯”"></a>5. 4ç§å‘½ä»¤å¯¹æ¯”</h3><p><img src="/linux-search-file/7.png" alt="å¯¹æ¯”"></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶è®¾è®¡</title>
    <url>/message-oriented-middleware/</url>
    <content><![CDATA[<h2 id="1-æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°"><a href="#1-æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°" class="headerlink" title="1. æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°"></a>1. æ¶ˆæ¯ä¸­é—´ä»¶æ¦‚è¿°</h2><ol>
<li><p>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶</p>
<p> åˆ©ç”¨é«˜æ•ˆå¯é çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶è¿›è¡Œå¹³å°æ— å…³çš„æ•°æ®äº¤æµï¼›<br> å¹¶åŸºäºæ•°æ®é€šä¿¡æ¥è¿›è¡Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„é›†æˆï¼›<br> é€šè¿‡æä¾›æ¶ˆæ¯å’Œæ¶ˆæ¯æ’é˜Ÿæ¨¡å‹ï¼Œå®ƒå¯ä»¥åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹æ‰©å±•è¿›åŸé—´çš„é€šä¿¡ã€‚</p>
</li>
<li><p>æ¶ˆæ¯ä¸­é—´ä»¶çš„åº”ç”¨åœºæ™¯</p>
<p> è·¨ç³»ç»Ÿæ•°æ®ä¼ é€’ã€é«˜å¹¶å‘æµé‡å‰Šå³°ã€æ•°æ®å¼‚æ­¥å¤„ç†â€¦â€¦</p>
</li>
<li><p>å¸¸ç”¨çš„æ¶ˆæ¯ä¸­é—´ä»¶</p>
<p> ActiveMQ(å¤ªè€)ã€RabbitMQã€Kafkaã€ RocketMQ</p>
</li>
<li><p>æœ¬è´¨</p>
<p> ä¸€ç§å…·å¤‡æ¥å—è¯·æ±‚ã€ä¿å­˜æ•°æ®ã€å‘é€æ•°æ®ç­‰åŠŸèƒ½çš„ç½‘ç»œåº”ç”¨ã€‚å’Œä¸€èˆ¬çš„ç½‘ç»œåº”ç”¨ç¨‹åºçš„åŒºåˆ«æ˜¯å®ƒä¸»è¦è´Ÿè´£æ•°æ®çš„æ¥æ”¶å’Œä¼ é€’ï¼Œæ‰€ä»¥æ€§èƒ½ä¸€èˆ¬é«˜äºæ™®é€šç¨‹åº</p>
</li>
<li><p>5å¤§æ ¸å¿ƒç»„æˆ</p>
<ul>
<li>åè®®</li>
<li>æŒä¹…æ€§æœºåˆ¶</li>
<li>æ¶ˆæ¯åˆ†å¸ƒæœºåˆ¶</li>
<li>é«˜å¯ç”¨è®¾è®¡</li>
<li>é«˜å¯é è®¾è®¡</li>
</ul>
</li>
</ol>
<h3 id="1-1-åè®®"><a href="#1-1-åè®®" class="headerlink" title="1.1 åè®®"></a>1.1 åè®®</h3><p>åè®®æ˜¯è®¡ç®—æœºä¹‹é—´é€šä¿¡æ—¶å…±åŒéµå®ˆçš„ä¸€ç»„çº¦å®šï¼Œç¡®ä¿è®¡ç®—æœºä¹‹é—´èƒ½å¤Ÿç›¸äº’äº¤æµï¼›æ˜¯å¯¹æ•°æ®æ ¼å¼å’Œè®¡ç®—æœºä¹‹é—´äº¤æ¢æ•°æ®æ—¶å¿…é¡»éµå®ˆçš„è§„åˆ™çš„æ­£å¼æè¿°</p>
<p>ä¸‰å¤§è¦ç´ ï¼š</p>
<ul>
<li>è¯­æ³•ï¼šå³æ•°æ®å’Œæ§åˆ¶ä¿¡æ¯çš„ç»“æ„æˆ–æ ¼å¼</li>
<li>è¯­ä¹‰ï¼šå³éœ€è¦å‘å‡ºä½•ç§æ§åˆ¶ä¿¡æ¯ï¼Œå®Œæˆä½•ç§åŠ¨ä½œä»¥åŠä½œå‡ºä½•ç§å“åº”</li>
<li>æ—¶åºï¼šå³æ—¶é—´å®ç°é¡ºåºçš„è¯¦ç»†è¯´æ˜</li>
</ul>
<p>æ¶ˆæ¯ä¸­é—´ä»¶å¸¸ç”¨åè®®ï¼šopenWireã€AMQPã€MQTTï¼ˆç‰©æµç½‘ï¼Œå¿«ï¼Œä¸èƒ½æŒä¹…åŒ–ï¼‰ã€Kafkaã€OpenMessageç­‰ï¼›<br>ä¸èƒ½ç”¨httpåè®®çš„åŸå› æ˜¯ï¼šhttpæ¯æ¬¡è¯·æ±‚å¿…é¡»è¦æœ‰å“åº”ï¼Œæ€§èƒ½ä¸é«˜ï¼›</p>
<h4 id="1-1-AMQPåè®®"><a href="#1-1-AMQPåè®®" class="headerlink" title="1.1 AMQPåè®®"></a>1.1 AMQPåè®®</h4><p>AMQPï¼ˆAdvanced Message Queuing Protocolï¼‰æ˜¯é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼›04å¹´JPMorgan Chase(æ‘©æ ¹å¤§é€šé›†å›¢)è”åˆå…¶ä»–å…¬å¸å…±åŒè®¾è®¡</p>
<ul>
<li>ç‰¹æ€§ï¼šäº‹ç‰©æ”¯æŒã€æŒä¹…åŒ–æ”¯æŒï¼Œå‡ºç”Ÿé‡‘èè¡Œä¸šï¼Œåœ¨å¯é æ€§æ¶ˆæ¯å¤„ç†ä¸Šå…·å¤‡å¤©ç„¶çš„ä¼˜åŠ¿</li>
<li>ä¼˜ç§€äº§å“ RabbitMQã€ Apache ACTIVEMQ</li>
</ul>
<h4 id="1-2-MQTTåè®®"><a href="#1-2-MQTTåè®®" class="headerlink" title="1.2 MQTTåè®®"></a>1.2 MQTTåè®®</h4><p>MQTTï¼ˆMessage Queuing Telemetry Transportï¼‰æ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“<br>æ˜¯IBMå¼€å‘çš„ä¸€ä¸ªå³æ—¶é€šè®¯åè®®ï¼Œç‰©è”ç½‘ç³»ç»Ÿæ¶æ„ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼›</p>
<ul>
<li>ç‰¹æ€§ï¼šè½»é‡ã€ç»“æ„ç®€å•ã€ä¼ è¾“å¿«ã€æ²¡æœ‰äº‹åŠ¡æ”¯æŒã€æ²¡æœ‰æŒä¹…åŒ–ç›¸å…³è®¾è®¡</li>
<li>åº”ç”¨åœºæ™¯ï¼šé€‚ç”¨äºè®¡ç®—èƒ½åŠ›æœ‰é™ã€ä½å®½å¸¦ã€ç½‘ç»œä¸ç¨³å®šçš„åœºæ™¯</li>
<li>ä¼˜ç§€äº§å“ï¼šRabbitMQã€ Apache ACTIVEMQ</li>
</ul>
<h4 id="1-3-Open-Messageåè®®"><a href="#1-3-Open-Messageåè®®" class="headerlink" title="1.3 Open Messageåè®®"></a>1.3 Open Messageåè®®</h4><p>OpenMessaging æ˜¯è¿‘å‡ å¹´æœ‰é˜¿é‡Œå‘èµ·ï¼Œä¸é›…è™ã€æ»´æ»´å‡ºè¡Œã€Streamlioç­‰å…¬å¸å…±åŒå‚æ•°ä¼ é‡Œçš„åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ã€æµå¤„ç†é¢†åŸŸçš„å¼€å‘åº”ç”¨æ ‡å‡†ã€‚<br>æ˜¯å›½å†…é¦–ä¸ªåœ¨å…¨çƒèŒƒå›´å†…å‘èµ·çš„åˆ†å¸ƒå¼æ¶ˆæ¯é¢†åŸŸå›½é™…æ ‡å‡†</p>
<ul>
<li>ç‰¹æ€§ï¼šç»“æ„ç®€å•ã€è§£æå¿«ã€æœ‰äº‹åŠ¡è®¾è®¡ã€æœ‰æŒä¹…åŒ–è®¾è®¡</li>
<li>ä¼˜ç§€äº§å“ï¼šApache RocketMQ</li>
</ul>
<h4 id="1-4-Kafkaåè®®"><a href="#1-4-Kafkaåè®®" class="headerlink" title="1.4 Kafkaåè®®"></a>1.4 Kafkaåè®®</h4><p>Kafkaåè®®æ˜¯åŸºäºTCPçš„äºŒè¿›åˆ¶åè®®ã€‚æ¶ˆæ¯å†…éƒ¨æ˜¯é€šè¿‡é•¿åº¦æ¥åˆ†å‰²ï¼Œç”±ä¸€äº›åŸºæœ¬æ•°æ®ç±»å‹ç»„æˆ</p>
<ul>
<li>ç‰¹æ€§ï¼šç»“æ„ç®€å•ã€è§£æå¿«ã€æ— äº‹åŠ¡è®¾è®¡ã€æœ‰æŒä¹…åŒ–è®¾è®¡</li>
<li>ä¼˜ç§€äº§å“ï¼šApache Kafka</li>
</ul>
<h4 id="1-55-OpenWireåè®®"><a href="#1-55-OpenWireåè®®" class="headerlink" title="1.55 OpenWireåè®®"></a>1.55 OpenWireåè®®</h4><p>å¼€æ”¾é“¾æ¥ï¼ŒActiveMQè‡ªå®šä¹‰çš„ä¸€ç§åè®®ï¼ŒActiveMQé»˜è®¤é“¾æ¥æ–¹å¼ï¼Œå®ƒæä¾›ä¸€ç§é«˜æ•ˆç‡çš„äºŒè¿›åˆ¶æ ¼å¼æ¥ä½¿æ¶ˆæ¯é«˜é€Ÿä¼ è¾“</p>
<ul>
<li>ç‰¹æ€§ï¼šç»“æ„ç®€å•ã€è§£æå¿«ã€æ— äº‹åŠ¡è®¾è®¡ã€æœ‰æŒä¹…åŒ–è®¾è®¡</li>
<li>ä¼˜ç§€äº§å“ï¼šApache ActiveMQ</li>
</ul>
<h3 id="1-2-æŒä¹…åŒ–"><a href="#1-2-æŒä¹…åŒ–" class="headerlink" title="1.2 æŒä¹…åŒ–"></a>1.2 æŒä¹…åŒ–</h3><p>ç®€å•æ¥è¯´å°±æ˜¯å°†æ•°æ®å­˜å…¥ç£ç›˜ï¼Œè€Œä¸æ˜¯å­˜åœ¨å†…å­˜ä¸­å²æœåŠ¡é‡å¯è€Œæ¶ˆå¤±ï¼Œä½¿æ•°æ®èƒ½å¤Ÿæ°¸ä¹…ä¿å­˜å«åšæŒä¹…åŒ–</p>
<table>
<thead>
<tr>
<th></th>
<th align="center">ActiveMQ</th>
<th align="center">RabbitMQ</th>
<th align="center">Kafka</th>
<th align="center">RocketMQ</th>
</tr>
</thead>
<tbody><tr>
<td>æ–‡ä»¶ç³»ç»Ÿ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
</tr>
<tr>
<td>æ•°æ®åº“</td>
<td align="center">æ”¯æŒ</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="1-3-æ¶ˆæ¯åˆ†å‘"><a href="#1-3-æ¶ˆæ¯åˆ†å‘" class="headerlink" title="1.3 æ¶ˆæ¯åˆ†å‘"></a>1.3 æ¶ˆæ¯åˆ†å‘</h3><table>
<thead>
<tr>
<th></th>
<th align="center">ActiveMQ</th>
<th align="center">RabbitMQ</th>
<th align="center">Kafka</th>
<th align="center">RocketMQ</th>
</tr>
</thead>
<tbody><tr>
<td>å‘å¸ƒè®¢é˜…</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
</tr>
<tr>
<td>è½®è¯¢åˆ†å‘</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">-</td>
</tr>
<tr>
<td>å…¬å¹³åˆ†å‘</td>
<td align="center">-</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">-</td>
</tr>
<tr>
<td>é‡å‘</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">-</td>
<td align="center">æ”¯æŒ</td>
</tr>
<tr>
<td>æ¶ˆæ¯æ‹‰å–</td>
<td align="center">-</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
</tr>
</tbody></table>
<h3 id="1-4-é«˜å¯ç”¨"><a href="#1-4-é«˜å¯ç”¨" class="headerlink" title="1.4 é«˜å¯ç”¨"></a>1.4 é«˜å¯ç”¨</h3><p>é«˜å¯ç”¨æ€§æ˜¯æŒ‡äº§å“åœ¨è§„å®šçš„æ¡ä»¶å’Œè§„å®šçš„æ—¶åˆ»æˆ–æ—¶é—´åŒºé—´å†…å¤„äºå¯æ‰§è¡Œè§„å®šåŠŸèƒ½çŠ¶æ€çš„èƒ½åŠ›ï¼›<br>å½“ä¸šåŠ¡é‡å¤§æ—¶ï¼Œä¸€å°æ¶ˆæ¯ä¸­é—´ä»¶æœåŠ¡å™¨å¯èƒ½æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ‰€ä»¥éœ€è¦æ¶ˆæ¯ä¸­é—´ä»¶èƒ½å¤Ÿé›†ç¾¤éƒ¨ç½²ï¼Œæ¥è¾¾åˆ°é«˜å¯ç”¨çš„ç›®çš„ã€‚</p>
<h4 id="1-4-1-Master-Slaveä¸»ä»å…±äº«æ•°æ®çš„éƒ¨ç½²æ–¹å¼"><a href="#1-4-1-Master-Slaveä¸»ä»å…±äº«æ•°æ®çš„éƒ¨ç½²æ–¹å¼" class="headerlink" title="1.4.1 Master-Slaveä¸»ä»å…±äº«æ•°æ®çš„éƒ¨ç½²æ–¹å¼"></a>1.4.1 Master-Slaveä¸»ä»å…±äº«æ•°æ®çš„éƒ¨ç½²æ–¹å¼</h4><p>å½“Masteræ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯åï¼Œæ”¾åˆ°å…±äº«çš„æ–‡ä»¶ç³»ç»Ÿ/æ•°æ®åº“ï¼› å®¢æˆ·ç«¯è®¿é—®çš„æ˜¯MasterèŠ‚ç‚¹ï¼ŒSlaveèŠ‚ç‚¹åªåšå¤‡ä»½ï¼›<br><img src="/message-oriented-middleware/2.png" alt="Master-Slaveä¸»ä»å…±äº«æ•°æ®çš„éƒ¨ç½²æ–¹å¼"></p>
<h4 id="1-4-2-Master-Slaveä¸»ä»åŒæ­¥éƒ¨ç½²æ–¹å¼"><a href="#1-4-2-Master-Slaveä¸»ä»åŒæ­¥éƒ¨ç½²æ–¹å¼" class="headerlink" title="1.4.2 Master-Slaveä¸»ä»åŒæ­¥éƒ¨ç½²æ–¹å¼"></a>1.4.2 Master-Slaveä¸»ä»åŒæ­¥éƒ¨ç½²æ–¹å¼</h4><p>å½“Masteræ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯åï¼Œå‘ç»™å…¶ä»–brokeråŒæ­¥ã€‚<br><img src="/message-oriented-middleware/3.png" alt="Master-Slaveä¸»ä»åŒæ­¥éƒ¨ç½²æ–¹å¼"></p>
<h4 id="1-4-3-Broker-Clusterå¤šä¸»é›†ç¾¤åŒæ­¥éƒ¨ç½²æ–¹å¼"><a href="#1-4-3-Broker-Clusterå¤šä¸»é›†ç¾¤åŒæ­¥éƒ¨ç½²æ–¹å¼" class="headerlink" title="1.4.3 Broker-Clusterå¤šä¸»é›†ç¾¤åŒæ­¥éƒ¨ç½²æ–¹å¼"></a>1.4.3 Broker-Clusterå¤šä¸»é›†ç¾¤åŒæ­¥éƒ¨ç½²æ–¹å¼</h4><p>ä¸€éƒ¨åˆ†æ¶ˆæ¯æ”¾åœ¨broker1 ,ä¸€éƒ¨åˆ†æ”¾åœ¨broker2<br><img src="/message-oriented-middleware/4.png" alt="Broker-Clusterå¤šä¸»é›†ç¾¤åŒæ­¥éƒ¨ç½²æ–¹å¼"></p>
<h4 id="1-4-4-Broker-Clusterå¤šä¸»é›†ç¾¤è½¬å‘éƒ¨ç½²æ–¹å¼"><a href="#1-4-4-Broker-Clusterå¤šä¸»é›†ç¾¤è½¬å‘éƒ¨ç½²æ–¹å¼" class="headerlink" title="1.4.4 Broker-Clusterå¤šä¸»é›†ç¾¤è½¬å‘éƒ¨ç½²æ–¹å¼"></a>1.4.4 Broker-Clusterå¤šä¸»é›†ç¾¤è½¬å‘éƒ¨ç½²æ–¹å¼</h4><p>è½¬å‘æ•°æ®æˆ–è½¬å‘è¯·æ±‚<br><img src="/message-oriented-middleware/5.png" alt="Broker-Clusterå¤šä¸»é›†ç¾¤è½¬å‘éƒ¨ç½²æ–¹å¼"></p>
<h4 id="1-4-5-Master-slaveä¸Broker-Clusterç»“åˆ"><a href="#1-4-5-Master-slaveä¸Broker-Clusterç»“åˆ" class="headerlink" title="1.4.5 Master-slaveä¸Broker-Clusterç»“åˆ"></a>1.4.5 Master-slaveä¸Broker-Clusterç»“åˆ</h4><p><img src="/message-oriented-middleware/6.png" alt="Master-slaveä¸Broker-Clusterç»“åˆ"></p>
<h3 id="1-5-é«˜å¯é "><a href="#1-5-é«˜å¯é " class="headerlink" title="1.5 é«˜å¯é "></a>1.5 é«˜å¯é </h3><p>é«˜å¯é æ€§æ˜¯æŒ‡ç³»ç»Ÿå¯ä»¥æ— æ•…éšœåœ°æŒç»­è¿è¡Œã€‚æ¯”å¦‚ä¸€ä¸ªç³»ç»Ÿä»æ¥ä¸å´©æºƒã€æŠ¥é”™ï¼Œæˆ–è€…å´©æºƒã€æŠ¥é”™çš„å‡ ç‡è¾ƒä½ï¼Œé‚£å°±æ˜¯é«˜å¯é ã€‚<br>ä¿è¯æ¶ˆæ¯ä¸­é—´ä»¶çš„é«˜å¯é è¡Œï¼Œå¯ä»¥ä»ä¸€ä¸‹å‡ æ–¹é¢è€ƒè™‘</p>
<ul>
<li>æ¶ˆæ¯ä¼ è¾“å¯é ï¼š é€šè¿‡åè®®æ¥ä¿è¯ç³»ç»Ÿä»¶æ•°æ®è§£æçš„æ­£ç¡®æ€§</li>
<li>æ¶ˆæ¯å­˜å‚¨å¯é ï¼š é€šè¿‡æŒä¹…åŒ–æ¥ä¿è¯æ¶ˆæ¯å­˜å‚¨å¯é æ€§</li>
</ul>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>æ¶ˆæ¯ä¸­é—´ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå®‰è£…Apache Http Server</title>
    <url>/Apache-Http-Server/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="0ee433f786df810e569e64f977a7a3d92be900db6ca4f2458314156ef06925a4">91b4a72afde41933824d9b47e790ab2759c7fe391c65e762bc3007c35c45f10856bc39581f6517322ad830d81e33220ed226a5b56a292ce7cdce91186574744c9c4be71f29ce078aac19880f34b0df748695189540b6b0341156b542317b8bc3d3a928d70bd56462c39daae94fc775717f8f9f253cfe921ca570564bf420865e98dc4ee8c894c65070a1ef85163b185947d392c65d80cbbd00faa3406297ce6c73d9ba756a5e778ff417ebeb616e01684230c4c3d5f176a9468dde71c91b1d697f7a9df636075ede275fc5cf63c367715cf96714d30e285b675ff2b3782796e6b2664236e19a3ba46ee91b86562e354ede32c0ad1ca06d4c9cbee7dd06f2f6972d99dc2098f9c221da965a13806d60589c681ddb791dca30e6274c29ddc5e73a2184e1bf599291b288006e41aed5d782153069dd88b8803563af72c21184f8324e21223403bd0d175744b9cfc8351df9d3a35a2f1206a4ab86013aae406e7ea694a563d011f442126ed0a282e4b738a5d84d6e4fdf24f954156ee99ea055e63fd814a31d86f34b0edebd35b24aae91e4e7559a09d0ad329ed5ea58fa56dfc431c92eddf8aaa8a1d1a127da4f2fa1b308fca287a40dd0f574acf4d4fad464830b704b0ec8434fbef30df34c2e9f1975fe229c0db33f233fa56f30652ebde26c88448170e6cf1ce30171afae0d22b39eeb7b36d0cc1126d3346efac4580fb19d9652776402a23bc1c8f215a04767e01a20f524a3f786eb58b213f88b1c63b25c5973c0c8a0779cf23258c7cd22dfa984c8904b8a299876e5fa89cc5e968193d45129c522bbf9a4de0541b51ffdecb599a682afbaf1ace34321b11fb84bc64035c4f46488eeab0ee880e47c5ca455170cbc9060030772bcb8dfd740c0774986123ffa20205c5f6943a820ec4c56ce180ac64cddcbd63ef6adb7f0d184bcc83cdb9b74281d8c5db8bd7bdcb6cac06ecc9cdb2ac239c1b79fac0d82c71109537db32d1eff54a591a55331718efaa05d2c40c2d51dd3b4e89721697042179adce44d1f30e2548b2ed518e1ba56538ecc580adea987c125fbfe07533a5739ea218e5c77474b97f62ee202a73b130996dfb238cb709ab91d31aafa2bd2a416cb6e0fb3d97d6e7f6505d603fb5da2a8932c42e48bf87f8898aadb8a01ab4b84c1b7561f768a9d7b6981f2d1153c846dea24c516d061b2b9ccefa9d014bed01b844110e7a72076f6aa957d218689fd9be5a3f070bebcee534250e5636bc48266acdb9aa6f841f55a5f477c562b33a08118baae1d4f6c4f054fc244bc8e09267ef70c53fe7d625714f4be249cafa19cb5b0d8f36c817a64fc249dd37ca32634cc6721918686628d8214bc4bbaab025051c94747719f2af34ee07a5216066bc85e58d9c7ca5b9c4b7b8c098d4a1e5e810afb9a96007b98dbff4d13b6a0d6508cdfec09a891abbd126dc197c4408c0a71f6a5cabc0fe27581c1783b4a89ccb3cb814aad4c482f0623fde9938eb4a83873a963597c802b1fc52598435468526a32a6cd1b36addecee0d4b6a7b7efc2fa4987e1059c3a9580c9d260a0375574fbb710fa96a434531a6d2f3e5ec87257811bb90b947498d743f7ae358bb09a31dc12596b5617b3e22ddd0dfa34837e0f75c53e608ec21fb903844abaa59b9ed3073714ec98b4d6dea2e3f297ef43cae45b1b95879ddc0445c95945e4013965eeb84666dec4d112ca02d3ba0d53fb3a0a95e39524df921825b88b4da1a5591f00e5a8375e61b49e558019014490b371647d45fae02c9d7780620f8fd58ce21be3fbf221141ebc30b17ac6355c4d567c4137b376a731e59c0d6593005f424591330e252323b66327549aae4e356a5b4f294618e7ec4006b8b785a5b956fdc50a6181332471e202abe1439625e09239c24ddb318b5a7f805a9829c94f293784a017719daa19a5ac748bea5bcc542f696f3e270c8d873019bb1dbddc5fbfd2488510c7bd615b1d5b0c3e2560039ca3c581d5f93db4687b05d1e9f4522d37af49d71a95c7ca854758bcabf35c8c6046655622e211cf98c9d6ac0b88eefe69b36d22dade7643711e1ae404c6504d735f0a321ad75b0ee696099600294ebe200a61c6eacf1ed98a4e30ffe132e256d837b1c18794358ea82f1760ba78d55fbe731f79e551f55db9eaf199e148b08c53de4ec04b6be91714698579a2763d5015d8da27d3fd49129918b20b9355f35679678d1883dad5d4b6cb2d516e1b503d98a820737707781bfba493130a3ef035622cba1d920edfc85fb4ab7bf5413de472d9241c9b33ac15e16451807468780e3eebf638ed23e91ad4795b2efb5dc04f44439f26237b7deddd24452cf98116aa35721c8381a53f0baed1a905bca6f95f9935c65f39852980deab80d6595b60b1d4342424537667e5358425e684636948ad90e3f51183f46c7666107f54102af0f70ed7b3bc847ee3487794d3ce45fded936a0bea73f5e3a1677b04762d7f1051ae2c3b43f84e16dd58541d4d543b26564ebf9ef476a1acf79fa324cb7cc0813805ef634bdbf14d66e9a61cbc197668ac0a4ad3eaefb2037686ea3f6830b0615bab1b322be883dbc51405abd5834184757a4e13d5b7e83ab5abe268febe3656d66825dfcb7a0b3e992428d2971d746dbbbc1ff5f7107b7f7fbf755aaa2cc16a99a92435de5c30d7db17ccd0c0a2aeaa3dc81e0b8553316c4358681aed67e73e8c922f0cb3a8291d335aefd05613e405f457f46f168f623c13c473ca2bb7ccabfe7019ca4860b04b8ec3d58ca5d4dc36cef3e3ce7b438fd620c58be858bec2167a0c672cca595f7f8bef765ce590e05150770cd87f355403424192e2997b7afdd386949f78745a4226d0e27f6ea3a40c7d72baa9dd2cb739edc78a3e4f0a9838348f2f11affc7ed3c0571f9645dc6950fa4346e81d943db3bed54a46dbe861646ebd3bffe059ee83860f4757f9903a8c1b213ec544c2c6b44658c314a1455050eead496512562771c35308a45fc43f67e597568d5cf6d228223871f148f2f5266fba366d9aee75eec89f87aadfef21e8a6877e42b72935bb33772423cd10befc7379286c90dac8854a79033dec49b37556d63e4338937f5d672abea60f175267a2074c428a501504b16b76cc616059fc0e6c9cdd2d70a9cee52685ad8d5847e4ca177d96b04f35a1079157a0a5c6e6d55aedb181c42390d26f6e58c5903319cc66bc4c9ca8cb25724bd1003aa72d9bee4db2d9493d151d0701d36075b4cf2173154d03b20df83428a2b942cdcd706f01a72bc8a287f47822b0aaae6fc7453c9740115c65b1f23524b8b012a75141e592e5e2077b897f405452c916d67caca581b07a3bd3bb2defc5bfd34fa78f91195167c2c25e9095de9a674ffdae7e1469a88dcc31b39b812689c04f32c273aaad01b94cc3f0e3aea630f7fdfedbb5583c92ae6945b0f9eeac88aebbff0206a050374ccc4f3493240546d3466286fbb21db1d237cbecf2c6350b2dcde221c5b8444fe433b6f61628f6aab73ec8df93165771212b4990ec33481df539e4d179f3f9ab20aba998ca4ca16e8c763427154105cdab0f15755501e06faa4884aea52f278429056a7f10c949bf95dead6060ea88842f45c711899f97e1fe5060e4cd8c8c645937bed5ac396fdddb25f60a8a55f3cf8302a50d3052c7953589da11c160a74cd02a5878ab5abbcb58a0de209c34c2da0d46c3e8a595f668619bdb6357310ac225374b2fa69325af9792d448ca4814d98eb9b321d9b052284aed8927521307416b3004752fb4b4c622e6be374295c0bcc8cd2e9b4f4791c889e2fb91e14f5f122f15405bdf3df82b7ba7a7cbd6cd656dc4491f955e316ea211901d0bd98c3f23d37846a8359451919a17d2f42fdc0b61161fadfe948b341a8427d299123ddacd32e90985aaafff5f4cc9ede184807e83297609f61ec13f6228d9d1de2180b0bf44948f50d835759cbccfb95eb585ab34479cebb50ecb233dda6fda64b1b52c07515c9d88604e8c7163af02c75980f38882987c4a85665b02271f78b5f5ddf1a19c056fbbff1a295f89b549a946085acba3dc4b6087ace6d7af5b61277b61e8c352bda495b491d176c969e4cca1b59c38de6a6da6f8271f4a07bde9f517a9a083919338d2f0307e050feff2ea2cf708077c0e06b3fd63a77a574ac1e116e8b6bac85093a621ceb26c2a13115db0c429405e2350784b12625bf337d6175fb838eeff7cc2310e14a3a56e80b834144fa39ab223ae161ad1bb75bc45b4a3c700c148d92062a781c2ee4b0394950bc578bf4ca2197c6c089ac6f59997cae184a132c1ec5e056ea20c5dae94f0d005542578b02b305a952a12cfeeb824303640bc2aa040c05804445827a251c819379565cd79b97ea9447061182bf7fbb0227d3d65dc3e6f2528f9930e565f97452efe4b2cbb0185a27918642c1faa23088c169be1225d4f337ba379cb5098f2bfb56419b43738212964afc51e728e4c779be910e950aae7652d07b4b29f15226fe5703fecbca15b9a1606d4ef36f884e76d79cdec9b4319c573975080d1765c1125fe41e38e1a290f2205135a7184b97ce3ad4f99dc3756f079de00204f50a5637f1f4ce561f314aee06dc64eb36b173ab36ad307554269f0bd3f3db6393bf10c8525c72b2e5eb5a607f35db6a1cad11bc15039563913bd04a4f2582ce774a084b55cced7fe9aedffa905484019e35cd8682ee272196abd5704be176a95635b49179caa53bc6bf117b081daddf9ff4934d23ac0750d254cf29f3938bb90e2e5c367aff8eae6616d6a9248e6ca43059df74828830e7501f293cd43f0e80b013b897ff4aaa736c3ed327d686e1b22fa16440daa745b39e232132a60812e0b5a91b6f46812ecd832bfab72ec6f5c169ba47c76f6e9f1071c799b2d954ba070d52a10239fb125e2ffbb6a9814e5810ec6c7e05acab8354f5162bac849508ebcbfe132f35e0cdc5fff5aff239a7dee5b4e7dfd519a44691bc507ec690e794ecb3828a0e15b2557ad83b21105823a3bec96fa75f04737b9f91a0685fa45a3449f534cbdf6a54984d630fb8bcf12e1ea7753662d40cf32dfdbd9abf4e4134b0426dfa51ca7521180296abcc00afbbd245140113f42a66431abbe345641309b600c951391bc60df3f30c6dae3929539b0bcb53c396f152cfa2cfe1b931c8ca038c3898bc16572d946301cca78787989946ad8355a4022d41879aacb44a63fada2096fa37d820da7574b09540b422256ef3dc78d0a13c5a0f5dec29faa87c5f14072f46ec6711d32d27496b6ea258b7f501333f904ed692b1c4a8fe60a05f12f0ba0f6ae9b31519ee11613affe4e7feed6047d501ccc0b8e8811d17d8d21bb7fe2c3f9895dd0abcdfd62d350ba817bc9b9772f47d42900a62db90bc5c2edbc088ff52b983a3c4868fe486bffd215690b187233d253a5d036166b8d0591eaf5bfdd154422f81b5bf94fa0fbe4808bb9d49bd633b890994016cd690bb60ab6e64dd2493d8354ac5f448e2d5f52a56cbc34bd48967a101983430a5ed23317c4cc15be309c4b80e357f89cc7b24a91755c7eea87aeb17d7c51ec4b0ece546e5a42e90b0c4be67ad2942e6d94ded9880be6158bb1e1d26d622892da7880f703df56d4870f85dc45181b017e7a3af46c77f6383d24aad80fffca65ae543711871af07db3ef8f49aefc2c40b6d2f7365fe329bb8f757b38ad56c164d2b80d87d1126a588ab25ae27feae59aef2dd51d762eee6d9c3fd5f34f4e6998d6b2b2b40a012d8924f8533b2d5c758be46f4f3e7765764cf236e3088ed319d269725074952520cf8b423250f3ab2490cc87ffd4339ad02a825bf88abbdcdff0b71bfd9108edad7bba769833bc1c92f7a5ddf879e1afa4d6b2cca80d6df436b16b6466a7e945a88dc5e42e33f0daea96cb92b29368a2cc3fe1fe1d7a9c94a3668e41de69dbed0d3640d8374271d2addb0eb60f343dcfd6d02b8583eb58e5b39d27ca04a4d6ac6ce5403ecd3d68c6888e4f55f1df6d1e57e251c3dbfaba78c2eee278bef49c80deef690571a3a32b8558e413bd4d023c8c36a61eaaffe57eb4b465f1b05617b0953d96d489d447776d73ce0659441211632fe9e3d1497e2c26fbd9a3ed7c425bdbb57376065aeaa661b782b9787a905dff6834509e2cfb8f8a33520dc01ed6be0a17667bd570aa54e5a3966831027d1e52661115ab9a1c2a1b87ec2b2b94b9b12c92a5416e5df6f5042fde2ea613e554e2470fcd61977dde29c641ebb7f4c7ac16198aa3d09c10063367e4e869c99881430485e446bcc2b224783d8c36bf391e88c8a88ef8b02c4c966adc74ba8d746754adba69b9a973ac3efbb5bb9aa43e92e0b8b6d373b3518dc8963879bc72926c3fa5f063bafadfc3d523eb2b4cbd1153599060510f05d9de2f5a549939516a324973d6c9f7c83fe649bd2c43edbd6a75b4f59ac24fff0396e8e4568dc0ef50bd4bb78a4a47f7c074aba75a6fdccab2be2c0dd5fb5a092f8023f1dad0f498784afb6698a15ca276c1a8f2b3a97b4ab2daec1eb6bd5dd38baf126f4ed1af5e4798df5a756a6dc225a082e8689237fec74f6e0a842560cea622b296e084b2c77febc0f87bb35e2f499831c39e648dfb16030f844f6d64f3652d4dac4b1d69bc4a385a4ad19eae5af280da121b7f0d5a1ab9b0775f7268fc5c9a20ab413bf2e1b5b303a3a95fbfde2bb9828159e6717fc33bff84cd14b4b61a48413439114e8e75afc477ad3d254704fa0623eaec3869458521b548c4c26cf796133e4f102e280e1d71f5f1cc8214e1e7539ade2b4761c425acc5378761864cf1bffb33be03dd7db7d7437d3d04f2443aca913abea655dd9f6e200968be7389cb3a8e38aa4fabce1cfd7e8aa6b383356c39a59fa3619746ba6f196b7a982418f6ee2084c9e5751b5438a1ec04e41c3f992025039658e1cb3b0e52714d13596f4c0712c49ace4f495d9f5c05c5d96006c22e56c81b21a63ede4ad88c4a1bc8fca72b369bb6a8765a71fd93a9e7bf3accd19f958d9c3a2a3410b41268e6309e321115fc5404cc49bd112cf8d284b6b7711e981d0e47d4d524796ceb50f72d51d2958a653016cb112b864e8b0f92bbd34eb814cfb45d733e6739984b9979071afb2b2306d7ea789edb2e1bc14bae5a5828b21ef2047978bc2f5eb323fcc9458000e864af7ee67483f88dac4adfb7f5d374522117123cadbf75b04e95366b6768b81dffd347d059dcde029e92b4a0c1168eb6d8931e06f74aae2ef6d141a50505e33bf02bab7dd3d6ca7b81137a0542274da79465eea482b7340b222eb3661424949e8d88c15fe9a357777cf3f0b85a3068c9fd2f0d310d092b1bd83925ba90b4426ee47a10f0d55a4d5ee013f6d367d34d1815423f76ce111bc5645078689813129e497dad0c4abb9f44f997d18524f3fdd8cded8a2dad935e0666ed2ee0d5d9c4b5f6ce5f2ee17d7925f5e3711c2f0ff20563e75153a61c2e659f56bfa46ea26beee13086f3db9e816637aeb0d5e4547fdc37c67b4b29fb09e2bd3a7bac6c3e1dd3f1670b90f37c900d9ec95fbe6e53d015d881bad543f408606cf011e2b084a03ae6bec998dca5f33e9aae8408b29e77a37d1f52890fb949f46e25ca11da0e125d4f99f1a05deb5d1d4a9eea481bbab36ca99a1a7e548fca9a24cf74f611392132ecdb846c0b8ec6c20c448971dbd8292000686aea3f0e2e8079a5c8e87bd99dca802fd5b3dac2d75f7855fb7f071fcb21d0bd7000547425a0c6a9ae3f09532d745c81c53564b21815f1d8cb39665025583d000bae72b83b5876697e08c127d0409a2b9e7fd8fb5f141c99305f9178db28c9309d4b0452c4a0e2401abaf3796b8d1a031e2724b8489e58e46fe7d5685a625b72a8e9b5772b0f6b9ba627d33a4143828991c89863923913111a3133c48ade09adbfbca736fd30418806e49b8d2ca55056b1974ece70d7ae0bf387fa2d92d07511894f21c9b478eb4ad9fd3853ac1fc6f50e1748960df9eca1e7fd5be4c8708ae3a03e701a7ad9e1548a5a3ff13dcaf6c6b63a4c21fbf7ec3fe9fcdaca8a8628ad48dba97887f14455b4c39b53456da2b086f9ef48eaf03200fdaed9d6e3e13b9c994e98d1056901ebd18104477150b6761d3041c6ce0deea2d8569f7e8115612b08eeae47b74ffefe6ef195b6445f54298b1987c585fb54d599bc633624ff217ad926276b7d0146a93cc2f6299ac445bf5ab812d7ffe8571a247e8d5f977d32d1520244d2a49ecaeafaedfeb8fbb6c9ba7c51e20b3bb00581e6778f8c8387d16ac30a5079d6c99b1c9ec62ea29515f76b4184540b9b2faecd7d7b6626299493e968c2af173e058b373dec3d12af0da95b882c6187c72a4cbc38ef72f2e4d213332e33770f87ebbbfdd8820910a5871afb189fe93b93d7e30b475691e43e2039e103d31ae1ebf831f8e5740f7aa876c13f266166e999298f7918bb572192ba31bf878b06113ec120a12dfe13cef486faaeef3fab56bc5ce60cb93f29fa968bb9b8c52f90a21680f82795585a0bbdf72aba22f4a8469e1b535c8fef8196c132e9b41ab27973cf166f1b7a7e0d7313caadf038097b78bc7b89b59a5f26dbc13c8d3dee4eee5adf87126bc5f311439e54030db3abf5a1ba6e424b4b1e417480c59ecdc49ce92baed6a04e8b14feedee2d8c83e6bcea350383c7e4f4a5e7fc2a5d64867cee90d3d931057f70b1694561bd9f715754ee70cd698518173d4fe5fa22e511b81f64629cc014a7ca4283aae8a0ea926f53e24f7ddd2d2575550eb637ab1614fc14b6a244993ed67c66c872dbc16fd442926989ca1372122fed03d40980e89a96cfdf8ab097467ab159d849ceb01c6b087f60373e04383cbc367e5a0955912ec412b57073311a22ee38bb77df5e5aff066f44ed888466cf5d3b81dd8f2317a584e5cae609c308a780b3c81da2f66548b2d04ad57c6d02e0bb192111e9a5b81b246864f78b7a92dd4dc140f7afc1d2264a37310896be063bb2e918e7452dff3c7e8a21ea390d040ee1dc0edb461391462ad0e7a40a73bb0856ab2846ca76fc6026dd7eb9fa7a6bdaf70d4ba6bcb04a9d3d20b7fc95c3af8d8ce7d673f357f9f3d8fcfc2c56eccd1f994747a7d5471333ab2be1f99e2b9d4d4aa2e84274d0d00958852b5d75f3a0011bf31a371f61ead9ebb569ce8c8a678c8ef45a63e9ee37b038c610e1ff786de43b4ad7547c9e1fff6031c951a380ab42ca9998ef0e51e499fffdb6c1bdfdbfe4d427a330abf7c89f62d7075701a84e8d1b02d5cc3da962dd2cf5ee5c7fcc650830709daa6821b002151f73b23e0b50cc097662aab7dbd6c1f84adf9d3d709f84641d8ffeeff790f67b9e78c7946fb23f0069c8af7f7e94ce92cae51cc1d5dabfca98fc08506e3e88422e26d9bd976de2dec868b9b7af4c5435c525704da6079aba18ec2169ab402a28efa513dbd9b4e9fb8d6d997d53e46eb1225e3bcb1346d3972a8b8b0437612806ada7cbb77e53c5e9d708b439e1b541b4a17894ce663bb3ff18a6c76d86185f9833c817a61a5b154ffef43537b337b168cefe879381ec43d504da75bba07968ba84fc67b712056c98c844abc7f05644e52de53aee4e65c69531192aadd06448efe64bfb9567ef2e5bc950f5dd07216cf27dcad4eb8b3339fabc4704c30b8c08bf057de3b2e7646ccdc0001e0c46fc7214f21f35bbd596fef9f449a5b1e1fecc4b6492695ce93a416adee82771e66160a0a95fad352e8e4173b34cacff6d58147f3d35770cb62085848fbc33161acc6cd0d68dbce5083277b45d88f7fb587a1f4f29d7b88f9fd81935d51352e27333dbc29727875dbccb7c0860b851d82afc9528c3330b087a09efaa8fad3ba5de160e5e0f12f31497d1c9363c261dd43046e29ea6e02ce38cc3c284ca98cf0771ad00a2539ff31bbb5d1fcd098c99e62b322aa47e741e701b8df515dc02d792b36647cf5415e6cdcb809bfb65858c857a8156f285ffe655d002fd513cb225d8fcbab1767c9b663e5933ef4e3551fbd366280e197e8a8b241316da0a2cc883a3b60f9a585b8ed64d001eb3354fb72bd8ab6e9075521e838fa2b3cfc8a200f43c518992da47a6279eb6e5d3ef8fa9fb07ca00b682c2d6e6f571864aff86d4ce7580b5c55505fe8be8c3f11ad039bc22704ebe58cd0f0433515d5231454cca786020363a1eb5725a8cc0a5e91eaee95de0e10ca30f4c76e2f1a55160b5bf3fedce64d151f8bbd3faf8ef8feb175058ca8f5e7c0c4564b542e1b182167f5501614931bba230da6c7b4480523398698d9d735a55a9fbf4f99c69095cdac6e2a7019617edcd89e87eb3ba7d2127d4dea1b806eac5165fb2d5d5cfb2ee75d4ab0b9813e2224f65896db76c9b41316c02f5a3311b891e4f1175e41573fb4aa95162a5e40ae05bea9cc5df30408da69fd9ce36cf5c328762c14cfccea7e2c4398b8d6ebca3683898e4dca5ce4b18ee7f2b4a5217ff1ee1050161609464e2e211a86ed64c385e06d3b9695c3cbe67a5146d9bb08f781e57e7198663f3661b00f98e4c2d56109ed39a22a78a76707f2382a8fed14941bb9074df4186ff4a8bb2debbca00666cb6c6f29234109d7f97412a817ced9db5ca15802358ce53cd14f9b45c5d9bf46c70bbe872aa725b37965e57e88994675a8119b7453bcd11168c6b86658ae0ba134df91d52d4308a4e40f02301bd081219567117a1d939db52a78763c12290cb812a0e04ee19b29eeb5e0cf1f6b477964758a8f1a89afe34a0328d9a3b59b3529dec661c9d8b26dc31a9af597b19532f88b5db54d8b9cd1b516f7fd17d6d4b8458a6e0d7c98878b0ba65641b97105cea56f012619b52d514e376bcbaf14a0e9c0b318364bc442aeb51ba7c7a34d200dcb9f9bf11c657c158a014a04638540e79c2bcef56e4ea660fef0af4813195854f7c75c1c714736f658873230693964e248d1488c348f043977186aa35508a1989b3841ba59433a1605f6395aa9f0036f125f48f6037a4779ce4d979c7d7e44d283397f75c5962023b2b5445547a3f15e5d0378b4c01acd3285c3272c41d793891361989cadb22d5e81998ee660f080d85e37d04e6d72052fb21e61ce99b1a40fe22189fc57fa648a3a28eee567cf72a2b254c4a8d4535318ef01525706993a0f70eaf51c82eb08a54855dcc1ea8c623fb7aeb875c03d5c434343c284a0c1db8646a0edc6e07a2218a7db3347fdd5d9a4b8433e1b48d409036522b875939b83379581881eec88f4a12040159a7de3efcc0769295b422b7287eda8a278baf4ab9d31d0dfdb3d1d94c7298c7cdc5fbe26417063dac3cd1e01d3cefe3d22d648ba8465c75fad247bebc5dc55f66b02c028e0b4b4f99f39ac087a1939b9d76b855e76804e45636d5464e3afdc21eae75aec5381859f856d8c21eecb5c43d85e5d6c7d03cec8ed7dfea8181e08eb037639524fb6cf008d507267691c5cd14ecfce74911a00e3376f4a813d8dc817d998d338acfa5edabc76993ed005ed374db943a041ab0e0dda8b50849cc90ecf4ee566e90db95cfe74a577115ee3ef1033122c78b82f82757563e6876f23c971f4a17175defdf391f259b01327f544372f1640aa600db2369476602c2aa9f830e9a0c4da4164c2480103f1cbe8c77228af4980900674e5afed469e0dc6bc1e176bf11af3d4fd98599b025ee39a52e1800c0a4a3ea83cabdff8fb824119cc4bf4612a0c848d2bc0a1a5c6f4b43ed6d4d62a50da3728b58dd9c681927b143797676e14e47caf574232e8dac51137759e4de9edd49ac92bdfb096373142458b68054b7814afcc9bdc40c72ba87ae1ef674b4adbc6a57f9dae329ca00b678993baf0b238f35f638ff2fb6de2932b58cd630af1037c962fb0cbc9306dd15ed3c503bb045e173caf15442f19f4d7eb13cc851f808b28cdda7b16eb3d1d8eb39ec8a4a51c5a30b84ff887d8b620e6fb7f30b39b60c7d0889d0f91d8b866ea7db3615f2971d55ce7523e246348ca9ade5f6546ca4bcd8c5a129b041af5b944cc58b2ab6995399db5b72718f0178d8a0c022e1ee4885e0a07510e531acfa71a76dcb063f7a2376e8669e59317b79496cb6dec1357eec54c7570ef676b757864d9c3e8fd1e7668aba34bc045968255e6caa84386a076ad1529d3411ab058bbc6c9822275cbcf0545e9a529b1a16cf1b0321672eae36e6be2fa158c1cfddd08b2461a40344f7e34f6642d4c847ec3b46ceb4f0b01860b009c22a4fcf7dfbb246053116d741e18a77518901e48e47cd28af5621acabb02be3b8112be978a40c0b7003c6105053f0e17f46439ec2033cbccecdaae28226cd6ded59bebcf752a2305a97dc376b593f8591f1c0b23bcf7486789058e20063d16a1a9c75aa6f969f11f5834ad5aa8191c8086556c9e1e88ad1aafcde2f89d802ef2a0e15251b97342e6f3603aee097e137e388bbe4ee30a2014bcfc72d46fee1c4c61f49f8cccd1cd7773ced8b4b2ed16f71f0100b871b2b78393c40d87a1e36de10fb97280b1ca05331b3563d5ab718ceece27cb8c97ac7e134c3871663c7f3d9c817f8b2e359622574557a1b7061e5f9cdca7bbeb5755b5c279aac13dd8dc7b57e2a158a274a3754098a029aea961f0260776f8f9de87e748207f284cacea617d7f5e40b1598462b06657eb33a542f1e01905fb3d70d4bd891d740700f6c5e1cf7b1eadd6639043f1165d6ed640de76a92104a9617e35c27b66b2d40dcdb23e4cb9d62a362ef8c5dfb59ebf9a9570ea5ad4a7123eebf8279468d88c7a103b106eb365d153c7dc0e65d935baff58e19e9f1c3d91a70ff1c05c03d79f08a25a3da65d51b5128b129cf5ffd941d2df96a4a8950c93e558538f7b6f677bf436e6503a86a6b3f6ea978670f6661196bbfbd347cfa0a519ae339a9ce18021669a0ff01747ba83fc7b47a8c24fafe8474ee10f85ae6414a23e483898d005b23ef5b33eea980a2516d4235fb150eb34a246e79864664e86a146074ce94b84aaec127c6fa10dab5daf55f23fbfbf9cb85194d7d93dd7d7bc5aaffcdd7eca6a195e00ce1413d26c78bae3da8689bab1d770d5c61cb20aab8a2eef8a53a931fadbfb87c7e0581bd3eab6e545654f2c14a7e5a6d949b616ea499aafdecf31eba0da007f0000eddd1af6178fa92581079a51d08579a1e4c647c3a52d4e71108badcf0e65ade143f39f0b5a5277c59234c7ea25bfdd145c290403310774d308b245b353d67436d11a4ae99406bfaa5fda9cfdeb0ac2dc490068376d55283148d1218b0d7be1c2a841f66f2925b2da47fb7c6732b39706a44918e95e740a3ecab0497e4e6717264f4e762839216ab28f7d37eeeefb93514e54c03c95c299f262a78d8f056b42b8bf271460403de3aa3e2fbb393e4fa17e3ff3d6b550112c8514237e37934a749fa8aa825aca12b14a39aa1cf7fe705dc29fe8b84c0d60f439f4fce57ade8d888145bf2e00e29b5d0d64d004eaab809ac2edf8961f879315b549b701df98406068b926ef62d3e75810ebbfbdd055d8fbe5d6b9a7c80b454619bdb070d8809df8fb37f3b04e2c3f017fd962a36a326a3d4d0b0fb5449201aa57f65d1c27cd4a48ee27635c8b44324af77050e54f04f1ef001bc1a2d3a7641324c2410108aa76c182d0eed292e9047b2e9493c122a1ac378cbfa5b3fea281f9c79d7c77ce1dcc9d2eb08b5650b51e37d04e9b2fe76311ffa55dd2e1833ed6baec2b10f7df2810f75e030540e3f2a17ae806d1d7bf93e9a3762e81583307cda20d77ee0b06f375f102a2de282732c3ce0b349c57a9522292287a4d363aa9fcd52b44643d5f1f0c80127f284a08987bb58833f5b65ea905e4508187dbc7bac160e729476edfa418c9d67aec1de0211c5e35af7aa5153fb6e24a882c1e37c98d36f79ca0d3033a2b7edac0517668c08c67f2a35cafa5d39bd543e1af2eed5532b05e8d205c1cb0018f6e00dd2d185f8ad46e01c8bc45a8cb421e931c0ddcf6f1153aa228e01775bc963590aed06aeaf998dd9c86a7c2560c2fa5a7406cbe928cf914eec50a75b9dde53059a96daef720be8a093fd812752602d5fda628da9bd413a0375d1b25162629349d69d298f496795a194d4f89af32a02d6841e7d66d965c582551b8394efaa9c6b2cce733678f245843503d01285f1c5e5524203f1cfe94669c75b64d5361fc7a7f28a2371016e52d38a044e62a831bdebefce936b2c5933d7f284e19a4640328c9b94cb7c7ef97424989ca0074c72f69840a08564051d5cfc83d2fbc4210f3e872020c8e2ea2821c3e16f29950845c6c3e9a3addeac0e4c9b2843660c210933aa9013979470f6d5ea63d78b75879394bbc7454f4b904bd02a98b7540cd4400d65e857950595eb66a2592640d32f86e88b3c84011a42df38091f1ca4ac9e332aebedd2fda163fca4789eea6cb97c80db23a85b31151443aa83d54e01db0e2d54c81cb3766d6ae4c3246849b7171322b80560ed9b36477ffae71996d510e0c9d53d292f4f97b833b887921b7cdf57dd38c4e35d967b745d51eb07cec8ac3633e4bd6fb129496479034b5fd6033bd33008dfa9ec334b46a5abce423f3d207924f81f4a9127b31c58b164790136ec148e9ba6c8b6c13f668f4e28a9ca4460be33b8124b1a665f2995c9fc3b0d82fb46a08112441b94715a61391c8fedd7b9ce4247917693596b1f6ecf3b5565ff5aedbffd55ca42d4fcb16d62faa61d511c25cc24260687ad8b19658295c26dac9bce51ba64cf55ddb8fe1b8415ef1923f9aca0b8ce1d880dd34abf61ec87cd79dfe931a3753b679acd1107e45bb24898e84311197fc8cde1ce38711f4bbcb5621ee46dff778573b78fb3b3f62b1880f7188cb2cd0e0cd70aa05b2c00cd3415b66d955a41304a28adbe1fe8019916e4e3ccdf3a71149272ba4764c54b80bcb79fcc6ec964be8b167cad8998b2c9153a0659981dd2f364a3e3d2e2219ffab2d4ab13a636f893a5114e3c94e229487356ccb01b7a2d7f45270eb83a6bbf4071d6216f70a0c0230f1094212ba59c059bee4a926f703586c0fb6c41552ae366af5d5d0a6533b2cd88f446ee888f2f0a9e62ca93a5504524aa969852851ec7187fdf58383663b9fae7ffe203f33c06998dd3ff34c41ac3240cf288bc09e4def546a1a7a42a6e882d520ea4eb5450c830dd2ec6490f0605d168553f5b5096eec1a6e68cf1c917d9294da03d72cc3a350adbe6a3986a5d26526939828c3434fea6eb2294ba30c9b08c5ba0e9710f9d2207dbbf17a47e7e433d48c27ddc0f451adfd3163b5616bc11cf4d3b2bba9bb766a62ed800a949f0e4620b766dd958da261f28ce96e7fb9c3516f4e6610737377f136f53f6bb368fafafd735f8d823e463a557d05ef7a98781a4999baf80c7e87151d7751ec393890b6d2ca526953e837215e0212413793617f2b5d69222b065836fb1cf414caaef70df3aa76eef96c8eeaeef20850ba18507e67d8322c5b4c1f49ba5dc8dcea97d43b6c42e48d6e1084f474f0786aa6c380cbff2073bb52e6f2e053e06c29b9d67f52dc6423ba738dc8e3e5cfd93df90c6cbbeb92080e46f7626ff8851540d5d4666db10e97428a9ae81f620ebf98134ae47ae34e404513248280233f17d20cda64c57bd81a6e8f784e6e2ee4d9e5bac28f4642286176c7c50ceea6d2a6671e3153a944ee6c6ac2bcb4178351f641ae4f73ce9d3a893e5e3b7c85126ce7b91af32a81d85fc3bf38d1267367dd880e6b4554d8ee44d5e0be89ddaeea160e67b071cabc34ca3f05d7cf263c0dce42749827f8a1c75c80ac538fed621ec018a029ce88cbd837cbedc728b2c4fe6bf9102e14f926d97006d32991eb739a720350ace10a7bb0511dc373428860f94c726887c98d84b12d14cfa2b7b86f66370f610c8d70e4c1da82c1cea6ddcda8992572edfab63998120a6084a897f44cbe3216de623d95f56354932fc9d5f4d1200ad140185d8ab7fa7bc641aee2fc33427c17437d4051b11cf3bec893b77092998da02c2c9f1ba412660cd3af22cef189d30d69cddde235f1808885d55ef445e92c4217d3de4b1dbc3a744d3bd5c5b6d6db43b27f281097edf1c51f0559c50c0c85f0cf1805e4d78edcddec7512575114124bb290f5e6bb8010afbddc43f8ae1363119a2d4fd4f5eca9a97af7aee4e7bb27a8ef55accb8364df8f80b6320a9d29d68e3fe5bffcb003f78e2291e10c842adc937cd18cb261535eb81c811a05e82bc479015541e1f7a60c77a946a91e9a065564f9df25c1c6f78a3cd6188df90e2fc36d7f1e08a9328b9436cc961acfb010440c7ec784f701eb0fa39c1ccac7daa7cf8cc3c88ec6d5e9082e8dc30cc86cd66a4ad51902e7edbb77071d51cd1a9be6a050a09642aadb9c5074e519c7bb97b1490ddb5b4a658692dcc05520e7ed0f4bb4f68b5d1aa4ba6c5caae8f01dda40250adf210dc595fe8355469f7c9a00e773a1a1496d22e520c9622be2ce68ca328d491d109935e8cbe39a06aae87a0f00f548d0f7b9a93a754e4f7a51d15626508a998d529f1c782f263e5ae8cf0f8aa19fada93a4d48d681dfe900a0265a337a84d673965147655c204b84dcac4a9bb18a68ec6ff0d75c187f500a53f4c622ec946161c99380bf8a7d446ac7dcf227871863a07987b48150bada48a16ae732bdca2c1701ec2089a73976509b86f7d202c0ce354470bcdbe3fdb8c0a9071570fb3fd78d7f1e8110ef58923f0847d2b4d68ba50c2408e5d41cfca4030eb8b6605acb79c17e67e622fef9751680264366798cf22c274ed6cf08eb926a3d654e19a675ed168b552dba458db64e4f784e1145a20cbe5b555d4a13a789918eb825e05c7a6053d871d1c5d20e1aecc256b2b1fe8b1cc0b91b5b99287f6dfa2292b84185655c484514041471dc31728f6274762c26b217317ae6a692604b7296496b9bfc83b27c52361dd36d8a8ff4c16ca74afbee329cb3d6a3a286c7050e64b8bcae96f18becb05c04986d16089ba11a3575e4ca579cf449ab99d204be7c212aa2911714255bce3e4deb1e34ba30fd9c35c8e446896887f75dc96d24f5f6184d718c77ab3b31e80c7c4b71eb21fca927458cca13f0d777c3bd05905834ad5beec8b45b2db57c7b14c35dc48c3cacab655c9c804231ba1457384e0b908107d5c169c57c31dc7a591f63a448a3451fa6dce215915be8f4dd32b5a802a1c7a30fe406b22817ca25dbaf425ede3924b85f55f8032b4a5a8450e3f14417bc712e815cb2eb6de8187c729dd8e2c642ebfa0c18a1d949b3810669750be60701148d8f8955b875d967d4795da35b1f0f3f94c052f7cfa6b76a20b52bd3b336fff72af152d124205a45a3478d7615dc393d83587b3a8b11926d574d3d66b16361adefcd17e74fd38ccc6c09e2202d435f6b51901103fff5fb338e7d4401520e67e5836b61615885f64098021089a3560ca9d5ae83b69ed57f4767dca4532db776a74eefd10f1fe4ad7f13e3958511ca8eb9ae22ff4def6dc61c1bb0587d717365326d8d8f1ddf138f030f41cb844933c9f7ca69a9e2edaf2509b865f6b1acfbfa01f81b022b0eca8a06921a31a46619f3af62fdfec674d39fbd1ed5045735c9613baf3b820ada9e2498f83bf9c53b69779c5de4086fe53240455ca9404cb1ac642710ede4c76afbe5b7c5064a19e8a85d9c4424476ed31ce22ea31c250dd845bfa8d2dbcb899ae73fc201a4b307f86444fe79ac60d285f094de757089d590277dbf4aac570024136ec15513ed3c625a7f52875cb2992031b403bfea948f5b17329de61c1279a1520b946ebb31599556080ae7c6f40ebfdc3d030a0ab6cf4e7536dd1ba05f2108edd46e58c006141adebc22486a02dded29af22ddd14371a98bb9171edec92e0311a74ac767d3d5e45274c3eecef2b3dbfb4323d7f84c4c8999cf9bc3effa63aa4aa26e686b24de484f40c81849c5dae4197691f85ca3ea332f3dde92ccafe9b82399d59bb2d454b251c88b2d6777ef5f29ba8e566da15b4ddac1d28c013d3663c5f5b4af5b2e7e9d6c874eb2c1efcd03f2ebe9f3fa3fe6334911becd8863191f6073fe968c470a9f59eb354465cc6f1a434b64fbcc0ef721f05ba9365be6fbd802794b6fc020f932fb2c8824f157aef740b17cbb1ac8f44c79dd1d94e2bd3cee0c8464239d56ad602c1cde1d27b76dea4442996099a77c27659cea0840dd6a20e0ba6383c114c472d7df7162ff069b428ade2def6ae5601450531a3c6c2ea877e7b0f9c04c120d49af978607577a8959c7b4fd66d8ee1a251f13ae938694f0dd8458d521f6f7a3c9dc693bd2370f32892fc5795c8d1c1f2f0efd88610527a365de20a625bc58bd073b204f34690d421dc7b194c49c794c0892842273db252f67f113f4677c28608e595cbd3b717bc02c7b9315409773fbdb027f2101ba93635d8d1fcd78663cc2f88347e121a6fbd045c787b9d14a79b5a499260d05d01547ba249fb572410f902be55dba77623445f38fed5038ae655aa4a0526df794d5ac75eef77697f4499b9d88b688a6880962e0ff173dcd10a680fa20feb2a5e5d197fb74ac06578245c949cb02c24c8dbb4999a4d5ae398cbee3b285d55403f275128fb2594df076dbecfad41f28644e9521871fcecb8b618af42929e95de3da2628282b7a740322970f0328f11026f26eb1189049228c6cc6d522debcd8e7dad4367b534ada1a3d9c0aa33f8b203bf6f19b45c986db27ef49065f02f9805432fa7b0fc0232e81004cb6a4e6278075fc4f26619d9323e9145c8bb05a7cea320a978f98df6678884f538f37b1cd640cc063cf94102225f227df6e559dbf3311c98c86a687e6b13f8d0b8c89786cb2c6aedad6e45692c8fe1cde17d2876c5785411d7caa5027d9465e5bedfedbdd745c4bee3576f8807cf0c62521930d5dd798574158c32b52769fe1c1abe4d94a1d575826fbac5e49353e8e95f5a69de8a09a7b885dd7dc0c644ff66efb7ad79d9d631d64b4f5420a690880548c9c393d7fedcb3f242af81091ecf7fbfb115c3eef46e26ab44df3720b406cd9498841d86a07387e0991a904234efca7995a524e3eae7948a2fdf1ff754dfec2ab7314c47775161f8a6c04110516307dfe82f4cbd30febb25b90c6d56001fb139ebcbe0b5963f5590d11ea7fe99286242fa33752800601b95537b6850c4d310e8f972eb9c7ad31c81988e343a6f0adc6648eff978eb43962ea8849201bff28d81f7725ae45124cc0d9589717e8c7a1ed9cbc3aece43f6d01b7584007a45cc12f8ab0951b2560558cfdcd664acd474ec681cca23e7ded3a8fe59fcd34b1b208684ae6a2c8895cc074c3e815e4318a5ed91267bc88485a2338ef0c69d41ffbe98229d0eb8fe0ff727c2d53a39d5800413f3a7c93653c0ac14bd611ceb7b76c26e991889069c5a6de8b5b8d3865068a4f4730378a8fd6ea01bdd29e10458efd7d5ca11fddbec32b0443ed5052081a9838eed76a4c495685b78364eb7a87f909946f167ee2c38abf45716bd24bf074a4ef466b8c9de00e526ae15dfead4642e7074c8aec2e5643fce7ce6c5d3db11c0e61e9f2d40ee50b79839e3887911aefa160838a837adabd652cfaacb9705773e8ddd2de7721e50d4150e8eaf36d52d1deb491b11c871a349cf164f8fe2878717a2e58d641090dc2878457b0b4aa7ecc5c965323c8de24481e972dbad3e123b23aa06ad6cd3cc64e02542c52c29406ebd6399caadd35af9287199082dbc4ef1353b54fe996ed6cee09d474b01e0ee862658afe06f348eca89162ed322161502cc800081241e6b87c5facc5a2129d966e5305e6e84b0fdf5c24c7886e01cfe2ce4fb95336dff87f30d801811bbbc128dea0105f14b4c50c58493392cb378ec0a87097f069aa684b28bf420b62dc2fc430d9065ec07d41c3811d84b1730281e9bf6091abbe3cd114bbbc90572b8e25b515e5998d5a1763a4df37dbdb6892254d058f60c841473db117a5d0f0292a2e02d84cadb5111594fe3e6c50bc3a1d38c22a1baf4019b17a899bed642ad8e174f54e843b24f885d81f7d407c2b3f355500e696e006b4f28e28f4990d34ad9d67715b0f0bc8eb2f91726ea36619139297f27d2099a969d550d3d76bd5f943b7b18d910d74c7069146d1cfdafc4ad7fd09a42ceac6e25c6518d5878d38f9079f1dcd45277d506ad344838805c27cf460cbfbd0aa40cdc1460d12ab066b4c73606eaf12f0f5a971f0e6ef9895985208bcb6ffe9af1b6ccfae2c9088b3ec6d39f82f1d77e9c0ce22192b39a0fa67ea2063fe22761f657053c3e507d51fcffa0c5ae4ef12b09b25657a15b3d050dfa3d625b498870c9d02a1e0c604164bd1db9798d113b9c5b5d52857319a71aa28d66946fa8c2d214bf6311b94c891fc169b763dfec398b343bd442718eda5c56629c1a5dead3db7e65ab0a47a6294ddc58def33cf6e04848b7193118b7075cc34f15805251709cfe82d68e0b5988d2cc74dc1e3572681ccf94825d0d16478d5e746610d34d60e834187eb74e1b4a155607f0a8bf7f59abc4f7c7973697b0f58d09dede2bd3ba8311db715bbd274c0e143c460530345bbf449045dc8c3f3ce626b14c84930570038e6db6ac7753931c8e3fe3a45be4b382496ef4617454de06d388ab289104fbd606004758837215e54f3b0e518d523bd6c6d84684aeb186fcd1257a73676767c3a9566b90ba316ec5346aeebbdcfbb112d67f1d3c02cce5beb311aebf927425f3980dd89961b219ac0400580ad0ca2a5971e1b47a23542568bf904f3d1319d761d6830bf1f4d5cec75c2e6921d994aebeb24682dd96d3ff11db82b69a7a32b4e1d7e6de279a3c3b27fff931aef1be53a2d74b7051abe8ed52142a1264b59ec6a87f131fffe7ebe8a1cc8be827a9e8c1a9511f98e543bbbca22989780a53d714e2e0c9b9c9694cc69061bc5f193b59734ce8aeccf003db005c1ddb0ebd83c5dfa1f6b0cc5a2bc0aafeb97cc5531c709c9151e78d37dced75ff392ba48789f3e18a59987f862be491e7e3bb6a89111c22cd7772d5d52a01532182d1d2871cea5ed4e3b2a2c9f97175f7551a75f68906b0000b3cc6bd2a4f415c3730b946a579f9706a28e414ae2e4574b730f0c1ac3beab5057df846472f6a1bc92fe66b5d6ebf07138399b67ab8e5488cc5fa67b9e96cca40edb5f6c02d7b75237021d1a51a4b5510b35539bf57403428bea544c39fd4574183a6c0711983b5f099f39e52273c294ad95aae5f688996fa4a9585e83e560295520dbbcf7d8134aac8175e092f9c7fbce729cda65ae8f12c706806a7140dad686533fdfc88aba5dc87e2a3b2af76ee887f97cc12f7bc3673fd9d797df6df297442bf681df8ded53ae06baf1bbd69bdeee1205bd3da1d015f0639addbac239c2880c010c430c0161a0d84d30ecb32ecbfb5daa35605179a005de46917257f7a03346e6c548571b7a7fbdb621f1cc21779c82bdfbd5d1f0a9d069f8394ad97bb043ece34af9fd9e9d716d01857a5afa34323a2aca90b76bc39a82f6c0e8b5dbdce479865f11b57fb8d8b528505bd2f93282760fa1e24589e5defd803e1693b4ffa2a0478e110784e4c9f049601090430f3989d6784b4e584bcd4ec71fc4bc1a530a9cb6ac825aca4030ca46b7c5f34a326ef15af0630bbdd5c00414f880d677ea83ac7a0054162d24e2379293d6c16ea98deb084df61c0fabf6b975a4377e07a704007acb68cd11cab7a1f7884589d6badadc3623e656243697bbb36d85b75f36d0816d767131d4985e57089b48f07cb4dae49c9fda42c03c925016dc22b11e9b6a51cbf6d2f495a8989722f7c746e84c1b5cdf9b1961a97e609cf42cec1dfc77e8e5fc521dc80d3a22153fa13d3eb7177db9cc4cee3e017f23b0007139065c59e091d5d7f4d4f5a86c97e250f92500169618a6eff990607ce121bd25c0bd6bae9bb255bdb6e3cb1313b96bc60211c5caec6fd91e9b4a2414cb148d0cc292408df85792bb988912c7d93970b1e07f2ed5715eb1e10fe111ea688409e518fc355de2acd110abec52b03d0ab1d83c96429d9202b900e6dce98468580acf7f95076a9dcb26d6c9e49fbed7a192f7205be331b903ace6b6606acfefb74aa7aeb214a53dc4955a5a49673a4dc44107eacafd8a760ff6dcf84aac4118905512198565608c6e0bee26f7f6a3dc57b56bc21b88f0d314bbf80bf9ff44f8a34987e6d4428d16a0c4f51ff2f5a9117de7200bb2dd7e234e11c00d43cd627aa697bd8a6760efc612c983f42c19092d96cb269e478f611bd0c3886afd86f5b3719e71ee739711f73d4debfd1a968fc770d85dd1d4e14557eab5ea82a3f3c52b15bcc04df3a3e9269aebd75f1b1dd40eea599e4c231dc0b3ec70281325f96ba029e5e02f434eca3aaf9841359859a07b6a9dfeb8c2b1c596c8316dfc6fb3a889ba750802725d756a8a6334e1c58cb9baac6e577d9f96b68d6ba64ce913c82e7c88e670d878f6957464291477253b2f0b6dc77e1e35bd5de726284f46e10a65f92350b7f7a20992247b9870b24fccbe0efde919ae2a2605ed2e588dd824b61985a66cb33d1c191a1d3d170003f9908244b317aa3af67c3da0900ca139c1ced106d2bbdd9e1ca6c988fd49c594204dada9df3d3110b3593596ada4aa1a41ae1f47e53b94c90b0e7d765626d0a1b6f13dbbe5e13cb695fda162389da3b5459dac7e3b90fc2bf317eca103b9230739b83f1bff66d4af18e1e741a141aca175708c45ef550bbec61e13af110bf74c70d6f6d4737107f33385013e7d836b2c9720dcd02b0093045816daf77e0aff568feaa5647abf99254a9337510a9e53fed20d76a02f475a765f558e316bb4dfaea8179f61024cfa6b68fb9011a19c8833b742d1aeee88066045467973778c5fe8870a62b0aae05e00378ffbc60d6dc6535da08adc269a273f7260244b6f25ff1a6bd6859b24485cbae663c145c9b1055666cf3d33515dfd9ca1f2f810f621eb253dc843ef9aad325be0a413dcc896cc3db63bceaab1372eabfb69edf145e39bd93a574246b23de4d72ef8dd770c8ff0527f6a466d37d0c7b89e5dec01fee7a4946355abbe195d601d4f37ee88db5272830d907d81a778c6ff021856a0f22b4a4190de472707c70fa593aabf7bbbd29d35c73b93d4156c0b11a1d36aecdcccea851065fe81b594485fe436a240b06babcd63e352d5acaab468e8efd7e6d3da3dbb2e73ad2ff21700a2d90eaf4ae0fe7d9eed6fde1b6183deaddcc733c2c6ef72d103d9f49061db9d4dbacd18cde80850d64a99a22f73a305e44289b6e2f046675df5b8cb8172b3e4d6671a2d5a447e9ce0d3911932b82e91297ce4c696cfac8b1e5401ca46873634cc0f3bb7661b4a25d9f8b8f808ee95c945719694827ffa7f7b7cca4f901fe1d50d4cb44f244121a7d11217aad153beefe20d65ac2c59c604d483217c448e8f0ca7e9f6cfb2307ccb76b416d0cd897a146f473c516a35899d943eef17d650e14db43c5976c0fb2bb2fccfd789a27e85484cc681cdb0f54ab2597c860b2839ec4ba0def38675f953b019188672b1b404ac401892f31b50b9f386a9eae4158f5b475af2de7d7283bb8b49ec193d223338fd49d7b5fad841244a757e646062f465b58bccfe5946a64b2c3f28c168773ae59f79895e7fa46a881f5ab43947a9b22d4e0943f018b2cd872ae22fda7deb12a0e1850c15e2de5168155950d658f310e7bc89de92b29b92a2f5119f6f9265dd3ba98a97456f930b6dd8ddcd549517e49e7dbe938ccca31acf7bafc38886c7b9725eb3c997e38098fb36d27a866867a47cb3fd98c6ca4e0e65eca3933942d32bf50481608995ab2bd500c4d47dddb7ff4d201f9683c7d19d36529b416fb8839078120a842b52c163143fe0e669475d94e87190ef96dd48c8eb90f6e35c44674b692a901521765840539e94727b6a674336ffadf08f227800767de1055f95ada244100acfbb4881fa65380faabd296cc9ec640ffbee8a07f9880be38a6d8555349e101fcb7463582098f455123bdfce65d54a3c2b916b19135396cb1a792e05edadffafe999160150a1af06b29c59b2b16a7dfa80335096c54722e7cbd2e60c59ded68e1233bb9fb111afb9f4b299a2b143000ecd2cfe6671ebf9e1a84d89910dc3ab4532229a592a6561e8fabb03585a398f3de5bac1506f20b797904320903b2535286f739aa2e7bb6b49596e2930c46bb06c52763feb377b1142d148ab407472a02a6de278e68eb725148ad0e9b4c498181c19214adefda003c2aef925597f7a48cc0de123f94ebde083d973456c597af37ecfc2c67d2b75abc54ec3744a7cc3de9f50cbf9c26701e8ab400e4fdf835523c9a5328d445f329fea2935d696d6f2f086c1f0ca3a15406dcf5614f6f67c014658840f85889aaafc9d5dfd0bec2bd93c36bfe14459fee19c658aca579548c10f457ed9d759ef44bb247d0387d2a91d80dd6d610f9cc39d419b2d04b48b36251f48b8189bf7ee59002e151b345d575f65ed2b6928ce04252af2e49c794425a86844bbe7fb8c9441a2f93f4cea0ecade6cde1f9301ecae8f0c54ece64a18c46e60b7386bc4a07eba1424a26661e18da7ad98051376bcadd556691a7b2ae24a372a144436577ed229376e8e6fcb82505fc1388cf1253c89a2038943aa6a73bbad2d9b531074d7a9a70a0e91932c7e52b725a5d4b840450dbdefd5ffc299f30306cc8299ad02e1dacf311ed77885639a17331fba528e1f14aab124143a3ef61462ddead31efa61a69779d49698e76ec0e3569068b754cc7061e7bf1d0f9ed2cd33e86980a875d248fb267dfb086a6cccaa75e488356ea44687714f903ad7a85846fd03baba7ddf5ac6c31c179dfb312158702b8cdcc98889252f07df47e705fd820bb5e5cc49154a0ec8321cede11b6faafb35c48ca8203d9a6f4d2312851a630a5c801d243eadee9b49ec2f983c49a863bd305f79f0b9d482a5ac5a99ec2d44f0777586c559d680a6a1e9cc6c192cfecbd98e7a0f64de34a6f1e776bb5b80d04e4e8b562e172ceb334a31db46da1c3305c4e48ddf6708d9bed2ab72536db11c3b4e1d84757d8fc4093a3777beff229eb2f13d8f580efa7b3942faecd34775e503ae6d3a8d6248e07c753d67ce740916535c3e09dfb7d5732511473d056a977ba7be1d57a78accd0452edb2a98099ea38d21994a4f4b4b3ee66be1795ac62735a7c032024af25a218e4f1189c1e500768406f6e4c095d48e1ef17b0aee7b126fbafb26cac1b409044b0d57e1ff72185c8bb2579231277504585ae39796d2216407e9eb980f7b8d849e7f826a535c95ce23f3911e8af23713b858923f36e7567372afae92b06b44de3ed2207ccf2d73cabc93133864482823999eb97b4696c19dab3f501e51d7adf69d93f57facf49c0d68c6a8b7e70fbc2d6cd923568604653106d952728deb8a8f26f826384841a43f48abb18c40ad8f3a38a10dfd921c7b1afd2b20381562e83b9484e4accb0bf78983987608f678fcdd9ba0fdc0f346c9c02b45daca98e09e86cf2bc79b432e7e829099082f3bfa774728bc88a04b0dbdddc453b7cd3ec7a98195f8831f3a9bff7bffce4ad4b1b7a3f18bf18fe94ace1b92af29c3b55803b2505424fca9022f2f46040c83d756c0fa886ce2ffe7f6d1d6dc80280c3a260bb6662067a1f19ed19cbefd06cba329bc0f27fa8323299f813476e66e4a0d196c8d8420cdc036540db0d35c76a9cf6b8fb929adec263d6629edaa047654164e8c8d0735c3b6cefa5d310c94910a1481fb97e4e68a654fb076a0e9239ece1ecb779ae54e765fb1a4c05099234d780611932dae3ade727289016ff4144377bbb73531c56f3e4fafb2bdc9be4882a81b2b68a259c97c0a87b261906f571b88177a12cf4cab003f38a58c3172417f7cce06ba6fb6160fd0b3fdca7be657213fce90b36f2588a6d22c38f3cb347e956a9312be06581d4031635e571fce10c22d032ffeb6d3a9d825fb205be296f439e038319e14991202c7c178d601d97fd76c08f936244cc4f26d0ffc08e1d9764db807d7d4fcd92ba6bd1b1c22cd323e83f1a7c774e18375708785b43e6d876c68915d6ebcbc0611464803b8d35b825b19a60a8e3934d57bd60d20d7cb715d7962b8d95ab8613344b9aa6e8c77da9e322142ad306c5969f2e2828287eb574e7687236cb309adda24020bb29b549b0a9c204f67486e7f2b7adf048413ea60d376adf481804558e2d37c7fd941efb715fb95c7df2546ad6dfec1d9b7ce5e71d0ba03edb53a229f50006afc8fc8c5862bd7c88d9e034709d5a0559334fc558998a8c5c01cf69a077365e8d77a8b37fa62e3a48652318e6ab9f4c5a8b631a689c68a2a72cb62c56a40296acd583206116e5cec5f7b76ac6643147f9a8eaa4e6149863a5cd8c0b10618feda66e795951d9e479b9bd0cc8e6ead1e43ca158d68929e53b2de1b808f31edef0aac35230826deffd57f0c462255d538dbb163aed09d63cf8bc011af6245a9faed9d69708e00a235736c520e721e798f26cc0d22b8634476854b0d3bd469387cd98d1609f8a6c1af58f5820d78e356af880168f85594d20b9d954187333d0b12ac8ab8c8204cee16f46fd7df9c9b2ec18656c4cc6e0207ee9f954a069d7ae174b114d989884ce13bcd4e31f30a38ccf7ec2b3813292b8f7f036f1b290d9fcef8772693b1b08f1b1c42b2c20ba497135213bb229dde17ff38f830046988d64bcd13ee1e485dc31591cd7a4023126e9a849c353e293994a2b329b9149797284b6827ef4e4b6b0402f4964a0e0cf63b0a54921a972bc736bccd8b902358e898330bcbdbf4b543f872d7657d15e6fb27ebc256c45979aa8a2b4b98d8a37fc79d06c627b4bd2fe5ecd99986d8ecb0e8db1cd7fc6ccd3363a767fb660ad0a0c3ecd06f793d865f1a18e7f420a507ef61599e23f01b2da8b135da23353bbb14c8a4e073da25e7466f4a1e9def7525c078ab2218a3338a529868cb163213d90d05bfc7e48529f002bfddc6e44affd3951ed680d82f197edfe01fc7d36de66dfdafbdbbefb78e580363800aa34c69c101ada54021401fed28c0b59ec85a6b01e93755648687ec728fce8134f5e40ceb201b1e2252528e313ab31f96d941653ded49c5f69e0b7cee666b0fbab98c726b8de7ca9cc8975d80f1b57ce0ef37e69fc9db4d356f1c5914ed074d0847724f6e810e243fbda72e6e7a7b71dd7a92c4b291bfae30c5b4e3a600d74c4a65c80fd43c03c855c3f90bd28e9e48d243daf035c9fe36a942bdeceafb55b03cdd0db2d814c884ef5cb97af32fdf27dc8e7c564ffccbe73d7aedc4ecda6f6963333307674c0156662a77ffac471c5ed46ff9c96a60ad9211ae3e2a21aca4a03543381f50417f4708f48c992399e5ffb3b522480709d97bdac074d3f79c26bcb841f5bfbf5b2535959f906a901cc79572a0111b2e7c591d0d1983860e519d998f4f99bcedb50e0d11526ac5e60aa2f6f261664d7589b0913405534852af09755f917189a2613f09e66d767c29c0e2ece0c833840953a8168d76e0000170247e4675b4f1406eff5fc974bb350495ba61e88837a35ff4b77173224046cf094830d30773d29eb12450a91c7dda894c64125b1da479dd15ed3ed9531ee37a0969d12f69c912b3916069a3c56b95efa85fcb2467b99ed1a5131adab0097dc3b3cf375e3512045986810cce6cb594f233bed7c895648289e9165a76b1d22aa5abfd15e5fd2f315a4da90cfc9066de552034f45e4e4965b4a83e5ecf87a20e64e7b91da827b2b9e27d83c2303e7cff7262b7de1364fd6c748a15727f5b23698686d3148b1ad8f9b7c8883805c349595d3dafa9cdc8a31bbcf88abca8b2591ae145781110cb5d2175eda3d9871fcf179da9b9dd0c079f3a7fa0da96139280012c10b2bc75bf0613536cb997f10530c6d675274aa0fab39f8f47c09431808f58528c4e0019854824b1006b44a6864e6178062942e0ff966c85be780d2291a47bd0289c69cdc15ca27ccbf9a0cdee3e997c6bb5ee1781e44d2326cfe06ecbfecb6031df803af13121bacf2dafe7c841540dce43dde192139741d9e236126853e388630b6031b68997342852e9a08a0a5a7a10f8378a370551bfa7d93bff7e1384985d56991928330fff2a1ee1815250bd5b1d1934ef5c2f2854322e27389ebf0002b98cbbf307547727c49552e9bf6398603958d1ff73b5b03c9839e252c0a7491fe2873d92354c3f690a843087943087515e09fd8846f7a0cbcdf6b621bc9eb6a00818f6606735d46c153e8bb3520a7671783c8fb0a68f3c0c901a2132c677c82bb9fdd08e4780de8d42f58c96dc9720548e4f4e6ad6198c1927970d15bdaa867f353aab790c9ed99672a472e4ae525448e1457264b80f3161ae3cf15d827e714340d2510d8f289b74d2497ace2facfbb79164df2e2f99c25492da963921441dc4d64a07aa9ec6f2c6e6711fcae4dd5cc1849c3962d7950b0d145f32e356d0dc6c0d93ea73aea74f5c7f289d5bbe1aa0e86286f5e729531b567b04913589bd95020d11b76cc5789e1454ef694d8179f33dec2668cf161a52a7def5e75a60fa1e6c99fcb68f3288669efea18df8c55eeb22f45c174b9f1b294b82a5b53356e50ff25903f51d5a4b5f7b0d4ad382cbb650d6e2ccd273b4911ee521a01614c2831963f7a9e1214d8c58e069395bf7323ff9711f2ddf12dc5ba0ad27920afe440a4c15e18daf71d57ab19e7107037957d38ce566294a8ac1618d5a51b579ed3eaf20cff759e2cb6ba7adbf4727bc553394c4ee97fd69cc06104f285f72c4b9095b0bb536db9f9793f267058177077e5d619135fc684a572d934db38cd3828763ca5256c964d0a66fc1a6f3a447a977ed35e1364786d1bdea1ff4f84d762c432a9c07e79b983f68929141dd008b64688d66e8a37167f36046c766b2af07d31fbf5d79de0964c76c7948434208eb055fc1150f623c951f9dbd94fc9f53959f87d7cba34257079fff1722e38b6c761b0f48105ac33348fdea8fc5489d5a9bef48007975a5d18a4bc804a2205fc44f670277f2191245e85b259fedff37e97654fd49f9e06059c053c3b6a859a90c31f9871bce2c1db6b6bf2b24962801bcb6086dcbb2fb5e0cf9c732882ed13e5d5224ecd645e7f3efa121dd52c5ffa73ae3be1153a91767f89a4173b76bc2d892d27a9192d34e80fa3e18b237b46a4571c60a3473763dc5a1fc32a83c3abe5b6c2ce3c119f5fb0a9ecbaf19d36b787d54afa45493f6ada6d76c092bcbbcaf2b1979e973d063932f2b89d24ecb3785d3e0230ca851b953bb0f446a1977aba8f28d4fcab83ef439895bc905c8ae40623bd57d8fe133c89d9ccea6dd8c41fab834dad8c6fd86d82f03a0862328085ad550dad0dba5016d29bdbe67911963308c5466fd0596429042c63d11e455903b43e2cc2df051b240d7dabb9457d242059a2a8ca6858d6a78ed1387c8874488173b0b68d32f2437ada532db455046f93c5e649f2a4ca5172d88302529212ea61ffa34f700fc4590e2a891b618c45c3c44f23c6d173370ac91341e2468f4ae75565a054c80786d6c8a0335d0d09f2a47352faacfbe1978f7df1cc2f519a4f7361b4d750d8134f3b6582b7c1c637467683492921346eb965d5827612611c0310c340318653333381d1f49c59fca4289af9d4056d32e2b4d767a92df12700c4f920e0d305492f1d07eed66fd0f52deb5d01ad36d8a6ba88f4c8762db5c17d3f34a8e27b702fa0b18a459a70a772a37978ccffcdf0195bf5f5fa131b3150c4cee49c47f47dedb26a0e1be8792b4c7a902c306a7fdf04ce366f789a7bb5f40441f47525dda65d07bcb6a31e078a5a9a6165f4b112e79becbf14ad79d07c3172e679d5a1c6c13306001785d11878ca7ad0d96088cfa54ab658506742b264ce4a9ca2707dfb5d234a53173d473ae797fc5f04c76f9ea40717cdf33c32a46ea668a9621945b5252fb7639faca7ecfb79a689b5e93af5f7c5f94360efd4151810c15f3b6c890480679d6cda11cdd070778e9c17664e173f3bc3a24b68a1ed6d0b406b6e8abcb5e8e85bf61749b1836cb26a02036427f74e5acaeb1518ba1e8daa73df398b0f186645f745e567b61ecc0b1e525c596542c566d395affec665b2cdb42c101f057f4a39e03f53b4db9f62f715787556fb548caefee034a1571176084fd224ed263384b58701985c457689efad4491668322adf24f9329cd46641101ca5c34e33fc6e19e8a8dd1abe324199b526cd24b43ca1ee89eac4ab26206d381dd1a8ee98ff6065396bee756a0cd336aa73032416915a3f2f58ccbcc9aa9fbda34be29181b05b34aeb816025ff8764a4322949469c839638bfbd99c7f983ad72eb612b8bc38dd107cd122a00b41161cc1b2eee6d480720ffb38c5b0aacef325a67486434c971cf0b5bbcf6d016da817b39ac132b27f81cd98fa2e98bb241802e60a9b1e8db1632ae7a2379319a8d604269b8ba23ec0afd19c705494c79e43cd51495dd1d09014aa4eed1e4f9b32be94c2775a9f559b3f7757e26c672ad5923724dcf155cccb8fbf25e0f94f9a6b899c87504fe9724a4182bbe416d3f976fb48a029a4683a815d214e151ed01355ee1334f2613b39f164f04a15594681c1fcd4dd983cbe83b47cfd570e6cb25c68ef9b9e71dbf01e7ff2e4042f8eb9d6524b6ea715b6224dab37dc5da6bac24dafc96d1f921427715acb9a807ad6efb99479752fe7fdbb06c033a095a125d3875e03db184f7d51748681dc973026c26806123860e47ed404b0c25da3e54c35dad5cb91d6b5bccd1c5aa7c26c4644cfb76ebe9acb31a1745559f6a4bea1c5b941bbdbd1dd4edac5137b5031dfe779636979ff9ebd7fbb955bd8fd53581106fb77dfc98cb27ea5e08afa7926f49e1f3f48f5c9e1efda912a37402236ab03c4f5797f25e7a13f0c9e90748466f1573a4bba61baebff8cae2d518123122636a3f5381e4134cc3639775ff9adb948e3417ddec8bf86ce0d8529c1d4590e26cc1ead8e1174e46e57ff943fe3a868916ede4540f0857d7a3df6621ca75dcdc9081367a6b13990eedd80542176a5913e90303aa268f21da3cf3c82d05d3a42d7b47641ef95d09a6f0054ea6d810054d0a4c14f85b4e108ff40c6811522c547e62c2a5ce81b3b0ce47368eb44257b51939d1b26cc4226bb53a75276d1b42272f39722b86d398a37b76d5c2ea5c9b770bb73272025220affdba3eff7bb717cb14bdfde32b132f6688986d668178dc1d4762193acd5908cce40a15f2c0147489f39f25bab5087798a36fd7e32981a63c3816a3d4eda9826755ff70b8f8ef3b00f9a0bc3a5379c26f94c5f252cf12ad36b799269071c3c15fb78e6abeaec9d520f6c3b78efea14d4f48b6badc96a58648a1c16b00d811b563f471ae704497678a94ffdd4a59a37b41cea41c20ff5ecc61084c11b0f442f189b104777cefdaadbf5893bf090b0a34b7c74be92a760da1c838aa19bc633f49f66d2cc3fcfba189d9a3dfd5289627935331893bf06e13f83c57bc83d5d4777109c6366d2919ce44218c578ef2bb8412f5f630d16818ef1e21a8f55b2da2967f3b087c9d615fe51b037381e90b45bedceefb1bf27416b4da93462cbe8ad8acb2c3677e20d222ef5df21e371c031e9836d91eb095d1e16e6ad0fead31e4669635d0305a12f2cc70526835692d1ae5d8723a0826493294637162b99e8b4940e9bcd6b25912accd1b3ac0ee8998469c46a25302bbae4e38a70eb5f5cbcf599e80a8de35e616c78e2ec45f08e90faa1b35de1414d3dd57d874a2e88af784d3c63b68939e361aecee43b8f0ae0ba5437b4863b003efe5a499c657f159489848b510769bd7a47909bfdedb041790b903fc239b8989b17302181570de881d9335a6f651dd6b3d304cadf77d22b775d1d08d6136b1c0010840db4956029a9295540074b46cd91467eb5794c5e6f4efea6b9b552927677c08d6bef37ceacf10b89631fc2ec50f271cb3d9482264dea37565a01436531518cc0b4bc846832d34254c33bd0a6662bc7d7ab3b63949e92d2a7d9fc5c383d7a53206924e800f1d7692055c8f91ba63444e47f179de2f590f7205f693882d8655201ebfbfef52a5e30f7f19d2300667ff8fdaff9d1258e3a00d122b3973c679f82506a4cbff990c14c843b101816cb6a00e5f2a272e31e9081cb34d7ea88a9228a61b752066c2ba054b41313872a4f2afabd1c3d64051995eb99933b11ffaa2d418a331e9ef1f18540338f9e3d1f29d8518f369d5a8243d4ae462cbed7d05bcfc17799cea9a04c5dccc9bd450d96024bd3a20acd1a2aaf88d78cd1746486e915a9af9a5c2691460638a561ad14a6e0ec0a979eda49a3cd62329a158d28fad02754b697a18bab8ebb2dc7ef9d9c1218f4a0d3f528a626796a33ecee3b42faeb0079d59de0f087cd0e4c8e6662fc06ae2848911b4831526b0b8d5998c11e2f353b250b315548372c0332bd26e49ca2f8b9ae013ed3be93a316fa2844f2d3cbbb0ee6c6bb45a1bd2ce0a10cad89cfa242db4aef9292d206e3c36bec7537fe7ffbe1e8e52e5a9cbbb96f119583fbd739160563a6f5af26c0135d37c0a6a6a08b6dd446f4114190cf38f8a2a06a5a191d7bd9a29819b0ed48f33081946a48c8d9252ea6897a420b8f7d677000f7ec1a6274ad1d5738e7afbea8c877c3e3e0e5bc4d501aec123fe18c2ffc88bc701e5d737d1833f5193e0e5c1b8cc554ef0afed2d5836aee8b65e5a917ef813b432a163e239378a987d7e8b6aa332371dd6b3e275e01a7aef0983e47d23493264858412f6ca7ddf15efc66f3ea5afe2ba0f07dd606bb607418d73341a0f339db81c2850d4ade5788edccef54f0fdcc8450fb627ff2f1d68ceabfc6852280ed3b31fd6dfba1e8a2c9f10d5dfdf9ee0cc75ccb4e9d097d814ca340cc5468f249a0ea78fbb62ef15307a1d6e03d47330b8e70c26a36d0ef18887547a829a8276470b7900e47116d87cdc4932b517948bbef06366b788d3352e19ed4b55ea02f9a0f104f5e9a17a8ce81b2d2dadc7d8dd2b2748e13dc48e4e135d9f8e46cf48644a67e6c6adb4d4e791ce19d130571df108921cb40da84cfda896f3cf8826d7bd4fe7485fe479141a0262135138e9161399b32e4605597a465e45e0630256a50c11239e8e7c1374ffba2f798a77b71fc8fb0abba598b74f0f32c9a2498ef436f65d48ca3ebdeb6edc94ed6ae4b6a71b99e16ee8b3563af94ce6c7c720b9cd54aa71f52de7aa43986999a32a38ead56e641f8a9a516e3a84cb1c62276a13b2c2899ec6791fd8f6c498c25678b53df2422dc3821415f7dfae9bca89298e76a2d328864ec2cc03455941217d65776d6247b6633648611a51b61f26e958118ede35b52cd1d37b434a53234bb508adb275b3f5b1c9347ae93d6f143b9c874c2cb443cba6ba0971baf7077adc3984851d5b948a3b12f19350c5c6e41ea7f9a724541be9d6b7c263e6212c214ef32cedd909e199209218f8f8285b7628061872625596936af125967f3d40d76f5c8537e9b3f2b1b1c6eb3c9ae988c01a66b6d7e208b1d4d10c46a9efc8a1e1da52f0f37be99c2c948242a11331420787fc4e8776ac57ef84045728ec8aa6f464a875b76cd4c92245d761cb553901da011e50151e692abb1ba70e6f1698cafbeb23685fab98c9021ae683ccb216c258d0a7449ba138bee2f6d753f7b3bdbf8aa7692cbafa9e907437a2f69895814660c810d9e08d283df2fe989e961e1c0c2f6912aa76502a75573b5969483f62e1c0eb7f2750750d908a0237de0bed6a6197460baf1a801f7f3820505dbd74d14ed62a3a626517ad7e1f7b4db5e13bf408608f760b20fde903ae05bc56f507e05dd5716aa3620276e156e6766f5834426bf477a5e3a6be2ab14537be5be64e01beb7b40d9c631c84e967a30d212abdc94f2659ad3e8576e4e5a0bdeb9bfbd4ad3e112e2ce72049e95ecf837ab005184db2f2561a2ebe7c8425f159becccd158b6bcf719d5744dfb3cdf58a5d6665d74c6d1ac0a8861a3486e61e823405d240fa2cdcc8b115efc4b696e628ddc512cb75ed000e16628a2e3363df1ffa437625f91930794de284e25aa212c87f253b089c2316a1ce156ab9fc24b93cd2a7492a6cc3daecfb92be5a6a637d7ef451c91ce9736c320604ae68bebc2a8e2645cdb5502bf7ca9597341e264d9dfeda7ed2612c5c5d5e50cf37e3bb695118b85c6a5634ef1563372fa5304383f75806ff702e4b7f17805ef703facbf34132d97c1b0e6e440666392324fd5483e5e2864a275b519e0ce8208b8f10bc806f2b3c1314fce2996f1017197d19726df8f40654ece6772aa5bfc0cd65dad1b6406a06c7b1ba34b5687ee71aa8249b7ffbc8e0244f1e6f2b09a4f8731ace071ea09231a3d867efea243edea820d5a9332fee5222153aa7751b92b06e56d5ff38fa1ed1a6c2375557b95b2ae093dd11fe14d1e45557e18ade520629126a07129917e3a82131375e2b2fdd75d26e156705a36bb0747cac4b0e331a0837d7e570b35784c36f481615210f060187b2593817e575f19ce63a27abfae479e12a31cb8b92c6baea3a2f042a120d8ae856892e37f36464a10774f738a419949a7cbf9f5abcefaed0c0619dec9f2587aebba7b40476ec728a48302f591d45845c99e6c321021c37d5dc8a4e20e49a27185fe8406c8477719b2c79a81090030d33200f7ba1c10236b53e3d4b50ce55973f4b8b7840f729d948f40f45bf368dd5e7de9d4e3c0ca2679d73426e86bd747d758b037bcf14efac6326c56a37b27351254545d1c7fecd2e1f8e1c22ea2f0f9b2f1fd2e8775b5162d800a82dd672dc5f551662e1c24bace4f7cdfa1337ce484954e7bca10129abcaa3c7ce7edb33b8bf645a6f96e101fb389c3e4e8d098221fe40692d6527e7960168ad7fdccc01b4f2a380348bd56691df14b2c6fad68f841862941a70a70ec55529cabfdd6e26b4b7103092d62fcff180a4d5e82f7831f4e6bfab27618d6b1e501b4b68df31346b0188625459558e9b5caeca21f0e30609f5ebfb4d69678a95be39f50a614c61be07ee846e7bd05e4cdab02055becd8e9e8be5d03dd1d95fcf01205f0935ff7209d20a1d2bffd303aaaf2aff1b17d41c05e390ed18de095e4cab6f7c24c574d1cadfd3c5f73646304d771435751191ca7aaf682a51b4f72b90455d05c34fc8d7de1f7cf5385236fd35629aa47c6ccc18fa0f16f75d7590dfaa65f5c25c0dfd6a80e3523127fc1bd3485bf07445b2b1a5bca554d71aab55a60d7fb690277c2d553eda8c5b63d406bfde2f158f7f00ec8fe54d23b2653016a91fc7e007221f74f5566a167cf9161c1da06376a8068ed2085cdec31963c95301f2ea394795fb84389cf060bd721545492050a81f821bd6c4e00150635b0aa19bca5b7f876b7d17b462864fa45a49f5a00e241cc382acfb6eff5ea79107ecfc800694bd379757145224c5deaa68d1547eb21e3dc649c19e146d77c59e71b7feb4b00cadd0f88a35ed0f05b4db7e2e74d8b19d9d3def74b8430a8e54d42d7858e95abafcff664459c2b213cff6cee47c64045f72ef210056bed3163581aa2a7a86e104958c82a56d0dc6bb549b2a520cbe5fac78d3b12cac6ccd7880e751a55110dcabfce8754e550ad4e1b9a1712521aa2fff1412b522b34ae2b1d1da8e4bd60b0d493e57bf108ce12b3e455864be5d1e1e005e2ef87498b902d46d4cd6baa725bd1627dacdb9d2fd3c46f66380d462dda2a87f3891a0a65832398b19e1065f7e56b9b2bfe987b2c888710c2e828cf78c616825b548e720321f91ff2dea6c090c43a9e7eb6e3f2d7ac54e7cdc958c96738c103d04744e95216ca5562bd3e834ef381052edcac10a7a264c73eccbc99a664c6f928a6c9864feaaf372ee0560339a22c89a0d0e33eefbd020cc14e4aec728a4b832940a8208a6a7fe244fe4544d92cab8028b677a4b6b937de85de3f181cc173ac50a117a1ba4aa56a870b3e8e4c96e2d13f1de51a55d4f3ae7e5c5f706587c886c6a175dcb10055d146bc452fa645b4df0886a195021c78e16cbf8083fef35b0233a0a964100c435a270dc4e8ccd0b93f66fde7086dd185f2802e8a4a14a17bc8b0508bc38d34f0dc0a351a6bfaa73fa676564e5bc64dac4dd2b2fec5cbdaec6334842012eb6b314</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">Hey, password is required here.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>Apache</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼ - ä¸ƒå¤§è½¯ä»¶è®¾è®¡åŸåˆ™</title>
    <url>/design-principle/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="73d735c716a8c4e431d8fbf44b7cdaedef41711ad74a2b20c0154561d17cca5a">91b4a72afde41933824d9b47e790ab2759c7fe391c65e762bc3007c35c45f1088601a4013a75dccc7683664a7e6bcb1cd0d5f2aee24b0e67f11485fa3af55314de3e25e57e50dc7ce677a0789e441cd4efa03f32eb4ba9e1fb1bf1a5ffa24e20af62caca9e993fa7fe070f7e07680fcf2997bcabc08ae9b9d2759337a4567910f84f97621d80142450bcc001452af8239083b0b0ca71e940c1856c849acbdbc44aa78af31f790fa56a264e2a88fa01beb32e7923e6192370296b51ebe95de2bb6dec175e3f46d6a93699fd13a96f25980ad5b8acdf624e1ae1df38677598768c9b7e1d81e437d3530c0a9dd7416a092504c3e62b2165d5ae31dcb324fb4ccb63d52cbbc113411502efd4c76dafb10b90b1199c11e3e90eb7ccd6c70764fdaf8ecbaee631bcf9d621d086973575953bf519dab5c9d82bb029cb043d93e6248fb727e08d3628858278f2adb3b5235c0177032d024d70af1f59842bc96d8c52a4c998e9085ff593407cf79ca448bbf184f9d4a75f7d550eabbb269bcbd2b93aab132c098d74cfe6f10ded0afe44f20fb7b1a4968bc3cc3062f6fe9a32afb731cb80e5a7ec88134fcfaba6f69f348213d9be60677b3c437003828111e3bb82d86e7fd0ee30c90f37e745bbf658a22082c56ee7c643df8673d1d5e3cd8982925fc64a9936f4dc801adc290d0d9e96fb98081bc3be7e7d7bfb632df399436427dcc50949fee72143bb7cdbf0c7c9731fd9571a374aa72b273e842115d8d1697ae6d84ab88482843a3b76b34a190097ec8b112f542304f5c52847f830a7ac38a488be0aa7755bde1391c3caba9e76ca9ab9b02cf490d8eda5ed97ce37b32cfd560d6106dfb1433810037192955a54f375686fd0f2b7ccc632bd496ab069c03ddb7fd1e122814bfae78a31aa0457d8032e22d9cad20c91f4de016e158c388991972be8638796318dfb1d8e1bb72860bc709868ff6676561cad381b8a1108ff9d492cf48fd948ffa2af8fb80602de4e8f452315b919499adec36fc00a9da09670752106d6666b262266a4f1c01d06153512cd431f8bcc6f9fdb9b4b8cdec99a05739b6af2aaaeaffa787fb799d4bf04933175ecd4d9209637ea80246c01ae974149df109be035153e814433ed6f68afa1da2718c150fcd0c12e4aed78d45487b0db62b2dc5f8da012f95b8903cf5fbc3cd2f40d4e1cf1e418ccea58a52235175e2926a9cdf4c3b1d1d75d2d835eec70cedc8e48a2b323f7945d31865089c57193a1f7c4ed5a11128fe25112407856fa10bdb9b81ffabcaac5da869ff76eb8a8e53a7c8da7e5209336f83d88cbd8b6e462bb84a4b441c390ca4fe7758a2a9ab4f4c012e2352803e2385c1a7e74c6ead7b2f4da58f03d1f5148d027139227afd5c02c02a21c09019663b1161570d1bd088e64a47bc5aecad9f9b543336c92467ca219b4573364c266ae05659ba1bdb27066fa9a4169a41f036ac9fc3a4e979c30f72fce2aa6ba5800439b7215d609334e5b5a340a5e002af4fe0e238a9a319e0db8089653d5c5df1d0b588ace0a29a19a2b36157c5d2265e21d07e590cd9928c42c9c3bd1c94fc8812a70c5c4da41fe40551830473fbf270dabc4901f4f38176a16577861e5a48575be3d7e2b8716050f0636e55d9b22db38295bebf688b928d0c345c437aa4fa2cc52370ae7e016554e859ce63bcccebfba681be838b984f32a19e336c2cbbf3b1ede5c9c46d4afed198b1e8a2b1807b45f230922dfec5a6be951ecdcaf233174fc0925ed267b9bb8ba1a2967a678b3e3a638d7f01310e89abebb03b0fc0a852651b0c88df781493a4dbbfbadc8f9181de1bef5ac3e612b5c37779d879f7cdee9415bdefc5043eb5bb96d3727a367fa98f4781cd600e2f40602b74ec682d1a7e46c41cf99a316ff3d0a9c36246633e358c658f30c31c0cac8b1131dfd8eaf25635b8524665658d2ec0a6d3d5be914b3b8c2b87fa6511cd8f2366d188f3afe98af7ed1e36c931c9a58fd742030835393c53ebfa7c426e86ea7f3d49f46c38287dd5aa93a7e549e7b5d23faded727704e8dccc88569a3bac4167d9c020f9f575a3779186ff226a270e68d624f2d08bce84c7e57052780b124efe0a06c060a2019f1acc1db13c30757d06ffeb4df9447cf4d2362978344040fc97208ad46747f8e199bf834a784793c038dbddd60397d01d0851821936337a92ff12175adc0b8ee5151f35e41ee9f31568e428cdc6cb7a5c2018025e559084f1d7fe9dc5f0ec464c2918684e08f7448b8f753c375f7787a5699f5457b7ebb35b510041271d8ea16726dee468ca57c7b8d31e77e92225952fa6179492a783415340a070d794a47d461c17ca2333d1e2e3737b3469a316b101c3828797487a53806fdbf6053f5cb270ca811e624f521945e786b31c4d5202735900148c09edd00b6d713b4c2f765f2cfae56434da94d3652abab3d1432d8ca0c64e2b97614a43d2cba2b72890d5e5f9f1dfbaec7ee4da1b440fcf8f21b45fabb85cf0f9c11643c7a6a46a724b61ecc497f0787e0aff3bb91a50ba83ce2f715701d3ab378de3b564f36d9b802cf3f2a846dceb99d45d348806c602c69d68359f1ce55e48cb9fe83738aaba33be4a0a7a5bfe9290c826d73bb65853ceb14712c6873c8deef8a08732a8fd631dc14b21af6bbba94bd4057cfa366241d83cd11dfcc76f94c6b2da12b62cd4dc7463a6b3bd76b6ce69121287d986f9ea7db3850c57ce6d19194a316c9e1d3c7534cfcfe92b4344626c565fd287734b6c39f7a7f0b0435fc52aaa4ed00c2cd82479c4484bba9f754d172f48d1d95d2072cd3eb0c08b878396081607880df2c8e163f52328673076f2b7f028c68b7938e47ed603b5cf4f95530de64d79a4f894d8a3cde579e54d56e41b2610304d54fbdf3bf12a870e65ece49834c15394de981f3bc122142681ff87a02e0a453bc3b85fed6141bc2bd837f7148060e51aa0ef88b0dd6303b39cd0b1206ff7fd4b786f468f5dad31f587632494e1186520298be1ae47ddae02c1fd2791887592c887c27d947830a24a912dbec876b686e368530e3e904c7805e495ea583ab26403119a517ec735288e190057ed1f273f5474c8d21acb7bff25d02d4fc2413506320ae364e46b8693c3f79fce521078514d76f247a28e2402b270c3489f9e959a05624fcfc3c4ff3b4e9677fe14dd8d38daf4e6d7515c35aacea46b5806c226cce81fbd76923188687b39d60663b19f0232cfeba675c76b53a441fadedf2e806f6f0467290f64f05fcb9bea0e434c99c2b32df154230a2f72a60615c7ba9819b792f6cd399f83be1973128317d1d7120c3c0a37ad40f70941d2990bb99fd5a790f412607875bd815800abe5dcd33cd581e92eda7a1691343e2f0784b0dc21c7d8ab825859459e9d72c0b8eb8d1904083c3dfbc6f40e2b6d787461a32220bfd3611689442f0412f50773315827a5b0652c67523cf8160b45cd430e4214ff94394db4aed01e2dbeacfa2291f4e255e983d6abfb577909ecd6b25993aab82787d6a194af32063b584d22cbe39bee46b5a68437d7c13367bbe0495b8a37a2cdfb058422e1b138994b3db3a0342ebd732a360b860c95dbe41519a0398102c3b3abf26b8c0bab36388e6bb9f06328dc90ace4bcbd01412ae91202574304b28565a6e3208122adf465d08536e6115938ed00ab0d191af1b796b89ae529bde563f7a006a547db0ff26cf49e6ed3f06cc9a130cb24d02c3d8df4f7bdd14e696275d41bef5eaf10e5c638ff294aa15a06d548e8e3ccaf5b4f887aeb2f889a2e47b637d70f1b9f7762daca9f77429b8e79df4896f448194ded6809575f9046f72dc492f81d6c1cf34f3a0f06a70a41449fc5e3297f08815a503c5375a790f5dd9c4633d8614a447d140b5a7c0c28532365c88a5628845c1ccbf05909f1f790977514520603cb7196e34a11d6fcfb4fad27b4e7ee8267b59128670f23faddf9a5313626229e6b94ac89689706106837e8b43d939c6643999e280d1144d84f0f36b4036dea480ef8b12110f44ca35d2099754025487651bded83a4cf1682ec88b86d69113637e8e163d8f49bf48697956875c30b3faab1a174809860f1350c2e5f3fadee214c6ff160e145b6c9639d089f1374fc038c987ce200b511ed8d19171be1ec49b64523acb38b7e82f5dd2658f3b00f18f996836f9895a20f04931f4b54c0b28855a54d89a0b43ea5b1e87719930c47f25ce3503b40fac8935b669fb30318e87f4706dc7704460294503e6eb208a4252a6f079196e7a7efafa9a7e0c5e9540b35cac58dbc67dd24842e57c34e97b55ba96f8e164f8cf94217a71f9c630bff09d94f10e2f73e00f434617f31a7f96313baa59679c2e2a670c4c1da65ba220d1c985197818ab9eb7826614351a2e419e99fc5a3a0db3f31081bdc7416675ef1d2b632ec12c17dd4bd8849d795121b3daf3509052878131236cd2751f97a4b710bc25671ecdcddfbd9ae2fd1c46e6c5360f47bb0fb21fe555280d5c3ef16e61148c5334cf8517293832513051213cf38ce45ea009532859f9a048a29cd99d2836a3ed8f4159284760c50a86ff001bb0c1600c0cd23fd07606d15cc2495d31c0f35ea64e44097b968b723620af0313d5ad1c7d0ae39e24395568afea195d661383e9110069e906588a8e6b689f2543d4a0aa17b960cd7239548d31bacfc131e6daf45860c837bce689eb8153a16318a9a1755624443a5fc8d00f772bbb9bb3b24d3a8ce5b6e9825fff7a39637b701da9ecc389ba91abfb6bc49d60e05130cc3fe5fc8fedb2daa708535f94a1b398ff79f6089d22be01952ad30aa7d49c8ff8d3746406ea71f07c185a196b2593807a2130114852381aeb4e5430123c12e0ee6be882b0de683359666969eb73ffe5fbe4ba06c57371b198b7a0a3f3bb462bd248e18fd3ee13246b5393263b7ced21c1c0d3b6fe3809cbf677062494d4051f04758a15f72de002b201aeaf25bfcc18df0f62ecb694440939777dc79780f74a200155c7320ae959aa36ae3922e3038296a2ce48f85a59b60994158960641908627a9c93e50c76eaa2878b731996a14432cd83556bed6f9fab260f65e288f92bad2c6c28394e4af19a7dcbccff54ab83896675553f1c2f77164028c30575e1cc08c9431519a5feb1a3c052523eb56c583d6801b89cf9cc4b6f9f66c9cf28acc22139b22c968762e5d977fa68446430a53ed569c7300cec2551ec879539dc63483414c8d62344cb07b5f68a79cfb79f2c1e448d6344329e881a3299aedf18c00ec43dbed1b74958eeb21a20a14ef25392fc3e1a1abb39c599939b6a2385d435272967d69c6c35c866a188e54784cb6115c0bb713912be0575db2cc92f7ecde2d1a47543da0140c59564b41c396e219388ec4e975db7da5af447b6d03cc9bed03e7820f31ec95bdd61568580e56aa8d2f35f85fc572374cdbd76164741549f8eafd1696ce2de9f6ed4cb9f9c32d4deec5ac8015080cfca33039beb95671b2ae9af7ce36555601420bfbff337bd3e21946c224ae97448b929169b4d579de9c4d2a87577b39504a1aa938195f36076b05fcf5def45e572b3258acc46bc52e66bced0adc16224b47c6649740923b1a1ea87c69ee423795c3f29bba554dfcc80d6a18ffeb1ccd0ba9a93973b4b93795c5a184aef9bb11d73d237c99dba5bc586003e65352101145b241fa7700deced1c7232b317072342ed294efd64866c4b3361600112bd02b9ae09c37cd6d15780b34f7c352496fcfff624968166144b8b7c50517fa7e63bae30732be53eaa02ec287e17a078f80416f10acf46029701d0f3410eef8e3a7dc2952e447c5c5da85e3d986a3e4775f7585504f5e2a292c5634a1330656aab0586c8bcf7c56be13d556c71ea0c8f99af1dcb3d4e197044a4c7f59ffffb378c951edd1c9d68b5686fcd6802a722d05fb95ebdafa60c447bc575262f57be9cc8246ec89932a9510523ceba845b920800fe4d52f2ea0b32b7ea508323655750d654282559da43150bed3053e68d04641afe0b09754be292a4f0697b8889b3b7bd1de411c39454fc4c9749fa3104470a4932b226b491fb2862a8d9b40e65a47129820d7fe7b0174280fd78aa8d577abab281f5432baec4847682080c128ce5e40b5ae3e791fa9be38714d906486fceddbe425be2460ec50bec8eda61338a83244b0e10108539d527bb2ddc2306a531c0257819b4085df05209dacf5d413e76750413fa1020b496588c6d8bcaddc7a11ea85e1834bf6b0286ef56bcbecea486cd2177f4c0302c79ef7648bbf10b7a0fe7de782fcd4d130fea71393343acb473a57e762a79cef163ae55bfd4ff2d4089c0bed86b1568ee01a3a0f47369cc370762f571a6a97f1652c40cbb6d2adf692e59a8f9838500c3e1fa880973c58d5591a8417bb20aa9370a0ce8bf490d54bb0c6f3c70d3704e655d4d8c4848383a6153992adde6f055544cc47eabfba11eb99d73c05baef047bcc9a8ba6ebcb015322e08a94919838b387d4611eeb1e20025d040b51f0f984a07fd10b28c927b21866127cc5402038697546b3656948e25ed23e364fc6408e5199a88c937c81c5a8044692ab47bd03198a759cebe3cc3bf8f3b51209a3112748ad3d613490226966f7252ab791fc4107a2bb41ddde60fdea47f202b481ccf078fe9ea63e6d5fba4420178de76a5882a3ebfce1c98b8c4124a6a0e8b51c37cded76e4863aacba9ce5bbef837c15ab5f8e93756a8660feaa921f40eb08f7938e574ba6dceb05899808cc95ee709d829219152446858bf667a8877c7f8610094dfc631ab129eaeb55cc09f3a3ed08549b5801370781c72697dea91693cf1e6205e7e346be3f32dcb939e845c4f6a17d31d2d80ce63bfc4867661435172d30c8c70d254cc24c36971852af811dec2fd9699d5a102e6a08a62153b830be6543bdaf823956db5c2e810410e9f022f5225172ce77f2e94d0854ca4309a9304f81877d453cac750c2f99c946c1a0ee2c1b67660ce8166e5390e8454081a27a82a65ed0cf8d229308900467a02a33aefa2bee1f704393cad11615c1a5da26fe6d2626594b6c5360f26238f60637573830270579e17ec325f30241449151e6739cea23bac37c33b670cef75f05a2a0fe3742341082543311d1d3d1d92b8a408c83deeca3016b8141709bfb9900492a2a0fd34fdad9afec23cdff5d56df7e1d48479001aada1f60849ddf3d3f313ffdad3ac856826e8f28732f6ef110490800de99c0f1d2c99fd2a406513ecd41a9746965c1fe0e92f57c4db088b6613aed6af4cc23712e93a7858b45075ca78e46a2dd1c5e254d6804a3c33a821b0a0329b9c1e787a275911e311859f4ef316de456e9a6ee15abc595ee18ff625ef666518bac576e1880bb716b5d8d03a8494990506caf5c49873fff1d51bedaa65d480a3b911a029dd85b55747fda9f1c53245c21a040bac5cc6deb9aaa10ffd88df69a675fec299365ef1ef241d3dc063edf86eb89d1c0cd7edc3faf1ed920591e485ca3e51fe9084d0cf493ed321c71f7ce784b535aaa23b23565df31cfc10f3fe2bc3d8298685e7a630cf43aad1dc8b80b783815dffddcc155477423f1b6fbe8f2f90afeea3f6f81505a0ef53271993bad1534246cc3c8123773ffb36b77b9b4d7d4c196c3d287aafb9386ca1c01c8d4f80dbe937637e9457585b583ee50c543d40c6845ad4b1dcfd12139c94f5f765141b3948a72ce2aa2bb586d78ba52ec62779a85669bd7104dacbe9e9e72506180daedd0a3e391685934127902f3e979d9a5c93f9e53201382098abe377554d5dd331deb0e45604e19e00de44bc9996a26413b98aeed613464c6f46c0cbf0967fff2ee443fa1670a5a52b72718e6d59facf77539a6c12366c8cd341766f3a4ba9952e0dcc8381c1b497fad49101fa6a19a951570970bd88011166a0d802eb2f7c09ebfff4dd8ba8c8bdc769afd469701fb5d093806defcee6c71e445be3f8bc6c227dfd236e69cd9d83d1426f37cb7122bfa560e06071ddb08142a44680e506645cd66d91b16519e2e797d9e407408cc40fa423096e26d4f1d4eb7457619e3a7c14464f29750e8b33ca03df15b97ac19507bd53f8f45a694bc189672eb3681e3fd28c4bb39477f40e22df02e7ccee0a47560bfbbac295d325a07e1cd7dd98b1a613463f0e478e916438b89703854194c66677f10acddc1f9b9b67b8e77596d6ffd1f3b6d4465f47205531a5fb1c4697e50e5e8baf1caaca22c5f3237906a9ba9dfe84753fecf6a9e87f003a0e5a9b06f0de85b93eb7387c26bf341a5ede238eabbfe0eee9bc29f9119a319773dc839a134f07fdf1f1f7aa74c4604a04622ee127f8fdd7dab2a30e334653b368b25d4857d4845679ebad045114970b8268866e401d35bae2166fb7c17a207a5c1492781558d5a90c0f2465675cd52350d4458d61985e789d6a9a7b638b086fc198bf4cafeda58cc468dbc5560d61aaf37b79f42ed65f822427ca1e38f983a2e024bcc4aeef01ca5ec01643560754b63cf1b0cd4ffcdfc830d3f012840a69cd341ab5b618ea1505d10120d377eabde494bb27ef1ddedf64fb5e202e427c3335dd70070183d7eb596f88d22e09c7bceedc4383cbce6402362dcb720fa6757c12c522b5b58be279e383b45216721265469378a949327aa612fad8046c70f837f3f86d02eae39c3616e115b853f4f19fccbf268d82851fc7dafa9663d9279a72aea2da7242fc0c6844dcb079bc2c0f76ef5b9699640507a1653f5c345fe555ac581b346c2eeaa27d6ab324e13e3b89ce8c260fb83a14bd77ecb584f7f61e2c1f8a681621a7458450179024f31e2f5da0add58f41d89765a428af0384dbe8ae3453331e18f7bbbf8cebcc3a667a24b598364eb7656fed800cae6d2b16266d997d4df4c6a5ee0c96c23258e32b78fee132dab3678783e9bf7bd5adc9e681c672ba62d2c98e65959328f6af39af37d4001c7c3e02b6be4e0d03af8fd3274a1ac921504b1e725054c06393a403dbe8efe17f94dd854d876daf622cd87fcaa7860f2be07ff69c55c79086fa6c7a135faee298fbc1ff9d2c21aabc7b294b05ab0b9bbfab3f009ab46a05244bba4b4051f29e5c2bb43d9011b6873e03a35aa4fa01ee70fce4402e8269b53f34fdb07fb22df4f932d334df9b7abc199aaa761f0063a2d2c9b2e63c1009b29ed5a053787dbbba4a8455cd277ad01005a999424819f0f1c5e63c70f7e9c8b4a26925e5a070bca65663643b99f54f4ae19541e4fc6fc4f420453c1f734e9089b568ad678d0821717ed94280e27eeb83240d240c2423849bdf95df772f286ff7bd68bfeaf9a51fbde7fa5fafb496925372e92697c15af4d8315a04d5a03b9eb5fd38c706c8f29f2da814815b414dcafccc2f3e205651961afccce4fd52bd752ca819156c7dad030f77e556e2038e52af1499576dfb705262aa2c61de97a1b41b2571c18bca9aaa7ffca3ba41bc42667c46a2462039dba5d35e0792325c4cf63ac81c175fe500c34942807eb506c065149b6f7e6fc87903bafcc317a9081c5259e12d0023ef0ae016ca861c6e77b2925f68aca93c99aa3267e47b9dd253f573b36ad308643f31e13191a5cdcb4f2b995590f47d52ba7d864a24ff81cbdd4d94f1b130f77fea194a50b71a836a5e612c4107c86670c19d5f6ab514e60abc90888c36326f80cfb1856bd2fe9e50c3df318c10a33d6ab42fab281230333ec98b13d80797c61b41bf82863bc8f6c581dfe4883d5deb26b7ca9e2f3965cc636e0796905333ddb1bd04aaac8b24ac18edf2f8a46559df588d3d228fe60f04a58a997aeac52c5cb2f73d2aabedcd49ddc327af6416b6a05ada53aeba0f0b6769267fccbf602f03d7185bb4a635101fb1c45c10667b7ec55a6ca67fea07fdd3371415bf5c4ce6338eb37c4cc518152c38fd366751bc5e55ec6b613e73cba7dacb1b9eccdc95aa68c51fd035023fd4686e0f1803a83f1395628706f33684d0aa49b92b87507e3a6c813e7581d0404dd5e03c44343a7caaa2c26437b548be71dbd8773b701fa9cf4fb28c9f4b218a3079710565c6c06747827416f6626d21f2b38ecca4752d95f8bb8299c03e4892f0a3706621ddd90f1570e75125798a16b2bbe5d290b866d6e375b115b23292329db8716c87bce550cf849a4a2bdd96b08256233130cbd8d2c0eb72c314c909009111115020d58f04caf28d85961b31b0ea352fe42e1c5f4582da38efe26c212e3be64a3816a048d16dcc5f7beea6328f1c9ea30b844db3fca730ef645d4de39dc5ee745a446a07160703c59078eebaa0a7e8418c3c5be3043af10344bb1cea49b1ac0cded3e6d0363969c9ebe3fd79dbb189ce3908b776ba832d272932c9fc7b4fce64fdc2e14334be668c475aea7141a4b44809fb888aa5166b2952249e117b807499d40512be1d659c66f15eab564151bc6133de526398b8361cd6828c37d9e1d53ef4146fad88c83f31bce98eccc525425b797ebddc3bbeec665439baefb39c0faf7f5b7fb3c48ff7406247164f5e56ac7d5203afa0946fd218be166ce60cd1110d839dd4b08f7cfe3dfe472eaa05be0b4ef2936a606c67eb4402f22e241bb564def9a5294d9383a2317b6eed5f8836d3a02449cb8e8f5ca8ef0434010d3ff1f90d4a61ead8f622c3e66ed20d2fd1afeb0c0ab8b3ffd6690cb51c40d0d1638d27c0193f598d35d0b76eea2188cb1577b90b06abd70ad9e77c3fa452c0e0e4f511530a90cc39baa702614eb2fafb229473d33245150ba95d65198615cc5f4cb3870b738a474958e2bec64b57af64b95bc40a84d6dd81a67ace4087adf28ba616586d43db49cbacc8046349501926c00835083de7703c1b8c6fcdcab73868169fc132455c1cdeec9481d47f071351a9b97dea5508c2ad8a8cd39ea43cddc02060ef264da7e91f1488a82d830ae730d8f19473d7eefb001d36488db581377887b0103dcaae5e92354c8d5b73d6fe1600164a88263854cc3372a90a2678d21176f78d74fa0727c5cf2dbc59817d44381cbac0541a62ee11fd4896e4c72b3e90ed99c60dbff01b4815c2c1297246d0d13eabef54744607ed4d610ce394d9d9d889680104965408193ecaa1611126a249f9ee8f10a8f9bd84bc2d20e526153156581334656e9c76eb644e03aec436140ef9d157eaa2228c5f5049dc78237df1584669b719cc263e14d06840e069ad13471dd3dae9840626fcead298d8532a8a31f2d0787f9882645228c6931a3c68e2d1484ef46b25b8efcad6dd8340226076feafb10d9c1ebffc9f39463438c9509947e22ede7d5f5ec19fbf2ee7377adc4d8fd44aa8195a98111c1e65e13a3a08ef1bea65ebfac5f99c1399450f1d3b56e0c808e1c4898b49188356c8d47d4c5545e9b604d892ee87b69b54afbba8039d25d0cade6073a69cd3d3dac0c6589b7c14599708005064ec38fd9ce6c9bae95559e30984660ecc822141eae2c775751864ca316937f5b9e05e9b04f0a1b2800cc81cda286c3fbcf4685bcaae71fadd6661b962d9331a84741e665917b1f628543ad8b23dbfc6b03c5b9308e345ac27b9a65a6416de00fa58b31258bcd923184b0387f699d903abeaf3892025ac321fa468dc6a3f6bd44d48cc83ea47b0ab47ec6483fcb14ea22a59203ef16d9dccd7c2492176a10fe47b57b3a715794a5bbfcd311c57fc008af903b143a47199b51287d7434a8a648fb947e24a69b59f1545de639f3415d7462f82b8f6c80e6599cdd76010979bd08da61d28f279015025b6681a511a566ef239eaa4b81cb88d58a9551f91e50ddb7a671a617ef71de854bfe1664146dd79247a07e370e8b02495026961028c6549dd66f863f5da851b259e766b9ea68226bdcea2ba2b895c7f6d154ceba916281004e010ff2c4d3738e0016e1391cdd07f5e56dde7dbdbd6abf3450c334e93224ba874a9c5f61749fa2de96968e28ee367b419161829cbbe0c9ae8ebdbae2d08689eca993f4a1f64756cf3210f4fba232a2f6e39e1db3e89963097fd8454ae81100cd16b7609abf0fcdc1064738d76443578e65a5424ef32de0b2e7875046067a7eff81a9eaff544ef049e61082920b8b1ea31e3c254ba2c7dadf60f0a996c864022ad55481d361299292e8a6d2f16805cd484ef59d0297d074a4a9e87f81cf05de0f280cb0646b9714e62f4fc33dcb179901a221326cc53deb7f3d3664ed2feb8986c68925cdfb2f65b4b01a002ca22fdfccf88f625cde40425edfb475ce672f7978863ac1ffa6e91b59d459917a11463d2103d573e3067ccd8761174c87695136817437110499009a938aede58082e8baf0b2e1a5b897e73b016d3296d0d6f5bd1793887d19dc18ca31c3777fe3a15e75330b4c7eaf8bb8ada2edeb2076ded2e760245a6fad80cd796d6f78fd22730e2fa3e934abcbb6cb2edabbdcb455a38211672b9c5f42c12f222fa9a255a94783ba252e94d20171f89d7830b9ab6dde3516409c437ca32fbf37959de31793acf96c8ec476c83118a8be154f366a8a86925e12e14f7ae0677a7a80e7e7aa5e5168a6640536cfc6f0cf5d6ead4f2b517f41f67d6e42a84b3ccd0fbf10ce71cd66cae8042b8b920257408507c1d774840653e95e889f13d593278a28307b4dfa540aaa48a300f7b4c03fcd26cf92e135f1630e61c342a5eb1f7112e0b97c1aa8e14e69e4d0342962a98e25bde62a568e36d591d9d671f20006c7952f506f1b3c352f11037bd2d829ad41900bebe431e229f5398cd924169b9f85b0a1b9e0fa06604ee8386cce7a28c00e1f05fab601d70b8e72b1a20f0baf70120091f8ddf152d5e975630200cdbf379261ab6db9088f66d4f236ebda9cbd1b23c636fd7a06f509e139e531bf8b28fbafe8e7c5cb8819d662dea146bfcc73ded7ed2ab5fd634c07d08787fd43e49d7eb00b21187feb5bc4dd4f97badc80d21974fef0780c86e7cb1282432b3194d996795e24c1bc70de7c7957f9ff5b6a01bbe83275a9d1a9290177b1b79a307053a57260a687614b0b03ff4d8568af6417b18d95b5939b98fbfa50b87c0f2337eb1e3f242eab5dc2e1bba1e2c38b8ead9b0abd5836c9e624cd2f298b4752a7409d91fd6e0d6283b39667ae9fa7e75f9e6733e4b78507ff8851035f2ff3096f9ead89e5bbf1db1726976dc0a8466f0ba4abe4188605bf0dc4757ea4f16ec5455989f2a23ebc2e9ce6d5e33d209beb545ee3b2ddc2ba6eb202d81c6d19e02768350321afbd70a3625748972e7d87b1fbb1310fcc0cc65c44a21d853b342be589946b4ad907076f77ecb4daefbeb9ecafd9bb83840a6c74e8e2e5476883350b59bcc334ba29ab90836a138a993a336e78b05e8b40df5f2c412069d61a0ebb39a62c3a68316349b588fea2b3965988177b9eb5816bd417fa49751906a00bea3c9cee9d82e58f94ff735af553bbc6c82b52b04bf45840775ca6924811e52148cd0267e4b539f421da70281ca8459baea15b4e261ad2359b1f44e8a6a8e273c4d4fd57f92de67a1e9db2b8c0a1e33407b9b5b9afcea4671d8d98c04ef0d48554e258687321c57abaf48ef9d68b0f7be1cafe0adff0e0d446d15cc0adacde7efe58dd541d2b0289fef602d9a65d253b26b44517af8a280d26e32f70e8661842904d2ddb217afe758455ef508a90570fddb80e8c4ad19bdf2eb0757eb1c1615b73eb55cc3295b54ef7755e46a044346cf8af889a564f1e83fc15cede95b6d0cf0a62c3805e0563188fc0b5a8f714aaab7c35e25919fc971b83deca91cf43bc7e3cc968b06e61d121b3ba9fd08a69071116f00365f8075874f2a9cc25968d5de5f509b43ede51b861e78c50a55ef1018edb46e501b31622bbffd06c795b48f4d394aa5c9407780ca5d64e6cde97deca86f9ad49f8dd41e4df44a000ce550f82dfee594ab534c7a39050414bfecaa772597a0e12a523cf655c1fd75455f51e64dad23cc391c64649097fa52af3feced081c01c1eb87f9cc52ab97c41a3c82dde5fc489bbac04a3db8b8ec7aed9466bb340997e9d2231a6eaf45efce50a7964826e79d67a86e4822e10fbc8de658ec32d03ff277a685b70a9132b77fad8c48511228e6a1aff5ba88171aaf238e5ee1fdb3f73234deb365e27922a6dc6440ca68bdc4b04a1ac0632e24486b56987299bbe07afc6e8641afc48c746ec1100098f7dae1d6511e70dc5abe777dab534ded844b904c1e6e6658a3ca341d6ab4bdde9e4f1d9a08b46a20987dc0e8dac86186de9b32a9cfe8ffbf7bd5d7b1ee9f732db80ca8a363a1803de7d3f369e67a486c5b4f3f54bacb6d287a13216785bddaf32db39d94379f08a74c6fb520dd1b3f28b2eec4d085d0ea839574d9c55d9b4bcde0a40fb7cad973771e8c2c42bf0075fad4e0790f37e48ff06134485bdd1e941bb592886adc798465628f883ccbb5b144ccb572237a4a1133bbf63fa5cc37c99874acce841c8ef7dd50935ed63223fb7a07de55b32328b2e381d428115a22f9cf2021dec5831d6a01a6c9a5f434b1ac8b87c3ea2bc5ed636722605c1b71ececb11938ce1e345b6c025d525f15a3ff0ca1e33aeeefb442914cb1ba5235bb9091cc9614f1e0427600ba11e41db5f66ff5638ab55b7505ced0efa8b9a1907dabf0c4ebcfb7d1d414c55825d482730c494d3e0574a0bd1d5b676391c5b1492e62481042f8371bf47d360a4e2b46c6cac07cebf3933388957e4bdc1c45dff9b57f62d48fdcad06d1acd0df68953c041b0a8e38980a943daf071fb8d676b6c70fe4197d061db54d3bdc9270a3f8a6f5d0c6766bb05e9b242be6d89a5fbe83dc1494d36e173a506ac0039291e34c385eca7ed73331699c926200332e18e5c1d0ac037010b6d752f3ed71742ae455839115135a40b133a06ac73e7c57d8ea980f1350a676f3d141da9fda6338454618ae0ac773f7958e66e4d5470f2b33b82e850154b44c5ef1408746cef74600b410e8e5e52b3b79c7980e452933fc9e4024eb6a75d73d8f00d0668ac6769516b84590f994b8853ce5e3a4458118673b4c3e622cc7952575442d71b4a56238868d6d48807b2874e0e3e3252aba7592f48e8c2f753cdc934229fb689cccd57f4623978af573534b5f49c85a9a99efdc354ef693597b03fed94547e9ef265d5eb125abcf72e99c1801e7abc55e0c8272de3b258bb506c7c9fab49542c974236fe0e74fa85941a708aa856267bdcdb99281d65d97e42752e2b3a922653fb65b6b355bf114c6d3d65aacec43fa39f940479f56e478fbeaf0c373a45af86c56ca4bad15bac116bbf5f9826cda82aace8d9eff2a43b95e9dda03e395a22872b9e6de7fe3e43f0c6ff8e509a4315742cfacb3deb57a06c9805caea60f6fa93e0f9f9e1093f32be55c75f4e0521d767b4205e15cdb13ece1a39c0cd04c6d3560e6e5896e9fb232af32e98660e7f424a838f9379ed43db30680474dea529e8735a1c1bac9207b991080ba4e2c78adf25e8bea1253d532f8040fed4fbac238abf6c4c31e2cbed04e3dcb5bd01dd6e00ecf680ad3cd285ba317b008a19b4774ee92226ffe1f5ee0ff50f06a38c68f3c43738089a77cb698a4f2bebfd58e0632b3eef1c24a96e982e6747830ccfad871f0fa7665940e5ba530c641036cc6bda87213c608c69bf6e35195c1002c2cb36179f59d7d376c4470eef76fb7773d9661cf09b6586572a4ebbc0ca5a02932176a4777aa8589133e62d128f8bbc8a2f371b0f4bced65a344e71c26c6ad0cc1834f6cd30fb0b1af902a0ec2035836a39e0afb9a8b7f7980d974ecd6f91fb922cb89e9e985be0a993d076dffde07b62c57bd816a25ed7efe97bdbdb2df1ff33c804b1c25fefd69ab8c2957ba645401f0a923ac56cbaf76f01e339bb43a952a1fc770de515d29b9dcf1df9455f82c7ee6d5871b6a6d412daf1afc7c0513b1ce6edaff0210fe6123a7f918244bdde1906275ba52b31a5dc799b878a741e20a901b7c2ffc266bcc95d02aac37d11c4057188f26494b5ad3642d1556ce8c331e2d667380fdc758c3eaf783b45fd61a9f93408e9ad69207ff86163c8c037b049fe1b0579f6bc28dc25aadb90e1072e136686b6f90b5557f13702c1b4e4b28fcfd02dd841b71be99e20510586e1c1e13b6f4f0de677516f0267c6fa121681d1ca7a521b7ba786cfb16feaebfaf8169071f96bbe63435a9280d0b83a64e816e8e848ce8cde984f2bc2c260e14d56b863aafcc7467e4ad30dbb003bb89a5bc75d9b6a8707b284776471e255dc35f7925109a41b465f65f259dde804f58acf3d6bda7c79470357c565a22daf9433deb952ad6c3537bd68479c94ebde0dcff3b8ea6278f8e1b97a2229fe560837979f518ee2d215f33e6c8c6707919b19aee7b5d583dec8b8215563b68b9d12e1cb7a2c54e6b1ae0fe4c3c1e8339358e8c607dd2b98bf4324ae2cfe16984d87659dd1dd7658f1c999cbda5cb25d6a2b14a7469d47216c7ffac30efaeed41987307212070b6a7ee999b6e6fe4f16e14cc88b8748e6ed07870c6595e5cbf5420c3dc8b0773edab6a9e697ba70fa59054757ed4b6d447d1bb68a34c086f06f5274cb07fd5ac2b4e58fc5afb374ee2bc920d5d8083ec64b0df72216e2a2644a6e194cbba617238ca315ae37f65c0be12c7a3a93250c6d8a6311cbb1a9313696348013ed63cfb0eccc724f9d09d6c9ac8fb96838d857072c6020ee739711b479d43623bc85bfe7827825d8030217fd7092c4ee6f0d24eb8272702b42170cb99958a828689943b0360def06a33ee85ebb717aeba08e3d798c14531ee9c82978a52498bacfde3230a379bcbc3ee8348439f1c93cc76dd03730b0161d73017f6dd3ba0a05dcab2e342f987ca0321201098ce029b8ce8c64a767edb4c31eb49a67977b1f5da4e57daafdb6a2558874922a59f41925c8f3b24b7356da32613bb5f431dbdcec21fdc1418ed6be4a0513dd6da7f0f22fb36ba58c853a25286e8a6b55380db6d6f673f093a6c3ff264c746c2aa3a6b4ae7805293fe33326a0431e51f2e7bd739e36313b49b26948cf0bddfb66584e984ed0c94a49a2ed3b08493b6f4df457d9ed1553b2ed152aca9f98ec51dd4edad1d007f0fde5116fd585fddb3fb66a7c2b28a829e9eb9ce8b58077570de69c2db8b88e4c36828d551084090f5d1ec497d89eb7cd400c58a746ae96b74bdc24bdffdb2092d0ec2609f69e4e3758b56653c6d9f92bdfcb236fe2646e2f66df5c1aab1222a90222d121b2af29998062602220a3dd242f20897bdd13c97d50473bfde65727d586bfe1ddbf52d39ee42b3788f2d30b7f0a9878cf696a8933bfca204c20b5df38bed38f186513776008fb4750dec6ad1609658ef3df2eebd78e72980d5a90c8842ff365a6c5c843188eb5411c7cc430191687622dcc46f39e55cc3364db1251776cfe28365023f6f5bfed60a6cf90b49e2f82552af81068331ad7bc16b2fb20738b32ca6d5f3859ef793604c45dad47291f94813789ad26c1804f705163ddebdd3a5b7d10b52e7218881cf9230cc518da36c1889143b2fe57d3bba5a94a40036d7e446fc431103b4f62dfd8ca98829d15defd2ae770890a252ec1286563dea2dff551059373a6c4c79f9ac5472fc13acc4da0cb6e07f87c73f64772931edba134997ceadb6f828fd09dc3f1326d9bc87f6801e887dea2d752f057e95d1fc3c73fec48855228d5128691af0373881cd0bdda60032fdfb7473b25dfce169acc4de6d7815dc475a731d0cf719dfd1c0e38c44bca81250a9a203f51153586bdce54f453be34697df9ef312618bbc2258c687ec4c2f2fdaecb7ad12a6cfc22c31ced89592d5149aad8bcb84abdbbd94cd1e534e1f437d9be995729a6441aabeaad32debc1aab1ec57d2165b75d2d95f07e6831938578a95d10c32713a5174c683fdc6d880eee21bbe36fd771b02adabb303ca87984d3c145193ee9ad38263c0cea1bb1203c8ba62562553992622eb41fc777aff19824e5bb4e2401ce710f0c412f182c1254291779173c1744e28da54213b51117bd8e526be6e22706876a16b2adf5871f2bca25602862855ae5034711d3433fa14c3811123d58d2b475ab04521688b3bc4e0d172c1c6657044e419ae17848ac42c5b45c8ea50193e12b4729d3db5ce67cfa2b955431e4160f73a47e07f34045d7bb4495f398fca6a156e07e81cf5eacb03c03105174c3e891484d40a9d46c8f3ee9bbfa1f435c076c29fd1eb9e2d72980d063ceac0d8514b0d1b72368f4610645381301ecfdcd4916f02f169aeef021d2763a50f956775a89ddde0308a0fbb37806a1b5e6c4d3546d725198e8b246cd055a2860a0ce41831ea4210f6c480e62717c0f0d369122f5b47e2a69d5b03e17d45234dd1db14111d3d9d664623ceeaf41ea93818261b7181f8b7dc384b1a2fdd4f5e5fd4fdc5b4d1bf7ebe7489bfa88d501a38cde4f1c99db484014a1c4e2f8319a66c1bded913a01f12e9395d78a23957a5fea7879e530b39c50e0aa3f5272ca6c7794438a157cae4542fe8f9bc06c9b0c59f458ec9c89836f28dff49ed3852aa6d094166afb93643fd51686a3b82a3b0e09b5dffd2f84a5870cc43b26e7c63b4c97ea6d84497daec8d477e434aa885805b025b3584ef042709ddb8b4b6a6347975d52aa72e80e9e59ca856aadf62c513b623f160b1c822c23dadfdaf4e87fd101e1accb6f5ace839f7fcd827c42d83c885f501ed8fb1aeb930d6923bad720dec32e5dd9b1612a49722ddfeb2324c1dae6eec82036f4264fc1dac3b483a500c78701137aec9deec66be56856c10854fd7402fbd82d0025d83f54e764e3c168e49dad711909633b00feb8b3d0c88fea3dadf01056040e20bb6a0f1e9098cd22ef9b80ed09a93381574db52b1cd94b6e90e2288a1de8180ebcbc31e3e672fefa9f7e51bd81a7bf0ff0bc0627f0b4efee66b0e95cccbf874804a414ffccc01fa2d1d54cd00c0768083dcce18f34c03c9b93e9689b5e4fd4816723c47efc20e677b20af041250408650f0083b4c840bd3188da3c10b20f3d52c39df08c5058b51e784f41ea74cc0d528eef26def6c92cd8adbc2a45ddee8afa58619ad21f070066230ffb9675d5c4b72aab9b51cc4a84d3915789ec5f864a710b1313c415b4551d2691204fa84b20ecae746dc5b7bf6bc4639209dce27e2f3d401b818c37c666137ce8f465e0c1f87c151bd8eebdbd8bc3843ccfd9ba0f11aafbede599c2cc9176db784941dfc5ed715cffa3c516d0ff9bdabbde94ca357dc7454527b9bee3004aa18f5eed74d50e2c8a51c8cf996e050b007f47b20b68309a878687ec936097d83a5b587657c2f47e9a5d52230e1f60870cfb26329069df588bc07ed330e6d8ccf808d8dca6b83ca3732a481f09a4ac3629967d8a4762acbdbfeb52a2f90faf57f3d8f78fc47acafb9c46c7aa04d8b1448571aae508aa1297404f9099049c2ef255a6293737759beb74d80891b169756b8689ac84193c3e79ecc00d4ccbfeca5807d55c057bc9bb8f8db42e3788c483a89d5b4743dfaca42c1f77fa8980bdd57ec8df3db5864222f4a37cfea5508d132ec4f6fd4b4a9911c84dbf1e3657e38a28d8b0e048ac0f59958465372b40c35174e6b34d7d16da830d63650840523596902f5b75a12954b9a02a1fa31bff04e3305e5235835abb2773529c35ebbf76c1acf89c42a36216e86e6bbb80938bc7c3cb41429b472b6f3969e2382d0f8af7bbc1c0c3aba144bbce61c885a282a3d0bc6a61879b8723bd1a7792e63454870812897a914a99a5297c77743b9e4673feb7c4277e7dcb89e51333767c1803cd2f6d6e8921effc0dbcd48076797b42400123fea453a2c4463fe89f325ae9650ac1581e937acc1252305f4cb6d6f4b4b1a2e548533e13629f68a06dca0e26077309ea77ffa47db21256a6cabe788bd586c5ba7d8b71c5895cfd260ece771b8e580693c69a4beb157d7d307aa674f706f34f5d5966196002aaa7ae48ee95f3eadaf2d6613208235f079dff4f343cb566a385a04a070337276447844cc22838a5fd2b7a5750dd0a20ce791d52fe94cee66e44a626ec731020d467e591d97dce90e5d2a6804cd9b86b57d9bf986aab28d177e528c908931d7e1edad528abb4d01e7b63e8f0f52fb90d49bae7ac97cd0f771fae62c96c0d45e0f5ca38a062ee2f0a2a84aab81d8bbb884514c5c198f9d4cef34cfd8f2e04e16dc0040ed1bdfe0b538899cca93056e6b4e6bddd2dad065afffcab21d25840b8284d00e315140988c8eedb298ebaa2cc9283aec2a26b81aa14aab3cd89f7de911dff13911fcb3040f430b152835e2adcbdae1607fec57be5091362fad66b53de51990be4b57a05517efb301a5e71e1b740110803ba5df7ce9b8de0fc9d74b99691a2ffae737ba5f46135b30ffa38a1f19389d0c51dacce7931cb36a10ab64b29a774c191b9fe96acd0d45214b7832adb10567fb89233bda3834ddb356fe0c3a60de99fbb8f7660cb8ea86ff509e9c0b2de07e450dfd970f3a318624a69a1be9db6d8fea66b8ec678addf376e7bf4c3d522965c542295468df3d6694228f204148ade29b8fcc6bd0243aedea162b274b6593297ff15d0a1a00e91c943afe4f493184a82be5f3ea35d60cc39e8707d12908f137551f4fd429853807e2d461c9b50e96997bfeb51a6988bdfbbd6b10b663a69e0ed84afaad055dcee6b3e7edc6cb77939cc33d70a58747d1fcba50e2deb24bc94014b82acfc436279d830c8cb2cf22a579a24f35213c3520cdf32e00576e5c5c4af5c66606501de8a8b6ef25c502231f655ab2031049c083c5963ef8ea70b24999dba71c082ab8e542fd6d27269bdb493ccf6f38f5e2f22c7214062611aff45ba51e99845b6361dc0d9238f08f15b2d0b7e520979b788a4c62d9ce3d777522202063e511161b13f238da4ac8640375603a9d0a767aae8116825a688885809cda35850d6354e4cb3a4589f40313ac21e4ed2a45710409184990e4bc33d214bfdc990af6150c0ff9fa7a7ac0647238eab57aaa4c2e560b3813d8c6cf04e3419e909c7d18f11bc226cbdd56e1318143d68d09c3bc5a6ff3770cc1ca9d80cfd256c304fcaa59d8740fbec76c0741f75d425b10f365246337ebef0075fe36bf423bb79ec2ee551aaacf938718f8fec20c6d2b663b78245adfc6b8593383081d45b4bd0bf1f2c2ecc78fbd854953aa19fc510ce899d00423697245bc97927745913deaa678b6f9aec2e56dcda18ee3ee317a0a76ffca9a880fd85f3ec5b1b363db9d6c781770f43e7c3052f6f6b8b658313d35d8440e389ef056bcc68fe8a24ab2bbb47b5ecd188e7e01509f7f48ace75c188708e9533fa3239ac6642f71ec3ff3211112015177b5ef3923119c7a604b8e68abca03a7a5d1727b49cfd57c5d42a3a6cdb78afc9e3116b25ab3ea18155fc2385ce6b9698e23f8b2dc8c4351f375f5859a834facc64f1deece6e2039d5f44c9548e7e9501353eaf9ee0206235c03ba65b6586e8233a1b9fcb725a0990757ef30fc787487fcd3427ce3750e3f43c0aa1513e30e4d22db00bbb123152cf97bae6dbf0e6833b0ef1b5f4cf65cd420e46b7a138f813192a8d3bbd5a2aeff25a54124fa695cd8f6350d425b9a7244e0a035ffcf1c108c5c50b1beb1e711f1619dff63a849e6b027ac1310429c0267d95122ff084bc75b60176aa3db869f15e67d2b91e21826a99b253b712c3f57aad8cd055750a6ee8327d84c45eb96e7c1076131cb38e2b169a50f206f7d0f84f4ce6741fcaa6897175977504171de747657b9c0bbb6cf5006236d848e171e04739a78dc34fce67f2bb7f91e709dc172e0a3ff5e2eba5361627dfbac53c24d44158bf1e0e916d1e7dbb8c1dc215a49cfdc9362a0106dd9b21d566d152fee4c6d796b29ee532ec874fb147e20ea498bebcea2273b909b5cf76244e302673ef63c0138a09033f8e991c17e5bf7e89d5a9b2810c3aa78a8bf844c83ab06b48654636c56bdd584634c4f93a4b8bd55126e8aa194580cd58509023f25c40167284ad2f2dfdc351aa4d5dee38a559b9556d07a06c4c565129adebdf51a9f5b3a8df7c4aa7b9c4aa44fa75e9b4479d9466ce933221a771aefb47faf0ad31a768577bdd59d9fa9844fb507efbbb88fec08605d6746f812f7510b34dc3877b6f86fffb50f87ec3061e07a13b96bb74449c6a5db53e64ca9901759dcb310a9d9eb3c04751696d35f0f0ca1bb6d14a0d18f0a4ccf36d3e469a5c7a8e66d6f32a28ffa7c80486128b05f35fbef713af2fb3c3b8c5b23db6be4435af68c6255b1e04d68cfafe194c99d4c8158b137230143811755761218d274d7b7d0ef5591f2bf2dfe4aa0d36c2ed684cf9cc4997d204f797239df8d65738bc8835bc7ffa0ddd5da44eb3eee24f008cb1d5a84575e68b9aa713d387659560f3d12960d2bfb17c13f2bfa3d6b8e452f99aeed4d3145e5887be047bf810167b01e677f7ecc5ec2ace586ad24832e5250f7f457326f3283025b9a2b07c044df820bb4213bb023a8963fe89cd473085d2c4ed0ac305d66a53f5a4ab3e963d3e77a9a6dc528a37e7ae19f7be5f185eabae0925c0064804f11fac8404c1aef3a30546fedacc18cf942658c42417415e3500576798309df9a2c439c84dd02922b9a4bd74bd9213cdfe3b8fd46224df276064a25ee5a4128308c2787f2e873d6a2155a2b35c60b36de6cdd71e9ab6c483a71aee381a0ae2795564d5ddba3d88e3b42c16b478b81b153a2a3738e1c8555202f7607dc54dbf70648f9143e006edac350ac15e5569ec3483e992f09d51010f3ec3a50ac554c6287562528321e89b5e5a4e68b4331346700027d7b055ffef3735c2a0871f3223064c63cdd6e609b56a65b64aa70f54e96e70ba24548b9ef8dca3a592d3748311e8b2ed4fd7de38b07cee171021133833b2b7da30f9ad79e6b16effc3d22dfd7969ef25bcbe704635789be76232d92940d163bc13e56417cd9bc1ba5a108e3bef22a2679b56e8e0e3d5971f291aa011fc11813514d646811f6c4b6c53e5cce2e28d06fc26593b0849b08d453d6172114854f97d29e360e79d229361063323f3954162e48dd866339d6e15d60ca30ca7a96f50820f5569e216d4eaddf2a8b463d50098716ee5246b3b6a191558931b9d31136e19366af63a979b2d88892e78ce33a7f6d4c10582953ebc95a43639d1ef1d4df11af3bd6363549248f1d3079a88556f0ba680e298a046934e97f160704e76f2c1a0dca3772994280a7eb734587e359d2e7491a59b96d1ad1fc0be74f8244fea95d1fb61cd2ef0a1acd15a69ad73703dd2f44717c6db318a4407d282fd07c0e5966f819deded4c53707961074ec5045239213cd5b4f4723320eb0088741906a3306c0e3c8dd61d9946140093fc828354af52e22401c6965fd9ef4ea7235254ba2aa00b03b44acf97305e297a6d9c7178db93f0a02dfb3c55f3a05e498fd206c96cac14e891842afb4e4e8737e99b3a8c126f36c4eb807c64351334935c3829c85ad6e12caae981cb8eb18b3d0f8d140f4aaed194c01b79e943e460d8b726ec62e69b64ccdc75262f72c4a099138ef63d52f789ae2c4200714584545c117b191bef37993467a5aa47137d58143b05bb7c407da77b1b71bddb329fc3ea69065f166758a69377ef9599a69ae8a90fc7e8596b08b0db145c853cc9ea1e69cb6fdb513433f2f21e38e658e94e5f36d0a6dfa0c966fe1fc1bacef54b8063115ab75420050045c922aed61b09b6ef62031b560b2bb028c60caf468cbe5421079d4d8310fb1748f6c94f3e36f11f6fe07085a940a091d46b8a3052617992a6d27cc42d275c4a1ae7f2c980260f582b654e06b85d958bc28dbc39a2d108b09fb0243315e229ccf9448aa0497faedf4473f986f92641ceb36d3f00dfb7e502ea2112d9ca2d7a2268ba987f2cd224a473ffe57533ab3931de63d6b2c6df00a68b45c8ce3406297cb58e4bc74693740fa731be0f7283ceb6bcf9d04f3a17115eaed7d4492b5c7c674156233b02231e830d5ce5b59de39e8397c584548686041cdd4d563ff7ad987f704c0f84cd1d40525c670a2c7ed2cb9cc406bf6955d815095d0dff4da16fcc0da0938aed2645052d98278622dd1c66d34372b48627337c2a30da14f56f1cb43394875e782e7e22b7fea0b641a99c757196ee066b3f4808225d2166e46288e14f160209ac1f5d418a9f277d47a8c63dea821115e1f8fbfe4fff038250a166195eb3f0f8ba8f6f742252acb28e9b032d9c93db876afbde354b50a594871fb15197375068b528abbfdf153c1622aae518fe453a99b4e9297572e8750d6ca2c84d970ba360755d148a65c14029ca355ab0d09d5f161c463fcede5923adb1fda0358a2b73c8e469834b599702528a239c814ed02c8eee602cb5144bdcec1a8f20ba241945e864f845826547a4fa22e9047e28a087593c0f61e5ed8f5dc55e4954ac9c006851a94816852f3f703964f593489f4205f0d28d6c7f61c0eaa1cd50e83ea71a7ab2293f495f7121448a8bbfd862e42ad5e1d9b622c3bb0b63966dc41fb72866b716c8d76d9a9600a8d681cc0cace477812a9b726b5e1748e65be5319eed338308f520887469c748343d5233a4ce01e50903433ff2da490bc9be0f9da5466049fed0a1acddd725badd0a78170033416571c306c78325e24a3d57dabedd3ac6748df409d82528c3087afb27c25b7d098361c5c78d355aad74dfd48c3075d958e2c7908fb5a97febf26c9aa5e1e78c8fff65288cf8051a1532783f705d0acaaf63da13f2ae88b5b7be5500d4e072c7107697b769581c756d84cbadebccf41ddba1d2e9cae1ba89c94e915061b0a929758ce8f1932c939e56da8cbee00dd2c40c9ad5732679805f67e1565c4764fe4f7ff27ece45ab08ca8523e0ac2d20ba3f4e541344ab4accae73a0dd58c4397c47e7b6f6091478c55dba298120f4bb5d70d8be6d8035aaa8eface5967eef376a82ea0e327423bdd304032513f5832d86b60c0917e1b87ecefa1a8029304af4904aa8c3fd2b0b339f65d2ec913bf79759487ba626dcf1956777adec0c2532a7a6975703b1f7f93511380bee2de8fff1241a4f75a37060305ae42fea83ebe4bb1163d7331a8d780eaa2d2a4395286eb2fb877016c61ebdd4065b901d016e6015a129abed4092dd0bdd5cf01ff86661d79ef8fc6a0d84df4fe456d95a52797b152d62110d6cddc05beadf0115261a6f763be315cfd3ac9931ccc12aee1d502f5ae81ffcb39301ed5db45e53bd902d1ccd008a8c3f3fb38e9524887b49219076a8ee76216d299fdcc5132145323aaf3448cf2010866dd384ef8c43c4c37a7249401cb722bd1981f36981ece936a0e7c2a294073197edea7e2d5665a1b349577b77626f0b0335ea287295ae1962a8ee94bc4165d62f29fc378c78b609f3f007db877032805989fdde37640ee34e689870d365a2b135537187247b9ac298b30b119b2ac6ea696b3f3200be6b5de21d8c79d96948533cafd029ad132fc2ba9266c33c956171ecb38c2c3a7632cd375dc65eea4fbce4c24cdc646e13c8ac710003adf1ac0169e707de33cd047f7e906d9d99ee9a074d742b544e11bb5bd7e24829bf3acbcc6ab94ffeca8ae794e2b1d90f8517eaa60c35cb4b0d72f20935630bef3561448eab8d9ea32eb843cf6929faa44378c1ef7f83de1e974a712545224a4e8b5f20c6d68d97b5119b4dd70ffade10a5ad4db0d863b1ffd2debe603ac24fa28fdbff76eb313304a9d63b8a0eec1e31ec8a6bff369d270f6ddb4f6603fec514b260b0453567fd454d803246878b0b624ce8be56a5292c5490c29e54906c39dd5546433c5c0ac0df678cb5addc99d67a42a64bef8b08bf26892df231828fb629305addab4e6f18fd38aacf8cc48fbbf59279abee7a4fd8d22f9fd9582e696f94fe9108a4e27694257b0abde4e3a6988507f5b9fffd552ed52b4a7dc4725982d5f42e9f27bf4c30db2b4b623c5d4315caf9cc2ff394fe391bf25d61661783c4255a96315fbab94aa510139c506b4e23d329b219721c730d6eeef14bcb4606fe96df6a6e488ce7c565b33fa3e2a2d160f20dc45690716dca5f51ad76048a58744a3e1b909d97f6cbc3183c56dc0ac816c4bb683e99fe0a38c95ea358edae4b347d3faf282b0821df3c77bf702695894f38b642ebe3eed22c8b80f1128cb6b63be97887dfc8dc7ec7e227a50486670c0be7ce74b8c9cd8d5c51e3c5373c4e13d776e4f70805348b5c36c4eaf66bba9295ac0bdb15983d34d81e562c2c8b2e0731586ac4c14864121966361bc8cf38617573807e1e615b04366924552d60d9867fcbc45c48ab2ad0190b84478ae4bfd15e120f6e901e3ff6ff31f72a4649f8f613c06d2ce4238c134f9f9ad440da8b0f41897c353809ad2ccd932712fad1dd58d12412b37820860e18f424c21048baaf47a59d199152ccccb0ea06cdc7824b41a0bbfc31457d019ec1c5ee20ab5e47cfe0b10d031e45c608e21ee5d0171ea94cb285ae53d4ca17177336d07fd72b841ca5a07756f02c8af3287d3e463ffd1a57b153a230f8b432bcc58d0c0dbcbfb7f839f4c88f26597a676272a55fa8f9ad894349160113c686c5c91f8fc5df2f6975692661b8de172eb0223e2b41b4ad29ceb31f81cf28571a527f87a5584a19817adaf9c127a68ac858412624d122eba0a4d1fc7672c3ccf3ed0caaf2a4a9c6cc7b48f8f592c85b28cddba2e87d0d78d250436dcce21f4f6948cbfb2d504c899aaf348e94b32792c7a13c396eda2d5fe4e6c79cc4c7403d533ef76b5aa0ba228f1670ac4b599f51782edc443b1632ef5a266ac376c2e4a23340868804ac02fa7444fdb2f022674cca8fb598f2dd8e965b6459d24f53e3bfb75416e77e7a9593847ab95c9db1c7854eb658ee8c2ac9fa2f7c9253e0e754563c29943945325b51752e504c4bece591ebc65dfbf35e65dcd7bfc62fba762e022ae62cdc472a43197941ca9865337da664c39bdb424eb169644a2a555061b2dc60c43c08076ff05b821f23c40faf7ad55a762759d253b64a0e684be0bc4d9a58ab1e5a9973070b06256cd017cecefa6f5a242d0b19d0b76fc145d2caf31df0fe64c80b2d9fad5932909a0c9b887353df74cd7f6c69f63509de7ef6165ac48467be6baf8618fff78e3a4e31c94c17efb9aa1c51d20954cd5ceb257d690d4bf8d29b4406200c975b7fa4c53c75936336e1f83195012677aa6412c92be235e5c6809ff50ea411953cd97d760b28fb57e5c2927490042a7d7bbd95500c4e737cd6563881b52d26b16b16625748f25a401f88ea67f772ec0b830191fc540911baf2835c606554492a29f68e1875e52c608a2f4e66a0c0643d004916dc016e0e2f45f8e1a788e4b7927a87af56e9057b929e92ea80b971cbcaa5a4e0114179ce2fdd1f5449bcb58b4d9fce6e30cbee6b738bf2b9caa36992ccf0d7b38ecabb92f069647147d718deacc368f33f69a724e008cb57c611fb87771976c3d63ec112472aefe260c2f54803eb9b38ca716562905b0be24df744e7e82176ebcf71b34932e1c33478a68335563da81cb55b5bfae0c12bb7ff34eb363e8b4e22a7ff98caf7cb94f967a4ed8b5b8820a9f02eb1aacce22e1746e9ca1df702f533cead6e3911227c83219e26bae0a3f2390d8983f76d94bdf570d6fcf02f6d4202e14be1c993b9adb086c86098e50f592b462392ff95601ee579e4863e8896a86e0f2af72a25d733c4c117f238f3230232b359ed4efdd1401ae638947c70ec92d37bb5cdbeea3b8b669edfc45a8da16f8e085d138c2f3efd0bb6115d186f8bc1327833e16b6b31ba745d316f0ff309e1f63c213eadc5b368086977ba7ef7b28a4b81b3a897277e5c13fa593ba28159b7b99f26b8a73881574071f5e063bfad4e0765b4327e1076682c9617e79f36e0de24692cc86df7bfebe594185550e4df8534beacd6d8a07554ae99740401820871faca831531bf143c63bb2c38376c3e4537015d2d71505ee11f089f0789f9e0c49df4fb6b5cc5a036c7047b59ad1ff79c021e662ae8b4bf7d2ea41a947728679efc7695ff4c6d16bc3eaf099e9934c73b8afaa5eddca56fe5ec40140d01f6e3229eceeb832e022ca1608445f9f005f80c7460d0ab6391c7125e447498b6b6ca534528ed17cacdd1522ff4f868452b2bdf21b756d4c88e92184a8ff8422f54311561efe404f47049a5edda8c8a5d0ff9d11cd6e9626dc51f2ba5d0d03df407eb252e567cdcbb285683ee37f8f279f5c6f45053f52067e54b0bbf1c8a5e5abd27aa5112654f0430f3d34a5b67e750655e596ce1b3c450c297ed29d94f55f8a77dff7ca158a5ff356385e85191ef16f58f75af31197aab3bc1f6b9cf10068a4a9308814d6d2a8894b1b41c68a1b902b4fe3187da3c3380aede69f2fea030990b87ad29558cafbf9db435acc3f6abcf7894035670a8bfc1a0330815aa0808f8ee876e9800f9a370955a694126a90dc06e8f2e04d0fa4b1ada0916b1dfba9592709d8e27a07a89f5b5b256bb9f29143fdac18599eefba81945308b62d8f05c50a4711116fd0d2e848f802fbc8a1c67476e731126ff0253f671f55d458337945728b9d9e19c223318da4d3173589764c776e1425d343fa051dd306cfe0401f23798983ae219a377054e27bbcc4363bd607257ecabdc83e08d62d52a2b00137aecd742b3e065914e880cbea68041bf57c400496fa0d736e900afaee16874fe65088e91899ac50f05e8ce0be8988f5c5de8b2a4d27b58d4bbe72d4634bf4ae19a925868edfe794f8f21bd1ab48ee23a32273fda707bde1c7d3ae08115a6ff266be9afe609f651bc8ed97aeff8c03b018d9a2eb77c695f535e4871f90bbcf16ed6900ad8516068e7f211fdefd987b5f5096dcd5c60d764a6f8727e36582540cf76a2222212d5dd4fac466c6f894c2f52495f3c7b2dac025126cf2c5275520c4ab00719c940a8e2be385f309c353dae6a9ea3f39859a9e7ca1fba25d627e993dfb2da5137c2d00990bdd51fb090e3d6f6c4723e4023af405bf1e60d7629365be26ef1d6d6fe2d83123753b60cf4cda8d21f5715b3ba32a463e96b413b713d697fbfa2ae63133c8b8dd09bba279e29ceddc8cd74159c76563580075187720889a01586bd949752acbc8f80dda844024bd4220d52ca99f96f4fd2ac7e27ff9f91ececf081b1c2de17ef6d28fef5fcc3697dc0ff0f4f2473d6598657edeafaabaedad55ff745e410f5009fd2041a1d783ab6da0c8a172ff34b9e8b360d27577d50ab11f654d8b30952c007d52e4417ed7cb5a45e7640ca6ce1d13375867feb9e67c0d1a1f033caab818f4af513a111f1c8e436eba4e82c7db350d01548eb96d5c16212c222ebbec92113bddaaaf64ebbfb592a89e21ce3dcf6ffd4bf148e0c9133d793e82f242a04246ef62d06f3bff70e1581e8bdb23b280469cf599ab5ed96b331aa603182f839409117803bfba14d9fee092897e2b1286ecc555d1ae2903e0bde62623b714056c2dfc85a559dcdb58954df2ffbd0d42cea2ec7435eae7c499e0c31e6a488e7a49c2394857dc88e40bafe3719c1d8bbab552361cb2e1c546361aa352f2a65a0a1afca76f767f4369ccfdfc60b2785e9ab86bbcce4da478c10449b498e80cf281b59b72efac82e2dfe493e94c232688ac9d0271096bcadfcce79df63c46ccd87ecbe082c8dd78d2278afa029806d4776bb2f7767fe6576b789636857bb7c127a5dcdfee3d4ec8ada874b19f02c09a6fe2c8ec8b4edff3ccfb2c4aef90d6284846bd4440f749a7be05f77f6cd96042138cfbd399d4689640da052de2010b79011b440116a9e577717f574d1054d3199305163d7a8147764ff1185851f360a72699c05fa3dd4caddbd4e8c45f4953f047fcb49abdb10016488d2be5174b8bbfef6acdc54f4b2fbea300c9100c084e2f413c5b00d763a50ef5431183c23e43795e4c79575391ab76b310428bcc6d000288fcc5ddc7e706299c8208891281de24526145577df687b0ba3103745ecf512cb32979924e67c2583d7c9d6d51b090eee768998e875b3f7707440e8deaa4050b98dee946c1b31e9ad80349164338ef2589e00b0432949da912c52d2b38e2b900043ea497ed863bfd4040aefa9af8283dca3a877d027479597b5a663bba236d11e50da27f60fd6ddf27a03dc41e02f0f3e41997e1fc7a5ed424225cd9816240e8fe1aa03b864ef2bd7997099673ef7960530a429a0111dc69077929db5c24445448066b100f27152844d270a90cb588a0a8b6897ec6d7e34407804ea2e36dc02250dd48d0d84ea2fe7b2badf69509c2f74db02019539f7e4e526275e6e4f10c2deef5bbd69d1586be64bb1a936b20466aa0236f7372596746166cfa1239ec4ec23c893e79770d9ea5372867712579d96368a10e8e00fc553b8e30466a2ad9a39c5c4aca01989ad6f152e33d75432e873ebfd270d988b07cc6e12dcf77c95c091637e47618ee304acbb0ba47156255226468c0863ebdc6b7480b0cf5ad3420627d7cb7111dc2841ae26d3c316e2dc877d24f679358a3e0eae8e4c151c39c594e1d836547a9552094b70191c5adb2ac71d5c4ffe4fd5be429e23940393b4fedbe103fe67372bd56fa8e46be19ec07590cbe397468cc4c5fab5ddac1f9997208b04ec5b372f99f059a1a46a9897ad4d8afa78a94b413cbfe937378db05df786f69b829d29dfa08ba0cc2629fc5940fe87a1e7cfa4476302ecb95d32eeaffc86d225813bad68ef87b2be709320e7cb8f034ecdef40d442164079675a4e5f1d81bec662dd9a0737e205b83ecf62d9f557382f2722c68cc68e7674b5687d43781e018fc8dcfe23101abaddecf79dc6d25a9b7daef3dd208214e7ea8cb271c4277fbad85d40326c574c70e5255c3e39f5633bc572b4cef4cb3dcfdc5f0962d510e9fd0b7f11022198e795de92732a52f65a7ab88ae1edc78becfc5289913c493bd17b27a0540d8b8dc47f535ace6fb78b084fd434e507f119a05e8f9986cd056d36ba7c55a1e55f2684a37a8d42a39bbacfc2870b11f7520d4ffb54018bc14d35288daa6f24a87b5848e74c8a5b80460a79c499055648fa96f7f29d4bb6e282fd1330ad021d17b5f68da7db720ab7dde7343ccea699d149d35de620b4abf393a3661c172470ef8099e5dc32166f59d015bb3591b9178fe3ae053167930378737301d9d6e784a9c4cd9f3c5ce4fcce0cf1ad339834ce53197f593a94607bb5b32986789b1ee35c998262ecac34c178a549f043c0d582a3430290fa559f8de53874a54fd7246a3f6b28f004a5ac1ece2b8a654915310fa9a358fd37fa02abb8c2bfdd92f5dea590fd3fd4578be7ffc74cd380a2310ec0fa84bc84de7e4148a857893954bcb4db3bd65e8da5996787f8db5d5950f52658693d67693c6b59569ab7372a62235a6813dfd149e2029214eecfc9e0bfec73ac169f3812219addf2c90ddbf4bd192b79bea381271583ba986d3d3084597a4511b337ad907df21154ceeabcb6b1c05796f051914f24a377f4270bbb8e38794f05f10db53fdca8933bcb0a47f7730542ed5dec673694ab5e769a053f0bf3a1417bf67bd5dba7c3f04b8200851550dd2f9868a63491fdf8d538629ed35d87721cc1b8d67d974023874ad7544f77358fb61a1afbcbb37117609ec46ce172486721aaa5a434036a1f55a6f1bc62dd22322fe1bc2297ab7ed2fbe3236346b1b936c761557df8203a43acc47795bc7583b42e1cf8e701c27d61ad9b8e83287c317c043b7088049a389954253b78a548518e588ee6423fd4e2a511753ea1a32d00a258d2e8f9f28a07b4d416bb9d316831ace05cb74239ba48d81a963289a0ee78b334f1c96d6fd9788ed2864a6904aa8a2f8276fc80b9076d41e1b9841e0899b46273c6153edf02ab108b03b56b03973836067339a86f70f869f2976620c654754da3fa16b5bed71cebbfe7f35c1c2ef91a8bef1927ca91836501f620928d9782e873a63b7d0b951eddff78a4216e884c3704016a24904cdde3ada2ccda0638b821e292b6d49a4a173312a4c704318e41bb5c3ee70fa64184b7dde995076e21d768443b62584e584d7bf3b7e66990864f6541d3eb4f42e6e68bd2a88f659d6fc1a75b6c0dfa8f1b0bb97d463817bf3c95fcc818ea045257a3640498120959456f77b3a63c12ddc7a607f34fa0885b96d7f11ba86b56e4fafca1f0153ddecda665efb636e5ca1a6927b28b6b28eb55026cabd9111ce299b10086c5abae4bcf55cc9eace8a3affa3251a9d0be0b0ef7bf3609176c54a3d004eded6e9d3c98cfcb81933bc15f27a8da5d8be8c560f6840f53150043124b20772299f789d5675e198c0b2a78126d68e3365084b688d48614005a8a551270090b90eb9d346497b53b257835eac124574795fcc9bb62f73d9e6382fdd6101ee42ccb6b7f0e5c3f7fbdbc1157d1f14120ca587eb9360c444ee3b97905d2449821b9a5f49f58e2ecfd4c2e4d3d1896788d1e1f5a318ff199604a085dddb1beb5dbe0d2f14c9b75d66656adbcfed29bccc9ee672eaf1e137922ef2dba4f6340f32e5537ae6b8702d93a517ead499c5d14a56cc15472a9479b8b0d3cb2b19697cd4629e3ecc2255cb16a53d58c18976d0e7dbfc110545cb2c48b8fc65bd4ad83726be1e69560189960dd43873d4b6ff8a14d90eb5c6f188444a571f241f9a9af70fad286bdbe6f2b4bdc9251e92512cd0d0a2fa89db68d35e81b309778b1eca124346952425f87eeb9f3a7cd8c415df24783985baa09e56608e3aec7227c4b5cb6638fe9abe4b452279a736cbd48e080aa8a7015af9f5764d908fed4a5813e9be653ec062ff71b7a1a77c7149c52726aa362c21191375d0fcce97aa261a131cce0cd8cdcecf9c3fa8ef82a510cc1353a3aad2be333277b9da5213e2fd30ae9706de422b92f2ca6ae95f59063ae5bd39994f032c133889021bc3b9e5981e7d94f8489f0e5c8f209773d9a1e4427b9c3998c642cfc624ef14fb3b2012b9bc310c2c2d9f0dbb3e53a02e6b195ad7e476272e5de16deadae2acaef5815ac7f2e9dad15145dc15951d23920ad52cf249631aee3b9c3a6174f3414a6a38b335eae4a98ad51df85683d9cb20748cc9dbcd2b3558b6bb2e2b0b75ac2214bfe31b959bf0a9df8d484fda512b82ae9d7781999dc73889cf5e6566b094706a58ad6aed82d8daa3a22f7303e2e2e9abb4a07ea9c60de702eb9bdeb90decd626e114031d96b63a6f34eb9e7806a6c10d7952f11f69824c0ff17b8a4c675d9db360b3579054053d6090293bad110e84f185bc5f455c431e99b2b61e48ffb58d06466c4bce990fe423ccdd61223e39650fc78f77db60135628ffc84a8d3501bf57d2f0dcf8ff9589d19ea0d3751bd737722561db537b1ef10e0dcbc90f3bdc03783d51f6d1efb74fa85f6cec30e3a6382bedabed13fcb1231df40fcae651caaa634f943cd65b8eef9c7e79a2d8300d86dd00d60c77a9a821de5d484cc35a0d1488904c38a3bcacc48d46df6d6674901d38a80c1a0a9fb7b6bba89e73b6445597181ea064cf8eb61b13aa553bf60acb14df58fa60d42a37c5ef59d381124834be520b0104c404e1c0fa0a46510938422ac7e04cf3c3174da2fb1a6f8ed2940886e43dfc5f5e455f5a793555767757c024b78545b5a47992d377692d15e5a3a5d5e237bb9a2a4898b6931044b1a9e742569c178ff4ac805be013851c8145791b9bc0db9b5c3c2c722cbf4d6ff74e0292b21989735f89238ec21bb92cc8a134cf53a16cf6048518b149bdc6fb6a9857e780886b22f60abf62ebc2aacb99e1fd0180830debbbdcc9ea2eed69ee260f89f06988eb9a72aeb14c789554b63fc6e97d5dc4163a70cf5c5a57777efdfce8944fb862804bf59c3ca88e9853f36da9998f06f5eaff005c74645924832c8fc06fbd804c5b9fbbbce7e26be4421240806b2baf0309fcdb3982e75225ecb9079fde7574661c686212029617127299d2e0c232968dc16fb8e550b48ed0eb84d7dd41733a8534d0cc81e58d194eb6038ac332b8889826c37eaf5f72818b6dbe2079c2dced73ff96c195b90236395e2a76cbb7e15fa902df23b81aede2d470af7b05ed719ef8d37a9dd00123cba80c606bfcf91cf98d39d805125cdc9139e60c4cc4762743193040d877e75e8c2945e0b2f6663eac7fb6402c8cb5879fe3ad3dd30376baece260ca084cfd092c1fbaa3a8265819f08348848a1b14e4eb4d13942d450af5a5dfc41d467789f092770915786a0069f2602b579b87bc5827aec70440958f7ec184487faebd83654062c5bd27f6c1aebd4b39225d620d37eb6f60345fca96f5e264015bd07b84051dc09d258e35c4bd48a5e7649ff48ffc05d94c998f779b4667486f41877268fc24e1734690155d80152749f882c8fd12b2d525bbd743fefa23229dedd5e2a3a845abc25f45bd546dc6a9dc8a54e68bc201a26875bb5896422f986fff61901a5246727b74f115c6ef6c7acce2f940e288c2c3c12436b20e41e6c004cb0efc31c2a262b854ff7c2b0192f82c8f364bce7e83ba6b995515a0a8f078bbe944b5358042d6905077f302599426bab3ec0e85376de2cec24afd8d96b793420f60ef25467990145be8638356b0c7ff808a195c1159cde2df93ad40b3e7ccdbb4e1da1c96ae5aacc03b120d15da188fbdb76162a81c1ddb0103472de79835db5c6c37ef4f891e415032fe817b96bf907dd01ff79b30edb0a2ee35699f54349d5bba0d4bbc367858643980e21c85faf578369f3e3f4c5841e8045254af3e91e1fbc2278f7e144d227aa8f567f6062ad149b4267a4cc45894e7b70d400185d44670b2327f8658536a4a72b31585f9ee729a51958432bb215763c5498766ad869befe8d8476550f411fd86f33e03d7ca5f2acd87ffb35732e467575d521c7aaa49507111a0c680c62b6dff0538d15b36c81ef188d9c65c47bbadcaaa021841eeeaa72160dab254795701688a71bdfac039ce0ce713043de3b324f819e6c6774977566255d1a9ae73b389d4305862cf23b4357312ab9d5eb3d98e4ff0337caba3d619d8458379e6a3fb7f44cb303c7f416348f13fd6050676d624c5bfd623207ca98a2e7bc6bbf76f70705a121c610f87a291c5e2186603d0757b9e5f479d0727e525d455d5c04cb00f35e4f7b225cb8f7124</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">Hey, password is required here.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>æ¶æ„å¸ˆç¬”è®°</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå®‰è£…gitlab</title>
    <url>/gitlab/</url>
    <content><![CDATA[<h3 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h3><p> ä»¥å‰åœ¨è‡ªå·±æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯Gitblit,å®˜ç½‘åœ°å€ï¼š<a href="http://gitblit.github.io/gitblit">http://gitblit.github.io/gitblit</a>,  è¿™ä¸ªåªéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå¯åŠ¨ä¸€ä¸ªtomcat,ç„¶åå°†ä¸‹è½½çš„Gitblitçš„waråŒ…æ”¾ç½®åœ¨tomcatå®¹å™¨é‡Œé¢è¿è¡Œå³å¯è®¿é—®ã€‚</p>
<p>ä½†æ˜¯ç”±äºgitblitæ²¡æœ‰CI/CDçš„åŠŸèƒ½ï¼Œäºæ˜¯è‡ªå·±å°±åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›åšå®¢æ­å»ºgitblitï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹æ­å»ºçš„è¿‡ç¨‹ã€‚</p>
<h3 id="2-å®‰è£…æ­¥éª¤"><a href="#2-å®‰è£…æ­¥éª¤" class="headerlink" title="2. å®‰è£…æ­¥éª¤"></a>2. å®‰è£…æ­¥éª¤</h3><ol>
<li><p>é…ç½®yumæº</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/yum.repos.d/gitlab-ce.repo</span><br></pre></td></tr></table></figure></li>
<li><p>å¢åŠ ä¸€ä¸‹é…ç½®</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">[gitlab-ce]</span></span><br><span class="line"><span class="attr">name</span>=<span class="string">Gitlab CE Repository</span></span><br><span class="line"><span class="attr">baseurl</span>=<span class="string">https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el$releasever/</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="string">0</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="string">1</span></span><br></pre></td></tr></table></figure>
<p> <img src="/gitlab/1.png"></p>
</li>
<li><p>æ›´æ–°æœ¬åœ°yumç¼“å­˜</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum makecache</span><br></pre></td></tr></table></figure></li>
<li><p>å®‰è£…GitLabç¤¾åŒºç‰ˆ</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install gitlab-ce                    #è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆæœ¬</span><br><span class="line">   </span><br><span class="line">sudo yum install gitlab-ce-x.x.x         #å®‰è£…æŒ‡å®šç‰ˆæœ¬</span><br></pre></td></tr></table></figure></li>
<li><p>æ›´æ”¹é»˜è®¤ç«¯å£é…ç½®(é»˜è®¤ä¸º80ç«¯å£)    </p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/gitlab/gitlab.rb</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">external_url &#x27;http://ip:8888&#x27;              #å¡«å†™è‡ªå·±çš„ä¸»æœºip</span><br><span class="line">puma[&#x27;port&#x27;] = 8888                       #å¦‚æœgitlabæ˜¯13ç‰ˆæœ¬ä¹‹å‰è¯·æ±‚ä¿®æ”¹  union[&#x27;port&#x27;]=8888</span><br><span class="line">nginx[&#x27;listen_port&#x27;] = 8888</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®gitlab-http.conf </p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /var/opt/gitlab/nginx/conf/gitlab-http.conf</span><br></pre></td></tr></table></figure>
<p> ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen *:8888;                   #å’Œä¸Šé¢ä¿æŒä¸€è‡´</span><br><span class="line">    server_name ip                   #å¡«å†™è‡ªå·±çš„ip</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æ”¾å¼€ç«¯å£</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å¼€æ”¾8888ç«¯å£</span></span><br><span class="line">sudo firewall-cmd --add-port=8888/tcp --permanent</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">é‡æ–°åŠ è½½é˜²ç«å¢™</span></span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹é…ç½®åé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure></li>
<li><p>é‡æ–°gitlab</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gitlab-ctl restart</span><br></pre></td></tr></table></figure>
<p><img src="/gitlab/2.png" alt="å¯åŠ¨gitlab"></p>
</li>
<li><p>ä¿®æ”¹ç®¡ç†å‘˜ç™»å½•å¯†ç </p>
<ul>
<li>è¿›å…¥gitlab-railsæ§åˆ¶å°  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gitlab-rails console</span><br></pre></td></tr></table></figure></li>
<li>æŸ¥æ‰¾rootè´¦å·(é»˜è®¤åªæœ‰ä¸€ä¸ªrootç”¨æˆ·)  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">u=User.where(id:1).first</span><br></pre></td></tr></table></figure></li>
<li>ä¿®æ”¹å¯†ç <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">u.password=&#x27;xiaoyuge123&#x27;</span><br></pre></td></tr></table></figure></li>
<li>å†æ¬¡ç¡®è®¤å¯†ç <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">u.password_confirmation=&#x27;xiaoyuge123&#x27;</span><br></pre></td></tr></table></figure></li>
<li>ä¿å­˜  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">u.save!</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æµè§ˆå™¨è®¿é—®ï¼š<a href="http://ip:8888/">http://ip:8888</a><br><img src="/gitlab/3.png" alt="gitlabç™»å½•ç•Œé¢"><br>è‡³æ­¤ï¼ŒGitlabæ­å»ºå®Œæ¯•ï¼</p>
</li>
</ol>
<h3 id="3-GitLabå¸¸ç”¨å‘½ä»¤"><a href="#3-GitLabå¸¸ç”¨å‘½ä»¤" class="headerlink" title="3. GitLabå¸¸ç”¨å‘½ä»¤"></a>3. GitLabå¸¸ç”¨å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gitlab-ctl start    # å¯åŠ¨æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><br><span class="line">sudo gitlab-ctl stop        # åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><br><span class="line">sudo gitlab-ctl restart        # é‡å¯æ‰€æœ‰ gitlab ç»„ä»¶ï¼›</span><br><span class="line">sudo gitlab-ctl status        # æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼›</span><br><span class="line">sudo gitlab-ctl reconfigure        # å¯åŠ¨æœåŠ¡ï¼›</span><br><span class="line">sudo vim /etc/gitlab/gitlab.rb        # ä¿®æ”¹é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼›</span><br><span class="line">gitlab-rake gitlab:check SANITIZE=true --trace    # æ£€æŸ¥gitlabï¼›</span><br><span class="line">sudo gitlab-ctl tail        # æŸ¥çœ‹æ—¥å¿—ï¼›</span><br><span class="line">gitlab-ctl show-config           #æŸ¥çœ‹gitlabé…ç½®ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<h3 id="4-é‚®ä»¶é…ç½®"><a href="#4-é‚®ä»¶é…ç½®" class="headerlink" title="4. é‚®ä»¶é…ç½®"></a>4. é‚®ä»¶é…ç½®</h3><ol>
<li>ä¿®æ”¹é…ç½® <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/gitlab/gitlab.rb</span><br></pre></td></tr></table></figure>
 æ–°å¢ä»¥ä¸‹å†…å®¹ <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_enable&#x27;]</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_address&#x27;]</span> = <span class="string">&quot;mail.midea.com&quot;</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_port&#x27;]</span> = <span class="string">994</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_user_name&#x27;]</span> = <span class="string">&quot;å‘ä¿¡é‚®ç®±&quot;</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_password&#x27;]</span> = <span class="string">&quot;å‘ä¿¡é‚®ç®±å¯†ç &quot;</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_domain&#x27;]</span> = <span class="string">&quot;xxx.com&quot;</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_authentication&#x27;]</span> = <span class="string">&quot;login&quot;</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_enable_starttls_auto&#x27;]</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;smtp_tls&#x27;]</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">user[&#x27;git_user_email&#x27;]</span> = <span class="string">&quot;å‘ä¿¡é‚®ç®±&quot;</span></span><br><span class="line"><span class="meta">gitlab_rails[&#x27;gitlab_email_from&#x27;]</span> = <span class="string">&#x27;å‘ä¿¡é‚®ç®±&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>æµ‹è¯•é‚®ä»¶é…ç½®æ˜¯å¦ç”Ÿæ•ˆ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">sudo gitlab-ctl reconfigure</span><br><span class="line">   </span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹console</span></span><br><span class="line">sudo gitlab-rails console</span><br></pre></td></tr></table></figure>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Ruby: ruby 2.7.2p137 (2020-10-01 revision 5445e04352) [x86_64-linux]</span><br><span class="line">GitLab: 13.7.1 (c97c8073a0e) FOSS</span><br><span class="line">GitLab Shell: 13.14.0</span><br><span class="line">PostgreSQL: 12.4</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">Loading production environment (Rails 6.0.3.3)</span><br><span class="line">irb(main):001:0&gt; Notify.test_email(&#x27;xxxx@midea.com&#x27;,&#x27;test&#x27;,&#x27;test&#x27;).deliver_now</span><br><span class="line"><span class="meta">Notify#</span><span class="bash">test_email: processed outbound mail <span class="keyword">in</span> 1.4ms</span></span><br><span class="line">Delivered mail 5ff2cb5082e2b_e45eb53d484754@devops.mail (673.8ms)</span><br><span class="line">Date: Mon, 04 Jan 2021 08:01:20 +0000</span><br><span class="line">From: GitLab &lt;xxx@midea.com&gt;</span><br><span class="line">Reply-To: GitLab &lt;noreply@ip&gt;</span><br><span class="line">To: xxxx@midea.com</span><br><span class="line">Message-ID: &lt;5ff2cb5082e2b_e45eb53d484754@devops.mail&gt;</span><br><span class="line">Subject: test</span><br><span class="line">Mime-Version: 1.0</span><br><span class="line">Content-Type: text/html;</span><br><span class="line">charset=UTF-8</span><br><span class="line">Content-Transfer-Encoding: 7bit</span><br><span class="line">Auto-Submitted: auto-generated</span><br><span class="line">X-Auto-Response-Suppress: All</span><br><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/REC-html40/loose.dtd&quot;&gt;</span><br><span class="line">&lt;html&gt;&lt;body&gt;&lt;p&gt;test&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</span><br><span class="line">=&gt; #&lt;Mail::Message:199260, Multipart: false, Headers: &lt;Date: Mon, 04 Jan 2021 08:01:20 +0000&gt;, &lt;From: GitLab &lt;xxx@midea.com&gt;&gt;, &lt;Reply-To: GitLab &lt;noreply@ip&gt;&gt;, &lt;To: xxxx@midea.com&gt;, &lt;Message-ID: &lt;5ff2cb5082e2b_e45eb53d484754@devops.mail&gt;&gt;, &lt;Subject: test&gt;, &lt;Mime-Version: 1.0&gt;, &lt;Content-Type: text/html; charset=UTF-8&gt;, &lt;Content-Transfer-Encoding: 7bit&gt;, &lt;Auto-Submitted: auto-generated&gt;, &lt;X-Auto-Response-Suppress: All&gt;&gt;</span><br><span class="line">å‡ºç°ä»¥ä¸Šä¿¡æ¯è¯´æ˜é…ç½®æˆåŠŸã€‚</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-æ€§èƒ½è°ƒä¼˜"><a href="#5-æ€§èƒ½è°ƒä¼˜" class="headerlink" title="5. æ€§èƒ½è°ƒä¼˜"></a>5. æ€§èƒ½è°ƒä¼˜</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/gitlab/gitlab.rb</span><br></pre></td></tr></table></figure>
<p>æ–°å¢ä»¥ä¸‹å†…å®¹å¹¶ä¿å­˜é€€å‡ºï¼š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">unicorn[&#x27;worker_processes&#x27;]</span> = <span class="string">2                         #å®˜æ–¹å»ºè®®å€¼ä¸ºCPUæ ¸æ•°+1ï¼ˆæœåŠ¡å™¨åªéƒ¨ç½²gitLabçš„æƒ…å†µä¸‹ï¼‰ï¼Œå¯æé«˜æœåŠ¡å™¨å“åº”é€Ÿåº¦ï¼Œæ­¤å‚æ•°æœ€å°å€¼ä¸º2ï¼Œè®¾ä¸º1æœåŠ¡å™¨å¯èƒ½å¡æ­»</span></span><br><span class="line"><span class="meta">unicorn[&#x27;work_timeout&#x27;]</span> = <span class="string">60                            #è®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="meta">unicorn[&#x27;worker_memory_limit_min&#x27;]</span> = <span class="string">&quot;200 * 1 &lt;&lt; 20&quot;    #å‡å°‘æœ€å°å†…å­˜</span></span><br><span class="line"><span class="meta">unicorn[&#x27;worker_memory_limit_max&#x27;]</span> = <span class="string">&quot;300 * 1 &lt;&lt; 20&quot;    #å‡å°‘æœ€å¤§å†…å­˜</span></span><br><span class="line"><span class="meta">postgresql[&#x27;shared_buffers&#x27;]</span> = <span class="string">&quot;128MB&quot;                  #å‡å°‘æ•°æ®åº“ç¼“å­˜</span></span><br><span class="line"><span class="meta">postgresql[&#x27;max_worker_processes&#x27;]</span> = <span class="string">6                  #å‡å°‘æ•°æ®åº“å¹¶å‘æ•°</span></span><br><span class="line"><span class="meta">sidekiq[&#x27;concurrency&#x27;]</span> = <span class="string">15                             #å‡å°‘sidekiqå¹¶å‘æ•°</span></span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æ¯æ¬¡ä¿®æ”¹äº†é…ç½®ï¼Œéƒ½éœ€è¦é‡æ–°åŠ è½½</span></span><br><span class="line">sudo gitlab-ctl reconfigure</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">é‡å¯</span></span><br><span class="line">sudo gitlab-ctl restart</span><br></pre></td></tr></table></figure>


<h3 id="6-GitLabä½¿ç”¨"><a href="#6-GitLabä½¿ç”¨" class="headerlink" title="6. GitLabä½¿ç”¨"></a>6. GitLabä½¿ç”¨</h3><h4 id="6-1-åˆ›å»ºProject"><a href="#6-1-åˆ›å»ºProject" class="headerlink" title="6.1 åˆ›å»ºProject"></a>6.1 åˆ›å»ºProject</h4><ol>
<li><p>å®‰è£…Gitå·¥å…·</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure></li>
<li><p>ç”Ÿæˆå¯†é’¥æ–‡ä»¶ï¼šä½¿ç”¨ssh-keygenç”Ÿæˆå¯†é’¥æ–‡ä»¶ .ssh/id_rsa.pub</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure>
<p><img src="/gitlab/4.png" alt="ç”Ÿæˆå¯†é’¥"><br><img src="/gitlab/5.png" alt="å¯†é’¥"></p>
</li>
<li><p>åœ¨Gitlabä¸Šåˆ›å»ºä¸€ä¸ªproject<br><img src="/gitlab/6.png" alt="æ–°å»ºproject"><br><img src="/gitlab/7.png" alt="æ–°å»ºproject"></p>
</li>
<li><p>æ·»åŠ ssh keyå¯¼å…¥æ­¥éª¤2ä¸­ç”Ÿæˆçš„å¯†é’¥æ–‡ä»¶å†…å®¹<br><img src="/gitlab/8.png" alt="å¯¼å…¥å¯†é’¥æ–‡ä»¶"><br><img src="/gitlab/9.png" alt="å¯¼å…¥å¯†é’¥æ–‡ä»¶"><br>ssh keyæ·»åŠ å®Œæˆï¼š<br><img src="/gitlab/10.png" alt="å¯¼å…¥å¯†é’¥æ–‡ä»¶"></p>
</li>
</ol>
<h4 id="6-2-é…ç½®git"><a href="#6-2-é…ç½®git" class="headerlink" title="6.2 é…ç½®git"></a>6.2 é…ç½®git</h4><ol>
<li>é…ç½®Gitä»“åº“äººå‘˜<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;xiaoyuge&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>localï¼ˆé»˜è®¤ï¼Œé«˜çº§ä¼˜å…ˆï¼‰ï¼šåªå½±å“æœ¬åœ°ä»“åº“</li>
<li>global(ä¸­ä¼˜å…ˆçº§)ï¼šåªå½±å“æ‰€æœ‰å½“å‰ç”¨æˆ·çš„gitä»“åº“</li>
<li>systemï¼ˆä½ä¼˜å…ˆçº§ï¼‰ï¼šå½±å“åˆ°å…¨ç³»ç»Ÿçš„gitä»“åº“</li>
</ul>
</li>
<li>é…ç½®Gitä»“åº“äººå‘˜email<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --global user.email &quot;xiaoyuge0318@qq.com&quot;</span><br></pre></td></tr></table></figure></li>
<li>å…‹éš†é¡¹ç›® <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone git@fase11h12dsa24fdv3Q:root/test.git</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="6-3-gitå¸¸ç”¨å‘½ä»¤"><a href="#6-3-gitå¸¸ç”¨å‘½ä»¤" class="headerlink" title="6.3 gitå¸¸ç”¨å‘½ä»¤"></a>6.3 gitå¸¸ç”¨å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹æŸä¸ªå‘½ä»¤æ–‡æ¡£</span></span><br><span class="line">git help &lt;command&gt;</span><br><span class="line">git &lt;command&gt; -h</span><br><span class="line">git &lt;command&gt; --help</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">åˆå§‹åŒ–ä»“åº“</span></span><br><span class="line">git init </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ·»åŠ æ–‡ä»¶å†…å®¹åˆ°æš‚å­˜åŒºï¼ˆåŒæ—¶æ–‡ä»¶è¢«è·Ÿè¸ªï¼‰</span></span><br><span class="line">git add</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">git add .</span><br><span class="line">true</span><br><span class="line">git rm --cached    				        #ä»…ä»æš‚å­˜åŒºåˆ é™¤</span><br><span class="line">git rm 							#ä»æš‚å­˜åŒºä¸å·¥ä½œç›®å½•åŒæ—¶åˆ é™¤</span><br><span class="line">git rm $(git ls-files --deleted)		        #åˆ é™¤æ‰€æœ‰è¢«è·Ÿè¸ªï¼Œä½†æ˜¯åœ¨å·¥ä½œç›®å½•è¢«åˆ é™¤çš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git -commit -m &#x27;first commit&#x27; 			        #ä»æš‚å­˜åŒºæäº¤ -mï¼šæ³¨é‡Š</span><br><span class="line">git commit -a -m &#x27;full commit&#x27;			        #ä»å·¥ä½œåŒºæäº¤</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git log    						#æŸ¥çœ‹æäº¤å†å²è®°å½•</span><br><span class="line"></span><br><span class="line">git log --online</span><br><span class="line">git log --color --graph</span><br><span class="line"></span><br><span class="line">git diff 						#å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„å·®å¼‚</span><br><span class="line">git diff  --cached [&lt;reference&gt;]                        #æš‚å­˜åŒºä¸æŸæ¬¡æäº¤çš„å·®å¼‚ï¼Œé»˜è®¤ä¸ºHEAD</span><br><span class="line">git diff  [&lt;reference&gt;]  				#å·¥ä½œåŒºä¸æŸæ¬¡æäº¤çš„å·®å¼‚ï¼Œé»˜è®¤ä¸ºHEAD</span><br><span class="line"></span><br><span class="line">git checkout -- &lt;file&gt;  			        #å°†æ–‡ä»¶å†…å®¹ä»æš‚å­˜åŒºå¤åˆ¶åˆ°å·¥ä½œç›®å½•</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ’¤é”€æš‚å­˜åŒºå†…å®¹</span></span><br><span class="line">git reset HEAD &lt;file&gt;  				        #å°†æ–‡ä»¶å†…å®¹ä»ä¸Šæ¬¡æäº¤å¤åˆ¶åˆ°ç¼“å­˜åŒº</span><br><span class="line">git checkout HEAD -- &lt;file&gt; 			        #å°†å†…å®¹ä»ä¸Šæ¬¡æäº¤å¤åˆ¶åˆ°å·¥ä½œç›®å½•</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¯¹çŠ¶æ€çš„è·Ÿè¸ª:gitä¸­æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼šå†…å®¹çŠ¶æ€å’Œæ–‡ä»¶çŠ¶æ€ï¼Œ</span></span><br><span class="line"><span class="meta">#</span><span class="bash">å†…å®¹çŠ¶æ€æ ‡ç¤ºå†…å®¹æ–‡ä»¶çš„æ”¹å˜ï¼Œæœ‰ä¸‰ä¸ªåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼Œæš‚å­˜åŒºå’Œæäº¤åŒº</span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ–‡ä»¶çŠ¶æ€æœ‰ä¸¤ä¸ªçŠ¶æ€ï¼šå·²è·Ÿè¸ªå’Œæœªè·Ÿè¸ª</span></span><br><span class="line">git status</span><br></pre></td></tr></table></figure>
<p><img src="/gitlab/11.png" alt="git status"></p>
<p>åˆ†æ”¯æ“ä½œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch &lt;branchName&gt; 				#åˆ›å»ºä¸€ä¸ªåˆ†æ”¯</span><br><span class="line">git branch -d &lt;branchName&gt; 			        #åˆ é™¤ä¸€ä¸ªåˆ†æ”¯</span><br><span class="line">git branch -v 			                        #æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">git checkout &lt;branchName&gt; 			       #é€šè¿‡ç§»åŠ¨HEADæ£€å‡ºç‰ˆæœ¬ï¼Œå¯ç”¨äºåˆ‡æ¢åˆ†æ”¯</span><br><span class="line">git checkout -b &lt;branchName&gt; 			       #åˆ›ä»¶ä¸€ä¸ªåˆ†æ”¯å¹¶åˆ‡æ¢</span><br><span class="line">git checkout &lt;reference&gt; 			       #å°†å…¶ç§»åŠ¨åˆ°ä¸€ä¸ªå¼•ç”¨</span><br><span class="line">git checkout - 			                       #æ¢å¤åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯</span><br><span class="line"></span><br><span class="line">git reset   			                       #å°†å½“å‰åˆ†æ”¯å›é€€åˆ°å†å²æŸä¸ªç‰ˆæœ¬</span><br><span class="line">git reset --mixed &lt;commit&gt; 			       #(é»˜è®¤)</span><br><span class="line">git reset --soft&lt;commit&gt; </span><br><span class="line">git reset --hard &lt;commit&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="7-å¸¸è§é—®é¢˜"><a href="#7-å¸¸è§é—®é¢˜" class="headerlink" title="7. å¸¸è§é—®é¢˜"></a>7. å¸¸è§é—®é¢˜</h3><ol>
<li><p>gitlabæœ¬èº«é‡‡ç”¨gitlab.example.com:80ç«¯å£ï¼Œå¦‚å®‰è£…å‰æœåŠ¡å™¨æœ‰å¯ç”¨80ï¼Œå®‰è£…å®Œè®¿é—®ä¼šæŠ¥é”™ã€‚éœ€æ›´æ”¹gitlabçš„é»˜è®¤ç«¯å£ã€‚<br>ä¿®æ”¹vim /etc/gitlab/gitlab.rbï¼šexternal_url â€˜<a href="http://localhost:8888/">http://localhost:8888</a></p>
<p> å¦‚æœå°±æƒ³ç”¨80ç«¯å£ï¼Œé‚£æ²¡é—®é¢˜ã€‚å¦‚æœæ›´æ”¹äº†ç«¯å£ï¼Œåè¾¹å¯ä»¥è‡ªè¡Œè°ƒæ•´nginxé…ç½®æ–‡ä»¶è¿›è¡Œnginxåå‘ä»£ç†è®¾ç½®ã€‚</p>
</li>
<li><p>æ—¥å¿—ä½ç½®ï¼š/var/log/gitlab å¯ä»¥è¿›å»æŸ¥çœ‹è®¿é—®æ—¥å¿—ä»¥åŠæŠ¥é”™æ—¥å¿—ç­‰ï¼Œä¾›è®¿é—®æŸ¥çœ‹ä»¥åŠå¼‚å¸¸æ’æŸ¥ã€‚</p>
</li>
<li><p>gitlabå†…å­˜æ¶ˆè€—è¿‡å¤§ï¼Œé¢‘ç¹å‡ºç°502ï¼š  <a href="http://www.360doc.com/content/22/0130/08/65839659_1015422932.shtml">http://www.360doc.com/content/22/0130/08/65839659_1015422932.shtml</a></p>
<p> gitlab-ctl tail #æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—</p>
<p> gitlab-ctl tail nginx/gitlab_access.log #æŸ¥çœ‹nginxè®¿é—®æ—¥</p>
</li>
</ol>
<p>å‚è€ƒåšå®¢ï¼š<a href="https://blog.csdn.net/yzd524850313/article/details/113118193">https://blog.csdn.net/yzd524850313/article/details/113118193</a><br>å‚è€ƒåšå®¢ï¼š<a href="https://zhuanlan.zhihu.com/p/338882906">https://zhuanlan.zhihu.com/p/338882906</a></p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>jstackå‘½ä»¤</title>
    <url>/jstack/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="d961571cf92caf18759f942c2851c6b5438e2f4cc3b94763bd05dab0f3663fef">91b4a72afde41933824d9b47e790ab276fb896cf66d88c172d81884618061a3a521d043118ae532f3741fcf17a93bd5aa59a650fecadb7b09d3a0c19f4b7ab5486333722605c32861c03fe65dcbf77cbe4f566844e2be4ebe72c702acae31dd9b758bf505cb6a4b9d77ad85c390f5fae74b60eea217982df820c1fbac7559b3029d69f08fb690ac7f016786dc72e0fed974deaa8531f6fa978ac49aa62b79f1828b497bda1ccf0247171864329130c9f148d957481408904d77b14021d516668b92cf642daa82e3108686f6426799aaa20fe9806704ef59457c2a66ad56f09d93f4c1959bc69ee9765a476f978b3bd13609aee2d51125722dd66bc182f6ef88272124d930bc1f6d0150a62c60e2f0122413d6181c8367daed70aae95c8f83ad6517173bd79864ccfe1100f45782f6dd94e94fdb47949ad44e64079da9bc1a384e4dbc8a40e6d4f6bf19d850619bde4c91f7c8e15c16b444bb3d86dedbaaa6b1ca465365c6f361662e9b5f1a0193e7c004844b490f3e9def816d014cecb5351a056164fdfca68a98cfc8767dcf0821f79f48236a687f70a6e5d0cc96ad02de2006f1e3ddf2202ba82ed614935f403f1fe37b605bc9bb4abb345f7ffbc5bd778ccb35231e6fe9e7b9a22df30a6e768ee63bb76e32e6ccd472796b03959b69421c4e4574538186c9d8b03bf8e2a5bbe0a13514243ebc80ef6af06ccd3c69d334daca7f4eb1873d706a007d746929f14a01c8a051a827c1f687ab87bbae7f4b4e6f73bc7e203697e5a44599ad146bba39db7b63af1ef550d59ab0dde3e35825b1c6386cf3bf54d410b912ce492242bdfb93c45e58fc9159cd495dc50ebc1156da805330d88489bc0430bc9472923a324604d264a650cad6bfc49203986d27ca6ad1b1fdc73a8316bd8c3941898ba743cb13b9c85d14f6f1b6f5c517444e32b1dda305678b0d88f832e9acdd50c1c0066648378eebf87a6eb4e585ef3881c8526d8443878ecb69b86158ffc559182ab702eb72adfd5267bf774ae5e6816066d0de69f93086feb8b0249e873495f407effb1e648d322851814cae5e0aac755e2f4f2dea9f77f4ed6e877a546782c1b40291cf2aeec008b0d32d34bd495522f2186abd93eb54e238e78c5e61ec6b2737ac1e0c200a3e101610148c85c8fa896ccab5076a7f63cdd79b80e7d44c7fc373963861876a0e2435e79152c51e993ee31fa7d3f5100f36674dd09fa010e5b47935532af2f52dbea90707b5ac0f22e2a529e308383eb0b8b18fa7bbaa36ac24ff76d97e212351f2997e1d7a94fc5578fc1154d197464d4dfcff73d578902c40d0a645e9d1629f20b8063c3ae69cb3702fe90bf51f6bf3ad519d097c9f833f43680683eba055d91db9cae2334506c2ba0bebb0b7dbbba6a670625c5a27e8bfdb088dd8fd5e0b0ece07dddb0d84c93d2f21abbf1ef41bf293f11b7b9300aafb150f75da5f66ae3301bc2706c5b24e46c957ec37d0bce6ba65b9a2e64b35eca731cc71aa7e6fa36c184f221fa128f1242c87379601e989d959b50d847efa9957b9a5879f925a19e69b7a7608aaba8491a964d55fcad26e61b513d421d560b7f9a4354390168b74676f09f42ed92633f412667244c14443e02537dd1ff8ae90cd6d08b92dc009f9841e0801732c9259783d592505f8fb6ede13fedd9e22482aea7684b316583c4b6085fda53d36cc3ebf5baf36a9ff2d567f53e7e726f936c1675552771fc6d0021d02eb67d36c64d335325b08388b3317440aaa1ce7c9f8c309b810a4404693d547836f30b7753c2ced8a740f9900eb18025f8106335328d542355cf55b602e5e170c90ad1d6614f566870d37730c916bcf2e4ca988b5c11194b275b3f3236a998f5b29cee356ad3d0e877335608f49c1a7313d9952638199738100a5c5efad62e19dc5d94dc4236affc2d0010d10191f49e2387846972cec6b94f41b48053e5c11b6fcf59638e2c7355d172192fc5dea8c3b280623827960e6ddf2b3d8a6d39a0491acaf81d4fb08fc108ab8abd3d8a86a203509a4779615c73592e9f180102dc0393deae61ec76ccec2fec107693e5ac141296b04b8c6e8198a267124da76fe0b5ba9e0d765e2978150676ffebaf57308e642fd5a38a361d15736eae854a09173771d816b3d3619585c38ddadda08c9b432069bd75f28e01fdca58bb9fbee581de47f9c034ebe5ea7298088efe03562ba68cb1aa94e3cc7aaae365b3190ab5de561206d2e060c5008aebd76c5de10a00104200aa8bef45ee2c87c9ae135d851829728a80cfcb676c5c702fa73a31a43cb1b34719ba87c0cc968d0d174610b7eadee3b7f2b635f8bc235cfa28d922e927f84877452a5c252dce7d284b99817458eee92d30da2ca7eb9db1417e5104a567ffd84514cde8f5c5982d0b05646c2ff176952d5d5188e588b48048a21e180fd0746b0c3c9da3d58f9c954cb656fb1bd364b5314db85f5e686a46767f50906865069beb30e713589e4799fcbdf91fedd4cc431028597e4dadef992df988b64ced64ac67758543333512abe03f3e57ac0fea5cae863816fedf81eda2591aa6115a780ef5f6eadb69f273e3a4a6dfe30812dabac586b095d1344bbc92b2e55a9469d0b77626943400b392a8d26e363efde17607ae0c893b7e7efe10bf02ef120d440e03fb88364ecf5f1547ab740000cac6b7af51c2e6ec1b2abdf491223430d643766d6bf6109d864c23dfa648ff82ac834f928b80fe6c7179a2ba46ccaa87d75a21fa4a992eca80f6eea4ffdd658958d9691373b2e062d57f8c2131f1f456e791797ff29ca8680bcd3c466ddb6db5a7aaf8902f9895526655eb5ee95d6b5cdabb61baec53193bc9278e2eac245e51069de92c73f37ec6915d98c6ae35d68ee5d534c762d98bec4bf785f3401769252b76a52c00fb71f9daa37bded63431382fe8c02d70fa7e8a655d27299f1b3f8264d56844d3ed12ef0f3eb8c0b15e749ff50c932823e13f6565d3c7814fd779ea3a8aeb9ccdb4b38c0dd5bcb49fa2ab694525e00c6695da1638595e34d7045dd9fb19a78d0cfa578358504c3f89acd798ef3be3558727f33e18c7397f3d583d62226e65ef36c99c2b5b2c50c27c7b86b067a0edc689c0c28e9ac6cb5383bc8a64c8e4e2a922306aa9bd9fd10d7df5331f193ed5be05f0aa212e7b5d457ae4c9154c92ea6b91b21f6fc2251c426034db4bab87bbe3d6756bfe5292e21811d6f3e211a07f0265f9ac45fef044cb822e3beee0a549be56e99477588c4c23976a69dee3a7cb94676de184709c763dca40ce8efb2d90793a0c2e06e96ab1ebc56e243b2afc119fee26b0db7110b87bb69d02285b898e02f06925e2021b0f112fbb794437c944adf5938d2871ae65e6522688895ee893f995748a3a703d3cea642a3227edab7f96e22150995b48a92b1d7dbd25ca30a8c46473243ea52e9d931d049ccfd0b57e1c087a26d7bc3eef28f4db0f1f94c327d743ac22874450e5a9b72958f410b3744903d57fd3e3748c114473590926c8f468689ad4bbfacb3f0ebafa14caa07aa8f092b2709680762f125f6656dbff5843c36915781dc09ac18d851f25add67fa370c924af905758215b3bbb0f2bd122b042cf6c1691842fd7b8fe881b36e01e2979e71baf94cc68009f7fc59436e2329ad205b2bf9ec48398b40e4809d4b70afedbc755bd5d4e14f071cbb9ff76560162471f5fb9bacaf82a4477f23f8a8b07a2f62dc4c1e614f8b1417c023c62a22a6f81857e32c8f666420ce56b0df45110217d6e68e7bfdcaab57d9a22174fe63fd57e46b7f52ebe570f9ebf60419ccce6a895843e62e6ed2fac58775da96ca36a61956306385fb7bd7b2c656c7f0e5d25ac9888f4d52174ff167276441cf928eb039ff92046fdfe21129445d6c86e2a1fe42736f24f2c987c8410431c764a95fa9cc9aec490e687ceef9b511ec2717abc8f809b9f54f2fe261741ad1f04ffd9aa94011610bb6ed850bfb227ab9c15063bc019dc7e995fbcb898eca3924ec48e688337e17daccd7ee0e5a36c347e27a258d0c1c00297b1567454b22d3b4d41a10efb2efebe71203103af0df3ef2e327d456f1bc65cd56b0db32817aba93eba3c86217654581646f8af36c6586cb10989c3df62a5b349e3d5386836999ce1976c9c61b397d39fcad1bc525d63024b9f17288a7b15d9cb94169a1242b13e1ecb93e412eeeda56be7f404c622624be1b77e44c5decf94b75916bdf511f2dd03afb0795cb3107ba6c5141cb432ee6b28b08c593fda84a04aeee87acdc37f150e2ea715dfc168e2b5a6715e2ac1b057bc781e99f14e74a436d1f53973453ebdcadea48b76376a1130ef1dce7062a7ba32b2dae7230bea5041c5a926973c5ef3e9112d811c214a45b3a614e30d0ec427899fe73d51127aa994a7424807539c40fa15355775fc751f861f22468491f5fedd080d780ba6850b1c75ec80bca1ab8181ad4c01c4c78a44b43d4733a34361b4978aabcf4da51afed199e834f095bf1501d6a0c82bd42cbee19b7c6b4e64e8315956960413e8ac4471c763a087fd0b508518ad19b6ab75ae76c5887b5746e9ea84688c367de2a8238157032129b8b9016a0cc008c74f8d83b628c21671a2a813531d845c54dff2c87bdde03933df30d36db1a70e1e470b6e83eab45a29b8f5f5270c02c2da512445321c5ad785b48cdb59ca87b03156825d51fc8329feb17b3bb3607a637a498a2c790c164b68ec0c78009ec3eee384d0b8e1ad6f0feb2f4ab843a76fe2c8fc0724d6cfdf96e25440c86d596825c175418a33bc43cfc31ac58d201ed1418047deecaed03cedeeccedb7b80dd12db5e0dcdf3b89b3a73f4837e83a31d71c3ae43822d342a8a9097f8c5e6a152153601f95da7435a49ae8a4ccaa6438fdb4a2d72379d66d38ecb7d1b51b739d207538b665e8adf1d7d3f7f25fc5c050ebfca62a618f55a0d14860b5ec6fdb081a349bbf383c7b34f269c7174b4088893b6314c37092f18b69731fabbd52d68e454f9f06861626692f6a3b6ac18893adc7e4fdae4e3a15756e54d4464c7c798a90640ec62f965f493c9080014988952cd9aaa87e52af466f87dfc4df248998829364b4f83aae3ef8a74ce73eb380a4da09e2cbf1ad39a233f0424982a0ecec62da0c627b2cb8e8c3cbe19d3ff4c8427c8bab961f9e82538e00b3b9fdcbb6d256ba47ba0e6cb5c611caddded3304d67fd32a5de1955c0fbdde90b549e5c4ead35f7ff856f9892526a014544837d5191606bfea30afbbaa3dc69112519565b7d0f862f38859557bcd25d5a9fa2d51ca87e5ef8c35cbe7d7ad36e922ab51891ed8f549923d1e82090aa831898af1ae0ef27186ace7122eebac0bda0a705dc73851a65184c3c4e0bbd88fc90d68fd06bf087266a47e4b912b5653bb32a0b48922dabb4a322bc6b6f1962adb9f05bb43677a29684644375063694dbd3830d1a078544a885713bca39bb34710eccbf0e11a11433df3eaf7522de5c15dde8891dda4b0b529ebf736f1a58d271450e5dd783ca3adcac13b053c8636bc1edfce5fbd51a6483a564fe9cd5bc345183039fae9a866a4cf829f5c5ad822d419ac090219e0ed8b60caa5a86078370737e5072a615d92736c8f4bf730a2e3dfc3c515e2ae71cd3d0aacc803e2bbd425a9b5af2fdc9e0f2d69bda3c86f349b11fdf81eb34dad8152dff2e5bb658f86e6a1e0f9c1f69db7e5b8171a8cc6c7889458efef71484c933a04769483132ee8c900e387d824f138fd1df705636774435884b03f26e6baa76dab2ee244774b93ee87c53612747d667ed0bf460f437bbcbe88606bfcda442fe86a30751c6bf905e7eb32b2fe508db199b01fa03eb76f95a3e5d510d1c734533dce2c3112c1db237b9ff670808c64575cba576ea1ef89bfc85fce9b832bc7463b836776513b308b92d105ee3922a67f5d9c9a2aed66403e65b51ff6061ee0345bc1f6534025d86d29f3b6d58fb65f31491fb26cea92b5162c599e38d7f871bcd98b21bad97e3d49ddbc2c2f00645b0e295440f0aa3a2df581c85d56eaf723aa5f04c1919c3d068b521e5703858c5fa842bdae0ef95a30355ed4498d606a1070ee77fe14f3b534d825c0cd4642be88c015cb1a4eab80baaa7c5a9f49d1fad1a13821b016ef1682ff42855943edc972eaa60fc13dd34efffe970168249d925608074d62a4ddc47ab7e127fab72e364e8f313880284d302962d5f353a8039e029bcf9c0a4758be3b6069e2b8784b6b3e0d3f79a942f54f4b74574c347e59e2d26952da70995b0e9d8538927eca70992d1872af9df6e35b61b7d5ac3a89f372b01bef6c99e56cc4d73a3d6e3a69e2eaf9c8c51ab7a67f32e1115bc0b99650e54f745a87095106b0bee7e5c35ecf57e4e8bd58d959636611bf66c3caecbb281493f97c57bd4201bdb0734adf4a8a6cb2eb774408dcd840ce8f6009dbdef307efc0d2afd86b7676aeecfee8b9f92f2a16de69e7daa7268de1e03cb0008132e10c8526f7ad5f0ee40b51a90a68ddfa2850796a56529275d4961ea7da0b1e7b70aa46aeac6fea74790b079e58c40bdef4a24170aa8c0e30c5b95b08e7b7442b8881d75fc70eb4fc5e131abc4c6de44bd210a73b5a45e222826ebdefed2f7a6de5724e1bd3281504b5c2077b716d2327b3e43893cae45e1507549047253b359f5c8ea5c04c1fdec0ef7a7b8a526890cfbbea0422867dac2d2d23a5c43ae029bf396a3069fc7a58955fec4bc23ed16cbadf3f9883032576f76aebe6c124ec13e18eb91999e511ccc2e5a8a80e0ed187659ae6752d2ad942f99d441faa5d6fedda50e32f72c446ce671b748655c9f19c2aca16717f33aa26fa14c3a31c375dd6f56e19fa33ac0a76739bffadb6bcea77fccc40ab629b47210ccaf910e8987d7f4edce6ac0af79acea310a8e5a2be6c2c86f436849a875d515329f996b8ba1a7129ed8229c3413f5d1d050b3d118fbe3b371181d4a1735d97721fea3a1fbba9492e9747687858b1fad44b2d357b759059942b47759fec1c70c0e19f133b480527a6174db478ce01a249a011cb0ccb3c9a7340ca399ab5cf3199ee9468aed6a25d0b3ce9117af6dbf7467660de7fe1f0279efe7642d514b2c5f1328152223b2de8a0414d2e9e02d575d0b07b5fcc036de5db738335d29c7f7b4aaaafc96c3eb0ea0260d152ba6ad1644d267f627684af180036c857ef15c94c8790d2247f10a029eec9667d9c1b351ec575e399a1a3425a0f2e56b4cbcf01ee9a0b089efc3f48a5dc2b77f14c2e133469f5c164fd10fe6b621c5723d3b7fd912cb3d50be902245f104b4b19876b3584d022bd859df99c8e8a2d930b5bec7561ba28bacb2bca9f7c2f7b2cac4fa39315c970c2785b4b6c721f7302002dd4baf4598ac71e9dcde2222dd0d083518a509e81a497a0f3bb5723557bb5546bbb30d1e7c0c98e45042e7f5ed64570fdd88ebf7b3a78d6aaa3ec3ceb695b4f6bea411fb33ad2769982e2111d81c19e3f747cf4c9a384eedbe0987acf5eb9bc3c64290c62da06d43eb09d232e73bb606bf70fe3d9b3004be8ed3456324946442bd5d2b06adcb84d61b90d3d1422ad1fecd4710952473862b073fb24fcb75ca4b8549e2492f63c4b8f95470af64886fd1d3a61d68e2701c35ab4d8ea6b16ed38d9d03067c52e9ad58bd48984a389979a4c08e26a23c0c2336fac0db39f5046576ea7c8785a806efb89d2080ca91a4feadb37ff82fc97b92177b8314a933d2470a87431b5cc61d82a2ebefc05784397c2a60de14b3d60e6dbb54b87b16f29b76226ca638ba7c6abace55c9914334825ee91a2fcb51aa911f1771924e8ee082f9d27d9304cdb11083aea4960daa50ebb0c1a61f1fb2f0866291b3b98d0e1ea0c990a99e8ac6acee97da250f23ac879d596c2320c0c0aadbe16b53030b78a3165432a7e3fdb951e029497985413016109ae9bc156142b1cae4117f2bd304150ecbf231431d0943c485412e55dabc7eca8abe91d51b6242f9ca1b09cb42385c2d23f4379010517532a8645a51ec00ee215636a269b646820db9f924abbd5f5c3f19f2028e34458e8553acd1bac1122ea381f80687cf6e8a6bf1d7b9558479138420d9db5c7e6409c0d2a39321ac6e45f10169f8ffd3dc72fc77cf4fa917cf6f63e2de0bb2749a7737f70990783f33a5c9256271c755817acdbf3354c097dcbaa22c4b39247590c676227842795a0dcbc2918f0b26dac3db6c72cb46537917d91e7e5f8588b560ff735358dde647338dbbb38fea24a7fdd55515a5956e6dc04f4726b6946104e5ce0dd64a70f6a6d19711bc2ede61cb1dffbcff4ac9a2c8c7ff9535eccf3eadd03f82fa63f8d974d2cc35fc1157358e8dde7e8626b6a7d242c3c4c025c4ee6d04024f0f6e7ccf606d7b075f2eb96e74c57c996f70129497d2ac73230e5f364b2b5760c6cbd9580002cf93efa5801bd21fc0068ada44878951ab6a9c5fdf399068eb178472584df8407662e2914a3eda0123404da2a2a8698f330f4319c9f37c94fd6e991aa7d3a800a40fe4a8c15d3c6eda11576e8116b5893fdbfc1aa8f5dcc1a2fce238e9d5a0cb42326e6be197fa097e6e49d0bf6fdcd648cab8e0586024339b41c14ba688a160ed1d85ee09e09e6947fdf38d93e4320ab48137e3c1a84d85996d289b7338f3a425c1c3f5a440869c7dcb6884336c4badf192c442c0e245581c4c60634e90dc6d2ab174fca6588c119b270899b6f27d807436d2d67750fddf3cd0cf0a6218408eb261d43c99d5b6a9542afa47a53de5ccaf2d6ae1a1f9b04b7e297750424fbc1c881394528e7ffc181d5b846b136f5d58e596da0b16e7de09bd4d8345e37901d32631ab284167188aa211a3100586dd15483c67b5a50f5202dd100f92d0791eff1e122b2aaf2a0f0bba0570ba2f907c267098f890aaf401f53cc3afe9bae88a2f137a9fde38bffd25b6a12399e487bb93ca5d478645727c9f0b4919b5522c4bc410bfc6fc7fb1e9a8bea298c43a9cf50ece34862e16605f418ff767cb544ae8d8aa60ae491258aac6b165939e73df8dd01e6d72d97457e9ffca057576bbe7faf285e38ac8e0677a975751a63dabddf6976a4fd21492c626e8fd55b1e36618f1da1578b79af55ee114209e998c490d7b01dbac5e9cef1880698e0ad0f3e4a06222b48268fb031bdeca41af4c2c01ef56986a2f4c1c358ec6f48faea3af29445197f307c5cc9194188c62d85831bb4195e17979a102f0e848c1462d249cad683611403f13d80498ecbf0b7484a56f5c8d668585710c90fe15042908a5246c616bd3411f0327603098d7efc696fa3a5ac375c8a4e132abf6f444daf652fb097336462abd6c284de4b536933c9af3f126a67c381597eb48640cf6a012f1b669a2e67c50876cc0eebfe9283e2689d16386613fea7cb787f930adde6f2559632a66e8b306a5a89e068e60bebcade8eb36a9a604e2f34fc0a370a57c11db5b2061f4c1fdcd37d94e395e5bfd3c691d2f0634e0be8f49f3f7a503d111feddc6738f057f628ea918e15a1a4afccfba42900c72f12d92e15a0e955ddf854d0e1e9baa744b1b4bd255df69d3d8a01c2e37c7d63ba73652944d11ebf57d1f3e51d097d453daf54a5622aedf98c85ced87af47f39a806d88e9876b060ba21f4a69793b56e8cd9adb0267b8f06c738918035a70df5a1e9a26cf0c99d97e67457f575a12c84e35de02e493dd3a3bcfe2ae186410d0729effae230551291e8708d0ac49b377df7c96a37629a6c8e3274917461f048212e9cb317f549a082618205dd274afd66eccd0324db8ac7e1ac4428ab3eb0699610ab0755caaff6eeefa75e782d6481feae9f7208a6ac8e6b78ff13566609adcca2dc5a53607a38633bc769b4960e2f34ff735b982f350d352c28a0109f4700f9bb8c571008107679031b034266ee920c603852bb47f1761e2c94464a462f831ba4895961825fdd5699522c54662b9ab8ac2cb4f49e3283f06cd71bbe40bc27376b6d0ce5b7db0dc076a06118abc0e81f0ed4113a040c54dfd17dfff697586301dd4d112834ae794872f1b5855754e2cff2f8c4bcc3ea9af91301fd6416d8bb98aed4aa5fe290ae783a9aba7bbb1189e4f76891993c27e93e54c1fa134d3f471cb5fc26889aab56e6fc646b768e6114262d56ac02edb72e6d5175b23f7bd86d9fdfb796d192eeec686a65a1356c22706945b70c79e8e0c81593d657f1679469b9a70c69e77b4facd9f8ce929d1b45bacbe8aa872bc987111aa68d9bd326d4d20581208f8e1a185ed23cf6e9bfc4b1014d0837873a5c0eaf25f85ae4b7fcbfd69b3770fb7de55a1393d4c2775082223db9f4c9e32e866205520b6540ab6aaf0c3e6d710785d6c01b2319074048c4eb66f33d75683bd9c7c8c8ffe40e2efed168dbe1dcc224079e963bbc2e6ae234448dd083573e12dfc09ee0c3f2ded33437be6fbfc3e49ef4ca997aabda1a1c77045f8bd0641aa376166f3277ff66542d8b2ee59a879c0193bbeddca143de0ed28e8e610af13305de6a1d37f19b92694f9f215b4b5ac1d462dd63555244b4fa6134707ce61bca6d16c1010f941dfb385897b959f82a32c898fa476075b02e2cb66d015a8a25183b92bb637b30d4e4307651ba92456870872b73ac10f180e5e7d95bc1f8db6c5c548bcad00d9b516b4fdfe7ad93ceadc84ef0af7ec4bf350003ae772a732ad82f2a438406b752c871c563cf383acec7b4c0b90c04fbebbeba368b1137dcffd19d6b197647e139ed4c259c6971f528d0fecaae3a34922cbf55ac1741c39fc594b5d2b9f87823a7a8a301744688176804ba8dfe755ef58ab2efd3ceb1fb74a9919b227d73eb4333bf3e3f63a7e0e394fc6cc8acc8a7497d3ee3a435ee136c15d65e4c9b962e7a79266cf69f8216e90884f5778e214e799e379d2737961debc1ffb8fc01be079f60582830862926aae09235341a58f4ab0f9371472bc43de629569fcc7cb7631b02094abee34db8f736d66ac87db495d4a485b6671e3ac2b5356a7f5b694fc633724d0f26cb49296623d7219083be4af9fd4dbf5eaff3cac472bbdd905a97b49a86507023176dd54f86f50d91934e36516911a604bb80ee8be0603fbdc2fbab1eef7d3095851c31387adefe1201c576522aafa6c341787f8f7ff73019125e20fc34fbbaef73c7402c9d6e96215848ee675cab61dd9fb1566094c5fd50a64b8106e73b811291686992c8109d01e8a410d3e50af76c829ddcd752662566f3f9c731de9cecd7c53ad404bcd129288c6ac8a1f3e62ac82d3a4e64cd8dbcc877bf17e33590ef1e310b3982f3c99b1cd3f7000cfaa34b26a8821beaef6f31b6b2909eb0574ace9cbf0a51070634b1963b14672665963cfbe28bdfbdcf45445161d13720ac762cb15f3de6321bb9ced9bd5c6f30646525ea1e8c28212701b57914216bfdd6ef9d7b5a58ff12b0b831a6b664a209f63fb05d941c9e64c93a07018371656647af078374eaf529de038db724c8901d68751a53d53317a0d945ad943a0522bb95125a56032bb26a23583bb270f24d75f65d3c2df5dcbc9e92282f37430976ac97df5d4fd782abba7e2bc627ad2510ef68aa18e056b067142ce207597cc7b9a8c7800674d72dc80c5c339462d4cb08fe948bf25656c2e092d29e852916473a1a616d11d1bc546266ac5cb2352b732c7ac6a8c98695a7eaae1c183b0e12c6de87e59d9c5e6c822c5cba16dea87f8fb1ac90770a359f48dfb8dfac49eadbdb797876ae02b80f75310c3f69ca475668e854866956895a64ca5dcbdd11c8e3becfe373db2ac3f3b33f816ec82eb824fe8e29b282631dce8145643ef1095a81a69fd5820a6cf359946aeea95b2aca986d61f4c7716a1d33a129c6fb17e435364f8e84206f5d9759ba4e8ce919741839a7e7dfdc67c5ad852f771f186343fc8d90bb544f2b52574b72397e2238f683f22166f4334217734dec3359f6a102aa69131beed2e14e39d1dc91de31313f101f189d3d79b6d12537cea67d1a84b7bd0a3f222438d5a5dd9fa36475ad5e1582dfe1e990f3f86623ea38c643c902b11c3cefc5a5353eaa8f5c6fb137963bf90d7918d53571ca28b8a2db85273b12822a67fd9b9f8920cbf990830282c2abd2c4ffec17f6e53ce14d1947c80e31e3a5dc88e3d64b0562e4367f91d076238a41f0b1f0899d66cb8963f591c2d3dab7e0d31826589c3b2c5dd7b59fc593e95150f796a435c0016ffc61533053b54f0e342279fb822ec1338b262f5b48026f2849fc556e8069fb9d3411e420c6adf4f0763d76264838a63a2a15f88fb52da86ee621d22644785c73a9b7756602f1dd0ab1c4c6dedeaa44f39571edfa8846db650380d06ad8510e265e81623048df97035fc787c36253bb316d01916f6e602b8efc86ac0fb0c81fe310bfba2d0795535d1b768b943f4e8ed370db1e13d0657ea21014adfa04f1bf02b55b70133b1dd7bf8398ed032686b53a1da218e1730e9c2aa9b2cd512275e990d8401ae3e1dc38619c61d6548e5f92db0a6ad432496645eb6f5b9265e0467c596a93774a0e2b8d6dbcf55bacf085c4b6dc3cceb36bc33f22f3e92d78aaed12d3349f37b46f835190e3b71c23eafd10156171e3b61650c249fa7eb0b1d4dba499fa3bbe98672edbbfffda99b4de00975539e77db386c4d88465cb78890f294dfb83eb30fc8c1fd0972989bb1334fbe92dee8266016d58586bd1505421e2c18254c0ca652716e9f34a25241673dd9d9a295f78dd6648047dfa320772f4acae5df9c9e13a919cb20299835d23f93c878f78c6223189dab2655299864fe789ee284427854a5ddc4bff9b9a9752c9051a55513af56e1964517d9986155c62f8aa5ae7816422355dc70fb9ae12535a3e8d016ee8676ff851efce3c2c5a2c731aa0440967bd80d9454bf363d50a29a6b246ae49246d6dc9a5a9b4fca74133ba0bf51ddb573f8190d4620e6aeb20c71a1deb8d9db2164abc120b1e882c0379ac1dac27139361b931a890f62496fe3641206b63506637c8657cec425f426c5877add43729ff6a937e98d1068f059d57c050af8396a461ae8d7f9d4d5b238d94772f681f0cf579f00922ac79ccea256a259c0bb7f130919d09168d3b30e97537d4bbc9b00caeb29a1538cee9cd6939b3eb281c4a2ddc827f24ed888bcc264e63458e5122f6bedaab07e54b352867925658da93ddf419bf4d9b0f4ccc35a9f0ba1cf63e0eedb5c1d13ed0a73828dfa0c42db96194847be3dd47fc4e55f10fc8d2cb9c7ff21b7885d175934547cab7e9bae2819e94cf366b1367ca8ed2c18a1413764a078192bfd94542fa3b24bb5191e1284b79ee73cc70ec77a09c6f98bba9b26d8d9fbc579f3f88bf61849a6821596f97fa969bcacc611e8cdd811ee73c1ac15efe97e0b714e0847bf249797d0a4259bdbcec91a88d49aab195317298335e850760be7120f709bea6fb1f7e6f0e82c91dc8e86e062a9089b577fc2abb041b4042948e8bd8047873926b98968d0b6d972e8891951e4f505f160b3bfe83f06e97ba0cf1ebbb63dc55bb24bcb566a72bec024d3d542efaed2e3954851c7ea89b38c36507d9768c13189c2bbab19e4502ab8ea1426c83b526c9975fe04765a761254c20a7b88f8f88b27d1ffc63f3f2e7e120541413d26f6c532798043432a15c59b70998c5f9b29e08f492d4bb96de0ed3fe2ebac298cbe7917d6bb808cdb32e8d251da27f9378555c4aee83190ea024f00acc3115c66db71a4b8d395b588720059bf9c5dd9bc3499bdf019125635fe5d850c77d915e078fc84fca5b14f4ab943874e815e846988028b34c78b7aea3c4dc02ea6ee98c900022b637b7b69e782739f8b4cc0baa1c8ffd0f06aa89c6675023708db52efdecda615ad9fd1cdba40e3c7286d8514c38bada2e8a75cc4a7ee98f3c27c4703f0da250d1d55874c9a617efb1e2a0124fd881ab0de36f82012d69f4baec0768212a302b3c8bab38046af4b8425c03b60283a820939cdd4cdcf3197d1575939ac334d2613bb61761fbefd1dbbed50ed5201c478173c68ab0842a9171bb20a6a68f3d31a36d3dda98a5c6fb0211870bf5171efc9d77ad6ab825a36b39511935069382d22e9ac470bf2537522afc575e0249f5cf6b08100e803c270ac1a5f0c4b11f95c0ecb2bc7c4216e27c3da0c4b49aae801e1ac66826513ba63685423adedc8508e21944a41ff3efa34a776250812a22502f381eade78e003f2511e0aee93dcb15c4d08e9991f391b18607866aac36fe739db78e335a66a9f3f764309bbf13d318e516f9d31d5016aad708d932db42ecae70137ceca34f5312c5f426d1aeabc9d79340b941bf9a3d59b353cbbd8cb12749736a9baf341371eac29c023304c0092ce355991c8d0a577b8d8db4038372cde757da9c71abaface61b9056f2748b4ca75b4bd66bbfc2315e39c6dcc4fe557b41a2016281da256e45d9d0eca6807b9df4566b2c5702ab051b649a7c600c8709056aa7a97b6c82b49820ebcd5a2ec03044782658ae50baab26e3889b392341f8a53df194b4a04e50f18b639f2f639ed605e158b956e60866ccbf390a53f1f7902ed9a4f75d48368ef5eaea7980d86af7169ec8336a284003ab4808cc43242a0d51533a60576fb1854eab8ca34275d656124c7cbe9f710a94a96220e0bd414a43f10b2328e80567d747c161f5a3b7af4e48ae09b2af8386ed800233ba1f4f50b54e8a1f47d8a3b12b5935d3ec60697f4b29a0e30694278266db993d17afa3f18e5725c0953d2ab465e68dc3a3fab70d4e7635c334266d42eea4615b095547e4eb666033b36979f7659bbdc58dc8306c25902c45de4183be0c13cae3857b91375fc6ba525a0351da48cf8f4440002c56b09c3c6b936b4058e7e9ea99eafd06480ede0a165862793407f486743f53d8b7565b3788c7aac234bd00680fa97f6f8cbb91eb7a8eb0ac31e16ae84d072aed32c3b9b012f0e99db809789dd0a3f1002009dea705623ee2b228e67e8c67af2fe9e7986bd1ba7cd668c7f252799e5a43a31d5582a1c92325ef3a5577728b4a87cf39335746f79ee76ffb4803ce9b544a49cae4970d8d772d83470fd69ce844b10dc309ebf23f5b220ca516398353470f4954c2c0c6f60dc42a264ff754900b4c90454690ff6324a6636113af3df8d3f09b4ce517f9273284f0dcab282620585062b83b3b8399814096ceef3cd40dbe24dd4fba45049676c8082a6a9491e2c0629f3e2d18e8075f9d0bf889a72e3892965dfd3d52b63a1df21fb74403df4a10b84385d36e9ebcfcddb5c39ed74df73713031e14f091961f02a324025c9f4c100365604b8e05a379d88691717d026563f55d82bee4063337fb4e69dee7ff35a134046cebe4d47295dbaf5a84f8bf1d211f67067dad0ce9843482afb62ea46112d11997fb4cf12536c2126a3fc2cebfb73e0d56ac1ca59af34857559302df5fc9bc4d977d7677aa6a632f70ea838377674bcb2a2edd524a74a317e07301fb3156e30504769d59f4b8b0796cfede5560f5493a98485e57450f042c7194c30dc1bae36891d1d3e0e8b5917df176ef80e28f812e2ac3830d9fffd7d91c1cc75af510d823afa720e76b470cf3e8ba5b4e9141b74d617ac641c05e8e50299f2456f9b33d2cdf7111a0b3dc9365d26094090d5ebf8a424fe31dfe32f4da09908946904e68fdd190c62ca81d2c4a25120986c86f53678fd186f8de5b1f48fe3de1490cf35ebb3483919ac35009c2ef6292752aba81416291e0ab4ca2244268c54ad8c65b9553854b7346c1dceb95a46e335754adb199fb847a6fe77688c67de3be8894b68cca9612517c65a683599529ffe640a3c1964d7ccbf16b9b6f9ba4aa83215caf8270fdc723ffd73426a540abcae44458a2ac29e3ed9de2062da9e24bbd221c2ccbfcf871d0754a2a223131a97e23bfb2d1b8b231b72048b6aa64bda143aba8e6a398228bdf33dff359ad2cc9f3d11a4195df7b9e9c76b73f09ed63bbb24e688a592480c8eb1204f64b2ebb980a7d99020fdfab2cbde43034acc4525d114030f4907952d2b5b69a5dceda9f0d3f45fde4e1f9189eb308eacac2599c1209d199e795b8b92af22444d44df9fd49639d08dd6a5a45f596279b8d41021427acb0f53fcb91b6e5335c278a6529c7736935f510c48cd88643ce7942af74498452230debd2749ab46db3182f25c10206b6f5f1872073c1da08190bce3b27b13e48971442dea498198b8d009528ec72c52ebef834773f9c5569a594231e205208386c887f99e006115481fa12887c2eae58c6e606f0575cb25c1d6b7e3c77bf956505e4c1bd3e43ba059fae3ace20528147b3f5cdd14c702327ce420aed2ae795ad495b92f6576ec9945258116265b18d725ee78826d6e986708fc0048605888bde5413ad97253ccfcdafcef0e635f6d76790685266f9096d35b0df5aeeb7533f3ebe87a39d211be796af6fb5487c6f732794dfedb7f619df4793cd598195402c60c7dc7ad9c398195d8842e66271481bff0b99d197c6fa3dbfd3e11a63adb2370ec9eb32a47a8bbf882cad5e9348f66ce54b1783802eff18409b38decc7037cd186bd49a3880f57a1c0a91d50411779133ca5980c867eae290f9c1fd89b6c5c32fa22a9f8255bea0dad262a8ec08aeacfc1d1f8bc5bc167011dd5c24164af321ddda8df3bf16e74eaae7e65cd8215c4405190a97bc14c41d48aab8d33cf94c8bc61ef7a676553442ed9a0e7d16671caadaa634507dc611b69eb17139e24bed4226b0453ace0f7fe673bfd54eaacac6fd385997d08c7b45ba92242c5bf367794131cc3fee9e3da4fbb9c058c0ae57682331bd94d891b638c289ad97acd1a848b1d104ef940534ac8514e51c069d3c7a359f45fb3d655f5291317dbd4dfd0e40aeee99103540e7729103b1792ba55e2e82dada0839b4e50bdfef7bce1e8a59b95db342aef44998280b97bb77cbc43a227f1e7f1b0ee064dd4cf18703b38f4f54c5a1ce6d16f24085eb1eadbf6d5a5073846503f74b7759238210c6b9e6b97771f62ac2081056aa64a64ad48bd17d5b2933e4de5c0bf22e63ccc66431cdd88b184c7247a2846872e2dc0eba825e22459e979f4572fcae2d0ca2ddaffa0f0f1ef8a7adb0d156f9cda1c0b4731c9d145b01f11f2264d910c38ff640d6312369d63be082cf8a8c42b4a3382149dfb5c3c4622a38f35d3e1d214cc9a13c66e6af56c8adf76854507c0a68010aaee15038090a81564f5f80b7cb6e01702261886f441daa6f6859d4e8224e338feba7cfa65dfe4f2916cb25a366126e2fe7890873939a77dd0ebeb401069a0ed10c4822e1541e7d62756b5daf1fae99d40285195f0b62d0349753f66d76995867a898b6f28ad7d2d847b5af844f4b3b1f009bc49d00cd9bb84cfce9d1deb779b6881065f07bb8a98a2110c51da7c3c6544118bdb0f2b513a895cb0a66586e47a8432a12f9e0fc9eb986ec02ca0ccfd78876ac8c1dcf8ffc0ea68aa863b2a05a3c4d24d57bd62035d9cc6be88f32f4a2305978c5a50464725162086d664da478c2abd3db15bc334ffb713268a64d0066e112c1f49e435b9dd673204a622b6985551609527f568dc79d442a49f6ebd59a603ea2db207f050200b2e817beac2c392993fe7a441130b09e0013a960d97ae59459e0c89b62f6f0cfd674a48962ab02d0c8db2a9fb0b409152adc96fbffaa0b010d44b0890d2bcd693533e760f29186297c968a3776ebf61dafacd5e03e092a8de6d449bc0e0108a50247bc04e9b64d711ed0388d43cf572b230d9e8a1415d1891f08ae39d27f12a64732bb5a2fdfc0efed7cdeab32c786d98521a1090f0704905175fa2444757814b8ac5bfb624ef8b46ce7357cc6f01efab3fc4dfd8405702bae6515a84941854dd186d2cc96f290ea61b4be28c9253104a27077e5f2eacb7ac098f3512f49a97e7cd0f424528d5520307a62013931fa1c7f04693ce29efd4dddfabaf2334de9a92cc352140862f8b4966f02b90d4146b29f8b367ecc27665343e9021f2afd2cf593600a0ec0979c80f5c7ea5252c5f60f8125307e9095d975e77cfbc00d42f2b8a5d28bb40adf15bc5ed3abb14a420bf8bab748b10d8ef857ce2885b86ea84d1d689dcf07f2fb93ca402dabe23c3d5f7750fc39899ef21168e195ae77273decab6d4b3ae19faaacec420478c6fb66f025ba63b938839e3c45ef46fc29b4b1a4dd550b1b698932721b9dde5aebe9ccbd5fe552c829a35391b874026f461b6bb3eacb851eb08cebf1714e08a9e73672dab02e8649640c513a2e4dbd294b2cf57daab74c28a59f36d1d9a2e86afb94df59484b146186ae6754cbdd17bd96fddd243c58644c77cf6bc142524a21cf515447ac77e27cedfae691e7a0127aeb2acbefceffdaacdc8a45abf4852b0347b4ced35e31592aad60d3439d3c6c7d959443715f02248ab15020bc01d65a11aaf0f9d70b727bf64db584b234e5664d404ccee95644b47417a79c1a2fe3acaed159a5adc387f259bb1f148261029ba0c01b6b3089b79469edcb712d5f991ce17461feccb7744a649e34cba21bb93423a30b5856130967f1e0043f33844b942a0951362e25875d3a15e98917ab566c85b950b2fbf80f84bb2edc0fe6fd67b6d0799d3fca5f4746ee5959332303751a8265bac9fbf89de45dd35dc7c8b897b5e46532953f8b678461e0e76c366614a6204bd19b8de4f85b66779e93249b89ce1c857cc9e187e8a82031b26996615c671c4d37687493bce7f5f9521dea97472d41e12396832c08489e68192e82cf28acc793c766482f432ab217476d668792fe1ec3f659fe30c697102e83ca437ac33262a38e77fde9e6affe707dc9141c2d094342ed0757c8011be975710bd2989c0f916401e131f8206fbeb67b8e1e064ed5ebdaae3135c08a80d2f108634eb9b02560cafed76837718b13c1cc062d35afc86982a95b623e0fc4f23cb3004ca1a7518d0f4cbe053317d9524f3239ca98395b56eff3f76c4274518c3a9a2894ae95217520417cb042dbd3a2d4ef0a65a68faf5a1b655de2a131a2442f99379c39e12b7b41b4742f85fade60963eb850f833a95a16924257b4dc6e12c3bf6710ad2452786578497c52668002a65bd17732a1d87ba28512f1dc79f4c078343e83869f6a0f196f786c31801ac912d10cb923c3382a831e790067df77709765089221d807626f81cf99b0d7c0ca7a12313f770bb0f7238045207100f7b4a82a02cc20889b3e05567ccbbe794ef76bd96a8781f95af5fcb23a7093b28f69604f4f791af23bcaa3f63cac5119fb0ce33fcddc0a1421e89f04f64235ebdc389ee7e34cb127aac6b9256fa23426c4dfe2f3121eec318d8f44609bc50200309423399c5d4b6b93a18ad04c51d497a70dca0bbe99ac5b5de0285335053c5a5d785692315295541a1dad5372fe5ebfd6a25eda6d68204352bdd8305402f54acb5dd0722e952d3b446658fe2cb725449173949823b93940f7b91c59dacf4e6dfbed32726e8a73649c6bc52d803cea1034bc4715055e6c2470ddbcb5f601e8dc5e607a071f326f2fd440ee614500e093315cb561f089cf7285943d4a9bfa64d61d13bcda3d8d131afddf54d07a76dd76cf9e9008ddf092fba088f9a16ae995ab218782b6064ec52d3518417a831d36c43f5269798f97a461a8f558f1c679864288a6271e2fcb41c7ad9160ad1b2dd02e1493f73c4a4ed057c93848ac9f35e3a73a28a495e6cee4c13c082efbbaeb77327d152e479b90429f93c214295c619a22e877f29c95dc5ce2b9b589737b82431fb725d8f100847923ee673d7b4ca3a0ce77feb94e676d6d95bc1edc441e14d469af879f8c4eecddbf0ea48bc8ffccb96b61d8e0c8b073fcc84bb2ffb00a029d5e8a65f767b7bf3dbc6c1f001fa6553d72d4c10c948b35ddcf90c6515f4db330aa1c8169ed41d7fd300557262dcf57b2c4f92fcd1741372d4c75d74ead52a5c88a794c850b93018249daa10bef597eda1a7359bde8e902f11a8e6c1ad039660ed5a627291aa1abb90a55a196f35ac8bd3ee204e032b94bec6024d83a61fb7e779db9f58b7707d239f8f1b6cba0415b63cb6eb6a553cc00ee1b879665a86f8c13c830e4855fe26951565c1ea212f906d0487951dbdd167cb68fc74e0023b5548f2ce2799f53c97e9cf0962cb65712c3f5d156fbebcd65af998e523a99fc9e32a19d66dc827661372f20d63bc847fbe5b816615f6b779ad29eb386176c639d18f8616d6306c78ee2f0a1737233bf443e2da8b349d4b3d73271db49a34729859ec612989c6b6ff1c829cbcb0a6f2b82445b9b451c6461bdff32a40ff1a35db18bf47f240d7d602567f2d4f7079a6f228d1dd6000a643151b83c4f91a4ca40fe3ef6975a638436d1666e75edd8233ea065bc76c391c1c8a1bc0b59592656e4525824781bee2f6afc189c9f88c090fceafe15f20dad6275410a04d3ec95dca56fec554f67dc992a9858e0e6c2c32835630883eff6aa9545222fc584813e7da34be5446bec4a8cbb9b01a0d770393e3ff1d511662ef2d3a6f4b64436a6ddd1b9dfdd011631ce863a7cf008fa6a16763fdcd0d7da9f023385a48a7689bf8cadd6db36a3d8a834b89afa7d85b81343f73a382379b3186cbd2a0ec3e8946c05004d0ab5faa774df01ef93e865f92c1feb655a6b043e283e5e3889ae6316fa3616507782d35d131f94cf65f68297ca5d71e2b3876889194caa614f16f2e858361c1353c433dc00a1e5d16f1dc4a510deb0ccd0b05dc702ca97fe03db64da960075ac739685f215b1f49f20b551296d0a4c5bb89cb2b96163ce33f9a3374909b8141138e0e0bdd602b4232b494bfa4438ee887679416dc70dd4172e2be1543389aaf66ba994e741e61979bedbe637463ecab26365ea59dcbc3bc0c34473c75a5f989585254616b55444567a59fa6ecce434d0c9a5510b6cf6e18fe0fc0eb49107ac1888b75dc443536dfceab669df72401115b62bc7c6066e570ab4fec766a3d27440d516410e5abbcee56ca5690e9c238c6631dca1fa912656935c46f4e9d8f4da0a0e5729fd803dd356071308b852746c23775b604074492e07eb70e1ffa2d4ed958f29c27e7931103f1f0d9543814bf0d47fe91c6bdd85ae28b5d8d13fdec0255799fc41e059284a83e905088087b9431a8894922fb92ed60b1d27848cfefae116f36928fb6c40ad9dc77ed6debcccb514abf5639633d2ffaf4785b537fdafc5370866b03309667efbb88b30fece4383639c95ffcc9731f514d39b435c13073321fd4ced850966b669408d952b3b2335409471c50a35eaf001e6c98ce18b8a3cea63921a0dbb846821981c26b46cdfc26146c29ff1d5aa9c607525001b40ed894fc61ad3b917f9c1dd2654ec21f15ebe1b6eb51be402ae722a7bdb70e00aacbc4d2b78021e700a8d3b3c1950c16b953367075fbdfa6dfd59c95535fc2bac98ce3a874077a23c7754c4105a853322038155c491d4afef1534c9f665602476105f1c1d92b5ddf4a63c0065f5dc62d5fe2e2cc3e905a2c17e60be14f77c58dcf282f27106351d8c2bbc0437e008074922542afd1642075e16f502b14a51d77bca6d3dfb5d88ef8e3597da6e39dccc01b2c83e0b19b39088df4626b3f5725ffa98c410a2f33ea3096a47c7084a221c79954b01ecf5733e939253c04130628e6a334cf0be6e4fda69b938ba86dcf9ebe1db25709777852c32e4b4b127da6c4968171537f3e3ea34e8ce81cbdca07e470e7b39fddad9d67d301dfcda400380f1f125f48e7ded8dd7992fe98685a636d705a4825623d19d8d9af38e9ba073b7e5d905ffcca87558307563cd03fdb80cdaf6c7b64beba076bc31e6c154e12ce85e7e631b580a379be6eb07fcd57a714ff49be8e91cc41014fac9cdc1fa804606d46808a5d378d58b5220e722574032dd33f2dd413780e3c98220a1bd82b0c0eceb1c2421826f8181dc897d9875575d2a3f715c8f4cd5bbbe774b392268eacd9c9b82d54a8c00debea43d057231a0ff796c6586e7ced05b4d03c39e9ffc915733c4feedcf6f2988789ae7a147ebfba9170bb682f6f7a0324f69516781e8c4196a94a66fa17f248b8c63eaaa3ffa85d7334e91ac219f8565d0a3b78e186c4321026d6b940d8f965e760bdf3751d055187c3ad95bbd6c57b2bc93d2b7a3ef306647992c8d5c687290d217f5c3bdfbbeb9f79bb0a30b6925840193e404732f721c48532a74921e261d6cdb82dbc3d08275c10c2058684e01a2ebc8ee97cdc298d698cc875050902dc07698516e8952b187fccfde6d2ba646502b6a8fe7770f299240ac264fcff679f2be76d154d9e2c0c34a118e8ae974b9d56ecf44ec64f78ba47442ecd6afa5048c2932c43afd97184ae44acc828d2021832e46767509b56556480dcd0583b972efa78a5bf12f83dfb8f135652eba4d782d81312cc33f19e33234a3649073307a06db7e18610e3d819c3dd52f0d144dbd17bfde0c3f696337db2ec0d0fd826160b715b590df09c5f06a1298d7ccf36b46894e75f35abdfb9fffae45fc90a06f74e8cbd4fb88068fc2edd7e7e92d371bbb4e47e42a3929d886311407706d392de4831703b71ed20cc31cbcfc75bd7c97ad86e0fa4032acca737d399439d6b7a4f0d1060ac048296e91a9fb7b2f3119cd03308dbcc3a6097072290c8aadbe36918ab44eda4cd41b721ff8b3d97e437d01189864652c3504903df1407ab08027eaa13cdc6e5103b4eb320e23a66e2c78c9ef7b759a642986b5668dec0dd88f92438e99c953f91ae222424fcacc03565b00ec73fd11fdfd11f93c7882fa1d5a553b4aabe0259531881df817a3d5b63d0c6479f901b4bbe3dd3f43a22ce27d1be1a0641f1d7490210731ff67b1f40ae826d1ff18a63803295ea758acfb806e09502598037091c830ce1e1f125cd36b697cfce1b9603ba894b80c4166a9737bf9897127183bd7b3b0bd691cd9fab79fd6f10eff6c8026e1d3e1d41d8a78e180be7e33fd984120260adc198ba89220692d92a6b47b0c5f61dba707490a3c622fbfeb365c171935739b7455dc4ca7f28db49f1e0cc83130c3baa4bc5611ca50e7bcc633ae4f0a4840e0f4b00f5a618836acd9f8d9c68de39e6f0f62d3fd8990c8bdb89eb6ba4f7d9057c2bbbe29790a85e6c9bee7df8df9b84676f298e31a0e9ba2f1b71918dabf012c2ccafd44df95b5efb924d6dd5efac10dc335226faaa3e48528ea64f235d04f67085305d9d476e5cfadd6dce811fc503de98ea4c4687ad9cd90030eb939f4e47d05a7a17a6b64b0b6104b4bad77c94b67083015241f4d2a048cea2f35c1b57928b3081bc2210abd4530e574c3c5a75bb15b9a5592ea86fe418f1af72881ee898a9193c7a6df93076eb59b8f93653bc1fc5b4ded37d3d905da972cc4ad1e9a4271c4dfab272aaf6162ec02800e810efe6e03f4777f4271acf10b3eb8383dc1a7ed1cf2522bccf3fe8de889f58341a44c27a9a7de200e26dd11db8907e70d315190b007599b1895a022e0ace427ef07ea270dc24d895b3057afed86eec0cf4b19c37dac3bec0acadf202b7b6650a4d6616784545c8557917ef6b87ecc8820dcb0a1d2a50c87440cd7b274eae59f29634c6fb4cdb8374d172e728300ae4d3d737386e9d9d1270ec09e28bf9bffe7747232739967d531e2dd65f5bcde0107f4be60e51c7256d5dc57c06bf7c6ac6c695e58836da62c1e5c5d16a1d6cbca788ade5c433aa7087583231e069f26646b22b7a4cd376cd1effda27523fb7d8c0dd85e200dc6363559322cb0b18970a0981b34d53a645a55f8b06b4efd224d54265f761f5c3e80e06a82ce548bb531464a218f0527fd16ab6559e09eec33fe53b6fe97fbfffa3cc1b07c364515a545354ac251cacde8288ecd07661358fcf152e672f929a39f7b358102609feda7226b1f0276975b015a97eb54c98fb5421391b0c930a7d4485d099779a871ce8d526001c7cb312198d4188bc73d5c43d250633871c338a40f9e1578f2a37ea4aa092ef8cbe2ad7b1a64a208dc9cfed723632c37addee62236d26e2c5e7717eac9da45fa06b5dfdbadd5ae8fe4c0701bb9b3ed83d0d11d9809b5146122f0aed45eb014fe09ad654140f3d411cd05cdcc5269c1972e00f0ca9d279b469ef4cd16245c4b268a96f707d95f2b97a9d93813705312de13787227e3834a20a7444a43371cab9641b28e07e972e1411f6a8ed378c7a0d99fe2d1c2494de6109ba34ec5a1a2a47205bb3170fced9a56545e56f035d8218a9c0e4f8e4910ef8b5a440b2540fd79ed96b953fa8fd607fe672b0a3962716ae547f1545328ea9c83e1058a73a87fedcfb96b629836087231770fdb927099e606bd290caace48e1aff4d4627bd357143c9be3905365b6f67b62f22f94d4ad677c15f86fd88d0e25b39e6cf070a4fb142d1b0dd12cad9819671942c033a6722b6326e5881e978e793003161157fa7c8be3ca16660c2912f610787577963a1ac4ec06802760876d681ab0f6af7b3b3fe1125981d0abe6850293998def9695f5b63824d7ead7318673a3f7b6b10489858e09596ffe127e48a4b0c3832c019373b407d711c3bb73f5eeee7f733bc4da5622914c81358cdbd15a022e6c4ad8190b4fd68e8df594fa5978e58947786fe34c56cf9f69cd80c39ff410c750b576c03964a5a9ed71c7dd468eeb4ddfaf080cd6bc1d62b2d61db9d6634e854fba421f591715d32b01178c9400ff68c7a6fbdfc69beb027923f95fdfc545232a04944158404d5229483ffca1aee62ad9209d6aaa72985a5fa16e99373fce56d15dcba50c4bdd652f58e0f0d2273dd85f6098c8b98eb46099ecd4c0d125dca586b6fbf0478f2e953172ee0e4a53d7e9c60f7418f8f890d4e2b82f61591b51aece139d690e562b610472e3916e54e2fa59a83d003d079e22cc0270c158088517b19c67c217c01d03a2949c6786a163628a37ce444e7e5ab8785d7e0796c85154754d194543218a2ec6963a6e792a2d7d7677ed3408b75b5155bc0504a1fbceec80bc665d02bb0980e1b912a601a48dd886c13d0651904669e682fc6de09acac5e8daeef1a3cdfdaa1b1bc0c09c57a38499e7308ff054e3bd746fbbcdbf2e0ebc9c06b5a0d87ad521e9fdde4c993d56b22d61b04bf90c08894fe17ac2dbde47ce7bb76e00192ea5e7f629e6f0ca9f5b8ac52475f8f26e684a24b72637c6474abd16b9c65fb45fc8231eaa2de74f90ad4c807ee3d2b9b1878e8bea29a03e981e973be05a0e9b9a22a02aa8f38ca773c4dbf09f4fbd3c22fecc0fd861923fb46926fc14c89e9f7a41fc32f7f8cc4ad95977d356ab47eca4c3989d70fc1b0150261e3928a744bb3f4765f427b1e4ec4877a86f9513d04732ff37574cb60e6536016765cabfa7bcea354aac067454541c578856ddd9d911ef5192557015702efd380174bce1e15f03761acde677de990c289490a98c2b6ab4f6fc7632f57185b3e64e09c6ffd9ea95a9aacf1882e36832f991a9a110409169ec3da49e55bd0ff9fd1b0c31729fe202fadb458a98100421a82aa54b1add1df772793e1534a14404da03012921c55c88e5534c1dbc323492be2b2922b8e5248de103e5e5ce355950722fb95273a9b8d1ce8a70c3f78cbe097e94edee3e69e76c76191f4a38c7c4cdc61d8ab30bc57045edad0e72304b021abe85377b70485fff72b02a7ec4a457f6a2a17082444606137fbeee183ff321d9d629496c067dd20e3af846b04a78804b340b7541ab22cec842330907af193ca12c987e122cf710dc2998695ee49e3402e5d49b6607155ccdd0462e53197b71b51c09bbf7e615527fbe3f9b2f450b949299600307d2dd11fdd33c62bbfdd62d1287ef67ba6385e987449616e20591cee50dafadc442a62f93500e27ae39b6bcaa5785a324e8577bd862c91cd3ac34150927af2d86114da64e7c6401c2fa0e839b9b15c2cbef65b7d9a2b7833a5bab58ba709dfec1ea3860e4af3140437b169fbd198ecbf76a07cc03a552dac98de9aec8c9ab584560477a74a6d1360d53bfdb5299de2f3928bcbd7f7866efd0a266c3db871d3d3ae64092dc20baecd223e75a0958d66dede6a56efbb6921b39cc5c5951f58c600a0f36dbffcec9f9fd847f17cc92659ccb65c01ac59e9368f012e17b68305b5e4e28ae3d41e0c112e16d11a18d28c5399fa41b51908f7cbfde0c4f99614c96252407d086b74ea616d312a5679ece158d08487344dd518817048cdca341ef264a109ce794926d07eca7d4b26e34be84d7e7d6a615f3432bf8001d18519f22400b1d0300637708de2c5d7d9e179a93a548b5991eb0511d0caea6d98636f2869966f6b3a2df0ba8fb0f152999082145888e9a53d371d06ed6e526bcf75caa640d4e4b16d373ef835d8827e64a861a5def8a0001594b75e64a3c688821deaa0e27b72426594979680c04bad6a6fac1cf40e3c1606efd7ecfc767b255a73eafdd0bbfc95c7c4255e2ffd08c34b6f6b567dd1c420ac4f447a25742d8b9e8a9b1156aa09ec81246c2c13d6f98a87b5c2924114ca9cb2798ce1d41e6bdec4d15170aac418a3f2fb914b55d64ad137f8eb01efa594762b81eb683df96acef871ce5544494797f3a00f1e5958b229ee38119eed57ce34aec52f37c55957877d5facd9621f87ccba2978d6bb0463622f48792c547e3c285b84b927a82bc2007b7b9357b08cbb9c8f56eb493fae0799ed0b301ce1ca2a6a42acad6328dd2816f835b8d791150d639d157448a4e942f219402304e7de603f035a2eff8ce59cda3b2b1cfe0d6da990ab37aa113ad10a205966b670d2fc730e93e98a695ff8c429652cc1419329984cd0d370092f00b58f7f587cf764da4ca2149d6ac0bb81380dc8e33ebed768c5f093707217eb8d4241fdafc70ccaed876966431ca07e53bc619ee5da57b7b21bf3b53ce3b1b11935ab9a21dd1db05a1d662b20366d983473a2c5c21615cf40a5e6b004b46a359e128c75656823c161d3b64bd6b364e41c970ff6acefb38c608f317390caa929512028e874d13c45e88f3e98e6808e6819ff778cf5d14f4e52fbc574cbe310e3a0d0d0ff0a48519e4210aa1131a0d529e2564844775a297ed4cf3e224285350e5ef1fa38a43fefac208c61c935eb0caa34b06d457dfc5116150201128b5af81e94c25cd2e857e349bb2001c5a5f31f0f60733034e90cd098c040d370208c523c28b7c982019de810e5191faf326974030bddd1abfd9e687d29639792b1b32781b721c7f71eedbfed6517c981278c0f8f7609564f08a86a5c6efaf458b7c9a6a4629450d5f95572cf35691ed3d15a946a697909f12eca4ece5d2df0cef3b32e44cd57b522631bae0101d3ed52388e756c8c78b32bc39d23b887a409e0296a7857f690dae72f2e7a1d7bbfa3b05505e2424734a0693c0257f4a4d7c4c1a4c30371508521fcbd9edd0174c0593d1e66c7675ba39fad828f22e66fe71e722885c1d3bf23f86e283f0ba7c898b8e4590bf80c936745dbfe1979a9f99341b41681fe357a89b3227e7ac5138dd7b6657c29afb2c2a372164fac81d9dcded8c20b95db491a81802eb5a27d3c13561ee238a286d557d2b12e502c31f792b1300e55cfba4157814a9aeea633739a8bca4176a76922351a942a8ef83e8fc5f92d155ae0becca71dfe874f7c1c4ee4a2839e74c5f17143c6866aa36305363d34c3f7ecdaf4139eba70beb2be80f4c4816283bd7d848118f2683124688d9482cb347533dd2eb31f4d63594034ac4026ba6538d5cdac7ec9d35972763304401f02850931fccda5c24998a83bb13f823ea99fa4b5572c4b4e718494f8bef6f716ed3167f2d0c567a0a733249ccb816e64d7e1680f1cc0f3a75a0556eb3da79e4700a29afb5d549cfc20a524ddb59fb4cdd26cf7b4fa88f3c978b9b51c3712d282e3c2d1e5d4a840f993a06b72d23c8417a4e8722f34eda8fbcebe83dd57493ab80cb0f0e10e45af28bd5ea99936c9c1480b21bdec658ada04bf0257f8188f7fa49f3deb82ad996632b2058fa09cb4329798bf9b9252a9295c0a3ecfe40827d6981493c9d25d6f4c4b34479e72adf9cee72de9ffbe55d07c489496abef881fb195d00366f72c43671e37cf0a1ab707487465b913317b3d4fe97067c2f86c59805e1bf86c59c52131ea54aabe26e4ffbc47c950d0502e84717738234d8e924781d52bf4a8830516e4acef526a6ad0c770b85dc5433b9d330e23c9e14df8d451345913d8e0fec2588f2e35d6cfff2961371939bd08107803bc301de6c2cc9b86f135f1fd49985f9b493ee4c7592ba5255989e5d3b58cba7eb0b73a043aa6e62fd4b39c46fbd8c89f111774ff062ab943ab542b289e373c1d91f73bd2f6e2f859d1d28cf78a087ad59284b02561d14e087af63249cbe52eaac7efc942242d92a285c894a0c80909bb2ea3e1887405808cb6063be373d715be51f70e9ec60f7cf1debe400a1bef2d48e5d0922bbd877a13aa5e26b4dccdefadfea05760c3ac554d7cebf9215bfee2160f66e8761e588acf1daed3f13fbd33af7a1dd5a97d97ad083aef361cc2b3d1a758080d7be1137f24096d4c91c4726088811318ad0470c08b1ce85e82e2870719622afa44fb32e39d3a322aaff9ca36810941bc1857991161dda7c6cb9867e83e4965b500ec7535477711fa2274db1b801f6862cb4ad68711f69164f046e24afd8a7f147ced131d7f71bffa03873f64528eff7fb1ad4c05d75802954a3a5fec42f920ad39ebd567aeae6a51ee088e7dbbe5ad24f21c631a8b6967a4ddd9eed12e2a3cd4ec99e0d0f341d3bd2dc6c5330a71524b9d183096a7e1c84fe438d7d0c5b308e84ac30ffa73c6359855e0352bd52eb3b01590e2a63edaa4c21befb2a5b06c1048b3367b4f0cbdd25aed0138eeda8586647c1ab2570f0840f3c0bd760a9af59be36c41108256113015c6cc12acd42d9a51c89ca7ff21da75c382d92439b53e8f9a68ecfd76767c5feb75ac1cc27327d5f61699f8a7770255421d5b68a6505d650c0e2b4f7a284c158cf09e655a165357946a2ab73ee31ae44f6ba18d5fcd82a6a7bb3d107a0d8858a67b2eb0e1a079abfbfbc3116cb8da52328ffd2e34b20784edef32e7ccd9eca7dd863bbcf1b67f42974d71b9fdc2ce36eea5e3814838a12f52df57f9265e1e86b743fd9f66f30f50d20001ed08ed2c2006de8b7ef549f13f3b0c6380e42c4aed12db34234445153dca965505e0b6171c682a077ac45ea2bc54bcc3f9e09508458b34b39ac5f4da99020992c753b10d0db010394bcbf918190f134d66502209e2dfa1150e480ae1afe0db77a05a593af2e83ab159957a332e178ab9337b833f4fc8fad68b4f1231320bc0d61d177a98c4f2bac1b8f232f2f2870bfd65217215bb7396a4fdc228a320d1cd07b9b6eb689a99f8ee5afc6f91e1ffe92fea29feee27d7de13b0f720083dee5c559db4874f4fc76a5cd105239dc7ab29e2fe8e7f275a1a4e78d98a9ce3c87c8a813340ce0862c228de1eb2bec433906bae3c9551e2332f3a0380866219e957b0d571dae7b29738cded5e9aefabf98fc2438fa109c0ab1bed9a1920fcacb4932ff2e1102be9aec940c7b50a787d2b954050d43bda362a66dfe005579b461c2da28d4d98f6be44f60dad8b0f2b6a00517ee56b4f7a073ebe4510370c53887506808c627bf06b7d4bdf7a4cf01a5b831b7ec74c2fa43a84db782dfc4412d2f93753ee9976ead966f8f6c99ae2f3745e4151c16f1d08373fc3cbe6dd7e5c774b4bf06ec430d09ba0d53fb4c2f0652306f7bf77633596eb728affbc1ccc85848de3d0f5213ce6643ce8d4389391f7265be77673f5da340df06ad5cc93cb766c463d707449c28313d863768fc351bb021140c86d098840f92b8c87be1f1ba757b10ee9b8c3dfc5347c042805062d28efe34e67a4de1cfd13d183b3471c6e157c3526af05064574648f6e782ef1d4ee512c0fd14a3ba1969cb508d9237b96f229e2dc4961d79b8a1ca593ab646d08660fe1ae3639cc49bdfb24884ab4aabdd105eac0c5105565002fde72aa72096f6ded35e7e62faecf04d959f2ebf3892e4bc0dd60feaef6546666b60b4f25fea7d2418556f2865fb28b31fd5af8f60c352effe6f54ebec2fdbec30bac39ac6d9e5434d228a43362db4d96533884d8fa12d05966f26dd504623a5a83c417c4cfc64b85ccf9d7772a1b8762e01383331c3153364f0e3ec5018be809e95b83dccccc8679672ff08b878a85865c6abf2cda7441eb9c8e41a7654007b62559007a3247092be6472445d60c44c62d6e4601368d54142ff5bb4ce4b8d1b50c677248c1bfbe27288b1650ebc5ef723f80a9bba2bf4513064db5fa0bd4703f3d8245baa1c17cb82c4158d7b86628f597393c90bc2e95039d9077fbd1307a214290d3b403e3edba588d0dee4338bb1df08e6b78327e8feae4622f91d49d074253a77199bd80c4ca8529a2bebfaa904852a76817851feb4addf5213b29fb7e07eccf0f475f6c28217f59e0edb270c9b87d4c75cd07bcd313efe32136d835cff33a5baa529bb5f705b00b095a994d417651b744cdc3caca5e669b75842cde5c8e875707c8f2c538245da334e69aa3afb353afd9cd70456b32380bf3fd94a488f165d64164c5912e5fcbcfd75291159295d0f778c5dfbe3021b4d499b1069ccb132a77fd9f8951230c46bd472d52313c6f7dea29950c2c6aa0aee943be93d9defa8e6b85f923941bdb7c61cd2b97180d8fe243fdb0193d273b4dad7bfc9e20c54816ca9683f14cdfc1511b6f22ad25870c6f96985e9cb969da6e6ea1801648de2a903a72e2d00ab1608f17798589cea0ce21ce45129a587181cbaf931023db743374ce259641ac43b67fa1112a3cb9a543b67c9b04cc171b4cf90c70e1e090a2577cdc480a828db744fcdc9ebd020db3939fde15dedd6063b2504a74e80cbe24eefa6ca981179d4071fac00edef58c196085abf72c01f9a577d4973ebdd095e3c0e0ecc20aee8a080a274707c237275686f8fb4411e61c8d4079f6c9f7954ac03086fafb6ea83a9b6d2bff7051739188682c99cef09ffd09f6988e75454306ba74f6a4f73e7bdd9d74c3d93d966cff7ff439453a70749e5fcea00a4db9c77b525ed2ed772f3be4cb615d6955db2723a96c4cb11b631fb4a2259e31de996d0309c6719e10ca6215f4287d2644cb06bbae78e4bc5e8643aa19457d4e8b86f265043cbb564d3bb70d96267468315e1f3bf428c71adfcd46a232ee489862d2b642a618166dc0e57a38c673882171b8a7ca65066c53a66781c9076bc4c76d04c3f1d13ce64bf81ce90d5f834fd6c4ba7f728a15a898cfbee2817f8aee93c6336c9ca690a82b6329122527720840fd9518f35b473713f8243126aea621d181f5d7bd314478e572b1693e1d319df095f0fb3cc857058c58a9bcc8d8b02d8ca291d0e178bc8eb9db41d22ce0bea7f1c27029adb43d4eb88a7dc851f151ccad3e9aa2916fb8d5bf5bb45fa9a6c4c8f6ffd55608065c9905a4da1ed254d891a8ed4a2badaa16f418369700ea172dede321ee5c8a6d7084d9819b894f1b4d5c27d5a3423d569776a7058ebfb1db91386a0a1befa90027d8577757a90bd67a66cb542ca6bcf4159a87249a68078914696866549812f0f5ad4f50f81f524725b2d74314eb312ed32ad862687ea1c7658db73305eda8ebeb5359afa032c63a6c2cf2efdf135263369c52c906ee02d48bb55166823e6d4a92a1c35d3f0ad96d9b23c7b846f6c5963ea6c368821e3a782cb6aac61a0a78227560f0dcfe5ef7ba1f5db50656480f30e945729f31e56d9c863897c310a412a73ac2f0354b0c8e3481141c5d855707056a072ab3d2bc58b45632eb7ab35c4aa9610f0876607b96972a5bb0ac5d91b0051eb6a697c7c0ac73d7b6f62a3d311f54f0c1da8b73429c77f1d82f60e206a15576d1151ccf91d024c7973c0ac89d92bda03d125245338938a0656760fccce56535ebe02f5cf5bafcdccd0705b3657d512a22ac62096e1fc40b8aa743c78b263d4bef9a628ac85abef22a2bebc5e82ba506a9054aad3807b00f0b28966fe56980144fb01a5451906f27f4fb9f41a79db64906a992914de3e4b258c19f45c0f4f1b640cf1808c35395efa34b07681b83ebedfce47e1da7fb9169f7b8f13aa998b0d36b69088a8a000b4249b45d763582510eb52ee6ec3d3b20e1507b99c2d1215f10f194997ba702bea49f91eef9a02460fc316b3893cb69e36b8eb1d3440d24ad6f285dba48df8012648946f36836cb83d9b153ba062d15651e818d32746ec22c3ab3b281187b46f9e8848766a86dce98ecdaf413f2ffe1b8b9d13809cdc9a0b075de31ab3ce84ce54af8432b1252ef2be8e9a9d2a680989074c9005587596919be8988692e737f1ae24ecf111b03b33960f0879d78dfec7fd09f03e2b73b5dbbb8fbdc4c0048bc0d20c6420ee64c540f1a6138d06e132c2c39aff623f056681dbb86eb17741c6b7ff683490ea0a31b24daf6dc430e1382362c90cfe4ad962df7cdb641848ed6d6084c2d2b61ea3ad5639a90a1be46382c501e7b2c720ae6fb863ca66d6709f18179afea9da8950643497dec4920a9e11d3cb7a245b5baaa94de3920169c21c0fe7c5e44d3939691e9e1a50b5d47d71a1d1363a3182dd3673f296d70c4d9c874a5ba9a16e10d8df9ac88b559343fae7419a88437a7ed6fe09b15113eacbbb944c8be581101808067abaaeadb2f2d002677a8ef356878aea0cf2e2df3130bab1bc2aa25841d115cc95c178b9a36829d971fda57e748a9192b60a60410d7dfbd3ff0b51a2619fa05b7af6eafcf9e2d2a308b7e1c488264ca1d7ca18d62756ab78de334ea8afcc0cf2a0005b9365a0818aacd4dee7fef44d818613433ec05387b56abd9f2623d15e93bf6e6902345966bff65dfb011baca1e97706b62babbdc19ad387533656c3bca38d2f4407ea5b941f91635f84e46649214fa7054c467c0d29dd627ecca3612080b446a821ed4c9eaa4355b2e49cc6d66f92e30c39b5cdf0243b3489c9fa75cbad09c2b41a4b15b27507f66cd8d71a1fd3a641b648a58f175d65be8ee8abedb6c64d3469933d2a9898c4c1bbcb24899b714e89f1ce61bfacbdda81a24bab5e622a22a35e15c8cf49c9ae54d409f8f55f5a2ececf77a8abfcb310be3f9e5b2d14975498038f0aae56d1966d57b88f3769e7e910cf6aa5940a01ca2408d684881d23ac785d8c6c38e4614c3137821f4fb96a59ca508ee10600657fdefe8fc6939810e8bcf080f53194e786bc7ebe6175d3521448a9713bb0c92c7363eaac0f9df9a037a058f9ac840dc711fcb9059da6d4e1fd3225526e174b963a4a1b90ac7fe340a35cdd2cf4f405a0a26bbd9b7a0ed3c6c7a1c78beb2abce21b2b3387be86af6f5f5d1148f50445254268200e3a1e7e39668c981f0f15a22ac3c287bd6f8b87dca3acfa47b9873ff23f86e69c6791e3b6af48e1828ae508328d9eb672d1a8d672a688b73520748411a3bcbe975c65791b804e93864f921c08dd34788665739986788a8c9a1cd2c6dce58ff7e104e9b6dc73b4189c74e04d9b3fdd48412851cbefb40c69822eab6aa68cd76d6a71ae5a57fb53f78f4f47b2be7e7eb452dcd0c9f58280566de3942d6b555f0b7fc934418180bf09d26e93a21e14394c900159a8ad8a5fd0a52332dee06826ba2a07b0c91e41b07ccf5d7029bd03c4dbbd4c02b5d3dc3845683e9b84f980daa6cc2644386e65e89fc8cc738ebf3e7352ec439b2ebdf2168933664fd96b4d1a0ee78534d4473011b3ca8bb6b9ccfeeccd0c5eae4d2ecc8bb2671554fb3d105e710ce8100b826828b173a33e520ffeac78aeab6452672e1c34d7e0fa8ea2f814096ce5dc722a3a351d30bc3e3cceefa5ae5e6d3c8f0793ad07acbdc2f16ca3534ae4375f43884e7f3a2c2a95115ba42f41ffc6620f8638adb25272b6b456ff05eeb04c2ae8e1d554ae50fd7e84c497d4a31c15a3662fdf6050da4095cfa477c8718a16007696be051afe452573ec3b839c83c20989c78be69da6a05d4c0b331a8adf0afaf19579032a67c2b87ebab16f1a65a7f40c9db3957ee9db49be9106a5c45bfcfb62306702f465d256c07236eb55c0f8338641ada11c356394c4c86cd18a2d47ab9daf5239ed35ec761d0312be46569c9f75eeccd4f02e4767daca91f48e618f9c1e2eea7e8a3b2749b7b849ca14ec04d9558ac0d4fa1ec6a7bdfab361908c4ff951bca9571610f9e82d6c2ffea9f676a0562135efb26500d3e8e319f23e976d69bd495a73186962aec4437fd816c3f2ab565428e85237312f8cf3cd232677a46f7d0b2fc296c1b9006cfaabb6b8f43865daddac69c3a3e1b63b9441cce765774f0ab449faeb12ffdc86aecf737e30feb623dc4ec621ade4508eecd56d4d548e3023c97cc18e700d2b759a8fd1ba645f16135477e28f8ec5555164262d287dc3c61acfdd7e0bc191a144577a081a510d45d43ec6bca401a2b29447ff0a9d881cf6c918353bec79877e7afdeb5298637dc423c7706c551a1fd70ca200c1732ed9187b55241cc76f3b1cfa7e54e65a1a848b404b0ca13974cfac1a1bc40888bb4706e2a3aef260b040656a416acd6208482825ca33cf036f46af58e3ae95beb0cbcc493c0b842d8734287c817cab033d43aabd285efdcc9cb9357157e6b592b6f302b18dea7429e45509cdcccef1e99630104db821e33a9ff041c02fc31d058fa1d92f83b87448c1d76e89fbb41518e2d5fa93da0c5407bd8221555deb0f7072dacd18609ede91dbbf4fadb52f5d57b618cce938b0e3ddff06630cc36def13d4b7fe97f11d9d57c61e0b0de003c0441790f99dfb547c26d8a7094a9eadff322c71b1859c5ca096d1d20215ca4a3c2591bfe4273f795bdbab17c6dfc5c7f4c3d17dddc055a7a96c8ef483e43ec29d105ae9a8c1beb380d65d1ececa0c3d032d27456726d921c96922352274e6d8099b92d9aa683d4313fef842f971791513c73e2af80ae8c28e204b8989af829571b5d4ede12a18dc239e03374da66c813369bd642c83d67187a3284e304e64075c66680fb004eb06e37732089bbaec0ad670ec15996c8f4bd8b95ae0e7d714e225e256a7b2abca467f69ca616cd9c97f36865e7bb69e5723640b2f8eae3ec44c8fe5b27b061452e7a573dee02d4b73ab85b9d14ffd97cc01fce354dc42376255ec9d4ee14a9a7d804830368dec2712bcc17a35f5fea1f9ece402a8743d48c50be2091c1c0e02aae60529d7af094801cc0da62946c7a171f3a5346622c796fb9c68b5a1ee935c286d351b0c67b1e5c38c2724c090e15ec9e8f34a875455e5c3b239026deab2e060574b59ceb789211dd1adea9f5572a5962f517a6c71d263734fd7aef3ad951953312f3a626809c711123e506572ebe604937a3f106685c7602d7497193cc191c874601002fb4188d9310c205938144001fd8560949cd46a9e671beb2db616aa0b5a723ac6e01f2d6e0aededb59c6bc4aefe5e409d0dee1de74dd1cd02783d47f4bf692043a9e57cc81cb0194e82bae5ea0bf832f6a60fc54f43b3172ab874b14f9b8dd718068123a558f4be4dd034510b0a9fef6b8bd9dbc1359700cfa65fd781d4be9c5bdae9e2d14a3215c3beb08f350971db648b5cecdcb857352e271f59d18c7bcfc744e0ecd133cd98186606690a83d23da4e7dd981e8b0e8482392cc3d0b92a2e2d607783415ea81307494a025b93698449b87ea67f7e333259c593f3923652a80f98ffca89babc9ef7dd8f4ee39eb1e73832936923ddceca7c9556b967b04d7d079b0833b80396e68ee3bc3948de6406a8059591b25038c691ca7d560d96606b6d871df383f03bbc1a3fbe8b4fc92c2a33dc2c282a6d7b7aa8e3ac9d30c8d60dee7b080e5a8261d2ca8e1a0c0e192d52484e4d6685d799178c7763f390fe260bd32b349ff9f7af5c7d42cfe5c7a4cf0d405c8c055c579b4b15186f3a4d78d926bfe259e5eae29860fcd05a1240526698298b3a034b9c00ff60067fef6bb8f2848bb6396f6b689ceabfa6a73945a2e92abef01bb21da8022119049d6be71f77407d272f73887036b84aa5450bd6504775370612cc258d337c174f116c05eb166f3ea7a3d020f99cf32a0179e7d6bff9d6ba6c6f75574536262b23839f8bab299eb23949c0da98c63daeec40de945478cd3b6efe409529bb72afc154a702918904503a22559b1e30d55f5e4dbfeff30f8b5a7f40335bd4e5b493a195e5f3442249b248d9926d91258ed88d5136e9ba410f96114e8cb0212ecba954ef05c2a5aba19c56a927142dd71f73755f59247ac02d380eaf3e2f80110ff3a9bce3816060f0c976a14daac81293f64a1a00eab2a32ceec9cb0341b86dc5cb82c26b4b2c6fc28055c875b6bd49574f9fc2d4be3686dc775fd41591250a53c71d91ea98cd9012bf48965cc3284f934d0e45a2bfeb4cd53b2c1bfd6033b06b65517a3058d79441af252dbbd07e014af0047cfff1e204ceab570c8105e4b1d966005ab5792ef675c58b3da2b626baa44540f18089c632d3515a0faaf57ce8098d75e8a34f1553e2ef97fda167d23afeafab50a5ccd3c854be0d336ff9b2af6f5022ddcce4f0049a6deb10c559e78815255366d15f12010b906d3ac81f03c81194c7a4f1a454ef631e0926772801f272df8e05207fe90df4b392e7e4d964fb1aabb1c59b0eb3f38f7e801179078a780e855505b3dbc56d844176f7ce3ac7bb0bacac92f7d226f1498c2812e10dc03c8ec408f7ca14c58cbd20dffb5f16cb6ee1c135a91ebe7c05dbe98aa72313a6873192fe1350a795c93df555176cb6f8991e3201208ad1157c8d8c89f4cf8f5287e94e969a67a5c11fa9a7f9c6bd11be3bd975b955fc3ea0604a781495c2b6d3f2ade138fedb6ac417061dae5b066e9894680f6c55bb6c1b15814072fe6f9f8b8da59820263e96840f8a629efa182fea6ae29e7c1dad8364ce346f2a27cb30e766d625ec5b1a2d906ef9020a0ac8ef560981673269d7ab829892851ac67cb53c50f345d39e22d7fd373ea12a7812ec20d71f74e56e759b6229ea4e770b83498723b90bc6d165c198e624d20dc5edf8c0bce8cad66f1a97fb89d103e5a9964e906e60013c14169c54be5f2c56cc5c518321c92a3ad3a79da7e8fcc1d388643b70f82ab97921d5f2b4615fddb74f69ae696acc8d5c6e21b5a2d3401dbc0092a8e689c542f0fa35091133591f0769fede4566b5ad715a19c8f96e0ef2c054d5ce96f0cb09e6178b4d65bd86e91b099fe190aa33db435fd19e6eff0afb2e237f5520c959f78dd6857eac666ea7433377fbfd2ab3570450862f7f2485af4d79f6c4c12c60c3b065774c367984a4919822494644aeaff0ad6a5bb6cc46ed561cc528a8ef53f82795bb5a4bf45715324572047b52bb1ea169c13c9c5037885369c91dcf8957b6dd72578d4982109420f06f302c53f12f3b32115822e14a7ea526472da5398e117754919c8701ba89cefd3fda873f68c590f35e7fe2fe5ff74d19889b885bfeafc6ed91ac046716a32c5dcb6498f6d698bf3a5e3fac9ce8fb8a2a55853516eb0669f956f22f7b774c2c1f5e90d9fc9e0c8dd14deb2bc74c6f05901bbc6accc66b42a82bcea6fc1be30603ca60d73bb72edf6df670b0041dd16141f305f60de8271cd7caf0cea14c0bb439ed12871c8574bd3652feda428fa1304d92b9c900d60c32b9f7ae0f56071609ec8f1a989ad7aaa7664feeaa6715a49128e4aa512cd71fdbb169123e998dcb6c9df6a23412b21b1d02ad20253b411667efe5d4f630db7e560fe53c7c81369febcab129972296a95d5f00d3bccc462f8eb642e366d31e58d662ec0df069aa05383702a0f08011eb0f9cf5a9dfd9686af40acbcc050c34d1d6aeadfc16282dade4c2242b504e7e3e35e45dc4409dad271dae8c8bfcec73a212517d02ea5b82a7450ea62f62918b837586fb52329c9c607b832fe1a973a08b298646ad0cce2590fcceda2974ddee2f58627464109b9176a3d42d3ea2321fbbf25e63850daba9506ea30ab408bbcc82d536a3eeea8e8e0ee9cfc1a8aca940d0d35427f0c82b9782f1740dc8f9ed4ccc6885e7f8f51c90b449eabb01a46eac5a94fb110292c0499fd5b83045864677dd7bebd04d612ed41ab5f80e6f3368d6622d01937061c46aaa323908b737213b5d54f0c11d3c5afd133a62984de5d6d99d68d045ed2397c66f4523f4acc1e43879d88c310689a86c2ecc8b9c63aab065eff83fb09558df5df8c078940c56bf883e00257f3b53089d6657aa8c7486d976695bdf4f96f6494d3ae5a007c9d05dba2c7d2c5ed01a46fcc9d3dfd87dd111a6d6c79d966653c81a6798a954dc832546c34fc44d74702e5db5883dcecb7e401d570626363be94f928996e07aea72dd0b45484554544cc8f7dbe2f5ac7324c2b8ae8847796ab6d303e2328dc87663a326728c35c5cf58adaa30418333903c286620dc848581b872cce59018839218c0745fc7663c4724867beb21fa201ac61e93527f846c966f3ef6a1154a727b1840b74435aecc6727aea6f0800635d232186329dc47feebf11e8407511a58e8c632fe6d2272b405bbe5cab2fd160102372636dd3a7cf1f277b4ef0edb8b99589af5cd5f3a8f03c3765b3dc09668249cb60abcc1595a11fe6a2fa82beb1947cd9be600f96f53e82d6c0c184c0e5e1401a28127c8a662e4c2205329afb55b2d9e5dda657193a73b5f8cd285bc3a4c626336f9d2bcf3d7a17cfb6ea622382d2c15604334781430dc6557cf547c60d599f5e157f68f716ecca05659be24f046389485eee7f642f667ccdfed3a93ee9db173247c55d937902d8dc85bbb7304f73070076035c2918f4af23b4a05f1bd3d1f76c1ea8c7bcc780841294cf71fa9fa7723088b08298308cd63be7485072ec46c925ecb61e69b391e2a951df150c1eeb17fd2ddc7f1c0cc19d5cfe7f82f0085531a53aef5fd103a483af599ddeb4d24f92b4f28ee679ea7b5c5692cdbafe9f8671b85f0696d17a45b47f1975ab3fb034aa55ef8f1ff207926537fde773197cb4208ce726bf7bfdd0a377e9803c436de86b4012e44d6a6b7c4d231010e6cd50691bacefaa62ebd428e8e0a2f95bb5ce7f25b8f29e8d0faa91539bb462bcd104bb86753b3d80abe46b930fe803143ca3ae11ca056848c1f818dfb497ad63737cc32178a9ecf19c557631796bb69694d7480bfd68192f9f291d3e18dbf9b936eb34c18247fbd556650d91710b6f7d095e2d68fae7f27fb72180b19a86ab22c4c5ed49d8198d5307671eb8b2934f83f439c93343b3b40bc9ffaa16f8d02a2ac07a41d0ee3b37a17b593a077265fb2585dbbc1103111b8dec5ababc6824c7079dcbec043fd5f5d21463c1b2f0f623b6ad669d332d390e26b1b093568c02432ca5a64749318b68fd5cd88320da2ac227bf6f261a29fc608c5e77d6eb17163537ba192974314443393426ce116a73d0fc41fc5cd6af0e4bc6d01eccd0ce7263a79b1fef6e819660e298bb09920e357b48f046979046935a19cf96734fde4ee0b92584f5dfacaaaaf9e0f1dc644bb278fc759ccf1998e17a904dd5d4a7d63e0a80972895a39f37b5b3cd0273d702a8d5cf058aacee60f0704ec950ec7a888b0c2e2282b446c4cb4415117d905cc8e196543a64043880c746a9f6065eb89a83c0bf9e26dc4e4a254a7e113d99ed7be85a5cb4687ebf20b4d3b49db777fc52b1ccf6390e0166526813b846ac138651bcfb7aa8f4e5165ff2a4127b0479fcec6f9b3624966993b44de02640b5813e20a71e0419313ccd3e52d79a2ae8fca090ec98b569e2c99c31d639eb5d44c31ca11b067e6bdffdc320543833a0c7820d6ea891533e489fde985f30d579b438a98e770d7c8273f9e098dd0b9f029f8672cfa6301bf431126da51b9e4ab7461293997ba073b0d7157feafd40018ba06da766c2a3fcdafaf9ed4ae1116fdcbf7c142aa93a99bd032b2f39135f78d7bd9f1097806a6c260e454a8fd6bc8c3557d26d46f7cdebefcac99f4ad1cd3d1bfec19b3f9ada3eea9df71eb649f414c573c232f52a1e2b73443c523543c75abb970362258d7c8891992c374490ed852a2d6050a90ca4f8a4071752263c8d87d0e9b441130f82d99fc02a79dddc6e84e1ef3ca6eca080e9240f77534aa7cd246ec7e45381d92c32df9d10f3adfd3b0d3681a6fb039f08135e03315afb7bff8bcdc6c33a72a6015a544e4f26c614bc2594738be8f8574c4545b7b8354a8bddb06f6c5cf686aef9f48aae48f1613d07743950ca8137d9d6ae1a0211a6e76d770ac05ae7455fd6ba5c96ac30b4ee3b754a44b0c4437f1dadb671cef6aeb09d75a1e7bb07292e0d3d3f9a684043c7ec9a6f41c2efb1c56d88993b7ff4bcb846b87827b6429c38194476d534704dbcedca63cf4989f090b6b7c9ac5e28dc30b5921ccd965ccc7e792cc5b023c0c9e59da9d46edb6f2f3afc34a2bacdd06c42cf31fac921a85cef7d22dfca5b7e62dd32db5939ea7c5cf9df88e40958f1d71dc9f9de961128b8ec8ecd4ed03e58d6661475b95e02f0046d273a3c2ace8c7db75ba8e2c6435ee03c81bff54269c2e64a43c8d58d0fdc50b250593fab2972b1f543cdb8e17dd77e157270cb8fd40496475df06585aa4bfa23c100fc07e8f98e7c29d8fbd3fe379a902948c9934f81c61f837f50363a8a0bde687a20b034ed76546f79cd4348ed95661c4ea5bd2f4b012123646f53740f434fda846dce6c7ff7a43f951e59b74c515712c45f063c183651f2a112ac89ccb7716d279b29825ddcebfd0700d88edc3cfa21ce8ebcceadc61c6577bc4568886bfac1b144e9f9941c8ae5d4001b828e8582b0e1ce888c3e5f44a4749902d5aa021e5e32b52faa97f8fb84d1c81d5fdec7b2ace5936812d92ca30b5405f637ecf1d1dfa10e1b0525e087df4073ed260c3d97f3dc2f148b12210cab157caed12f330c33089039f9a48151da829cf27ca74f7e16ab0caf38ab71ca2c25ea9d4e45d145bcff48fceb77467d4f33c2ba94002e3ef5f1b91727a617a230dd64d04966e348801e4ecb25c7fc7c9b9fe378dca8687371be1b3f2b3ad65db3433f77b8ebe0</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">Hey, password is required here.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>æ¶æ„å¸ˆç¬”è®°</category>
      </categories>
      <tags>
        <tag>jstack</tag>
      </tags>
  </entry>
  <entry>
    <title>Apache archiva Mavenç§æœ‰ä»“åº“æ­å»º</title>
    <url>/Apache-archiva/</url>
    <content><![CDATA[<h3 id="1-æ­å»º"><a href="#1-æ­å»º" class="headerlink" title="1. æ­å»º"></a>1. æ­å»º</h3><ol>
<li><p>ç¯å¢ƒå‡†å¤‡</p>
<ul>
<li>JDK 1.8</li>
<li>Apache Archiva 2.2.8 </li>
<li>Apache-maven 3.6.3 ï¼ˆ <a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a> ï¼‰</li>
</ul>
<p>  <img src="/Apache-archiva/image-20220628112607703.png" alt="image-20220628112607703"></p>
</li>
<li><p>Apache Archivaå®‰è£…æ–‡ä»¶ä¸‹è½½</p>
  <figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">archivaå®˜ç½‘åœ°å€ï¼šhttps:<span class="regexp">//</span>archiva.apache.org/index.cgi<span class="comment">#a</span></span><br><span class="line">ä¸‹è½½åœ°å€ï¼šhttps:<span class="regexp">//</span>archiva.apache.org<span class="regexp">/download.cgi  ï¼ˆè¿™ä¸ªå¤ªæ…¢äº†ï¼Œå‡ K/</span>sï¼Œå‘ï¼‰</span><br><span class="line"></span><br><span class="line">é•œåƒä»“åº“ï¼šhttps:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/apache/</span>archiva</span><br><span class="line"></span><br><span class="line">å»ºè®®ä»é•œåƒä»“åº“æ‹‰å–ï¼ï¼ï¼</span><br></pre></td></tr></table></figure>

<p>  <img src="/Apache-archiva/image-20220628111905504.png" alt="image-20220628111905504"></p>
</li>
<li><p>  å°†ä¸‹è½½çš„tar.gzåŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ç›¸åº”ä½ç½®</p>
</li>
<li><p>è§£å‹tar.gzåŒ…</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf ./apache-archiva-2.2.8-bin.tar.gz </span><br><span class="line">chmod 775 ./apache-archiva-2.2.8</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹ç«¯å£ï¼ˆ8080é»˜è®¤ï¼‰ï¼Œå¦‚ä¸éœ€è¦ï¼Œè¯·è·³è¿‡</p>
<p>  <img src="/Apache-archiva/image-20220628113033117.png" alt="image-20220628113033117"></p>
</li>
<li><p>å¯åŠ¨</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /User/xiaoyuge/maven/apache-archiva-2.2.8/bin</span><br><span class="line">./archiva start 			#æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼Œå»ºè®®ç¬¬ä¸€æ¬¡å¯åŠ¨ä½¿ç”¨ï¼š./archiva console å¯ä»¥æ‰“å°å¯åŠ¨ä¿¡æ¯</span><br><span class="line">./archiva stop				#åœæ­¢å‘½ä»¤</span><br></pre></td></tr></table></figure>

<p>  <img src="/Apache-archiva/image-20220628114117703.png" alt="image-20220628114117703"></p>
<p>  å„ç‰ˆæœ¬æ“ä½œç³»ç»Ÿä¸‹è¯¦ç»†å®‰è£…åŠæœåŠ¡æ³¨å†Œå‚ç…§ï¼š<a href="http://archiva.apache.org/docs/2.2.8/adminguide/standalone.html">http://archiva.apache.org/docs/2.2.8/adminguide/standalone.html</a></p>
</li>
</ol>
<ol start="7">
<li><p>å°† <code>archiva</code>åœ¨Centosä¸­å®‰è£…æˆæœåŠ¡(rootæ‰§è¡Œ)</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ln -sf /Users/xiaoyuge/maven/apache-archiva-2.2.8/bin/archiva /etc/init.d/archiva</span><br></pre></td></tr></table></figure>

<p>  è¿™æ ·å°±å¯ä»¥é€šè¿‡<code>service</code>å¯åŠ¨</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service archiva start</span><br><span class="line">service archiva stop</span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="8">
<li><p>å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®<code>maven</code>æœåŠ¡å™¨åœ°å€: <a href="http://ip:8080/">http://ip:8080</a></p>
<p>  <img src="/Apache-archiva/image-20220628114324543.png" alt="image-20220628114324543"></p>
</li>
<li><p>  ç‚¹å‡»å³ä¸Šè§’çš„<code>Create Admin User</code>åˆ›å»ºç®¡ç†å‘˜è´¦å·</p>
</li>
</ol>
<h2 id="2-ä¸Šä¼ ç§æœ‰jaråŒ…"><a href="#2-ä¸Šä¼ ç§æœ‰jaråŒ…" class="headerlink" title="2. ä¸Šä¼ ç§æœ‰jaråŒ…"></a>2. ä¸Šä¼ ç§æœ‰jaråŒ…</h2><ol>
<li><p>è®¿é—®ï¼š<a href="http://localhost:8080/#upload%EF%BC%8C%E4%B8%8A%E4%BC%A0%E7%A7%81%E6%9C%89jar%E5%8C%85%E5%88%B0%E4%BB%93%E5%BA%93">http://localhost:8080/#uploadï¼Œä¸Šä¼ ç§æœ‰jaråŒ…åˆ°ä»“åº“</a></p>
<ul>
<li><code>Repository Id</code> é€‰æ‹© <code>Archiva Managed Internal Repository </code>åˆ™æ˜¯æŠŠä¾èµ–ä½œä¸ºæ­£å¼ç‰ˆ. æŸ¥çœ‹åœ°å€ï¼š<a href="http://host:port/repository/internal">http://host:port/repository/internal</a></li>
<li><code>Repository Id</code> é€‰æ‹©<code>Archiva Managed Snapshot</code>åˆ™æ˜¯æŠŠä¾èµ–ä½œä¸ºå¿«ç…§ç‰ˆ.    æŸ¥çœ‹åœ°å€ï¼š<a href="http://host:port/repository/snapshots">http://host:port/repository/snapshots</a></li>
</ul>
<p>  æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¾æ¬¡æ“ä½œï¼š</p>
<p>  <img src="/Apache-archiva/image-20220628133605624.png" alt="image-20220628133605624"></p>
<p>  ä¿å­˜åï¼Œæç¤ºä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºä¸Šä¼ æˆåŠŸï¼</p>
<p>  <img src="/Apache-archiva/image-20220628133705165.png" alt="image-20220628133705165"></p>
<p>  åœ¨å·¦ä¾§èœå•æ <code>Browse</code>ä¸­æŸ¥çœ‹ä¸Šä¼ çš„jar ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>  <img src="/Apache-archiva/image-20220628134114089.png" alt="image-20220628134114089"></p>
</li>
<li><p>ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤çš„æ–¹å¼ä¸Šä¼ ï¼ˆ<a href="#setting">éœ€è¦é…ç½®maven çš„setting.xml</a>ï¼‰</p>
<p>  åœ¨<code>/Users/xiaoyuge/Desktop</code>æœ‰ä¸€ä¸ªjunit-4.13.2.jarï¼Œä½¿ç”¨<code>mvn deploy</code>å‘½ä»¤ä¸Šä¼ å¦‚ä¸‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mvn deploy:deploy-file -Dfile=/Users/xiaoyuge/Desktop/junit-4.13.2.jar -DrepositoryId=archiva-releases -DgroupId=junit -DartifactId=junit -Dversion=4.13.2 -Durl=http://localhost:8080/repository/internal</span><br></pre></td></tr></table></figure>
<p>  å‘½ä»¤è§£é‡Šï¼š</p>
<ul>
<li>-Dfile ï¼šè¦ä¸Šä¼ åˆ°ç§æœçš„jaråŒ…ï¼Œ jaråŒ…å…¨è·¯å¾„</li>
<li>-DrepositoryIdï¼š ä»“åº“IDï¼Œè¦ä¸maven çš„setting.xmlé…ç½®æ–‡ä»¶ä¸­çš„serverä¸€è‡´ï¼Œå¦åˆ™401ï¼›</li>
<li>-DgroupIdï¼š groupIdä¸»åŒ…å </li>
<li>-DartifactIdï¼š é¡¹ç›®å</li>
<li>-Dversionï¼šç‰ˆæœ¬å·</li>
<li>-Durlï¼šè¿œç¨‹ä»“åº“åœ°å€</li>
</ul>
<p>  ä¸Šä¼ ç»“æœå¦‚ä¸‹å¦‚æ‰€ç¤ºï¼š</p>
<p>  <img src="/Apache-archiva/image-20220628141000055.png" alt="image-20220628141000055"></p>
<p>  åŒæ—¶åœ¨ç§æœä»“åº“ä¸­å¯ä»¥æŸ¥çœ‹åˆ°åˆšä¸Šä¼ çš„<code>jar</code></p>
<p>  <img src="/Apache-archiva/image-20220628141111292.png" alt="image-20220628141111292"></p>
</li>
</ol>
<h2 id="3-é¡¹ç›®ä½¿ç”¨"><a href="#3-é¡¹ç›®ä½¿ç”¨" class="headerlink" title="3. é¡¹ç›®ä½¿ç”¨"></a>3. é¡¹ç›®ä½¿ç”¨</h2><p><span id="setting">é…ç½®mavenä¸­çš„setting.xmlæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</span></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>\Common\my_repository<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>archiva-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span><span class="comment">&lt;!--è¦å’Œmvnå‘½ä»¤ä¸­çš„  -DrepositoryId ä¸€è‡´--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">password</span>&gt;</span>xiaoyuge0318<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>archiva-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span><span class="comment">&lt;!--è¦å’Œmvnå‘½ä»¤ä¸­çš„  -DrepositoryId ä¸€è‡´--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">password</span>&gt;</span>xiaoyuge0318<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç§æœåœ°å€ start --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span> <span class="comment">&lt;!-- æ­£å¼ç‰ˆ --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>archiva-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line">          <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>internal<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/repository/internal<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span> <span class="comment">&lt;!-- å¿«ç…§ç‰ˆ --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>archiva-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>snapshots<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/repository/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">true <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- æ­£å¼ç‰ˆ --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>internal<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>Archiva Managed Internal Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/repository/internal<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">              <span class="comment">&lt;!-- å¿«ç…§ç‰ˆ --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>Archiva Managed Snapshots Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/repository/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ç§æœåœ°å€END --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>apache</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>kafkaå¸¸ç”¨å‘½ä»¤</title>
    <url>/kafka-command/</url>
    <content><![CDATA[<h3 id="1-è„šæœ¬æ¦‚è§ˆ"><a href="#1-è„šæœ¬æ¦‚è§ˆ" class="headerlink" title="1. è„šæœ¬æ¦‚è§ˆ"></a>1. è„šæœ¬æ¦‚è§ˆ</h3><p>binç›®å½•ä¸‹çš„è„šæœ¬ä½œç”¨</p>
<table>
<thead>
<tr>
<th align="left">è„šæœ¬</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="left">connect-distributed.sh</td>
<td align="left">ç”¨äºå¯åŠ¨å¤šèŠ‚ç‚¹çš„Distributedæ¨¡å¼çš„Kafka Connectç»„ä»¶</td>
</tr>
<tr>
<td align="left">connect-standalone.sh</td>
<td align="left">ç”¨äºå¯åŠ¨å•èŠ‚ç‚¹çš„Standaloneæ¨¡å¼çš„Kafka Connectç»„ä»¶</td>
</tr>
<tr>
<td align="left">kafka-acls.sh</td>
<td align="left">ç”¨äºè®¾ç½®Kafkaæƒé™ï¼Œæ¯”å¦‚è®¾ç½®å“ªäº›ç”¨æˆ·å¯ä»¥è®¿é—®Kafkaçš„å“ªäº›TOPICçš„æƒé™</td>
</tr>
<tr>
<td align="left">kafka-broker-api-versions.sh</td>
<td align="left">ä¸»è¦ç”¨äºéªŒè¯ä¸åŒKafkaç‰ˆæœ¬ä¹‹é—´æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„é€‚é…æ€§</td>
</tr>
<tr>
<td align="left">kafka-configs.sh</td>
<td align="left">é…ç½®ç®¡ç†è„šæœ¬</td>
</tr>
<tr>
<td align="left">kafka-console-consumer.sh</td>
<td align="left">kafkaæ¶ˆè´¹è€…æ§åˆ¶å°</td>
</tr>
<tr>
<td align="left">kafka-console-producer.sh</td>
<td align="left">kafkaç”Ÿäº§è€…æ§åˆ¶å°</td>
</tr>
<tr>
<td align="left">kafka-consumer-groups.sh</td>
<td align="left">kafkaæ¶ˆè´¹è€…ç»„ç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">kafka-consumer-perf-test.sh</td>
<td align="left">kafkaæ¶ˆè´¹è€…æ€§èƒ½æµ‹è¯•è„šæœ¬</td>
</tr>
<tr>
<td align="left">kafka-delegation-tokens.sh</td>
<td align="left">ç”¨äºç®¡ç†Delegation Tokenã€‚åŸºäºDelegation Tokençš„è®¤è¯æ˜¯ä¸€ç§è½»é‡çº§çš„è®¤è¯æœºåˆ¶ï¼Œæ˜¯å¯¹SASLè®¤è¯æœºåˆ¶çš„è¡¥å……ã€‚</td>
</tr>
<tr>
<td align="left">kafka-delete-records.sh</td>
<td align="left">ç”¨äºåˆ é™¤Kafkaçš„åˆ†åŒºæ¶ˆæ¯</td>
</tr>
<tr>
<td align="left">kafka-dump-log.sh</td>
<td align="left">ç”¨äºæŸ¥çœ‹Kafkaæ¶ˆæ¯æ–‡ä»¶çš„å†…å®¹</td>
</tr>
<tr>
<td align="left">kafka-log-dirs.sh</td>
<td align="left">ç”¨äºæŸ¥è¯¢å„ä¸ªBrokerä¸Šçš„å„ä¸ªæ—¥å¿—è·¯å¾„çš„ç£ç›˜å ç”¨æƒ…å†µ</td>
</tr>
<tr>
<td align="left">kafka-mirror-maker.sh</td>
<td align="left">ç”¨äºåœ¨Kafkaé›†ç¾¤é—´å®ç°æ•°æ®é•œåƒ</td>
</tr>
<tr>
<td align="left">kafka-preferred-replica-election.sh</td>
<td align="left">ç”¨äºæ‰§è¡ŒPreferred Leaderé€‰ä¸¾ï¼Œå¯ä»¥ä¸ºæŒ‡å®šçš„ä¸»é¢˜æ‰§è¡Œæ›´æ¢Leaderçš„æ“ä½œ</td>
</tr>
<tr>
<td align="left">kafka-producer-perf-test.sh</td>
<td align="left">kafkaç”Ÿäº§è€…æ€§èƒ½æµ‹è¯•è„šæœ¬</td>
</tr>
<tr>
<td align="left">kafka-reassign-partitions.sh</td>
<td align="left">ç”¨äºæ‰§è¡Œåˆ†åŒºå‰¯æœ¬è¿ç§»ä»¥åŠå‰¯æœ¬æ–‡ä»¶è·¯å¾„è¿ç§»ã€‚</td>
</tr>
<tr>
<td align="left">kafka-replica-verification.sh</td>
<td align="left">å¤åˆ¶è¿›åº¦éªŒè¯è„šæœ¬</td>
</tr>
<tr>
<td align="left">kafka-run-class.sh</td>
<td align="left">ç”¨äºæ‰§è¡Œä»»ä½•å¸¦mainæ–¹æ³•çš„Kafkaç±»</td>
</tr>
<tr>
<td align="left">kafka-server-start.sh</td>
<td align="left">å¯åŠ¨kafkaæœåŠ¡</td>
</tr>
<tr>
<td align="left">kafka-server-stop.sh</td>
<td align="left">åœæ­¢kafkaæœåŠ¡</td>
</tr>
<tr>
<td align="left">kafka-streams-application-reset.sh</td>
<td align="left">ç”¨äºç»™Kafka Streamsåº”ç”¨ç¨‹åºé‡è®¾ä½ç§»ï¼Œä»¥ä¾¿é‡æ–°æ¶ˆè´¹æ•°æ®</td>
</tr>
<tr>
<td align="left">kafka-topics.sh</td>
<td align="left">topicç®¡ç†è„šæœ¬</td>
</tr>
<tr>
<td align="left">kafka-verifiable-consumer.sh</td>
<td align="left">å¯æ£€éªŒçš„kafkaæ¶ˆè´¹è€…</td>
</tr>
<tr>
<td align="left">kafka-verifiable-producer.sh</td>
<td align="left">å¯æ£€éªŒçš„kafkaç”Ÿäº§è€…</td>
</tr>
<tr>
<td align="left">trogdor.sh</td>
<td align="left">Kafkaçš„æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºæ‰§è¡Œå„ç§åŸºå‡†æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•</td>
</tr>
<tr>
<td align="left">zookeeper-server-start.sh</td>
<td align="left">å¯åŠ¨zkæœåŠ¡</td>
</tr>
<tr>
<td align="left">zookeeper-server-stop.sh</td>
<td align="left">åœæ­¢zkæœåŠ¡</td>
</tr>
<tr>
<td align="left">zookeeper-shell.sh</td>
<td align="left">zkå®¢æˆ·ç«¯</td>
</tr>
</tbody></table>
<h3 id="2-BrokeræœåŠ¡"><a href="#2-BrokeræœåŠ¡" class="headerlink" title="2. BrokeræœåŠ¡"></a>2. BrokeræœåŠ¡</h3><p>1ã€å¯åŠ¨æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-server-start.sh ../config/server.properties</span><br></pre></td></tr></table></figure>
<p>2ã€åå°å¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-server-start.sh -daemon ../config/server.properties</span><br></pre></td></tr></table></figure>
<p>3ã€åœæ­¢æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-server-stop.sh ../config/server.properties</span><br></pre></td></tr></table></figure>


<h3 id="3-å…ƒæ•°æ®"><a href="#3-å…ƒæ•°æ®" class="headerlink" title="3. å…ƒæ•°æ®"></a>3. å…ƒæ•°æ®</h3><p>1ã€åˆ›å»ºtopic</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic my-test-topic</span><br></pre></td></tr></table></figure>
<p>2ã€æŸ¥çœ‹æ‰€æœ‰topic</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-topics.sh --bootstrap-server localhost:9092 --list</span><br></pre></td></tr></table></figure>


<p>ä»Kafka 2.2ç‰ˆæœ¬å¼€å§‹ï¼ŒKafkaç¤¾åŒºæ¨èç”¨â€“bootstrap-serverå‚æ•°æ›¿æ¢â€“zookeeperå‚æ•°ç”¨äºæŒ‡å®šKafka Brokerã€‚é›†ç¾¤çš„å¤šä¸ªIPç«¯å£ç”¨é€—å·,éš”å¼€</p>
<p>3ã€æŸ¥çœ‹topicè¯¦ç»†ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kafka-topics.sh --bootstrap-server localhost:9092 --describe --topic topic_name</span><br></pre></td></tr></table></figure>
<p>4ã€ç»™topicå¢åŠ åˆ†åŒºï¼ˆåªèƒ½å¢åŠ ä¸èƒ½å‡å°‘ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-topics.sh --bootstrap-server localhost:9092 --alter --topic my-test-topic --partitions 10</span><br></pre></td></tr></table></figure>
<p>5ã€åˆ é™¤topicï¼ˆæ ‡è®°åˆ é™¤ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-topics.sh --bootstrap-server localhost:9092 --delete --topic my-test-topic</span><br></pre></td></tr></table></figure>
<p>6ã€æ°¸ä¹…åˆ é™¤éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">delete.topic.enable</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>7ã€å¼ºåˆ¶åˆ é™¤TOPICçš„æ–¹æ³•ï¼š</p>
<ul>
<li>æ‰‹åŠ¨åˆ é™¤ZooKeeperèŠ‚ç‚¹/admin/delete_topicsä¸‹ä»¥å¾…åˆ é™¤TOPICä¸ºåçš„znodeã€‚ </li>
<li>æ‰‹åŠ¨åˆ é™¤TOPICåœ¨ç£ç›˜ä¸Šçš„åˆ†åŒºç›®å½•ã€‚</li>
<li>åœ¨ZooKeeperä¸­æ‰§è¡Œrmr /controllerï¼Œè§¦å‘Controlleré‡é€‰ä¸¾ï¼Œåˆ·æ–°Controllerç¼“å­˜ã€‚å¯èƒ½ä¼šé€ æˆå¤§é¢ç§¯çš„åˆ†åŒºLeaderé‡é€‰ä¸¾ã€‚å¯ä»¥ä¸æ‰§è¡Œï¼Œåªæ˜¯Controllerç¼“å­˜ä¸­æ²¡æœ‰æ¸…ç©ºå¾…åˆ é™¤TOPICï¼Œä¸å½±å“ä½¿ç”¨ã€‚</li>
</ul>
<p>8ã€ä¿®æ”¹partitionå‰¯æœ¬æ•°ï¼š</p>
<pre><code>å…ˆé…ç½®ä¸€ä¸ªreassign.jsonæ–‡ä»¶ï¼Œå†…å®¹ï¼š
ä¾‹å¦‚my-test-topicæœ‰3ä¸ªåˆ†åŒºï¼ŒåŸæ¥åªæœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œå¢åŠ åˆ°2ä¸ªå‰¯æœ¬
</code></pre>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;version&quot;</span>:<span class="number">1</span>, <span class="attr">&quot;partitions&quot;</span>:[</span><br><span class="line">&#123;<span class="attr">&quot;topic&quot;</span>:<span class="string">&quot;my-test-topic&quot;</span>,<span class="attr">&quot;partition&quot;</span>:<span class="number">0</span>,<span class="attr">&quot;replicas&quot;</span>:[<span class="number">0</span>,<span class="number">1</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">&quot;topic&quot;</span>:<span class="string">&quot;my-test-topic&quot;</span>,<span class="attr">&quot;partition&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;replicas&quot;</span>:[<span class="number">1</span>,<span class="number">2</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">&quot;topic&quot;</span>:<span class="string">&quot;my-test-topic&quot;</span>,<span class="attr">&quot;partition&quot;</span>:<span class="number">2</span>,<span class="attr">&quot;replicas&quot;</span>:[<span class="number">2</span>,<span class="number">0</span>]&#125;</span><br><span class="line">]&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œkafka-reassign-partitionsè„šæœ¬ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-reassign-partitions.sh --zookeeper localhost:2181 --reassignment-json-file reassign.json --execute</span><br></pre></td></tr></table></figure>
<h3 id="4-ç”Ÿäº§è€…"><a href="#4-ç”Ÿäº§è€…" class="headerlink" title="4. ç”Ÿäº§è€…"></a>4. ç”Ÿäº§è€…</h3><p>1ã€å‘é€æ¶ˆæ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-console-producer.sh --broker-list localhost:9092 --topic my-test-topic</span><br></pre></td></tr></table></figure>


<h3 id="5-æ¶ˆè´¹è€…"><a href="#5-æ¶ˆè´¹è€…" class="headerlink" title="5. æ¶ˆè´¹è€…"></a>5. æ¶ˆè´¹è€…</h3><p>1ã€æ¶ˆè´¹æ¶ˆæ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic my-test-topic</span><br></pre></td></tr></table></figure>

<p>2ã€æŸ¥çœ‹æ¶ˆè´¹è€…ç»„æäº¤çš„ä½ç§»æ•°æ®:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic __consumer_offsets --formatter &quot;kafka.coordinator.group.GroupMetadataManager\$OffsetsMessageFormatter&quot; --from-beginning</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…kafka 3.2.0å•æœºç‰ˆ</title>
    <url>/kafka-install/</url>
    <content><![CDATA[<h3 id="1-JDKä¾èµ–"><a href="#1-JDKä¾èµ–" class="headerlink" title="1. JDKä¾èµ–"></a>1. JDKä¾èµ–</h3><p>è¯·å‚è€ƒè¿™ç¯‡åšå®¢ï¼š<a href="https://xiaoyuge.work/jdk-install/">Linuxå®‰è£…JDKä»¥åŠé…ç½®</a></p>
<h3 id="2-ä¸‹è½½è§£å‹Kafka"><a href="#2-ä¸‹è½½è§£å‹Kafka" class="headerlink" title="2. ä¸‹è½½è§£å‹Kafka"></a>2. ä¸‹è½½è§£å‹Kafka</h3><p>ä¸‹è½½åœ°å€ï¼š<a href="https://kafka.apache.org/downloads%EF%BC%8C">https://kafka.apache.org/downloadsï¼Œ</a>  ç‚¹å‡»ç›¸åº”çš„ç‰ˆæœ¬ï¼Œä¸‹è½½Binary äºŒè¿›åˆ¶ç‰ˆæœ¬è€Œä¸æ˜¯æºç <br>æˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯3.2.0ç‰ˆæœ¬ï¼ˆ<a href="https://www.apache.org/dyn/closer.cgi?path=/kafka/3.2.0/kafka_2.12-3.2.0.tgz%EF%BC%89">https://www.apache.org/dyn/closer.cgi?path=/kafka/3.2.0/kafka_2.12-3.2.0.tgzï¼‰</a><br><img src="/kafka-install/1.png"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools</span><br><span class="line">wget https://dlcdn.apache.org/kafka/3.2.0/kafka_2.12-3.2.0.tgz</span><br><span class="line">tar -xzvf kafka_2.12-3.2.0.tgz</span><br><span class="line">cd kafka_2.12-3.2.0</span><br></pre></td></tr></table></figure>

<h3 id="3-å¯åŠ¨zookeeper-é»˜è®¤ç«¯å£2181"><a href="#3-å¯åŠ¨zookeeper-é»˜è®¤ç«¯å£2181" class="headerlink" title="3. å¯åŠ¨zookeeper(é»˜è®¤ç«¯å£2181)"></a>3. å¯åŠ¨zookeeper(é»˜è®¤ç«¯å£2181)</h3><p>kafkaéœ€è¦ä¾èµ–ZKï¼Œå®‰è£…åŒ…ä¸­å·²ç»è‡ªå¸¦äº†ä¸€ä¸ªZKï¼Œä¹Ÿå¯ä»¥æ”¹æˆæŒ‡å®šå·²è¿è¡Œçš„ZKã€‚<br>å¦‚æœæ”¹æˆæŒ‡å®šçš„ZKéœ€è¦ä¿®æ”¹ä¿®æ”¹ kafka å®‰è£…ç›®å½•ä¸‹çš„ config/server.properties æ–‡ä»¶ä¸­çš„ zookeeper.connect ã€‚è¿™é‡Œä½¿ç”¨è‡ªå¸¦çš„ZKã€‚</p>
<p>åå°å¯åŠ¨zk</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup ./bin/zookeeper-server-start.sh config/zookeeper.properties &gt;&gt; zookeeper.nohup &amp;</span><br></pre></td></tr></table></figure>
<p>æ£€æŸ¥zookeeperæ˜¯å¦å¯åŠ¨æˆåŠŸï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps -ef|grep zookeeper</span><br></pre></td></tr></table></figure>

<h3 id="4-å¯åŠ¨kafkaï¼ˆé»˜è®¤ç«¯å£9092ï¼‰"><a href="#4-å¯åŠ¨kafkaï¼ˆé»˜è®¤ç«¯å£9092ï¼‰" class="headerlink" title="4. å¯åŠ¨kafkaï¼ˆé»˜è®¤ç«¯å£9092ï¼‰"></a>4. å¯åŠ¨kafkaï¼ˆé»˜è®¤ç«¯å£9092ï¼‰</h3><ol>
<li>ä¿®æ”¹ç›¸å…³é…ç½® <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim config/server.properties</span><br></pre></td></tr></table></figure>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">broker.id</span>=<span class="string">1                 #Broker IDå¯åŠ¨ä»¥åå°±ä¸èƒ½æ”¹äº†</span></span><br><span class="line"><span class="attr">listeners</span>=<span class="string">PLAINTEXT://192.168.44.160:9092       #å–æ¶ˆæ³¨é‡Šï¼Œæ”¹æˆæœ¬æœºIPï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="meta">num.partitions</span>=<span class="string">1                #num.partitionsåé¢å¢åŠ 2è¡Œã€‚</span></span><br><span class="line"><span class="meta">auto.create.topics.enable</span>=<span class="string">true          #å‘é€åˆ°ä¸å­˜åœ¨topicè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="meta">delete.topic.enable</span>=<span class="string">true                #å…è®¸æ°¸ä¹…åˆ é™¤topic</span></span><br></pre></td></tr></table></figure></li>
<li>åå°å¯åŠ¨kafka <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> nohup ./bin/kafka-server-start.sh ./config/server.properties &amp;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–è€…</span></span><br><span class="line">./bin/kafka-server-start.sh -daemon ./config/server.properties</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-åˆ›å»ºTopic"><a href="#5-åˆ›å»ºTopic" class="headerlink" title="5. åˆ›å»ºTopic"></a>5. åˆ›å»ºTopic</h3><p>åˆ›å»ºä¸€ä¸ªåä¸º<code>gptest</code>çš„<code>topic</code>ï¼Œåªæœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œä¸€ä¸ªåˆ†åŒºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh bin/kafka-topics.sh --create --bootstrap-server localhost:2181 --replication-factor 1 --partitions 1 --topic gptest</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹å·²ç»åˆ›å»ºçš„ topicï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh bin/kafka-topics.sh -list -bootstrap-server localhost:2181</span><br></pre></td></tr></table></figure>
<p>ä»Kafka 2.2ç‰ˆæœ¬å¼€å§‹ï¼ŒKafkaç¤¾åŒºæ¨èç”¨â€“bootstrap-serverå‚æ•°æ›¿æ¢â€“zookeeperå‚æ•°ç”¨äºæŒ‡å®šKafka Brokerã€‚é›†ç¾¤çš„å¤šä¸ªIPç«¯å£ç”¨é€—å·,éš”å¼€</p>
<h3 id="5-å¯åŠ¨Producer"><a href="#5-å¯åŠ¨Producer" class="headerlink" title="5. å¯åŠ¨Producer"></a>5. å¯åŠ¨Producer</h3><p>æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œåœ¨kafkaè§£å‹ç›®å½•ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh bin/kafka-console-producer.sh --broker-list localhost:9092 --topic gptest</span><br></pre></td></tr></table></figure>


<h3 id="6-å¯åŠ¨Consumer"><a href="#6-å¯åŠ¨Consumer" class="headerlink" title="6. å¯åŠ¨Consumer"></a>6. å¯åŠ¨Consumer</h3><p>åœ¨ä¸€ä¸ªæ–°çš„è¿œç¨‹çª—å£ä¸­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic gptest --from-beginning</span><br></pre></td></tr></table></figure>

<h3 id="7-Producerçª—å£å‘é€æ¶ˆæ¯"><a href="#7-Producerçª—å£å‘é€æ¶ˆæ¯" class="headerlink" title="7. Producerçª—å£å‘é€æ¶ˆæ¯"></a>7. Producerçª—å£å‘é€æ¶ˆæ¯</h3><p>è¾“å…¥hello world å›è½¦<br><img src="/kafka-install/2.png"></p>
<p>æ¶ˆè´¹è€…æ”¶åˆ°äº†æ¶ˆæ¯ï¼š<br><img src="/kafka-install/3.png"></p>
<h3 id="8-åˆ é™¤kafkaå…¨éƒ¨æ•°æ®"><a href="#8-åˆ é™¤kafkaå…¨éƒ¨æ•°æ®" class="headerlink" title="8. åˆ é™¤kafkaå…¨éƒ¨æ•°æ®"></a>8. åˆ é™¤kafkaå…¨éƒ¨æ•°æ®</h3><p>1ã€åœæ­¢æ¯å°æœºå™¨ä¸Šçš„kafkaï¼›</p>
<p>2ã€åˆ é™¤kafkaå­˜å‚¨ç›®å½•ï¼ˆserver.propertiesæ–‡ä»¶log.dirsé…ç½®ï¼Œé»˜è®¤ä¸ºâ€œ/tmp/kafka-logsâ€ï¼‰å…¨éƒ¨topicçš„æ•°æ®ç›®å½•ï¼›</p>
<p>3ã€åˆ é™¤zookeeperä¸Šä¸kafkaç›¸å…³çš„znodeèŠ‚ç‚¹ï¼›é™¤äº†/zookeeper</p>
<p>4ã€é‡å¯kafkaã€‚</p>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…Maven 3.8.6</title>
    <url>/maven-install/</url>
    <content><![CDATA[<h3 id="1-ä¸‹è½½"><a href="#1-ä¸‹è½½" class="headerlink" title="1. ä¸‹è½½"></a>1. ä¸‹è½½</h3><ol>
<li>mavenå®˜ç½‘åœ°å€ï¼š<a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a> ï¼Œ å³é”®å¤åˆ¶é“¾æ¥åœ°å€ï¼Œwgetä¸‹è½½ï¼Œæˆ–è€…ä¸‹è½½åˆ°æœ¬åœ°å†ä¸Šä¼ åˆ°Centos</li>
<li>å¯ä»¥ä»é•œåƒä»“åº“ä¸‹è½½ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.6/binaries/">https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.6/binaries/</a> ï¼Œ<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools</span><br><span class="line">https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.8.6/binaries/apache-maven-3.8.6-bin.tar.gz</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-è§£å‹"><a href="#2-è§£å‹" class="headerlink" title="2. è§£å‹"></a>2. è§£å‹</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf apache-maven-3.8.6-bin.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="3-é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3. é…ç½®ç¯å¢ƒå˜é‡"></a>3. é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure>
<p>åœ¨æœ«å°¾å¢åŠ ä¸¤è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export MAVEN_HOME=/usr/local/tools/apache-maven-3.8.6</span><br><span class="line">export PATH=$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ç”Ÿæ•ˆ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<h3 id="4-éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ"><a href="#4-éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ" class="headerlink" title="4. éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ"></a>4. éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ç‰ˆæœ¬ä¿¡æ¯åˆ™é…ç½®æˆåŠŸ</p>
<h3 id="5-é…ç½®æœ¬åœ°ä»“åº“å’Œé•œåƒä»“åº“"><a href="#5-é…ç½®æœ¬åœ°ä»“åº“å’Œé•œåƒä»“åº“" class="headerlink" title="5. é…ç½®æœ¬åœ°ä»“åº“å’Œé•œåƒä»“åº“"></a>5. é…ç½®æœ¬åœ°ä»“åº“å’Œé•œåƒä»“åº“</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/apache-maven-3.8.6/conf</span><br><span class="line">vim setting.xml</span><br></pre></td></tr></table></figure>
<p>åœ¨ç›¸åº”æ³¨é‡Šä½ç½®æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/home/mavenRepository/<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7å®‰è£…RabbitMQå•æœºç‰ˆ</title>
    <url>/rabbitmq-standalone/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="cc310276a7901774b4b99c0da1c42cc65dab95cc8dc088fc3d276dc6e361d994">91b4a72afde41933824d9b47e790ab2759c7fe391c65e762bc3007c35c45f10895d2fbec2e1b21a2138ddfe2e48b9fe3e46e197767c91bddad1d7e5f967c5633c93c49912151dd83ab685576abf44be7a6f747d17dbe368bc4dd612a597b3628e0742ff03bb216728938ba37515cc7fdc0547958fb388e61dd26f21ea1959db79a7ec9a77f218298543751e35a50a554cd1a74fa84c18a9880141ab7d877f16298725ffbd6313506f81a8ea1be368bfc8121ab05efc8faf38e18244bcd72d9549117523d3e20bf6fa4dc88a756dfd0a0526823acc31227bc562e08299895cefc0c3a5010ba3d104d3256b3ca819e91a2cee4531613a7c23ce76d87a622c001320840a73556c5c74bb295ae8b0ed3df5075688679f2f548c592d1a0185bd55cf4b6a36aa59316dddee311313d6b1a1a86f54afc0574b50220521d9ddab97b0f9e1e088d614ddeb369688c40f8bc16f106c35ea86df837c8194b971533543261a8b9a22dc9e48b6ea438a952ae5c9912c98e16f7a199e0bd136178f4b540aa72a2221f9032d46648f13550709d557992669c3329b47019a3bd1b6aa2f3fa497b6bd1cd4c9dd1320b3946933e59a9d99272028f5f88196fe13b8405ddf8bdba53d9930d4af4644c49463f03384a91c35c0be8f01de1c7186408f41bbef4bbca097559a0a726f2d91ea0221d5dd740f03f0e49e33d2513bede53a08c564341ca1c65d28347c333053ba7f53ec81893e4bd26a39416c246d07a6961d16687af0e5b2f991f0ac171c2234fd8a4b2bb1372022e48f63750cfa8b5317d53911f5013463bb5ba4f571f1647c3bddd6b92e13d89ab60583f34fb9b456ac8a39e93fc6e0eeacbc794fe5fe9279f1b9d8d295f386516c44d50a3b7abb72a0522d7547d5a873bd80a2acaa6a5c3ff35f2e7b58b706c9d6e67dbbb364e93482eae82be0ff63ac5293ce5838f44472e56d52335a461401b27d3cd7d7dd133160f6c1439aa4443e6ee0999b5026eb62a74d94db7c8b1a6e388cdacf0d69655b0dbfb7e272640c348ca084199fc31e5887ad2be5f84e9da062d0b2fdc16806f74142d9f1c8643e00fa293c9f05da1651db0c2109727dd6ee5653f6c91c7d2dc5e75761a8a2c477e3bc260af39b111ca775f9220159dd0f11dd443787cf2fd86e7763aae694d57305829ca276f6b42f2c4fa07811679c60906e70125e154392a0d7dc38d29b7f0ba3279fd836669cde0c23acbd240fc4d8212a4843d8b2887aa2acfab3571988ae45159f0f03308b5ff692527dbebafe7ef5048d01763a8e8a02f653ca4f8e3a8c878de1412f62297c33bd5db964c8af439a43fb5032c386138d985421dd57285d1ba4ea7ba12ea7a9e08c6a804ac25f5a86ad990d4826352feae9a67e15cd1e4d7df3bae46a1d4eac064e785475ccb11af6a831af7c0d62bb1fe87743b90f778cb8c5cadf923edea2923f130e1ff1e8d57ba5e8d2700ae8cabaa18815ee4f564c5b6efebf2c7dd3c337c196110fec4bcc58dfbba96785d2eb21b1f8cb7e5b0cb80735b7f65d4b4273b6f1cf210b305e60e3c1ea91e6485af3e7aefface0ebd041266a9985f33d1a731ebd4c8be35c67a12015cfb6178ec3ef53d8e66d24f98391aef29b3a1d3657867780e2fede1df298c4388d2e3a6f48fc548697b340e907783f9b2c4279bac5001444d40dac4d5884327dbb315c52b468b3007d31fea11c7cd3b3e49bfe67babc3e55c7c7e32822368da910619bb89b7a989de0abd784ef58d84d0afb5f67b323711b58275dd4bc786465516860bd00c36e2a5180ce9ccf5683e784a28f9db7562a32b3f639c193554e1eb8e7ebc1554d518dcfde7f8de31d2e38e7b48c6ed814f3c5c6c56d053d2d294732b75f06a449723534110fa6d6a540757d1c2d04c04f107cd2ffa2dbf1738c029c4af4948e8c25bf5d12c2a3a3c5c1b3a9e5ae32e11dc5812669f3fa65192bdda45ae4c40db77c242fec8fd4a92db2ba614b3a736187bc77c9f8d15c1569138a2ca10d2bff81585a36e1ac9d5dfcb5c8523eebf8cf94f532d7d77731a8bca72bb71fc92f1b70fb9e8222e5fc1e248f9692711899e3a47533a3e914353fff9d4d6afb6d670c1290cf0d7892fa48f22b1915c8d7a94bcf2233bcd39bc4ec310a2113a5ae25e580a979aa3ae2c752e3adc4b5d6e0b3457f7e07244666fd44bd16b516ecf94fec6c02db1b98156205ece9a4b7dc07e98070b963be430c12fff2f3e4ce812f7f5e589f276c46e41069e3304789a4e9f43bae37eea7d2102d1720181ee6154225a6ca524ffa0524fffd741d8fa828582ef52b13ce62826eb6d3adf52e724738367888d0532c725a7bfe8a7b47af1027af43a9caf0f6289621ab5c508123bf7c4eb51cf314a888edafffcdee466cbea3a9b9f303ed9d10ba43e2df6e76f3854fbfd41af190c22d557cda90d50f3a08629c9fd765aee1ac28f99a8102e9c39c94397e7f461daac5a9708e1816d1bcbd8c8dc60e4c6734f5094ae3c747db53e4c38ed26e186e0418090eb5f2c163087dc4374e2c0867b43306393a4612fdcfed517dc49cfc6e11e6873a2c5a5dce13a03ae1fe64e507755bb5d8f2cb3893d4baea6160e734fde62601ad54364ac7885600ec41ed45727283b6cfaff8588ef6b4a5679a8f7459ea60073df5706521a5a21304a133e3f49647448d12a7e0acb0ae7baa10e8843d8d7a93f286cd5b86dcec9986eeac01553fe7a258d7e65916fe6fa8b0988d4d25ad0dcea973b812e16a546c33493d7175ce8f1d3b0e6e7a0d0fd0e7f3a832bc56b76556682aada8e5d4e37af0809f5c44fbd852bdaecffe395a3219679bdcddadc6352adf7da42580132d6a3bbf3ea23e13cedf64ea18df29a24f6d08f5086f13341d33de26060b199f9b1f67ec517204a584388b6d58812e77a32e28d04f21b1720d969cdafdf37e3615d556375d3ebaa6e173c8aa346684e018e10eb0a9d97ef9f2a15c1dc107788fc1a2d9cc2d5aea613c7bd4210e9fe840a892c8d1099043e6742b2d0b26ea65ed37471b43c329a7c912eb79815b55816e82719604f0724fa5d0d398986312c0f90b4c1926762bd3702a07bc022190bac43bb7a9e525199eb10a7026e14df780a2905f668cf52df17a763cf60745c415898125b19b7ab5313136136c53842973db292c75dd4d32604f04a8fb84ae154302e997bdffe257bd6f07b4f140316ca4e28c8c67b621bde931acacabd6e3cb8df95f709a40947cef6a93a6b6df6883e45bb45fb1510370594bcf946ab3e6afdfad83588705c6d2ea7cf7c968f421c6b8ef0d409c84877b00ae580192093d53372c077a17bd1781d8c2fe5499803ad7ad44704fe96c36430df7d9979dfeb2cf9d90f200a93b4dedd1302859a30bd4010725c7820c2da8f88ef174f387a4595e9c9dfa09d7644e05cff3eafad583e25fc1e16b5e3eb042148b1293694e6f80da98eda7e4f214fa6116520db81221afc2e7a248da2eabf6d7af25ff1893f6c4e7e3238aba7a732e2c120e172b47fbcdbefd4b41948e3eafca59b88d52d90f5c91046c2155f8716ac6789e9ce8a7710c48843ebdcc53025977a7446f9e56f61c988e5dd47a5e0ce0c952129bb1ee72ee850b4d2a622774017097f11a76fb961c7e17a0474fe99d87130ec58dff2003e003919f0861b08faa0e4dd5047969ced0e7faa921e70f1808fdf022f8bc953b9a04a65968727e13dabac4172c482dba37e0acabded24a400535d0113f8f8c2544e08eec29db196422a10faba2f70162823749483158a820dd12af304726871fc5fa9487539cf5d54a5fd49a4944c5a3644cc682fe41ee9ea016e71287d55ce7dad02e7729836cd914ac5bc7bacc73ff87de0c77664274e58d743c02febd782598197b761ec505db7a24247f481809353be0d0e40f93750b934c892f914ba9dd85c8e45df4d601e0637cc92cc778a972734c76673eb3629c85346ec108cfd055d685e404faf5fafc91d325a8245d28d6601264628fbf2d9839abe62cfb08d65d19a1c9c4c618b0d60bc4a70379379d7526b04719c380f4af78e0ee3edf25af86174a2446916e82d514d642c74c1e8643a48dceafe637d0eaa0cdf512fec5b9f1b00d506815b2c8ba59c7a0050ea3254fb71f7da6a9366b6d7bde1e1043d367ca38358ec07c5d2928c7d7e1c8bc0c8634c8ef4e1b8f809f6540b314ef6d08fc6da736b43d0a0e7b8a8cec69d052f8d572db3916504d0b3adcb22591a4c9f474de98e56d067616d63c45ac2f71f75bb7fa1947baa1ef8a14a4703108072e87c7c932b91ab4f98fa80aaba0168396362ff3242b93de73f3bd0e9b66b404154c6c281e1d37ef5119038aaaa56de02855fbe0f16dd3e63692082e0ba207a36129519a96aa0b0f4934612fe275551f251df71ec3d0b493b817c0bb4bec0df35fa57d04141b7a9211a0fd3e54200993fd82285bb2ec8ebd841a8729e6eff139eb87a026b341499b206179adef9951b9ce6a120e3ad4d60763d3654f5d3af7692127644916bfa6e08ad3895fee633ee8e68cf41c3bf40c13e453c7bef6ea76cdb9feac6ae7ad64ae322e694aabd985225ac4da8b58ec7561d128c0ea9f17976b27928a25d581bdea43bba8d9341fcf611d30ff992810531e839dde7507df8fe9e0270db3484147f733383162f7997ba3c198c489cc89be5b2574281589f3181daf97d8e25c359b769ce03d771e2582beb1518f8a494a107f14e9f985e5b42e6e8777f0a1897b35ddf58aaf5263d093071dd5f01822c6a0342ccfc901dd517b4d6c6d68201906bf250259f488482ec403caa4cfd2f7a4a31b8e4a540a5fec22d5e88686ccdff54e7c2f730e8777b5ea68bd65528ce58e5ade720f5e9dd4ed0739edff8ac8ebbe5693b1fe1eb90a3c152c3dd83a7bed46627d8b3070064bd916153a9e7bb9725576cf9caa7835ea4f74e1b34d992a0fc7e7670c5a3c1ab90872754b7e1f6825a225889d9cb8d3f7904a6a8a238c6e6907d7cad011fabbe85f301cde6a2405152f9cb35e5922b00ddd0232a707fd68aad9126732acf2fb6fefefa2ada212f5004e9f0952ad687ce38c5d4e0040cd021c423bb4ccadc785bca729029333289923aa95bd4f52c0331a8de2b9e93e616ccb81ae48e2dce2fe2d026a42ac5df0086e66ea2688299ef136e7f45c41d0296c9711a68decd9be5bc1cf1682431503c433422543f3b1026d588cce0d9afb1203e2d871b8c509744b2cfa0be596fb573ecc26a4c8a6ccfad9ad57eff2587c829e8eb265e12ebb6a4742921d810134aa4c54444a18014d40717af93a910a0108cda5a08d17bb659121426074e5fe2e8765ef031d5cfb935e442f0b4f118e1f8f7767f37af116a364048bd06cdbb7d3693b42156bc74649df56fe40808b1b3fbf9b9dd60a7e1cb3648af7263c683eab4b0185959bf02e514d185ef6d9d86246e086fc59abfaa66b7c59e96533f743806175141b1486fb025bcb4858e2aa16731525694a2f2c37c9646691e2e6376ddd38898106e1c23b785cd461d4247293f2dbe057ffca6cc96849e9bcf1da45240a0ae9bd96573146e531028e3bf3a2f6eb445596b1a2109c8285053c2c568d9e0a49b88beff48b800e94cbcccf5d1789e42cf94f6dac2fa4a582e101042055b4e0984b05ec4f74224a600c6a151aae752aab6001bd3a4bffb4fac0e62cddab0a3a4fef7e5e00d5da22af995c1897cfda73471f65a9781e95c086968c42b414d91bdfb1f287b1dcad0cd2e0f3db59f3774eabf5f684cd87ae7f2abcc11ee31659f00387ac95597d1432b7141c31f0b59988635c912f52043369f202b9a3dc4374101888ae8b23d6d9210d6c5e0c5f57f2a6de4314cad00c56d99d85eb62128c27c3a9f0accbae71ba5dce78c92f9a740ae1878582b222861e82670a9ca758b34f4bcf520df46450817fd0b09053544467874c72f6d08ca5ad886ea0a804fde557e5d63a12448679b7ba1d7e2e23a39584782eae7f8a817ebeca9b200f90e3da7575401ab2f1ceba14bdd6f9c7f63443323f33057ce77dda52f7055f7a84398f34eba885b631aef3bcae7e9dbb7859316455ee3c264a55ece46f946e1cea8c0873912db2c807c9fd9eff3062c31732283dc3190ad46f7f430e1107ff64f0f299b47bb04b2e8e7362f175766452b166a13280504d332e1f70a0cf03ac8e862e46e4e9c555faf8c9e4e7298a7b494da387ddf355bc0b4bbe409ccca8bc08916dd420c208c02c0fd0b53cd611276193d6170cf17307a2c7837224a18805cf9029b522cc6fd2ab145230e06ed0f8d2c0820aa94f1ecf80c07a70f47e91a18fac491a6d8d9c017a3bdc5221402550398cfdfa08af6c1e0299b7b5b46ce15a2222adf039e3f48fe9dc57ca63edf84dea770d592035ba4a5f0f9503ea90b6ee3a8d5db6dad369e0efa9996f3fd7a3653c2e7299f541096dc28e72e1ee511af45ba6f1a6afdc5c4b1c6ea67da14dd485760357c9f3f76186fa2c87c171e7d94a5a2cf229f9ca4519d38b22e87750a83922de1bdfb02dab59532aded0167d3f1ef52b7623d14de51d1bf2711cfef9ec6f2b2167c142259f049c9c96824c2245a823ccc0da547325ce1f00346906c8623f381a4f1afd6bc74d0af0994a5b9ccbbd373235806c4a9dece6976dc27ede47c2ef3dfb552ba1687168419d99eb237a8c80f635f79a824d8da7f9a7f1e85981693258757e31eb348ce8989402a019e8dd10bae2f5339649179fae20d245d5dbe891a2d11142a2c0c5995ccdf3d6c5c68d4453269b511d993c0b4cb54987931edb6a94dd8f4c1109743b71f498a8e28b2a1e9fbb1bf2f80e9d93ea820ea719a54b6403bb6fca20521fd0196688bbaf1711da647307bfd44146fae5c4d5294ab49280118e9d675d74065967f0497c1cdacc2d49fd6eea8e211dc778084efcaa51a18959bd0f9d6beb9c3f4dfe76d006ff0b783a6e0502f0f6fa1f12da7ecfd47ec4ac7d8e35bc8d57283577a3696e629067067f883effc32b57c8810c798998b115bc2744b8700d3f78fd5578a8f419c0cf3efa0cdfcee5994e0da44c2bb06e10985121c5294c1fe4c7b76d7048d3ad17a7bcdff656d966b0113c884691eda91327de79f8852d4c478efea0eba09d0152f73e74bbd086d23a812a0172637e8f0b4fa10377056cb840b9e82c5984a66e7cfa17d247b9259170330c934c926ff88564436917231e0720bcdd092eba67490b9c7142ad633cc25cef111ab1240468146724015126aefa379eda46de5c4d378c445d5c725bd1c8c8e502deef747ba91e7f70672c7064daf80919972b1ee3fa07a6fb80ef2d48fd1fb7aef4b5f818219063092014373eb53b397b55187eedb7f8361320c9d3e7a5b583302f06cd3c99d33cf42fab87d3cc2467b06994dfa3dacb49c64a0fb54fba892cbcfc30edb3076ef8403b51fa9d23a9999cd48e3674a8e3ce8b5baf4367259ccae1145539099bc3bb7d0401bc0af32fb3b70a3da8d420ed4396757e38a4a99ad87ca5815ffeeb48a22c7e922e10ba1a6d409336e8947a64cbcbbcc17af98bbee7473ffd8b4a0c011bb1bcf4559d8956f42c5b17a678a1c6a580e5b5c6dfa0b28fcabc47c3bd4ca5a49a5fb0056d804dcc01be501944a7330f4b884e683f66dd6c422a01d94e9be41c69f4928ef162d5aa5ef31d63f257fc0196520f08018bb3c245321e6d4a2769b121c0818c66227ca32197cc37e6fcfe351f64e01ce18112b9fd00d157b0e4c6cd8c98bf557d53e4e673a58b8c428cbdbacd3cfc25dfdfe41dfff7aa40691a1324a63cd431864cd2f69348d2d9eb51f85bc89ae86e7c4a98526c3218532148bb8d7b2da1cab82b221f481041096527af4dbf125c8f5b64a27ae2e9cec1f905e585aa3c196087978118ce82e4087fd421364ee9cb21c64fe304ffa4c74304685c883dac8025c5bb76bf9d5fab0275606862565263734348428919ae8411de1a02d25e5b52e193ed94f0645b10c1d82bb85e787d12065ea16e935127cabde3011aa6bd29a5d646c3362b62eedd21c5786b0db370e178ada657c0735cf8c19fb14526d29da7e4716403f18e263ab5e612fdc9aa8a7bcb820aead04d9da11d1f1b22b019ddf69101674b9dfb103cd40b3b355d4b751e77c99f115f2b5bc1a85abe8b3a1e9ccdb4817a66ec9db92283eab69c318ff227e4470d3374f5d899f40778eaf3420850bf317253e16f666df7a05db8d33f41cc62566ee06d7d6ca1ac3a57aacc0e8acf1fe5eca4b402a554f297cddd6427de736a6d75e65d166970c3be3fcabcf785752b2e089fcf02e606d4a8bec7fb8d6eb3cd782e2d46e851602c3bea7bdde9034b5ccca5735c8f40829015234abbd3257323cba1cb1bba63c69468db086903da058c97619bf36c34a0b1441b9ee6a9c10b7c71d7035e51e01875620a8daa07b95866548b6f3a767c9e4b3bca1ff6edd3fa8873ea983d15c1bb64d806355f8ee18a4ef5e880a157a43192ded96f8110d8f2c9b85eeaf538efa7b9f3a3ce6bed36a8c3a91492896889f9eb693664763a6a79df058dcf8179e7893a1842a479758e0869dbca7d31388cbc47465d6b177875d0e5b8064778b7be4466746aa1fee76a287cf6f0599a335ba1f3960f2b3011271e556519615bd2183b49a608e7ea1f99fac5dfff43531ea07952dc2b4e6b914627a06d08d173c78f9470142dad0e37c5b049306a2fc4beaf3456fc07c420ecdc9e23a6a4b894a815a78a3de407624d5a4405471ab7b3bc198dc74e94699abc845c590be3dee77175122c014921c321236b786f65d7ffe9b88228ba3f920f1393a28a42fa5c5a997966a58613191867b5cf22713e1eb810427a9550ccf213ec12180efce29b5929d9f447aedc640879b761da05e7d31faf2bc4dd1849b1388ffd20046aa7feb6fe7f24fde4d03f729af485a099d33861777d07fa298271b17780547f5dcb9c6dede39ee2f725560992bbf4206dd1515091fcd279f0f3083f9072ebf5898d337c7beb6a25479873fe077d2ea14f7ba871aad242ce452d9cdf1393b571ee0b723b166dc9e8bc9aa4696527a1ef4c5cf7ec56ad44df9eaece9aa3dd967d10a887c61650af2fd3b104dafd20ff62a4a8dd1f124d62f69db09bed01c57fbd230b61e4212075d162cf8f80a9016ea6ff9296dfa92f488b121ae2a02972ff4571e530d70a39b44e107121d7b250b1a5f71bd002be2c9617fa3eb9dff9140d0d84dfd48c260b901c7fc46610938bd272fa9cdb4fc582e90f28dc60bbd015655f5fadfffca79f40b9333f0a1542ee1ed968db657f46e16e88dd0bd088a0ed96c1b068ed9302417afdf9436119579d3b795e88146630b5072d7c90338e1f89cec7a6833f107e9723877f6a30571bc5b3094db27316714db599e028c6b8599d5b07ce9e470e1c09237918dce8db367e99e9283a6582c0e65ca4813a4fc8beb57c7aaf2ae14afb8ce66e7e85449c6de26ce54ba9c3152165652a8826ef5d0316cbf9c4517691d29e093607f42dedccc38d4085441014c6261c17855b2abee7e4b6e75b0407f9a2829a1e76c9d56a924f69879910d64cddd644a72362cbacb5d1075c8e3bfcc89dd0a40194a8bc3072527b50fa8d7d672b7a3886cf32f1452b3dc0b6fa619f83934967254a1647e51e9671ceb3e1a9f842e9b2ff0592a22f26ab13132b784c0f5248cef59bf5249ef5903f3893ebc072c8d3586bd3d0285d81c78a91e1913dd0ae761a20b47a23feaf7377eeabbb98a334267a7a98dd54efda41d0f7ac5643b2229f8b24df83032be8da9bb833c3a986c4df05f47440195f49d3d176fe41555dbbfd71b1182988c8295ce0cf1db903882913768d30ac1f063955d866c7cb238e6f7712ea9e2bfcd4590a96e54a1316de312f938fea7ae3aa6d8aa8204705c5f7d85c2148850af3b1260a22e0b740740635951510155d98793a315ef4ce81758a44dc620c44ed4a68e8f544b1528f1208666b790b72a99880292b9d892bf2fe2cd99c07415d734f4652ced38741f74921cee370ff22e097db620d64badbf1566c424bce868c2906bae45c05e67e5d1456556c71eb341871269f160dfd86d6c7811a74f5fdd3a36ba6e5cacb8137bd8e586dc13454578b36c547c658c85a55a021e05d9d508d2a89fe5762affe1e16c8580925996747bd2341d9b0a1fe0c83ef291998b31c750236c43d2abcf24e1522c16aec8103e539d2ba1356cf2313a9662e1497186ae3b167305992bf92590ef7f90b7b8c90ec1f19056db77578a2a83ba9879cc74298160b055c35c2bcc1e967ada9b3e1ec614927660263f7f59d1cf80529aecf7dc35c0545d5e9b1d9c3e86db55904152e968feceb405d7dc73293c2e840daf90c4a12577c355e680e5ab718ab58aab20244b17f56a972702bfab22f9adaffa51944f25bb95149c9f986a8a44495718bc2c5680974db25b0a09204d775b4ad1c08e39221e1f390450ac27101b75a24d7af1fbce9510b3323bdf07eaceba73ed5feef6c227c018b33c64ffae16e72d79b6abd78ea8d8881aba5586be69d68b882b630319093195e21e230b959c5536f83aadc9ea79994aac8fc9d379409c8c110c7510f1e930fa388e1c68c30fb4c95917789da3995bcddc14c3e04d5da4b9ceea5e789d708743c60f113adcc849ee0893b24f1325b050939147b9ed2c6dbc440c9410acb4faedcacc68b3470c8abfa19aca7a8fb323002dd7b1c1268217346e69996dc40652e915052cf9fbd05d58f67b211a6306c04419c2c4a9466e44eb6b16ed3f0e8d2efdb00342d09ff3ed000a042947701134d67e939960c1ca8785fcbd7eb35a49dece93a93acf69953b1012e7d7277722d7d3cd24ca8e62554a890b275961d20ccf875383a2f991b5c3b82245d21adf466af0fdbc0e0ba073103fb4cd7faeb32013d422a558589ef90d5b95aee0182218b033406d5495b3c1555ca8c34646c1b0d42433bd44873b77245683359727a1040fa5ef8f0eeeb56eddad72530869111bb0251a375f6aa43880da2f7a2915567e65c6b3a26f4a55ae03d416178334eb4539d2497c4eeb3e563e53b1b52c8edc06d7a4f5f26de525ec1d61b4218e643b9981f1369c6b8628946d4f3dddca2b04b024c3263ad051fd234f5bb44b35f402b7addf47db2489cda06efceb5cdf8e453d81262542ea0fa28e985a983bb56a847769a4d56a628e61275bfd81215118f33daf4a07340ef85549899a26fda1d851e49f375f4c33f44cb4d2c0f21c7e7a5da3f7e8bc6846ac6e9d00ef7a642f501151fc419ca0849889d967ce427ccc1827342bc5d4cead1bdb8085a9251ba61c4b18e58ba7876388fabb800214c771d508738f9e00281e84b47764a530ccfd31509bac63541030f48ddb4532e499ae17b733300c741713c8bd1f4ab8c70dae793ba76620531f7875e9081f25648d2990a8a93908c27ad28b35c7c95ebc11fdb1b56314b8d482c4ff2062b77f42a40001398f99b65937fba22170167b829768f718abebe8979812d1b0ca51ceb1fadbf4fb7cd51725cd210d442b7f1589e1facb8777c242fadd2cce0610895d525b3f19da857dfdc3527a2b0a1151385f418d91db5144e72b3a8830e29aa642515f17272b7afe581215ed3dfa8530905b047bf4dae52056910607f09c37f1171a97841068fbfc5df9718e7465f7a3e777d89875bfeb3d58a8a56953039f1a5aa3d4b8a3d1daaab7da919814675f04e77730acdb5ce97d04f1983d643318dc742bf1c61d25089ebd829d8e819d5845d41126d40f142caf3aa543e9c96b7ae9d7c7362e8550a61b9f1d495729aa2180c8c29e9f0204810fe87576df6d53e539178674b9126951732efe41ccf1f00c122a148ec8506a780f95ccd7613193d1f93668e100b630a2276d0afafa5bd11e931ee228c1aaf4e273fe06ad947ebc7483c655ce083d6256d2e54ef4de5bb7d22fa646c9029e939577339dbf0d377a48e13d54bc03df81ff6cf146b29567b32259f039817501c9dcf89ce7f213a8090f772a5b27a8e7650460e49d1caf57e15459d4aa62bed61e2df3a62caa454192df7fe23612a2326906e02e254d782a889af8e207288fbbe5aa50602f574c4b3223b862025c222d2032b2fe4cfabde58c6ea695fea85e05b13e7c76b06186975a96b7a33c9a213a619d81aee1700ef096270cc57edaf189db704b9f1f004d2f8bd7e47e374d2cecc9e84703861330f427f5028d485d804aba914f0c7b89b7976e837141fa87f5e1f84a7b42cdb2f9855088534693bdba4b91dfcd8fdb305fd26bc66b5c32ae0d221c12458da294a6fc754b1b86cec70d2318e116e982ed4dad5fb53c4f66874c6e71f15320a536c9d43c4121674ef2e2ee504fe35a7f44b278ba86b28d38f81829e7557b8c62cb420f7467f6beecb042f0fd7431d3f1d935ebb1611d040993aae13a0da191d6cc3ebb9714c5a0b7b008fbb5da071a9e1928f3f7c17a5b8759d2ea6cc42b37c09ec957287ba6ac0d07572e1684b5a07397a3e37190d85058540e96af58a34dce6cbfc234e5f008724c78d48e3eb7e7e992ac3a4584c87dbdd87fca887e0b5b6f92b48a25955678a1823b222ba5da88b018f7d8c8f5e42b019790afb1d4f51b1f6dfd6fa2fbf9676a2b12f02d3369f5de36e59abdfb530f8264abc2decab80f911ddad036e377fc40bb561cc9af839d1d9e5eb7e8962148646369cd08210caf7255d2c2ada5aa91268469079ccb921b6cdf9031c4c39beda07bb0464518612378d49a051612ce860eb7e5dfaba0b8beb56f0eb4a18299e93c6091fe7c0f978f8484e09f07853d28a5b729ef258763f3dbdcddcea6d7ae5401a12d5ab00fb6ed7b995ebfde68279fca80adcf2c8b5c808d173371c7dbceceed2b67a61f8972e8b79743fcbd04d748f1276fc4779d1e59f9a4a48da9965d040484e12f12d27aa3df9a8bb76cbf249116ac8f1e329d724884d9c0186e0b06037842d5d49e2e567f55281c85bc83244635bb7cc8c5a6a402953a60c3dd98fba67852911d7e3ef3f3939627bf71d04cd9d97531ee5021f7f7c7d3ddbf9be3104b2e811c0185d1634d35d057de29bb51543a1882e587efc13475f685c001039f83d0cee597c308f4657abf591bc1162320625aff99112701f131339862f707d5fdb2153452302febad3d8da57e6992a06fb41727cad3ad4b5847e133821ad84e1c639e9cee5b5206153d2e6e81d75427a42d224679e9fddcc88890b313b7c937920f87f22dad0faceaec7e854efcbf8f37444e554cdb0064f09ef005709261f3a848c9b61b3fb9053dc77a8865c1a81affeb3fc92545800848094ad5cffe293a753c12aa3d6ce23d67afe959f517bb07e33fd9b1eac757e91f4fa5e20a7dfc41d49b4039af15414e5225360bbcef0f7c93039d48bfa1ef9689fedccfc5348e6f2edee11e847c1ba01f91d543c0e467a6ef938b8682d4c4ccc63246c207b0568d8eda0138a3c44e2b57d0e301024c33674a4056f15041e582742bd43ee7c91274b2f7946e0d22654269d8091f6500378031cd67c518bcf730f1564d6e3e6c47603d9c9ab8ae2237b6131eb0c26f61b549fa9e24b0118335d9eed68d8f8ad0414dbd427793853c3c8ae947d87da935142db4a97f4ba5fc0051026366de5d4d08722dd4702f972b03fb4ff2d0f9ef3da35115066852b038fad5a0b4516c37e33c9c9526a42c4aa3adab624235f06f884cbd3412968aa8f230da8133eb495362af094a8b32178820f26aa7b93fc0fb383d8e6c3c5d7abf5dc21410c7df673f5abcbf13bb5e1f61ce756f8b33808c86af4b372b7154add0abbe56f2040cd49f62a94b2f82c9bbdc5e85ccf31ac91c142cd427f009f8a245ef391d0ab71856c90341714358deb004ab01f3c60095b9929b4a2217eca8fff9310a5180d1bbd767cbe9c9e4827f768825b5ff2b542fde05bead3821be885ffb3561ec0a0ab78a07cdeb4aaa36b05e905b6563a469dc742fabf1e5d4502a6f362f73118dbec2cd4ca199e04eb3c7e0a4b90c94a4c636f6de0b79c7ad644296d23036f6f94147843683f557bb85c82fefab1ce2e53e37f0f29d237bf90a9d28652b99c10bd684c19e455092b82ac598fa0ae75dafb60b612c55b1cb8da4fbda808ef42215b4ee364e227812e0ea31a5972e785e47913cd22a93bddcfd639e0ebe1d9b51ce2c9768ff124991d3a6a286e560b038e97ea1bcea0760e69a6e93c78385461d951609cc9bb15b142e7cfe6a6fdd773b1259852479b81059e9c62fdf16d28e1dc399d3264b00c2c799a268bfdab7812d7e9fd352a7b64d7d514b9345ee5eb6c3b68a2e0070ab4453204388bb69bf0f780e4ee5c35442a58205c2c5c00acd2f5fce9d99e590b12d344ab2e9f22c57479f155cfdb0259f43708f2f8ef33e368f037f5a4f4be7cd1837ac12d0c7865059d2204ae1be09ad0c2a4df2a1f64bd3d914a04f5fe910a6368a1fd6b437a442e3e93cd084a43f196954f7efc5d8404994a49f572c8ad00b1e4eba966038c92920c551648aee49e09e0460ac7c50e5b06d56867f0782a832767b1774fe2953915dcb46287ddf80329d2f2de4d5ad39da013409cd446774676bb31c915d4e0a00a6cbc561fa20e46c9411a65a56759945716500a5c549fe4ceca94de095dd02c0c6b3dd0f29e7a0e838f8ba2f6655893fcc8415e7387b9a6409f9953d2dcb2e6a0b123a4a4016f94adcfcf877f0bd275d58278500ffabe46aae4305c35ddb2a3ba5d89fd4e33e5bc93e3ebb14fc565d0674dfde0d6f20d81cacbb4ab4b3727818b1fbb3b07a413ebf8382e017cf5bbe5545a407a65d2c4d436d4ccdf57b16f19e0f246de32df0f922b6a4e342ccb793a203cec8f761efaa95eb294b89d523db6bf082d5f984c37fa6ae85fa94b17afb046900f9faa0cc427633771205281087e04d869da7ea349ad0c61ce3228d6c6fbeb3665818eb5f9fd51aa8aabb8a7c08a40883b43dd163fe4123e6c99ebf4824f8601ee2c752935c5677a3a652a9f97393a3cdfe6a52900858fe886df6a2bbfe63d30d0f7d082fae9406894c4e574380f7c60dcf44693769bb20d9cbfcf29f8b87c06d17c5cc1c0bfbd1a3926e391950a115370ed0c531be16d71d4ebf4178a6cf9683ad3d1faf18562e23b8287e16780a72a28beaf89587c7edc136c59a357e5777ca5fe87f2e0332f4317ba6512f1ea8b4acbb8824ea676efbc095f8267c4cc40bab34f77c670f6cc40bc4028dd5c25fa237037133f28fb7d600712e6fe1d95c7149dd28e6eaa707c47b8ab5b3f3a37c51cce50123b898c3473701de9ea0174f03bcb9768616a1314687e3b0356ffcf8249392b610c2a13696c4787e2852ce3c02e76f42ad40c0fe464c06d9b219f9b767a34cb2cd96838a5ddce24bfd887c8931aa99efd432075a389a4bc146e626466a02615afedd0b36b67fc4faada7154c178a992f0ef8ade126676e9f7c22432b81331f74d876b547a51ab13b5a29144f0901063607d0edc684253f7d1341d7d77d02a4caa45768312e25c69dc61e2748d7d1754a21c54a99dd021454aa0cc359c09c2393e4ea8714356b5a6c99b4b332beb04e7c80c683ac49ddf6bff7baf7fa50805e98572a57cdfee0e0b024bbfdbf0ebbcba9cb7e834f3ad4b442d869fba476c3d20b72712bf57a7a4f3368ff34c45df3ef9125899bc5a617e329cf57cff370ae9e398a48844e2b4c7b18af575829433bb5f4b3372da70c9a7f75d3a962b7b2362e4b724941f1b4b8123df3039826dee592745e95f38795842ec325874770ee0408e4561827ae5bee89b148a8c4b8b3592b1bb641ded1d6322b1ab90d1166463c1738601af3f3cd9b1a074939cf3be96b9f4100fd37455c285e652921291c63570ca6e7909e3d8856b2a31c7b3c4737227835064ecc0bd969de8951c028cb6c768538fa497184853980d6a67fbc716268bd4c6cf701956467aa0fde016922127802115c0f02f071dace176bf41181ccb952a691d79c73100d29bf50c41114b1ea1513c4ff8ed87b32981c70971890b3e658c644c329ef3fc83c25a5e64c6fd9f12fd6160854ca2f6f5a5c7f938528e72a343c6d4a55a340c35f89741e57b42e95017e0e4b7a8315ff90f2e4bdecc1f4fff1678e0ca9e914486fc9da2a8c5d0231cf6bf667636ecdb69183b66eb15a86f5f189e13c95ea8fea2755c8d2bdcbdf45590bb7db8a7dda6c3c0ec8ff74bbda0e9584de756ec771a663398765e2357a08648cb5dce2cb9862d8560c523e2ae22ed460058f1bb353a4df33a845ae8c6e0e0a0c8dc11f0ecbe58235424455310e9042ae20a1340e73f2e957f2dbfd1384d4be32078f67c5228d2308998345730a67f1eca6eb130758b3d747130b858a543041754b7f485bad8a11d8a885babb4c5af3a36cece0683923a79c266830a2c4245db20fdc638943156e950d87bb47a5f181e5c2b0d4796efc962b5eda12f0675e55ff6a267ee585a5f72b7c3fbd635ab4a4872c8f0990ba05e22fd917909bd6e1dd80bfba23717db09da68853d806b547ab07fa2420c46ca90107ee43b12f47a57711725e80c94b7af4c7e1b43880008b1b6fb600e843ab917b85a94f2f5c9e30195406505f03d0d7f2c05bc45ffa017e592bf3611b4aef4714aeb1c029b949b5c9eea0f7b99543b0576ba5703c05ccd36d6b86ed9dcf071aedf5ab7c9bf13be23088ffb6df4fcfc2b7aab5144a181ad1008a2b29faab006015fceb6e568dec6e42f90ce70708297bbf5a13088d6c5412baefd8058234feb15071a619fc18c794ca17cb7fbd1618535db2ec599a7b179cac743e462037bbb468c0f3e757699835e73f7f4340ae3fe569a3e89bae972683fc42bb8bcd5f5ddaaeff609b5e66eb2f3493cdd4d0be2a36507a92d2ded078bda1af6f6331888da5d0600f5a7b9b8e0c143ae1fc7247cafdf22184dbf545185f72a13a8642de08cb4ea3e460add00c9fdaa43aa519d24706ec80311d15e0efd4e8c4ed9c11340049bdb0bda3c176e6df6d99536efc67377f4ad1b1448c9747d5baf284dfe094107f6c9bff9af0e805cbb0eaf1fa527aca5b7945dd0dca7428ddb0844fcb8ccd14123907298f3828025df9b57ab21f5ebe74dc6083c684194f4781353494b395cac2938d9f5461d9b8895a31115bab7a5be01df761af06d7001ab3cdec7224039fedc65f36ed30adfe192363218ab5e024b783b02978e530dfa1c0bc970d8542f145dd64fc53fde51eb3217c3fa2d1df9eaec49e877262b0a4be9dc1e6328ec381416b402278ef455bc431561189f46db989496422f21ada801d9c1f2a00865cb15a834369dfc88017d5360fa03f151638677b6c2cc9acc6f88db4a360cb3b903b2cd15cebd9f49cb88263f9d85b20608b8d54ed7653bf011386a906ffd0bea2470544be601576502b3cf8914d9dc1a0a8572ae69fcea8109cfda66b9337aa53a03daa045c4fcad62b435a07431bd320bc9bdf231653a2d4862de51a2f12813a70df602b3076e30720cb28d7c293dfb5918d4a71fbabb7ba6396bd50d46aec7a19928da7468c2a1ede29e5478a307f03adaafb384db581fc45733f1507b2891c24762bd93611ade6f0135e964e4d35dfe7776087971082a3bf9dae23a6d772679d72ee43bf1e32385be1d23d4a0ffce7eb0312b5a2988809c072ef99a0c6e6b988b4513fb7863e011673b12516f96ff09e1c9774cf8d270d65c47bf6d87f3ca7cd67444a75b533bc7fbc7c1cc5c8945619a06f9ca910cec23f7e39267783fe2e10fd42d4b12f9857a3f235f087b374f7834a9fb2bca3a86937295971326c616556b4c918c77caf2cc8e0b17c3050d44d9c59ec9ac62ec626431e8939c0934c4439a7bbedf56475a7bc99797c6665b1412ed17c4e5dcbe281be593186cc87333b1d9ffbaf83fd3c5a8346b866b141a9f0f0ef3df4073b762998754a92617ada602805d4bc0f5529b201f1252155b7f44d79d6134bcc1b6d198fe4258b3d0e52842ffc10f3d4a7c180d914c6768a609512e57356fab6531b40c0a4e9481fa3e06743ffc23e87495a0ef6af75c21991e353a739f0f4aeab969e7157474809a08979ae2036f05ee53d5bd0e528ced4b8376821b0b227d92034021551094a58369b5b4d6e40220c505e94555ecd20e9c1296ea94fa688d4a3f5f1e2a30089b05daaa7d3d9421fbaad462319eefcb269c555ceda3e66e683c24f91407aa68781e4814492bc05da4e5dec00e408192bc3bfb748e5e4a47f73a944784d656e293aac04ce3d6b25218bceb83daeb3a8a990cb11fd1c1690e4680360ca3fdfb47f0a48b138537d2fcd2a95d38a62553af4496c4fdfb100aa915031cf2d3dd58ff4c918f4efb71d3713</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">Hey, password is required here.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>rabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå®‰è£…RabbitMQé›†ç¾¤</title>
    <url>/rabbitmq/</url>
    <content><![CDATA[<h3 id="1-å®‰è£…-Docker"><a href="#1-å®‰è£…-Docker" class="headerlink" title="1. å®‰è£… Docker"></a>1. å®‰è£… Docker</h3><ol>
<li>æ›´æ–°yumæºï¼ˆå¦‚æœä½ çš„ç½‘é€Ÿæ…¢è¿™ä¸€æ­¥å°±åˆ«åšäº†ï¼‰ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo yum update</span><br></pre></td></tr></table></figure></li>
<li>æ·»åŠ ä»“åº“ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></li>
<li>æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å¦‚æœä¹‹å‰å®‰è£…äº†dockerï¼Œéœ€è¦å¸è½½æ—§ç‰ˆæœ¬</span></span><br><span class="line">yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure></li>
<li>å®‰è£…Docker CEç‰ˆæœ¬ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install docker-ce -y </span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2-å®‰è£…-RabbitMQ"><a href="#2-å®‰è£…-RabbitMQ" class="headerlink" title="2. å®‰è£… RabbitMQ"></a>2. å®‰è£… RabbitMQ</h3><p>1ä¸ªç£ç›˜èŠ‚ç‚¹+2ä¸ªå†…å­˜èŠ‚ç‚¹</p>
<ol>
<li>æ‹‰å–RabbitMQé•œåƒï¼ˆå¸¦managmentï¼‰ <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker pull rabbitmq:3.7.17-management</span><br></pre></td></tr></table></figure></li>
<li>åˆ›å»ºdockerç½‘ç»œï¼ˆè®©å®¹å™¨å¯ä»¥å’Œä¸»æœºé€šä¿¡ï¼‰ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network create rabbitmqnet</span><br></pre></td></tr></table></figure></li>
<li>åˆ›å»ºä¸‰ä¸ªå®¹å™¨ï¼Œç«¯å£åˆ†åˆ«æ˜¯ 5673 5674 5675 ï¼Œç®¡ç†ç«¯å£æ˜¯ 15673 15674 15675 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">è‹±æ–‡å¼•å·</span></span><br><span class="line">docker run -d \</span><br><span class="line"> --name=rabbitmq1 \</span><br><span class="line"> -p 5673:5672 \</span><br><span class="line"> -p 15673:15672 \</span><br><span class="line"> -e RABBITMQ_NODENAME=rabbitmq1 \</span><br><span class="line"> -e RABBITMQ_ERLANG_COOKIE=&#x27;GUPAOEDUFORBETTERYOU&#x27; \</span><br><span class="line"> -h rabbitmq1 \</span><br><span class="line"> --net=rabbitmqnet \</span><br><span class="line"> rabbitmq:management</span><br></pre></td></tr></table></figure>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line"> --name=rabbitmq2 \</span><br><span class="line"> -p 5674:5672 \</span><br><span class="line"> -p 15674:15672 \</span><br><span class="line"> -e RABBITMQ_NODENAME=rabbitmq1 \</span><br><span class="line"> -e RABBITMQ_ERLANG_COOKIE=&#x27;GUPAOEDUFORBETTERYOU&#x27; \</span><br><span class="line"> -h rabbitmq2 \</span><br><span class="line"> --net=rabbitmqnet \</span><br><span class="line"> rabbitmq:management</span><br></pre></td></tr></table></figure>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line"> --name=rabbitmq3 \</span><br><span class="line"> -p 5675:5672 \</span><br><span class="line"> -p 15675:15672 \</span><br><span class="line"> -e RABBITMQ_NODENAME=rabbitmq1 \</span><br><span class="line"> -e RABBITMQ_ERLANG_COOKIE=&#x27;GUPAOEDUFORBETTERYOU&#x27; \</span><br><span class="line"> -h rabbitmq3 \</span><br><span class="line"> --net=rabbitmqnet \</span><br><span class="line"> rabbitmq:management</span><br></pre></td></tr></table></figure></li>
<li>åä¸¤ä¸ªèŠ‚ç‚¹ä½œä¸ºå†…å­˜èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it rabbitmq2 /bin/bash       #è¿›å…¥å®¹å™¨å†…éƒ¨</span><br><span class="line">rabbitmqctl stop_app              #åœæ­¢rabbitmq æœåŠ¡ </span><br><span class="line">rabbitmqctl reset           #é‡ç½®rabbitmq </span><br><span class="line">rabbitmqctl join_cluster --ram rabbitmq1@rabbitmq1          #åŠ å…¥é›†ç¾¤</span><br><span class="line">rabbitmqctl start_app         #å¯åŠ¨æœåŠ¡</span><br></pre></td></tr></table></figure>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it rabbitmq3 /bin/bash</span><br><span class="line">rabbitmqctl stop_app</span><br><span class="line">rabbitmqctl reset</span><br><span class="line">rabbitmqctl join_cluster --ram rabbitmq1@rabbitmq1</span><br><span class="line">rabbitmqctl start_app</span><br></pre></td></tr></table></figure></li>
<li>è®¿é—®ï¼š <a href="http://ip:15673/">http://ip:15673/</a>; guest/guestç™»å½•<br> <img src="/rabbitmq/1.png"></li>
</ol>
<h3 id="3-å¸¸è§é—®é¢˜"><a href="#3-å¸¸è§é—®é¢˜" class="headerlink" title="3. å¸¸è§é—®é¢˜"></a>3. å¸¸è§é—®é¢˜</h3><ol>
<li>[error] Bad characters in cookie <figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">åˆ°åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œdocker <span class="builtin-name">run</span> -d <span class="attribute">--name</span>=rabbitmq1 -p 5673:5672 -p 15673:15672 -e <span class="attribute">RABBITMQ_NODENAME</span>=rabbitmq1 -e <span class="attribute">RABBITMQ_ERLANG_COOKIE</span>=â€˜GoodGoodStudyDayDayUpâ€™ -h rabbitmq1 <span class="attribute">--net</span>=rabbitmqnet rabbitmq:management</span><br><span class="line">ç”±äºCookieçš„å¼•å·æ˜¯ä¸­æ–‡å¼•å·ï¼Œæ‰€ä»¥docker ps -a æ—¶çœ‹åˆ°Statusä¸ºExited</span><br></pre></td></tr></table></figure>
è§£å†³æ–¹æ³•ï¼šç§»é™¤å®¹å™¨ï¼ŒæŠŠcookieçš„å¼•å·æ”¹ä¸ºè‹±æ–‡å¼•å·å†æ‰§è¡Œå°±å¯ä»¥äº†</li>
</ol>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>rabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBootå‚æ•°æ ¡éªŒ</title>
    <url>/springboot-validate-params/</url>
    <content><![CDATA[<h2 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h2><p>åœ¨æ§åˆ¶å™¨ç±»çš„æ–¹æ³•é‡Œè‡ªå·±å†™æ ¡éªŒé€»è¾‘ä»£ç ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯ä¸å¤Ÿä¼˜ç¾ï¼Œä¸šç•Œæœ‰æ›´å¥½çš„å¤„ç†æ–¹æ³•ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ã€‚</p>
<h2 id="2-PathVariableæ ¡éªŒ"><a href="#2-PathVariableæ ¡éªŒ" class="headerlink" title="2. PathVariableæ ¡éªŒ"></a>2. PathVariableæ ¡éªŒ</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼é™åˆ¶group åªèƒ½æ˜¯a-zA-Z0-9_</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/path/&#123;group:[a-zA-Z0-9_]+&#125;/&#123;userid&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">path</span><span class="params">(<span class="meta">@PathVariable(&quot;group&quot;)</span> String group, <span class="meta">@PathVariable(&quot;userid&quot;)</span> Integer userid)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> group + <span class="string">&quot;:&quot;</span> + userid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“è¯·æ±‚URIä¸æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå®¢æˆ·ç«¯å°†æ”¶åˆ°404é”™è¯¯ç ï¼Œä¸æ–¹ä¾¿çš„æ˜¯ï¼Œä¸èƒ½é€šè¿‡æ•è·å¼‚å¸¸çš„æ–¹å¼ï¼Œå‘å‰ç«¯è¿”å›ç»Ÿä¸€çš„ã€è‡ªå®šä¹‰æ ¼å¼çš„å“åº”å‚æ•°</p>
<h2 id="3-æ–¹æ³•å‚æ•°æ ¡éªŒ"><a href="#3-æ–¹æ³•å‚æ•°æ ¡éªŒ" class="headerlink" title="3. æ–¹æ³•å‚æ•°æ ¡éªŒ"></a>3. æ–¹æ³•å‚æ•°æ ¡éªŒ</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/validate&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">validate1</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="meta">@Size(min = 1, max = 10, message = &quot;å§“åé•¿åº¦å¿…é¡»ä¸º1åˆ°10&quot;)</span> <span class="meta">@RequestParam(&quot;name&quot;)</span> String name,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="meta">@Min(value = 10, message = &quot;å¹´é¾„æœ€å°ä¸º10&quot;)</span> <span class="meta">@Max(value = 100, message = &quot;å¹´é¾„æœ€å¤§ä¸º100&quot;)</span> <span class="meta">@RequestParam(&quot;age&quot;)</span> Integer age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name + <span class="string">&quot;:&quot;</span> + age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨@Size ã€@Minã€@Maxç­‰æ ¡éªŒæ³¨è§£è¿›è¡Œå‚æ•°æ ¡éªŒ</p>
<p>å¦‚æœå‰ç«¯ä¼ é€’çš„å‚æ•°ä¸æ»¡è¶³è§„åˆ™ï¼Œåˆ™è·‘å‡ºå¼‚å¸¸ï¼Œä¸Šé¢ä»£ç ä¸­@sizeã€@Minã€@Maxæ³¨è§£æ¥æºäºvalidation-apiåŒ…ä¸­ã€‚<br>æ›´å¤šæ³¨è§£å‚ <a href="#index1">å‚æ•°æ ¡éªŒæ³¨è§£</a> å°èŠ‚ã€‚</p>
<h2 id="4-è¡¨å•å¯¹è±¡-VOå¯¹è±¡æ ¡éªŒ"><a href="#4-è¡¨å•å¯¹è±¡-VOå¯¹è±¡æ ¡éªŒ" class="headerlink" title="4.è¡¨å•å¯¹è±¡/VOå¯¹è±¡æ ¡éªŒ"></a>4.è¡¨å•å¯¹è±¡/VOå¯¹è±¡æ ¡éªŒ</h2><p>å½“å‚æ•°æ˜¯VOæ—¶ï¼Œå¯ä»¥åœ¨VOç±»çš„å±æ€§ä¸Šæ·»åŠ æ ¡éªŒæ³¨è§£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Size(min = 1,max = 10,message = &quot;å§“åé•¿åº¦å¿…é¡»ä¸º1åˆ°10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotEmpty</span></span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Min(value = 10,message = &quot;å¹´é¾„æœ€å°ä¸º10&quot;)</span><span class="meta">@Max(value = 100,message = &quot;å¹´é¾„æœ€å¤§ä¸º100&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Future</span></span><br><span class="line">    <span class="meta">@JSONField(format=&quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ@Futureæ³¨è§£è¦æ±‚å¿…é¡»æ˜¯ç›¸å¯¹å½“å‰æ—¶é—´æ¥è®²â€œæœªæ¥çš„â€æŸä¸ªæ—¶é—´ã€‚@Pastè¡¨ç¤ºè¿‡å»çš„æŸä¸ªæ—¶é—´</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/validate2&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">validate2</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> User user)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™"><a href="#5-è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™" class="headerlink" title="5.è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™"></a>5.è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™</h2><h3 id="5-1-è‡ªå®šä¹‰æ³¨è§£æ ¡éªŒ"><a href="#5-1-è‡ªå®šä¹‰æ³¨è§£æ ¡éªŒ" class="headerlink" title="5.1 è‡ªå®šä¹‰æ³¨è§£æ ¡éªŒ"></a>5.1 è‡ªå®šä¹‰æ³¨è§£æ ¡éªŒ</h3><p>éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ç±»å’Œä¸€ä¸ªæ ¡éªŒç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.validation.Constraint;</span><br><span class="line"><span class="keyword">import</span> javax.validation.Payload;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.PARAMETER,ElementType.FIELD&#125;)</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = FlagValidatorClass.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> FlagValidator &#123;</span><br><span class="line">    <span class="comment">// flagçš„æœ‰æ•ˆå€¼ï¼Œå¤šä¸ªä½¿ç”¨,éš”å¼€</span></span><br><span class="line">    <span class="function">String <span class="title">values</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// flagæ— æ•ˆæ—¶çš„æç¤ºå†…å®¹</span></span><br><span class="line">    <span class="function">String <span class="title">message</span><span class="params">()</span> <span class="keyword">default</span> &quot;flagå¿…é¡»æ˜¯é¢„å®šä¹‰çš„é‚£å‡ ä¸ªå€¼ï¼Œä¸èƒ½éšä¾¿å†™&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? extends Payload&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.validation.ConstraintValidator;</span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintValidatorContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlagValidatorClass</span> <span class="keyword">implements</span> <span class="title">ConstraintValidator</span>&lt;<span class="title">FlagValidator</span>,<span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * FlagValidatoræ³¨è§£è§„å®šçš„é‚£äº›æœ‰æ•ˆå€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String values;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(FlagValidator flagValidator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.values = flagValidator.values();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œå¿…é¡»æ˜¯FlagValidatoræ³¨è§£è§„å®šçš„é‚£äº›å€¼å…¶ä¸­ä¹‹ä¸€ã€‚</span></span><br><span class="line"><span class="comment">     * å¦åˆ™ï¼Œæ ¡éªŒä¸é€šè¿‡ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value ç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œå¦‚ä»å‰ç«¯ä¼ å…¥çš„æŸä¸ªå€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(Object value, ConstraintValidatorContext constraintValidatorContext)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ‡å‰²è·å–å€¼</span></span><br><span class="line">        String[] value_array = values.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        Boolean isFlag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; value_array.length; i++)&#123;</span><br><span class="line">            <span class="comment">// å­˜åœ¨ä¸€è‡´å°±è·³å‡ºå¾ªç¯</span></span><br><span class="line">            <span class="keyword">if</span> (value_array[i] .equals(value))&#123;</span><br><span class="line">                isFlag = <span class="keyword">true</span>; <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> isFlag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å‰ç«¯ä¼ å…¥çš„flagå€¼å¿…é¡»æ˜¯1æˆ–2æˆ–3ï¼Œå¦åˆ™æ ¡éªŒå¤±è´¥</span></span><br><span class="line">    <span class="meta">@FlagValidator(values = &quot;1,2,3&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String flag ;</span><br><span class="line">    <span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-2-åˆ†ç»„æ ¡éªŒ"><a href="#5-2-åˆ†ç»„æ ¡éªŒ" class="headerlink" title="5.2 åˆ†ç»„æ ¡éªŒ"></a>5.2 åˆ†ç»„æ ¡éªŒ</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Min;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Resume</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Default</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Update</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;idä¸èƒ½ä¸ºç©º&quot;, groups = Update.class)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;åå­—ä¸èƒ½ä¸ºç©º&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="meta">@Length(min = 4, max = 10, message = &quot;name é•¿åº¦å¿…é¡»åœ¨ &#123;min&#125; - &#123;max&#125; ä¹‹é—´&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å¹´é¾„ä¸èƒ½ä¸ºç©º&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="meta">@Min(value = 18, message = &quot;å¹´é¾„ä¸èƒ½å°äº18å²&quot;, groups = Default.class)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨Defaulåˆ†ç»„è¿›è¡ŒéªŒè¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resume</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/validate5&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addUser</span><span class="params">(<span class="meta">@Validated(value = Resume.Default.class)</span> <span class="meta">@RequestBody</span> Resume resume)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;validate5&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨Defaultã€Updateåˆ†ç»„è¿›è¡ŒéªŒè¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> resume</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PutMapping(&quot;/validate6&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">updateUser</span><span class="params">(<span class="meta">@Validated(value = &#123;Resume.Update.class, Resume.Default.class&#125;)</span> <span class="meta">@RequestBody</span> Resume resume)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;validate6&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å»ºç«‹äº†ä¸¤ä¸ªåˆ†ç»„ï¼Œåç§°åˆ†åˆ«ä¸ºDefaultã€Updateã€‚POSTæ–¹æ³•æäº¤æ—¶ä½¿ç”¨Defautåˆ†ç»„çš„æ ¡éªŒè§„åˆ™ï¼ŒPUTæ–¹æ³•æäº¤æ—¶åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªåˆ†ç»„è§„åˆ™ã€‚</p>
<h2 id="6-å¼‚å¸¸æ‹¦æˆªå™¨"><a href="#6-å¼‚å¸¸æ‹¦æˆªå™¨" class="headerlink" title="6. å¼‚å¸¸æ‹¦æˆªå™¨"></a>6. å¼‚å¸¸æ‹¦æˆªå™¨</h2><p>é€šè¿‡è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œç»Ÿä¸€å‘å‰ç«¯è¿”å›æ ¡éªŒå¤±è´¥ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.scj.springbootdemo.WebResult;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.CollectionUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.ObjectError;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.MethodArgumentNotValidException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintViolation;</span><br><span class="line"><span class="keyword">import</span> javax.validation.ConstraintViolationException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æ¥å¤„ç†bean validationå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ConstraintViolationException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  WebResult <span class="title">resolveConstraintViolationException</span><span class="params">(ConstraintViolationException ex)</span></span>&#123;</span><br><span class="line">        WebResult errorWebResult = <span class="keyword">new</span> WebResult(WebResult.FAILED);</span><br><span class="line">        Set&lt;ConstraintViolation&lt;?&gt;&gt; constraintViolations = ex.getConstraintViolations();</span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(constraintViolations))&#123;</span><br><span class="line">            StringBuilder msgBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">for</span>(ConstraintViolation constraintViolation :constraintViolations)&#123;</span><br><span class="line">                msgBuilder.append(constraintViolation.getMessage()).append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            String errorMessage = msgBuilder.toString();</span><br><span class="line">            <span class="keyword">if</span>(errorMessage.length()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">                errorMessage = errorMessage.substring(<span class="number">0</span>,errorMessage.length()-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            errorWebResult.setInfo(errorMessage);</span><br><span class="line">            <span class="keyword">return</span> errorWebResult;</span><br><span class="line">        &#125;</span><br><span class="line">        errorWebResult.setInfo(ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> errorWebResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebResult <span class="title">resolveMethodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException ex)</span></span>&#123;</span><br><span class="line">        WebResult errorWebResult = <span class="keyword">new</span> WebResult(WebResult.FAILED);</span><br><span class="line">        List&lt;ObjectError&gt;  objectErrors = ex.getBindingResult().getAllErrors();</span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(objectErrors)) &#123;</span><br><span class="line">            StringBuilder msgBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">for</span> (ObjectError objectError : objectErrors) &#123;</span><br><span class="line">                msgBuilder.append(objectError.getDefaultMessage()).append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            String errorMessage = msgBuilder.toString();</span><br><span class="line">            <span class="keyword">if</span> (errorMessage.length() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                errorMessage = errorMessage.substring(<span class="number">0</span>, errorMessage.length() - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            errorWebResult.setInfo(errorMessage);</span><br><span class="line">            <span class="keyword">return</span> errorWebResult;</span><br><span class="line">        &#125;</span><br><span class="line">        errorWebResult.setInfo(ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> errorWebResult;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-å‚æ•°æ ¡éªŒæ³¨è§£"><a href="#7-å‚æ•°æ ¡éªŒæ³¨è§£" class="headerlink" title="7.å‚æ•°æ ¡éªŒæ³¨è§£"></a>7.<span id="index1">å‚æ•°æ ¡éªŒæ³¨è§£</span></h2><p>Javaä¸­å‚æ•°æ ¡éªŒçš„æ³¨è§£æ¥è‡ªä¸‰ä¸ªæ–¹é¢ï¼Œåˆ†åˆ«æ˜¯</p>
<ul>
<li>javax.validation:validation-apiï¼Œå¯¹åº”åŒ…javax.validation.constraints</li>
<li>org.hibernate:hibernate-validatorï¼Œå¯¹åº”åŒ…org.hibernate.validator.constraints</li>
<li>org.springframework:spring-contextï¼Œå¯¹åº”åŒ…org.springframework.validation</li>
</ul>
<p>JSR 303 æ˜¯BeanéªŒè¯çš„è§„èŒƒ ï¼ŒHibernate Validator æ˜¯è¯¥è§„èŒƒçš„å‚è€ƒå®ç°ï¼Œå®ƒé™¤äº†å®ç°è§„èŒƒè¦æ±‚çš„æ³¨è§£å¤–ï¼Œè¿˜é¢å¤–å®ç°äº†ä¸€äº›æ³¨è§£ã€‚</p>
<h3 id="7-1-validation-apiä¸­çš„æ³¨è§£ï¼š"><a href="#7-1-validation-apiä¸­çš„æ³¨è§£ï¼š" class="headerlink" title="7.1 validation-apiä¸­çš„æ³¨è§£ï¼š"></a>7.1 validation-apiä¸­çš„æ³¨è§£ï¼š</h3><table>
<thead>
<tr>
<th align="left">é…ç½®é¡¹</th>
<th align="left">è¯´æ˜</th>
<th align="left">é€‚ç”¨ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@AssertFalse</td>
<td align="left">é™åˆ¶å¿…é¡»æ˜¯false</td>
<td align="left">boolean Booleanï¼šnot nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@AssertTrue</td>
<td align="left">é™åˆ¶å¿…é¡»æ˜¯true</td>
<td align="left">boolean Booleanï¼šnot nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@Max(value)</td>
<td align="left">é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªå°äºç­‰äºvalueæŒ‡å®šå€¼çš„æ•´æ•°ï¼Œvalueæ˜¯longå‹</td>
<td align="left">byte/short/int/long/float/doubleåŠå…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼›åŒ…è£…ç±»å¯¹è±¡not nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@Min(value)</td>
<td align="left">é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªå¤§äºç­‰äºvalueæŒ‡å®šå€¼çš„æ•´æ•°ï¼Œvalueæ˜¯longå‹</td>
<td align="left">byte/short/int/long/float/doubleåŠå…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼›åŒ…è£…ç±»å¯¹è±¡not nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@DecimalMax(value)</td>
<td align="left">é™åˆ¶å¿…é¡»å°äºç­‰äºvalueæŒ‡å®šçš„å€¼ï¼Œvalueæ˜¯longå‹</td>
<td align="left">byte/short/int/long/float/doubleåŠå…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼›åŒ…è£…ç±»å¯¹è±¡not nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@DecimalMin(value)</td>
<td align="left">é™åˆ¶å¿…é¡»å¤§äºç­‰äºvalueæŒ‡å®šçš„å€¼ï¼Œvalueæ˜¯å­—ç¬¦ä¸²ç±»å‹</td>
<td align="left">byte/short/int/long/float/doubleåŠå…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼›åŒ…è£…ç±»å¯¹è±¡not nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@Digits(integer, fraction)</td>
<td align="left">é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªå°æ•°ï¼ˆå…¶å®æ•´æ•°ä¹Ÿå¯ä»¥ï¼‰ï¼Œä¸”æ•´æ•°éƒ¨åˆ†çš„ä½æ•°ä¸èƒ½è¶…è¿‡integerï¼Œå°æ•°éƒ¨åˆ†çš„ä½æ•°ä¸èƒ½è¶…è¿‡fractionã€‚integerå’Œfractionå¯ä»¥æ˜¯0ã€‚</td>
<td align="left">byte/short/int/long/float/doubleåŠå…¶å¯¹åº”çš„åŒ…è£…ç±»ï¼›åŒ…è£…ç±»å¯¹è±¡not nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@Null</td>
<td align="left">é™åˆ¶åªèƒ½ä¸ºnull</td>
<td align="left">ä»»æ„å¯¹è±¡ç±»å‹ï¼ˆæ¯”å¦‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ã€Stringã€æšä¸¾ç±»ã€è‡ªå®šä¹‰ç±»ç­‰ï¼‰ï¼›ä¸èƒ½æ˜¯8ç§åŸºæœ¬æ•°æ®ç±»å‹</td>
</tr>
<tr>
<td align="left">@NotNull</td>
<td align="left">é™åˆ¶å¿…é¡»ä¸ä¸ºnull</td>
<td align="left">ä»»æ„ç±»å‹ï¼ˆåŒ…æ‹¬8ç§åŸºæœ¬æ•°æ®ç±»å‹åŠå…¶åŒ…è£…ç±»ã€Stringã€æšä¸¾ç±»ã€è‡ªå®šä¹‰ç±»ç­‰ï¼‰ï¼›ä½†æ˜¯å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰æ„ä¹‰</td>
</tr>
<tr>
<td align="left">@Size(min, max)</td>
<td align="left">é™åˆ¶Collectionç±»å‹æˆ–Stringçš„é•¿åº¦å¿…é¡»åœ¨minåˆ°maxä¹‹é—´ï¼ŒåŒ…å«minå’Œmax</td>
<td align="left">1.Collectionç±»å‹ï¼ˆList/Setï¼‰<br> 2.String</td>
</tr>
<tr>
<td align="left">@Pattern(regexp)</td>
<td align="left">é™åˆ¶å¿…é¡»ç¬¦åˆregexpæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</td>
<td align="left">String</td>
</tr>
<tr>
<td align="left">@Future</td>
<td align="left">é™åˆ¶å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</td>
<td align="left">Date/Calendar</td>
</tr>
<tr>
<td align="left">@Past</td>
<td align="left">é™åˆ¶å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</td>
<td align="left">Date/Calendar</td>
</tr>
<tr>
<td align="left">@Valid</td>
<td align="left">æ ¡éªŒä»»ä½•éåŸå­ç±»å‹ï¼Œæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºæ ¡éªŒå¯¹è±¡ä¸­è¢«æ³¨è§£æ ‡è®°çš„å¯¹è±¡ï¼ˆä¸æ”¯æŒåˆ†ç»„åŠŸèƒ½ï¼‰</td>
<td align="left">éœ€è¦æ ¡éªŒæˆå‘˜å˜é‡çš„å¯¹è±¡ï¼Œæ¯”å¦‚@ModelAttributeæ ‡è®°çš„æ¥å£å…¥å‚</td>
</tr>
</tbody></table>
<h3 id="7-2-hibernate-validatorä¸­çš„æ³¨è§£ï¼š"><a href="#7-2-hibernate-validatorä¸­çš„æ³¨è§£ï¼š" class="headerlink" title="7.2 hibernate-validatorä¸­çš„æ³¨è§£ï¼š"></a>7.2 hibernate-validatorä¸­çš„æ³¨è§£ï¼š</h3><p>ä¸‹é¢åˆ—ä¸¾çš„æ³¨è§£æ˜¯hibernate-validator-5.3.6ç‰ˆæœ¬çš„ã€‚</p>
<table>
<thead>
<tr>
<th align="left">é…ç½®é¡¹</th>
<th align="left">è¯´æ˜</th>
<th align="left">é€‚ç”¨ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Length(min,max)</td>
<td align="left">é™åˆ¶Stringç±»å‹é•¿åº¦å¿…é¡»åœ¨minå’Œmaxä¹‹é—´ï¼ŒåŒ…å«minå’Œmax</td>
<td align="left">String, not nullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@NotBlank</td>
<td align="left">éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼ä¸æ˜¯ç©ºç™½ï¼ˆå³ä¸æ˜¯nullï¼Œä¸”åŒ…å«éç©ºç™½å­—ç¬¦ï¼‰</td>
<td align="left">String</td>
</tr>
<tr>
<td align="left">@NotEmpty</td>
<td align="left">éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼ä¸ä¸ºnullä¸”ä¸ä¸ºç©ºï¼ˆå³å­—ç¬¦ä¸²énullä¸”é•¿åº¦ä¸ä¸º0ã€é›†åˆç±»å‹å¤§å°ä¸ä¸º0ï¼‰</td>
<td align="left">1.Collectionç±»å‹ï¼ˆList/Setï¼‰<br> 2.String</td>
</tr>
<tr>
<td align="left">@Range(min,max)</td>
<td align="left">éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼åœ¨æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´</td>
<td align="left">1. String(æ•°å­—ç±»å‹çš„å­—ç¬¦ä¸²)ï¼Œénullæ—¶æ‰æ ¡éªŒ <br>  2. byte/short/int/long/float/doubleåŠå…¶åŒ…è£…ç±»ï¼ŒåŒ…è£…ç±»énullæ—¶æ‰æ ¡éªŒ</td>
</tr>
<tr>
<td align="left">@Email(regexp)</td>
<td align="left">éªŒè¯æ³¨è§£çš„å­—ç¬¦ä¸²ç¬¦åˆé‚®ç®±çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨regexpè‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼</td>
<td align="left">String</td>
</tr>
<tr>
<td align="left">@CreditCardNumber</td>
<td align="left">éªŒè¯é“¶è¡Œå€Ÿè®°å¡ã€ä¿¡ç”¨å¡çš„å¡å·</td>
<td align="left">Stringï¼ˆä¸èƒ½åŒ…å«ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦ï¼‰</td>
</tr>
</tbody></table>
<h3 id="7-3-spring-contextä¸­çš„æ³¨è§£ï¼š"><a href="#7-3-spring-contextä¸­çš„æ³¨è§£ï¼š" class="headerlink" title="7.3 spring-contextä¸­çš„æ³¨è§£ï¼š"></a>7.3 spring-contextä¸­çš„æ³¨è§£ï¼š</h3><table>
<thead>
<tr>
<th align="left">é…ç½®é¡¹</th>
<th align="left">è¯´æ˜</th>
<th align="left">é€‚ç”¨ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@Validated</td>
<td align="left">æ ¡éªŒéåŸå­ç±»å‹å¯¹è±¡ï¼Œæˆ–å¯ç”¨ç±»ä¸­åŸå­ç±»å‹å‚æ•°çš„æ ¡éªŒï¼ˆæ”¯æŒåˆ†ç»„æ ¡éªŒï¼›åªæ ¡éªŒåŒ…å«æŒ‡å®šåˆ†ç»„çš„æ³¨è§£å‚æ•°ï¼‰</td>
<td align="left">1. Controllerç±»  <br> 2. @ModelAttribueæ ‡è®°çš„æŸ¥è¯¢æ¡ä»¶å¯¹è±¡ç±» <br>3. @RequestBodyæ ‡è®°çš„è¯·æ±‚ä½“å¯¹è±¡ç±»</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="7-4-æ³¨è§£çš„å¯ç”¨"><a href="#7-4-æ³¨è§£çš„å¯ç”¨" class="headerlink" title="7.4 æ³¨è§£çš„å¯ç”¨"></a>7.4 æ³¨è§£çš„å¯ç”¨</h3><ol>
<li>æ–¹æ³•ä¸­å¯¹è±¡å‚æ•°ä¸­æˆå‘˜å˜é‡æ ¡éªŒæ³¨è§£çš„ç”Ÿæ•ˆæ¡ä»¶<ul>
<li>@ModelAttributeæ ‡è®°çš„æŸ¥è¯¢æ¡ä»¶ç±»å‚æ•°ï¼Œéœ€è¦åŒæ—¶ç”¨@Validæˆ–@Validatedæ ‡è®°ï¼Œç±»ä¸­çš„æ³¨è§£æ ¡éªŒæ‰ä¼šç”Ÿæ•ˆ</li>
<li>@RequestBodyæ ‡è®°çš„è¯·æ±‚ä½“å¯¹è±¡å‚æ•°ï¼Œéœ€è¦åŒæ—¶ç”¨@Validæˆ–@Validatedæ ‡è®°ï¼Œç±»ä¸­çš„æ³¨è§£æ ¡éªŒæ‰ä¼šç”Ÿæ•ˆ</li>
<li>@Validæˆ–@Validatedæ ‡è®°åœ¨æ–¹æ³•æˆ–æ–¹æ³•æ‰€å±ç±»ä¸Šæ— æ•ˆ</li>
</ul>
</li>
<li>æ–¹æ³•ä¸­åŸå­ç±»å‹å‚æ•°æ ¡éªŒæ³¨è§£çš„ç”Ÿæ•ˆæ¡ä»¶<ul>
<li>@Validatedæ ‡è®°åœ¨æ–¹æ³•æ‰€å±ç±»ä¸Š</li>
</ul>
</li>
<li>æŒ‰ç…§åˆ†ç»„å¯ç”¨<ul>
<li>åœ¨æ³¨è§£ä¸­ä½¿ç”¨groupsæ·»åŠ å¯ç”¨æ³¨è§£çš„åˆ†ç»„</li>
<li>åœ¨@Validatedä¸­æŒ‡å®šå¯ç”¨çš„åˆ†ç»„</li>
</ul>
</li>
</ol>
<p>åšå®¢å‚è€ƒåœ°å€ï¼š<a href="https://mp.weixin.qq.com/s/0VX6lLS133CA4NFCVOHhhw">https://mp.weixin.qq.com/s/0VX6lLS133CA4NFCVOHhhw</a></p>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>VMWareåˆ›å»ºè™šæ‹Ÿæœºå¹¶è®¾ç½®é™æ€IP</title>
    <url>/static-ip-setting/</url>
    <content><![CDATA[<h2 id="1-VMware-Centos7-é™æ€IPè®¾ç½®"><a href="#1-VMware-Centos7-é™æ€IPè®¾ç½®" class="headerlink" title="1. VMware+Centos7 é™æ€IPè®¾ç½®"></a>1. VMware+Centos7 é™æ€IPè®¾ç½®</h2><h3 id="1-1-VMwareè®¾ç½®"><a href="#1-1-VMwareè®¾ç½®" class="headerlink" title="1.1 VMwareè®¾ç½®"></a>1.1 VMwareè®¾ç½®</h3><p>çœç•¥windowså®‰è£…VMWareçš„è¿‡ç¨‹ã€‚</p>
<ol>
<li>æŸ¥çœ‹è™šæ‹Ÿç½‘å¡ä¿¡æ¯è™šæ‹Ÿæœºå®‰è£…å¥½ä»¥åï¼Œå½“å‰çš„ç³»ç»Ÿä¼šå¤šå‡ºæ¥ä¸¤ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸¤ä¸ªç½‘å¡çš„å‘½åæ˜¯ <figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">VMware</span> Virtual Ethernet Adapter for VMnet<span class="number">1</span></span><br><span class="line"><span class="attribute">VMware</span> Virtual Ethernet Adapter for VMnet<span class="number">8</span></span><br></pre></td></tr></table></figure>
æˆ‘ä»¬å¯ä»¥æŠŠè™šæ‹Ÿæœºä¸­çš„ç³»ç»Ÿçš„é™æ€IPç»‘å®šåˆ°VMnet8ä¸Šï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥æˆ‘ä»¬çœ‹ä¸€ä¸‹VMnet8çš„ipåœ°å€</li>
</ol>
<ol start="2">
<li><p>æŸ¥çœ‹è™šæ‹Ÿç½‘å¡IP</p>
<p>åœ¨å½“å‰æ“ä½œç³»ç»Ÿä¸­ï¼Œè¾“å…¥<code>ipconfig -all</code>æ˜¾ç¤ºç½‘å¡çš„IPä¿¡æ¯å¦‚ä¸‹<br><img src="/static-ip-setting/1.png"><br>è®°ä½å½“å‰VMnet8ç½‘å¡çš„ç½‘æ®µï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œç½‘æ®µä¸º:<code>192.168.8</code></p>
</li>
<li><p>è™šæ‹Ÿæœºè®¾ç½®</p>
<p>æ‰“å¼€VMwareï¼Œè¿›å…¥<code>ç¼–è¾‘ -&gt; è™šæ‹Ÿæœºç½‘ç»œç¼–è¾‘å™¨</code><br><img src="/static-ip-setting/2.png"><br>é€‰ä¸­VMnet8è¿™ä¸ªç½‘å¡ï¼Œç‚¹å‡»<code>NAT</code>è®¾ç½®<br><img src="/static-ip-setting/3.png"></p>
<p>åœ¨NATè®¾ç½®ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å­ç½‘IPã€ç½‘å…³IPç­‰ä¿¡æ¯ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠç½‘å…³IPè®°å½•ä¸‹æ¥ï¼š <code>192.168.8.2</code><br><img src="/static-ip-setting/4.png"></p>
</li>
<li><p>è®¾ç½®è™šæ‹Ÿæœºçš„ç½‘ç»œè¿æ¥æ–¹å¼   </p>
<p>é€‰ä¸­åˆ›å»ºå¥½çš„è™šæ‹Ÿæœºï¼Œå³é”®<code>è®¾ç½®</code>è¿›å…¥è™šæ‹Ÿæœºè®¾ç½®é¢æ¿ã€‚<br>å°†ç½‘ç»œç¤¾é…ç½®è®¾ç½®ä¸º<code>è‡ªå®šä¹‰</code>ï¼Œé€‰ä¸­<code>VMnet8</code>è¿™ä¸ªç½‘å¡ä¿å­˜<br><img src="/static-ip-setting/5.png"></p>
</li>
</ol>
<h3 id="1-2-Centos7ä¸­çš„é™æ€ipè®¾ç½®"><a href="#1-2-Centos7ä¸­çš„é™æ€ipè®¾ç½®" class="headerlink" title="1.2 Centos7ä¸­çš„é™æ€ipè®¾ç½®"></a>1.2 Centos7ä¸­çš„é™æ€ipè®¾ç½®</h3><p>å‰ç½®å·¥ä½œå®Œæˆä¹‹åï¼Œå°±å¼€å§‹è¿›å…¥è™šæ‹Ÿæœºçš„è®¾ç½®ç¯èŠ‚äº†</p>
<ol>
<li><p>æ‰¾åˆ°ç½‘å¡ä¿¡æ¯é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure>
<p><img src="/static-ip-setting/6.png"><br>æ‰¾åˆ°ç½‘å¡åç§°<code>ens33</code>ï¼Œè¾“å…¥å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹é…ç½®</p>
<p>è¿™ä¸ªé…ç½®éœ€è¦ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ </p>
<ul>
<li>è®¾ç½®BOOTPROTO=â€œstaticâ€</li>
<li>æ·»åŠ IPADDR/NETMASK/DNS1/GATEWAYè¿™å‡ ä¸ªé…ç½®<br><img src="/static-ip-setting/7.png"></li>
</ul>
<p>é…ç½®è¯´æ˜</p>
<ul>
<li>IPADDR å°±æ˜¯å½“å‰è™šæ‹Ÿæœºè¦è®¾ç½®çš„å›ºå®šipåœ°å€ï¼Œç½‘æ®µè¦ä¸€è‡´ï¼Œæˆ‘è¿™è¾¹çš„æ¡ˆä¾‹æ˜¯åœ¨8ç½‘æ®µ(è¿™ä¸ªç½‘æ®µæ˜¯<code>VMnet8</code>å¯¹åº”çš„å­ç½‘ç½‘æ®µï¼Œä¸æ˜¯çœŸå®æœºä¸Šçš„ç½‘æ®µï¼‰ã€‚</li>
<li>NETMASK å­ç½‘æ©ç  ç”¨<code>VMnet8</code>å¯¹åº”çš„å­ç½‘æ©ç å€¼å°±è¡Œ</li>
<li>DNS1 åœ¨çœŸå®æœºå™¨ä¸Šé€šè¿‡<code>ipconfig</code>ï¼Œè·å¾—çœŸå®æœºå™¨çš„ç½‘å¡å¯¹åº”çš„DNSåœ°å€ï¼Œå¡«åœ¨è¿™ä¸ªä½ç½®</li>
<li>GATEWAY ç½‘å…³åœ°å€ï¼Œç”¨å‰é¢ç¬¬äºŒä¸ªæ­¥éª¤ä¸­æ‰¾åˆ°çš„ç½‘å…³åœ°å€ï¼š 192.168.8.2</li>
</ul>
</li>
<li><p>é‡å¯ç½‘ç»œæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="1-3-å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"><a href="#1-3-å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜" class="headerlink" title="1.3 å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"></a>1.3 å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜</h3><ol>
<li><p><code>VMnet8</code>çš„ç½‘æ®µå’ŒçœŸå®æœºå™¨ä¸Šçš„ç½‘æ®µä¸ä¸€æ ·</p>
<p>çœŸå®æœºå™¨çš„ç½‘æ®µæ˜¯8ï¼Œ è€Œ<code>VMnet8</code>çš„ç½‘æ®µæ˜¯136. ç”±äºç½‘æ®µä¸ä¸€è‡´ï¼Œå°±ä¼šå­˜åœ¨ç½‘ç»œä¸é€šçš„é—®é¢˜ã€‚æ‰€ä»¥ç¬¬ä¸€æ­¥ï¼Œåº”è¯¥æ˜¯æŠŠVMnet8è¿™ä¸ªç½‘å¡çš„ç½‘æ®µé‡æ–°è®¾ç½®ï¼Œ</p>
<p>è¿›å…¥VMwareï¼Œ æ‰¾åˆ° <code>ç¼–è¾‘ -&gt;è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨</code><br><img src="/static-ip-setting/8.png"></p>
<p>ç‚¹å‡»<code>æ›´æ”¹è®¾ç½®</code></p>
<p><img src="/static-ip-setting/9.png"><br>ä¿®æ”¹å­ç½‘IPï¼ŒåŸæœ¬çš„ç½‘æ®µæ˜¯136ï¼Œ æ”¹æˆ8ç½‘æ®µã€‚ ä¿å­˜ä»¥åï¼Œæ”¹ç½‘å¡ä¼šè‡ªåŠ¨é‡å¯</p>
</li>
<li><p>çœŸå®æœºå™¨æ— æ³•Pingé€šè™šæ‹Ÿæœº</p>
<ul>
<li><p>åŸå› 1ï¼š è™šæ‹Ÿæœºçš„ç½‘æ®µè®¾ç½®ä¸æ­£ç¡®ï¼Œè¿™ä¸ªç½‘æ®µä¸æ˜¯çœŸå®æœºå™¨çš„ç½‘æ®µï¼Œè€Œæ˜¯<code>VMnet8</code> NATæ¨¡å¼å¯¹åº”çš„ç½‘æ®µï¼Œæœ¬æ¡ˆä¾‹ä¸­çš„ç½‘æ®µæ˜¯8.</p>
</li>
<li><p>åŸå› 2ï¼šè™šæ‹Ÿæœºè¿ç§»è¿‡ï¼ŒåŸæœ¬è®¾ç½®çš„ç½‘æ®µåœ¨æ–°çš„ç½‘ç»œä¸­æ— æ•ˆï¼Œå¯ä»¥åœ¨VMwareè¿™ä¸ªå·¥å…·çš„å¦‚ä¸‹èœå•å¤„</p>
<pre><code>ç¼–è¾‘ -&gt; è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨
è¿˜åŸé»˜è®¤è®¾ç½®ï¼Œè¿™ä¸ªè¿˜åŸæ“ä½œä¼šé‡å»ºè™šæ‹Ÿç½‘å¡ï¼Œ é‡å»ºä¹‹åï¼ŒVMware NATæ¨¡å¼çš„å­ç½‘åœ°å€çš„ç½‘æ®µä¼šå‘ç”Ÿå˜åŒ–ã€‚åç»­çš„é…ç½®é‡‡ç”¨è¿™ä¸ªç½‘æ®µå°±è¡Œ
</code></pre>
<p><img src="/static-ip-setting/10.png"></p>
</li>
</ul>
</li>
</ol>
<h2 id="2-Macç”¨VMWareåˆ›å»ºè™šæ‹Ÿæœºå¹¶è®¾ç½®é™æ€IP"><a href="#2-Macç”¨VMWareåˆ›å»ºè™šæ‹Ÿæœºå¹¶è®¾ç½®é™æ€IP" class="headerlink" title="2. Macç”¨VMWareåˆ›å»ºè™šæ‹Ÿæœºå¹¶è®¾ç½®é™æ€IP"></a>2. Macç”¨VMWareåˆ›å»ºè™šæ‹Ÿæœºå¹¶è®¾ç½®é™æ€IP</h2><p>   å‚è€ƒåšå®¢ï¼š<a href="https://blog.51cto.com/u_15298624/3033418">https://blog.51cto.com/u_15298624/3033418</a></p>
]]></content>
      <categories>
        <category>ç»éªŒåˆ†äº«</category>
      </categories>
      <tags>
        <tag>ip</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueå­¦ä¹ </title>
    <url>/vue-1/</url>
    <content><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯vue"><a href="#1-ä»€ä¹ˆæ˜¯vue" class="headerlink" title="1. ä»€ä¹ˆæ˜¯vue"></a>1. ä»€ä¹ˆæ˜¯vue</h2><p>vue å®˜ç½‘ï¼š<a href="https://cn.vuejs.org/">https://cn.vuejs.org/</a><br>æ¸è¿›å¼æ¡†æ¶ï¼Œ</p>
<h2 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2.å®‰è£…"></a>2.å®‰è£…</h2><ol>
<li><p>å®‰è£… <code>npm</code><br><code>npm</code> å…¨ç§°ä¸º <code>Node Package Manager</code>ï¼Œæ˜¯ä¸€ä¸ªåŸºäº<code>Node.js</code>çš„åŒ…ç®¡ç†å™¨ï¼Œä¹Ÿæ˜¯æ•´ä¸ª<code>Node.js</code>ç¤¾åŒºæœ€æµè¡Œã€æ”¯æŒçš„ç¬¬ä¸‰æ–¹æ¨¡å—æœ€å¤šçš„åŒ…ç®¡ç†å™¨ã€‚</p>
 <figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">npm</span> -v</span><br></pre></td></tr></table></figure></li>
<li><p>ç”±äºç½‘ç»œåŸå›  å®‰è£… <code>cnpm</code></p>
 <figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ—§ç‰ˆï¼Œcnpmå®˜æ–¹å…¬å‘Šå°†åœ¨2022å¹´6æœˆ30æ—¥åœæ­¢è€åŸŸåè§£æ</span></span><br><span class="line">npm install -g cnpm --registry=https:<span class="regexp">//</span>registry.npm.taobao.org</span><br><span class="line">   </span><br><span class="line"><span class="comment">#æ–°ç‰ˆ</span></span><br><span class="line">npm install -g cnpm --registry=https:<span class="regexp">//</span>registry.npmmirror.com</span><br></pre></td></tr></table></figure></li>
<li><p>å®‰è£… <code>vue-cli</code></p>
 <figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line">cnpm install -g <span class="meta">@vue</span>/cli</span><br></pre></td></tr></table></figure></li>
<li><p>å®‰è£… <code>webpack</code></p>
<p> <code>webpack</code> æ˜¯  <code>JavaScript</code> æ‰“åŒ…å™¨(module bundler)</p>
 <figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">cnpm <span class="keyword">install</span> -g webpack</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="3-Vueç»ƒä¹ "><a href="#3-Vueç»ƒä¹ " class="headerlink" title="3  Vueç»ƒä¹ "></a>3  Vueç»ƒä¹ </h2><h3 id="3-1-Vueå®ä¾‹"><a href="#3-1-Vueå®ä¾‹" class="headerlink" title="3.1 Vueå®ä¾‹"></a>3.1 Vueå®ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt; &#123;&#123; message &#125;&#125; &#123;&#123; name &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    var data = &#123;</span><br><span class="line">        message: &#x27;hello world&#x27;,</span><br><span class="line">        name: &#x27;xiaoyuge&#x27;</span><br><span class="line">    &#125;;</span><br><span class="line">    //view model æ•°æ®æ¨¡å‹ vm</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &#x27;#app&#x27;,</span><br><span class="line">        //å¦‚æœè¦æŸä¸€ä¸ªå±æ€§å£°æ˜å¼å“åº”ï¼Œå¿…é¡»åœ¨new vueçš„æ—¶å€™å£°æ˜</span><br><span class="line">        data: data</span><br><span class="line">    &#125;);</span><br><span class="line">    //vm.$data.message =  data.message == vm.message;</span><br><span class="line">    //å®ä¾‹åˆ›å»ºä¹‹åï¼Œå¯ä»¥é€šè¿‡ vm.$data è®¿é—®åŸå§‹æ•°æ®å¯¹è±¡ã€‚Vue å®ä¾‹ä¹Ÿä»£ç†äº† data å¯¹è±¡ä¸Šæ‰€æœ‰çš„ propertyï¼Œå› æ­¤è®¿é—® vm.message ç­‰ä»·äºè®¿é—® vm.$data.message</span><br><span class="line">    vm.$watch(&#x27;message&#x27;, function(newVal, oldVal) &#123;</span><br><span class="line">        console.log(newVal, oldVal);</span><br><span class="line">    &#125;)</span><br><span class="line">    //ä¿®æ”¹å€¼å¿…é¡»æ”¾åˆ°åé¢ï¼Œ</span><br><span class="line">    vm.$data.message = &quot;test....&quot;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-æ•°æ®å’Œæ–¹æ³•"><a href="#3-2-æ•°æ®å’Œæ–¹æ³•" class="headerlink" title="3.2 æ•°æ®å’Œæ–¹æ³•"></a>3.2 æ•°æ®å’Œæ–¹æ³•</h3><p>å½“ä¸€ä¸ª Vue å®ä¾‹è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå°† data å¯¹è±¡ä¸­çš„æ‰€æœ‰çš„ property åŠ å…¥åˆ° Vue çš„å“åº”å¼ç³»ç»Ÿä¸­ã€‚å½“è¿™äº› property çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§†å›¾å°†ä¼šäº§ç”Ÿâ€œå“åº”â€ï¼Œå³åŒ¹é…æ›´æ–°ä¸ºæ–°çš„å€¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬çš„æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> data = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯¥å¯¹è±¡è¢«åŠ å…¥åˆ°ä¸€ä¸ª Vue å®ä¾‹ä¸­</span></span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">data</span>: data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å¾—è¿™ä¸ªå®ä¾‹ä¸Šçš„ property</span></span><br><span class="line"><span class="comment">// è¿”å›æºæ•°æ®ä¸­å¯¹åº”çš„å­—æ®µ</span></span><br><span class="line">vm.a == data.a <span class="comment">// =&gt; true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½® property ä¹Ÿä¼šå½±å“åˆ°åŸå§‹æ•°æ®</span></span><br><span class="line">vm.a = <span class="number">2</span></span><br><span class="line">data.a <span class="comment">// =&gt; 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// â€¦â€¦åä¹‹äº¦ç„¶</span></span><br><span class="line">data.a = <span class="number">3</span></span><br><span class="line">vm.a <span class="comment">// =&gt; 3</span></span><br></pre></td></tr></table></figure>
<p>å½“è¿™äº›æ•°æ®æ”¹å˜æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œé‡æ¸²æŸ“ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯åªæœ‰å½“å®ä¾‹è¢«åˆ›å»ºæ—¶å°±å·²ç»å­˜åœ¨äº data ä¸­çš„ property æ‰æ˜¯å“åº”å¼çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ æ·»åŠ ä¸€ä¸ªæ–°çš„ propertyï¼Œæ¯”å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vm.b = &#x27;hi&#x27;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå¯¹ b çš„æ”¹åŠ¨å°†ä¸ä¼šè§¦å‘ä»»ä½•è§†å›¾çš„æ›´æ–°ã€‚å¦‚æœä½ çŸ¥é“ä½ ä¼šåœ¨æ™šäº›æ—¶å€™éœ€è¦ä¸€ä¸ª propertyï¼Œä½†æ˜¯ä¸€å¼€å§‹å®ƒä¸ºç©ºæˆ–ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä½ ä»…éœ€è¦è®¾ç½®ä¸€äº›åˆå§‹å€¼ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">  newTodoText: &#x27;&#x27;,</span><br><span class="line">  visitCount: 0,</span><br><span class="line">  hideCompletedTodos: false,</span><br><span class="line">  todos: [],</span><br><span class="line">  error: null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯ä½¿ç”¨ Object.freeze()ï¼Œè¿™ä¼šé˜»æ­¢ä¿®æ”¹ç°æœ‰çš„ propertyï¼Œä¹Ÿæ„å‘³ç€å“åº”ç³»ç»Ÿæ— æ³•å†è¿½è¸ªå˜åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; foo &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;!-- è¿™é‡Œçš„ `foo` ä¸ä¼šæ›´æ–°ï¼ --&gt;</span><br><span class="line">    &lt;button v-on:click=&quot;foo = &#x27;baz&#x27;&quot;&gt;Change it&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var obj = &#123;</span><br><span class="line">  foo: &#x27;bar&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Object.freeze(obj)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &#x27;#app&#x27;,</span><br><span class="line">  data: obj</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>é™¤äº†æ•°æ® propertyï¼ŒVue å®ä¾‹è¿˜æš´éœ²äº†ä¸€äº›æœ‰ç”¨çš„å®ä¾‹ property ä¸æ–¹æ³•ã€‚å®ƒä»¬éƒ½æœ‰å‰ç¼€ $ï¼Œä»¥ä¾¿ä¸ç”¨æˆ·å®šä¹‰çš„ property åŒºåˆ†å¼€æ¥ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var data = &#123; a: 1 &#125;</span><br><span class="line">var vm = new Vue(&#123;</span><br><span class="line">  el: &#x27;#example&#x27;,</span><br><span class="line">  data: data</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">vm.$data === data // =&gt; true</span><br><span class="line">vm.$el === document.getElementById(&#x27;example&#x27;) // =&gt; true</span><br><span class="line"></span><br><span class="line">// $watch æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•</span><br><span class="line">vm.$watch(&#x27;a&#x27;, function (newValue, oldValue) &#123;</span><br><span class="line">  // è¿™ä¸ªå›è°ƒå°†åœ¨ `vm.a` æ”¹å˜åè°ƒç”¨</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="2-3-ç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#2-3-ç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="2.3 ç”Ÿå‘½å‘¨æœŸé’©å­"></a>2.3 ç”Ÿå‘½å‘¨æœŸé’©å­</h3><p>Vue å®ä¾‹ä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚ä¹Ÿå°±æ˜¯ä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½Domâ†’æ¸²æŸ“ã€æ›´æ–°â†’æ¸²æŸ“ã€å¸è½½ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°è¿™æ˜¯ Vue çš„ç”Ÿå‘½å‘¨æœŸ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &#123;&#123;msg&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &quot;#app&quot;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            msg: &quot;hi vue&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        //åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ (data observer) å’Œ event/watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ã€‚</span><br><span class="line">        beforeCreate: function() &#123;</span><br><span class="line">            console.log(&#x27;beforeCreate&#x27;);</span><br><span class="line">        &#125;,</span><br><span class="line">        //åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨ã€‚</span><br><span class="line">        // åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®è§‚æµ‹ (data observer)ï¼Œå±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch/event äº‹ä»¶å›è°ƒã€‚</span><br><span class="line">        // ç„¶è€Œï¼ŒæŒ‚è½½é˜¶æ®µè¿˜æ²¡å¼€å§‹ï¼Œ$el å±æ€§ç›®å‰ä¸å¯è§ </span><br><span class="line">        created: function() &#123;</span><br><span class="line">            console.log(&#x27;created&#x27;);</span><br><span class="line">        &#125;,</span><br><span class="line">        //åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„æ¸²æŸ“å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨</span><br><span class="line">        beforeMount: function() &#123;</span><br><span class="line">            console.log(&#x27;beforeMount&#x27;);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        //el è¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢, æŒ‚åœ¨æˆåŠŸ	</span><br><span class="line">        mounted: function() &#123;</span><br><span class="line">            console.log(&#x27;mounted&#x27;);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        //æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</span><br><span class="line">        beforeUpdate: function() &#123;</span><br><span class="line">            console.log(&#x27;beforeUpdate&#x27;);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        //ç»„ä»¶ DOM å·²ç»æ›´æ–°, ç»„ä»¶æ›´æ–°å®Œæ¯• </span><br><span class="line">        updated: function() &#123;</span><br><span class="line">            console.log(&#x27;updated&#x27;);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">          beforeDestroy() &#123;</span><br><span class="line">            console.log(&quot;=========&quot; + &quot;beforeDestroyï¼šé”€æ¯ä¹‹å‰&quot; + &quot;========&quot;);</span><br><span class="line">            console.log(this.$el);</span><br><span class="line">            console.log(this.$data);</span><br><span class="line">          &#125;,</span><br><span class="line">          destroyed() &#123;</span><br><span class="line">            console.log(&quot;==========&quot; + &quot;destroyedï¼šé”€æ¯ä¹‹å&quot; + &quot;===========&quot;);</span><br><span class="line">            console.log(this.$el);</span><br><span class="line">          &#125;,</span><br><span class="line">          activated() &#123;</span><br><span class="line">            console.log(&quot;&quot;);</span><br><span class="line">          &#125;,</span><br><span class="line">          deactivated() &#123;</span><br><span class="line">            console.log(&quot;&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    //3ç§’åä¿®æ”¹å€¼ï¼Œè§¦å‘beforeUpdate, updatedäº‹ä»¶</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        vm.msg = &quot;change ......&quot;;</span><br><span class="line">    &#125;, 3000);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>æ§åˆ¶å°ä¾æ¬¡æ‰“å°ï¼š    <br><br>beforeCreate    <br><br>created <br><br>beforeMount <br><br>mounted <br><br>beforeUpdate    <br><br>updated <br></p>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä¸è¦åœ¨é€‰é¡¹ property æˆ–å›è°ƒä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæ¯”å¦‚ created: () =&gt; console.log(this.a) æˆ– vm.$watch(&#x27;a&#x27;, newValue =&gt; this.myMethod())ã€‚</span><br><span class="line">å› ä¸ºç®­å¤´å‡½æ•°å¹¶æ²¡æœ‰ thisï¼Œthis ä¼šä½œä¸ºå˜é‡ä¸€ç›´å‘ä¸Šçº§è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´è‡³æ‰¾åˆ°ä¸ºæ­¢ï¼Œç»å¸¸å¯¼è‡´ Uncaught TypeError: Cannot read property of undefined </span><br><span class="line">æˆ– Uncaught TypeError: this.myMethod is not a function ä¹‹ç±»çš„é”™è¯¯ã€‚</span><br></pre></td></tr></table></figure>
<p><img src="/vue-1/instance.png"></p>
<h3 id="3-3-æ¡ä»¶ä¸å¾ªç¯"><a href="#3-3-æ¡ä»¶ä¸å¾ªç¯" class="headerlink" title="3.3 æ¡ä»¶ä¸å¾ªç¯"></a>3.3 æ¡ä»¶ä¸å¾ªç¯</h3><ul>
<li>v-if: æ§åˆ¶åˆ‡æ¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¾ç¤º  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;vue-app&quot;&gt;</span><br><span class="line">    &lt;p v-if=&quot;seen&quot;&gt;v-if: å¦‚æœä¸ºfalseï¼ŒDomå°†ä¸æ¸²æŸ“è¯¥å…ƒç´ &lt;/p&gt;</span><br><span class="line">    &lt;p v-show=&quot;seen&quot;&gt;showï¼šDomæ¸²æŸ“ï¼Œåªæ˜¯é€šè¿‡cssæ§åˆ¶displayå±æ€§æ˜¯å¦æ˜¾ç¤º&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;show: æ¸²æŸ“æ—¶å¼€é”€å¤§ï¼›v-ifï¼šæ¸²æŸ“æ—¶å¼€é”€å°ï¼›å…·ä½“åœºæ™¯æ ¹æ®å®é™…æƒ…å†µé€‰å®š&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &#x27;#vue-app&#x27;,</span><br><span class="line">        data: &#123;</span><br><span class="line">          seen: true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    vm.seen = false;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
  å½“æ”¹å˜<code>seen</code> çš„å€¼ä¸ºfalseçš„æ—¶å€™ï¼Œ<code>v-if</code>ç»‘å®šçš„å…ƒç´ Domå…ƒç´ ä¸æ¸²æŸ“<br>  <img src="/vue-1/if_each.png"></li>
<li>v-for: ç»‘å®šæ•°ç»„çš„æ•°æ®æ¥æ¸²æŸ“ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> &lt;div id=&quot;vue-app&quot;&gt;</span><br><span class="line">     &lt;!--éå†è¾“å‡ºlist--&gt;</span><br><span class="line">     &lt;p&gt;éå†è¾“å‡ºlist&lt;/p&gt;</span><br><span class="line">     &lt;ol&gt;</span><br><span class="line">         &lt;li v-for=&quot;item in list&quot;&gt;</span><br><span class="line">              &#123;&#123; item.name &#125;&#125;</span><br><span class="line">         &lt;/li&gt;</span><br><span class="line">     &lt;/ol&gt;</span><br><span class="line">     &lt;br&gt;</span><br><span class="line">     &lt;p&gt;éå†è¾“å‡ºmap key value-&lt;/p&gt;</span><br><span class="line">     &lt;ul&gt;</span><br><span class="line">         &lt;li v-for=&quot;value, key in object&quot;&gt;</span><br><span class="line">             &#123;&#123;key&#125;&#125; : &#123;&#123; value &#125;&#125;</span><br><span class="line">         &lt;/li&gt;</span><br><span class="line">     &lt;/ul&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"> &lt;script&gt;</span><br><span class="line">     var vm = new Vue(&#123;</span><br><span class="line">         el: &#x27;#vue-app&#x27;,</span><br><span class="line">         data:&#123;</span><br><span class="line">             list:[</span><br><span class="line">                 &#123;name: &#x27;å¼ ä¸‰&#x27;&#125;,</span><br><span class="line">                 &#123;name: &#x27;æå››&#x27;&#125;,</span><br><span class="line">                 &#123;name: &#x27;ç‹äº”&#x27;&#125;</span><br><span class="line">             ],</span><br><span class="line">             object: &#123;</span><br><span class="line">truetruetitle: &#x27;How to do lists in Vue&#x27;,</span><br><span class="line">truetrueauthor: &#x27;Jane Doe&#x27;,</span><br><span class="line">truetruepublishedAt: &#x27;2016-04-10&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">     //å¾€æ•°ç»„é‡Œé¢æ·»åŠ å…ƒç´ ï¼Œé¡µé¢ä¸Šå“åº”å¼æ¸²æŸ“</span><br><span class="line">     vm.list.push(&#123;name:&#x27;èµµå…­&#x27;&#125;);</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
  <img src="/vue-1/v-for.png"></li>
</ul>
<h3 id="3-4-å¤„ç†ç”¨æˆ·è¾“å…¥"><a href="#3-4-å¤„ç†ç”¨æˆ·è¾“å…¥" class="headerlink" title="3.4 å¤„ç†ç”¨æˆ·è¾“å…¥"></a>3.4 å¤„ç†ç”¨æˆ·è¾“å…¥</h3><ul>
<li>v-on: äº‹ä»¶ç›‘å¬å™¨  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;example-1&quot;&gt;</span><br><span class="line">        &lt;!-- å•å‡»äº‹ä»¶ï¼šè®¡ç®—å™¨åŠ ä¸€ --&gt;</span><br><span class="line">        &lt;button v-on:click=&quot;counter += 1&quot;&gt; æ•°å€¼ : &#123;&#123; counter &#125;&#125; &lt;/button&gt;&lt;br /&gt;</span><br><span class="line">  </span><br><span class="line">        &lt;!-- åŒå‡»äº‹ä»¶ --&gt;</span><br><span class="line">        &lt;button v-on:dblclick=&quot;greet(&#x27;abc&#x27;, $event)&quot;&gt;Greet&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=&quot;example-2&quot;&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;!-- å•å‡» --&gt;</span><br><span class="line">        &lt;button v-on:click=&quot;reverseMessage&quot;&gt;åè½¬æ¶ˆæ¯&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &quot;#app&quot;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            counter: 0,</span><br><span class="line">            name: &quot;vue&quot;,</span><br><span class="line">            message: &#x27;hello world&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            greet: function(str, e) &#123;</span><br><span class="line">                alert(str);</span><br><span class="line">            &#125;,</span><br><span class="line">            reverseMessage: function() &#123;</span><br><span class="line">                //æ›´æ–°äº†åº”ç”¨çš„çŠ¶æ€ï¼Œä½†æ²¡æœ‰è§¦ç¢° DOMã€‚æ‰€æœ‰çš„ DOM æ“ä½œéƒ½ç”± Vue æ¥å¤„ç†ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦å…³æ³¨é€»è¾‘å±‚é¢å³å¯</span><br><span class="line">                //this è¡¨ç¤ºvueå®ä¾‹å¯¹è±¡ï¼Œå¯ä»¥è·å–ç›¸å…³çš„æ•°æ®ä¿¡æ¯</span><br><span class="line">                this.message = this.message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li>v-model: è¡¨å•è¾“å…¥å’Œåº”ç”¨çŠ¶æ€ä¹‹é—´çš„åŒå‘ç»‘å®š  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;example-1&quot;&gt;</span><br><span class="line">        &lt;input v-model=&quot;message&quot; placeholder=&quot;edit me&quot;&gt;</span><br><span class="line">        &lt;p&gt;Message is: &#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;textarea v-model=&quot;message2&quot; placeholder=&quot;add multiple lines&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">        &lt;p style=&quot;white-space: pre-line;&quot;&gt;&#123;&#123; message2 &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;br /&gt;</span><br><span class="line">        &lt;div style=&quot;margin-top:20px;&quot;&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; id=&quot;jack&quot; value=&quot;Jack&quot; v-model=&quot;checkedNames&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;jack&quot;&gt;Jack&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; id=&quot;john&quot; value=&quot;John&quot; v-model=&quot;checkedNames&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;john&quot;&gt;John&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; id=&quot;mike&quot; value=&quot;Mike&quot; v-model=&quot;checkedNames&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;mike&quot;&gt;Mike&lt;/label&gt;</span><br><span class="line">            &lt;br&gt;</span><br><span class="line">            &lt;span&gt;Checked names: &#123;&#123; checkedNames &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;div style=&quot;margin-top:20px;&quot;&gt;</span><br><span class="line">            &lt;input type=&quot;radio&quot; id=&quot;one&quot; value=&quot;One&quot; v-model=&quot;picked&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;one&quot;&gt;One&lt;/label&gt;</span><br><span class="line">            &lt;br&gt;</span><br><span class="line">            &lt;input type=&quot;radio&quot; id=&quot;two&quot; value=&quot;Two&quot; v-model=&quot;picked&quot;&gt;</span><br><span class="line">            &lt;label for=&quot;two&quot;&gt;Two&lt;/label&gt;</span><br><span class="line">            &lt;br&gt;</span><br><span class="line">            &lt;span&gt;Picked: &#123;&#123; picked &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;button type=&quot;button&quot; @click=&quot;submit&quot;&gt;æäº¤&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &quot;#app&quot;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            //è¿™é‡Œå¯ä»¥è®¾ç½®åˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸º&#x27;&#x27; ç©ºå€¼</span><br><span class="line">            message: &quot;test&quot;,</span><br><span class="line">            message2: &quot;hi&quot;,</span><br><span class="line">            checkedNames: [&#x27;Jack&#x27;, &#x27;John&#x27;], //å¤šé€‰æ¡†ï¼Œå€¼æ˜¯æ•°ç»„æ ¼å¼</span><br><span class="line">            picked: &quot;Two&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            submit: function() &#123;</span><br><span class="line">                //thisä»£è¡¨çš„æ˜¯vueå®ä¾‹å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡thisè·å–è¡¨å•æ•°æ®ï¼Œå¦‚ä¸‹</span><br><span class="line">                var params = &#123;</span><br><span class="line">                    message: this.message,</span><br><span class="line">                    message2: this.message2,</span><br><span class="line">                    checkedNames: this.checkedNames,</span><br><span class="line">                    picked: this.picked</span><br><span class="line">                &#125;</span><br><span class="line">                console.log(params);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…Zookeeper 3.7.1å•èŠ‚ç‚¹</title>
    <url>/zookeeper-install/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="2fb7737425f237d8a819bc30053a2a63f52719ebfefa52411b203130d6ccbf50">91b4a72afde41933824d9b47e790ab276fb896cf66d88c172d81884618061a3a951a01b3360a6753afbca0160baf1dd84c5cd58458f6539df05ee616ff87bbf9d290e2fafb7838690ea1d0b58531de91763413c68658b8f51e705760eb7cbd52434875386ecfe95926b4a0efe209ae3b27090c983f7175f1b42d694701d5137fe7a74e9fc51eeb4b7fa71882eae9003b08c19f571ec5adfa72b5c50e0881b05d9ac76e6f4fec31f48a088f046088c8b2e8a0f938b8ec0c06767bdf8a7868d40f1b964ab276aeab064d60582e7f800a48b122f1c9ad4ca058acb33c9a6300e66f5684663666cb9b483239d718366678399479943105d52c42e06131f27fd60fd976689470f9bca3ad6962c13da489df8791e7856ab9ab29f78a385784ad96d45999662bc3d09e942c8ed83dd2052862ef6887ad918a40749ce86402e782383d927903172dd1aceac0f39921aa431bcf7b962307d7a5247196df2617497c68953ccc796fdc972dfe34c962282eea1b1d68140248f1dc58c4f9322ba2f1cb12c7953bda316ef6e8c9b1f7a8e85f7e861566462a3ca6d3b2a5b001af68222b76369cb5e472da50614f184a207281fb133cbdd3c429fcc8926aec82581fff531d9a5e46d44f409fa1d741707292b10bed8e1b6b72e1d6cf3e5fe2aed23cab701b399c9a756e9ef18516002d1c9fad05bb0607c75bcffecbf4a2f3dd242a5af15beeac10f964a2414419cc57e503e2e56ca9e579220739cfc6fbb00157f75a0899516c2b5517f6f9099098c11af13b7537e1766e33c1c2c658f7a2197680228db3a03f8e987ae0a8f0ebc895aec75aea3fc504fb25a3c2bd8ad754f5fecb98899a90b9d2a5d4460a308e0c3ca87fb60bd0d77aad91871b1c67c51a3cbcc097c3c110cbdd7e508c5269f7fecafdded5b7e4e579fd6912909bd59364115865bf2bd706587c26fae8de875cf0d245f044bd99b6eef455c4d2a167bb549df1d106f18c38ed49e38dca042cab82e7d2b079b0bf01a5240febcfc9ac492c8b33a746257357718982805bb5107f4187b8730c9431ec2a0a4a1fc1596d5b0ead5823f49b826e2272e06c89468cbae4a7850efcc60d73c2dac53b2c400db6b7f7ced9f32ee981f64d301811e101a8be85d576f8cec5f509a66e2e8ae6c293ed08f02e2c08f79f492c4a4f40b14f73b5d45291ec64a8ca1baa21cd9d5b704ad6d03ac51c34d409da6cbd99c7046feebc67b33ebbd2373d467d843ad2201cf45514527cac523fcdb86930e37a8901481ef2acb5887a2d4962b82b16ca201db2259991a1c5570548c6ac2387a8f8e3db4cee94d4b16aeae9b05aac311154dcdd1e29a98571f54fceac6364ac99e080e322fb632d15f44e0272092fc371a35696a65ed55f011c1df5292a1f80149ddf3bffcb5bd698d7ee56b00604acf4837e257b225afc26c74d61f2332bef3396edd8e6531e55347ced20c72887479be83f71505895a8575551a41c55bb1c7213297f7981a914cc0c4c57083a97b9f7afac307927d274edeeeb5fd0c9eada0b5afd239e240d17270d08a0adbe0c425b19f694e1e6b2c49c63b8d385c51c6691220e345e7ac8786035e1bf32f31e7c2622b69f6d98111bfa5524c8651561e903d14565d6d4561cce1150dd19e4247c2ed3d39c82308034fa421041263f1dcd1b4b5bc88f7c6185274708c49e56c870d49cdf72f9bdc85e2860ac2885c10190590ee11fad80a82a95cdb49d49c2d7cf178417e3545dcdf2c9e126c4ab2aae816c2bca89914ddb0092ac5607f027dff66eee4d64aa1a1056e7601f4f41e36a17182589a246171cd227fdf829ab0f5f9c31a21a933cbd648d9f0edf3226d2e2a37ec9d17d339bdb7cca9b4adb97cfbb4050f39025433a17842d2238f9655d7489e1e5d1ef7a8e9336e3083d6decadb4ab0f9f95a0038d40796662d223c19ba46fcffc9261dae9e305dfb5268425d0da008a3bbbe2b75049416a7bd2f801856be5d9cf4f21ab330ef1d673612b6dd2baa587cac0d2e8900bda5ae26879016a7ffc627a534722018b5779a7225d530e4aa9d532f2bdd0166b0206035942542a9c1a0efc90b523732a6fa56c7ffa129aa8dae21db40e783e0a9865a1c09221d7113d28dee453d31f07fb18c5b25410abb398b58e5ef26be583c66a4bdcf8e49cc8a0fc8bfe8b8efe7b040750cc2d2caa4832acd6f1122d3ca939ddaddb76f20b3c6d7e5ef1bb6c7c2713737016dfb361af6d4638dc44549de9d536dde1b2fbdd8babb8b2fd457aa8a1c5ec5517c6d89f643c20aeb078d817ee79c41f2157372ac314d2604ab767acb2d44dc000b02f6df3b95ee84e7a9543b9e79dabddced39af297a2df6b09e806a5c4aba1f4c17cd23c7714796d0882ee3c6ef36b3bd608052eef05bd59ae261931ed4d113772a501295f216b2d8dfa9ac9a3e8813f0debedf14dea52bcd596b9af38577c744a605637e1ab8d9ef6f2caeb10321ff93eb6976db461dcb77a5df3ee9b4dd3dc06beb65fd2a97d3f45167b299da56aec353ff242dc3a1d60653678ed1120893896fa6b4d32d5769bac2f28c8dd130f4246ff04dbbf9b11a595be600d0451b8cfab9749ce549b96feb5ac4b9410ea2bae64625afe2aea9b73625e6a93a0204170f4e6d8b3099af9fa716a43105b0d8323eac73d984b83bbf8f0e14c72c3a5aa4890f2647c1c32777cf86301bd703bc69880277fdf68332713d86f624ade70820303b1edd7a3f72b6e1b6742b7b88c5c9d6e238d4aace4331edd9e6c02a368c7ce8a3cb1ed7bb7953df319bb7f6489cb4226f391a5cd2828db9855b0472a5b092a46a8590d269e70fb583f61960fe21253de4d2a50fff0f4ef19162797b0f05f2d28de33d2988fe757de3ef25139ffc5243cdec5d3534ebdc2719f4d7171d294d27efd46f39f2c90bd60921d5a0f834024bff2372c77335182d032b77781d0ac8b9bbd3419257ceb0ce6d163168293553b51b2e2a54e95fbd5c5896c2cfc0af645218943561adfd26e657e820fbddc800db50fe61c148eb6a893cf1b4b5f2034b68f346f54d287c93632e603042ade225e4134a26117210ff403f59a7b908371cc954308ca219c2edb6234f695a51082e470c7d3ab8cc1b269e3d9d751a6218d972d31f6cc1de6babf7c40545d873b18253d802c906bdc1613fb310bdf2b6f65c8c2b28f9028e1f66e036eea106216b0a3a72311813119dccad1324b857643099b5480bca8fa1aaf1b87efb379207fc8844a720a3f0ab3e9013ab0755418164cd215611670a79c52c61d7043455c86f663bc13c0b191f93b0b65002d6b8758902337bd59feff2c1080b94852b4761a24572717cf939288c001e5f12758f485608a2eed717870a3a570ba20dc8599ed9983ce9e03529685723fc9ab0af8f43657ce7999d0a81b8711cdd7a3e45de1cb2e2a488b51b8d11487dad51641d0eb03daa53890a98e3ddb51e1db41e24c9adf3d89304b4c3832fd78a81299228da2acd5f2f053c84abf1b08504cf23a53fd6a0a19c14e65aa508a525c6015c10a4762dddb5f311e8b2c4188ccec99e6e3740634ceb8e2b9d9abefd786c4f33773af343564c70df23402724054277d4f44cef3747e3594e7747268b8f497126e6f77c35891c22a161b2b7835aafde5ed66c9195615cdee53ec872c2cf0f34a67b6b9b6beb545d0b50f4104aa6a39d1ccbfcf17bd67acaab5f9e777ac5d89bc95bbd23e1e5aa8e2a87f2c1b47dab52720e15e81c472f39b647a29ae021c91fa8f02eb222e508c51de25e6d1805f26c79b41b267186db715aa233072cc286807f8acb1d54aa47f15ff72ba38eb40e05300c245a5bd6dbb7b48d9046273d71eba1c8df1b70b7e1bf234909c050e84ea602a007971181be1d3292ea695d50e9ed0f9df8b0b46dc99d31a5e8be8d81a0bd3dabc4373b4a1826ed7a4705149dd3010385ce01849c5b1b95834249dcfab91b1e0f260295610ae869c0fc59a675663926506f4ea2f82923566f937784d6e113dfc9275479dfbd96f3173ffb199f734b2d0db7644370e0c4020e96a8ecb520fbb7c2c723cdb6289b3e3ebfb5c8465d19ec13f131c20ff70f565dde3a48d22545753d0e6a0ab48e1b855d949640e066233ad0867cb32af34e3faa6545052ac30bfd211946608d297d0ce544c3a9521a236c1976b30aaf9469c4d10fbbc09b4b91b2fd3f2b18d58e9706e5f08fea6c53eb73bc85c60b5c07b362214595929dcb00a9e75591dc318e5b5a15e9ac8f8992191ec84210b6fe8eaec47a7229cddfc9300d1ece7c6f085969927a4682247e2a7fbf2b40a9cb69f44bad425c6836286a3239d4a99791ec9bc507d0a3ca4e50ff932778a8dc3376396be53fab59ee737a2b7fc1e5665bff5bc7033f3f79790488d2c5ae6f08c04dc46862aa14d076a36892aed15fe6a8e52703aeed7e1dc3d1de13784b8e8d8aaa449be815cc0822337190528d73c003de5b8913715a7617ffbc91eea2650d28567a6a79743e91f11414d8e8ec66cb5840dc4c99ef3f1512a5f3c2807d273f5abb8eb51010b05bc0d7c161476ae9e63f9f6d6d8d021ee5efd32131db99d450297d264bf49fdc47c51dcde3e3381b03235bdeb53ecf266da4cc2d0119ab3ceb5a7abf87ac581d35badc000ddc5352acd848e25f470d907d0a70e7793e291e1520d4598cb93d78a6efa6a0d0ebda2a361e98a8dce7ddb0de069af4f7ae584c49d518567d3156c4bb76cbac697142c5cbac367e5ee69f375ad903f78e707a3f714e422f7fe8a631b0ade7842a51dde5da0ec5983e58b02f13e3d58a3ff80539b9a5ab0c4ccad324c1fe502aaaed2d08bf6f0760f740055f456da736fc6f99739aa87f8397e68e7621e3292b647bb1ef0774652f9af0fb05bd25ac826f5433130ffe0bf4d66f05d9d1215ee0a53fb71ec35673d7be17afff35a0407b20f468011df49a2b0f6c62e633c7e34919c00d108b19502f66ac284f7b5f5704b9c67808b199fac106d6f83197aa78a78f1e5436494fd28f015b8226d47caee3ffa2a2789504f54352ddd5f16c99eae8bed7f81a34bab9fbc81372d077a36cd4c96cf19105c79aee9c58cf78e68f3b6424896ebeb5951787f14a45061a70e882734d5430d1c608c05486b42e21ed303058db2498ee0f3653a755c47f17d32452ae1f3eb428e0b8d9e3d5be96a15841590e97992c49f4346a19b0a43555a59bf01e46f0b2cfd454c695c84ee0cac31d52320f2edc217a0c530336acc3b4b37c246f4a1039600e607539d7b3f93c9d737aa165ab5ec2482b202f6951e4662a6442e664d66e96a5cdc925782420e39bc048a08dad1728c6518b4db05d2bcf757ecd1c9029a927d3064a9fda4ba44b0c2fcd462b4b93de44fa662090d29f341ce0551f119d8c04a924ce0425901b295c968053ebe9137ed922210f77d5fe5307b5e5e80d98fd91b3c24bd26b4c2cef73fedf8224821ee047f00d28d551173821e386c321f0f475c8045215c89dafad76371c85ad9c8917fa9f59b06672b8676d8528c30648f59d2c8ec111e5d5e3ade4558c5b72e05cb640ae5bb5a686c3210e661051d04960d2d60acdca9976c288a1ab92efbcbeb6ad941e7d16c3c75fba6d1f8fb668d31e8f47e9899d08744d884c622c68178c0cc35456c90f3efae58e0ed7f66a6ae07d34b5f1009530d2d03eeb81a7c4629daae61720682f840d2d2e224b5184140c671ca84c299ea3fa19245598304f153d5535ccca14aab1ff14095823b7e113fc65e9568af4c6c15dd2a0f3b0efc341d448640b49277de980fe21282666eb6715bae8cf759b695e5aa4c5cf1804086cca7b9dbe225179454a3a55275acc4fd13c7462f6f474ea718f149e187ee2b98b4d602bc59257429b02ae38bb90dfae645e1236564d306c7941b0182c2a76aae7d7980ef96530976b30e6b696b556bb397d97a1c6e0887f0c9b4da27b0d99b893ce3a0b1007f78bf650d83be21d95c6046509ce24599b29f3092a19e0e85e83df9e6ff2e64a558df8c39eed32dfd4927b41796b07d650d68207fb6c0800922d142f7b726a5c2612d09cfda4dd3a4e0caa66a565ad21268be727a508c3e62d47269f2780721ba4ce92ed5cf470de524d461517c8c250687a78128766163c6a11fb125ef28b555035211ad46cc4a094abf7566b001ce204115ecf263625ca47c0db9ac8e90ed8a106cbdb7def3850cb5ba2b0e7530df795bbd983c24d04982df8ad1d8924a66babbc4cc0354847ad477aaf2e5d05f2cb451729f6cba777c41b4735c05f5606e90793cbf4f51cba41ac4cd3f30410a5909c3c8954d8d4a04f55d94b94e8bad1482f72f7e00d1a049a35e566fcc0ff24aebd9e31a5ebfb432010562d0563f4317c310b145c86fc30df3c0414e416b2c5902dacce6bd453cd0ea74e955411ab4f3f641bfb69fb01d2b9aacc9feff23ca36be93bc49534b0f76bd7cef090d5437bfa656ffe1c1baf48dd4adb3dbe69bc7f01851671cf5f382413eeb576629810b36c972a88e124585341bbdf4c96f14a2e3b3492dea8552ca727459adfb920b5f8c2fbb6104c52b67ff3538859f857db36492562a0163a54d9516312bddfdfa099668752255fef1d10d786109e874837805945b5390d6fe05cb95f62842640444f942a7848c7e47ddc6b4078b076041ebe1a7d715e96229a847dad59e4bcb6a955ff3bd916fc1c90ca930ee16ff60be5c689905f929d005fde2dc657ece3df92972e2175f8fc2dee1681262e043e3bdcfd31ce501aa142c7395917d60caef0b5f4f581525bf69173ec4aea8dd78b034c2aea85cd8c9c8db5792141e7c0e46b079609feb4518825774d076e9133702de02561e03c7cdf3f261b0dcd22ebaaeead345566842b3540851c7ad09311f793029c7d32b1e</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">Hey, password is required here.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>Zookeeper</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºSpringbootå¯¼å‡ºæ•°æ®åº“è¡¨ç»“æ„æ–‡æ¡£</title>
    <url>/export-database-file/</url>
    <content><![CDATA[<p>åœ¨é¡¹ç›®ä¸­ç»å¸¸ä¼šéœ€è¦æŸ¥è¯¢æ•°æ®åº“æ‰€æœ‰çš„è¡¨ä»¥åŠè¡¨å­—æ®µï¼Œç„¶åå¯èƒ½è¿˜éœ€è¦å¯¼å‡ºåˆ°Excelä¸­ï¼Œç„¶åè‡ªå·±å†™äº†ä¸€ä¸ªå·¥å…·ç±»ï¼Œç›®å‰æ”¯æŒsqlserverã€mysqlã€oracleã€Postgreï¼›å¦‚æœæœ‰é—®é¢˜è¯·ç•™è¨€ï¼ï¼ï¼</p>
<h3 id="1-å¼•å…¥ä¾èµ–åŒ…"><a href="#1-å¼•å…¥ä¾èµ–åŒ…" class="headerlink" title="1. å¼•å…¥ä¾èµ–åŒ…"></a>1. å¼•å…¥ä¾èµ–åŒ…</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- è¯·å°½é‡ç”¨æœ€æ–°ç‰ˆæœ¬ --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoyuge5201<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>datasource-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-ç¼–å†™Javaä»£ç "><a href="#2-ç¼–å†™Javaä»£ç " class="headerlink" title="2. ç¼–å†™Javaä»£ç "></a>2. ç¼–å†™Javaä»£ç </h3><ol>
<li>é€šè¿‡MyDataSourcePropertiesç±»æ‰€æœ‰æœ¬é¡¹ç›®çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå¯¼å‡ºå½“å‰è¿æ¥åº“çš„æ•°æ®åº“ç»“æ„</li>
</ol>
<ul>
<li>æ•°æ®åº“é…ç½® yml  <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/dbname?serverTimezone=GMT%2B8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xiaoyuge</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">database:</span> <span class="string">dbname</span>    <span class="comment">##éœ€è¦é…ç½®æ•°æ®åº“åç§°</span></span><br></pre></td></tr></table></figure></li>
<li>å¯¼å‡ºæ–¹æ³•  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.github.xiaoyuge5201.config.MyDataSourceProperties;</span><br><span class="line"><span class="keyword">import</span> com.github.xiaoyuge5201.util.ExportDatabaseDocument;</span><br><span class="line"><span class="keyword">import</span> org.apache.catalina.servlet4preview.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/export&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyDataSourceProperties properties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨æ„ï¼šéœ€è¦åœ¨yaml /yml é…ç½®æ–‡ä»¶ä¸­é…ç½®spring.datasource.database å±æ€§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/index&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">index</span><span class="params">(HttpServletResponse response, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        ExportDatabaseDocument.export(response, request, properties); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li>è‡ªå®šä¹‰å¯¼å‡ºæŸä¸ªæ•°æ®åº“çš„è¡¨ç»“æ„ä¿¡æ¯ <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/index&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">index</span><span class="params">(HttpServletResponse response, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ‰‹åŠ¨ä¼ å‚</span></span><br><span class="line">    ExportDatabaseDocument.export(response, request, DatabaseDriverEnum.MYSQL.getDriver(), <span class="string">&quot;127.0.0.1:3306&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;xiaoyuge&quot;</span>, <span class="string">&quot;dbname&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-å¯¼å‡ºæ–‡æ¡£"><a href="#3-å¯¼å‡ºæ–‡æ¡£" class="headerlink" title="3. å¯¼å‡ºæ–‡æ¡£"></a>3. å¯¼å‡ºæ–‡æ¡£</h3><p>æ‰§è¡Œè¯·æ±‚ï¼šlocalhost:8080/export/index å³å¯ï¼›å¯¼å‡ºçš„å†…å®¹å¦‚ä¸‹ï¼š<br><img src="/export-database-file/1.png" alt="å¯¼å‡ºçš„æ•°æ®åº“æ–‡æ¡£"></p>
<p>åŒ…æ‹¬æ•°æ®åº“è¡¨åã€æè¿°ä»¥åŠå„ä¸ªå­—æ®µçš„ç±»å‹ã€é•¿åº¦ã€é»˜è®¤å€¼ã€æè¿°ç­‰ã€‚ã€‚ã€‚ï¼›</p>
<p>å¦å¤–sheetçš„åç§°ä¸ºè¡¨å(è¡¨ä¸­æ–‡å)+ 4ä½éšæœºå€¼ï¼Œå—é™äºexcelçš„sheetï¼›</p>
<h3 id="4-æ•°æ®åº“æ“ä½œç±»-DataSourceClient"><a href="#4-æ•°æ®åº“æ“ä½œç±»-DataSourceClient" class="headerlink" title="4. æ•°æ®åº“æ“ä½œç±» DataSourceClient"></a>4. æ•°æ®åº“æ“ä½œç±» DataSourceClient</h3><ol>
<li>DataSourceClientç±»ä¸­æ ¹æ®MyDataSourcePropertiesæ“ä½œæ•°æ®åº“ <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰çš„è¡¨ç»“æ„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> è¡¨ç»“æ„åˆ—è¡¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">findAllTables</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> QuerySqlUtil.findAllTables(properties.getDriverClassName(), properties.getUrl(), properties.getUsername(), properties.getPassword(), properties.getDatabase());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è©¢æ•¸æ“šåº«è¡¨çš„å­—æ®µä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> table æ•°æ®è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¡¨å­—æ®µåˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;ColumnEntity&gt; <span class="title">queryTableFieldsEntity</span><span class="params">(String table)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> QuerySqlUtil.queryTableFieldsToColumnEntity(properties.getDriverClassName(), properties.getUrl(), properties.getUsername(), properties.getPassword(), properties.getDatabase(), table);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è©¢æ•¸æ“šåº«è¡¨çš„å­—æ®µä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> table æ•°æ®è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> è¡¨å­—æ®µåˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">queryTableFields</span><span class="params">(String table)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> QuerySqlUtil.queryTableFields(properties.getDriverClassName(), properties.getUrl(), properties.getUsername(), properties.getPassword(), properties.getDatabase(), table);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å¯¹åº”åº“ä¸‹æ‰€æœ‰å­—æ®µ ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;ColumnEntity&gt; <span class="title">listColumnsByDatasourceParams</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> QuerySqlUtil.listColumnsByDatasourceParams(properties.getDriverClassName(), properties.getUrl(), properties.getUsername(), properties.getPassword(), properties.getDatabase());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é¡µæŸ¥è¯¢æ•°æ®è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> table  æ•°æ®è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageNo é¡µç </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> limit  é¡µå®¹é‡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> columns å­—æ®µåˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> JSONArray <span class="title">queryPageData</span><span class="params">(String table, List&lt;String&gt; columns, Integer pageNo, Integer limit)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> QuerySqlUtil.queryPageData(properties.getDriverClassName(), properties.getDatabase(), table, properties.getUrl(), properties.getUsername(), properties.getPassword(), columns, pageNo, limit);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¼å‡ºæ•°æ®åº“è®¾è®¡æ–‡æ¡£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response è¿”å›å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request  è¯·æ±‚å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exportDatabaseDocument</span><span class="params">(HttpServletResponse response, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">    ExportDatabaseDocument.export(response, request, properties.getDriverClassName(), properties.getUrl(), properties.getUsername(), properties.getPassword(), properties.getDatabase());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-æ•°æ®åº“é©±åŠ¨æšä¸¾ç±»-DatabaseDriverEnum"><a href="#5-æ•°æ®åº“é©±åŠ¨æšä¸¾ç±»-DatabaseDriverEnum" class="headerlink" title="5. æ•°æ®åº“é©±åŠ¨æšä¸¾ç±» DatabaseDriverEnum"></a>5. æ•°æ®åº“é©±åŠ¨æšä¸¾ç±» DatabaseDriverEnum</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°é©±åŠ¨çš„å¸¸é‡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yugb</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">DatabaseDriverEnum</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * mysqlæ•°æ®åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MYSQL(<span class="number">1</span>, <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>, <span class="string">&quot;mysqlæ•°æ®åº“&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Sql Serveræ•°æ®åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SQL_SERVER(<span class="number">2</span>, <span class="string">&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;</span>, <span class="string">&quot;Sql Serveræ•°æ®åº“&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * oracleæ•°æ®åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ORACLE(<span class="number">3</span>, <span class="string">&quot;oracle.jdbc.driver.OracleDriver&quot;</span>, <span class="string">&quot;oracleæ•°æ®åº“&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * postgre sqlæ•°æ®åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    POSTGRE_SQL(<span class="number">4</span>, <span class="string">&quot;org.postgresql.Driver&quot;</span>, <span class="string">&quot;postgre sqlæ•°æ®åº“&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¾¾æ¢¦æ•°æ®åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    DM(<span class="number">5</span>, <span class="string">&quot;dm.jdbc.driver.DmDriver&quot;</span>, <span class="string">&quot;è¾¾æ¢¦æ•°æ®åº“&quot;</span>);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°æ®åº“é©±åŠ¨ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer type;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ•°æ®åº“é©±åŠ¨è¿æ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String driver;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDriver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> driver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    DatabaseDriverEnum(Integer type, String driver, String name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.driver = driver;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®æ•°æ®åº“ç±»å‹è·å–æ•°æ®åº“é©±åŠ¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type æ•°æ®åº“ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é©±åŠ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getValue</span><span class="params">(Integer type)</span> </span>&#123;</span><br><span class="line">        DatabaseDriverEnum[] enums = values();</span><br><span class="line">        <span class="keyword">for</span> (DatabaseDriverEnum driverEnum : enums) &#123;</span><br><span class="line">            <span class="keyword">if</span> (driverEnum.type.equals(type)) &#123;</span><br><span class="line">                <span class="keyword">return</span> driverEnum.getDriver();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>java8çš„lambdaè¡¨è¾¾å¼è¯­æ³•</title>
    <url>/lambda/</url>
    <content><![CDATA[<p>è®°å½•ä¸€ä¸‹ç”¨åˆ°çš„ä¸€äº›java8çš„lambdaè¡¨è¾¾å¼è¯­æ³•</p>
<h3 id="1-listé›†åˆæ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å¤šä¸ªå­—æ®µçš„å’Œ"><a href="#1-listé›†åˆæ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å¤šä¸ªå­—æ®µçš„å’Œ" class="headerlink" title="1 listé›†åˆæ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å¤šä¸ªå­—æ®µçš„å’Œ"></a>1 listé›†åˆæ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å¤šä¸ªå­—æ®µçš„å’Œ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> List&lt;SafeSystemVO&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">16</span>);</span><br><span class="line"><span class="comment">//....çœç•¥æ·»åŠ å…ƒç´ çš„ä»£ç </span></span><br><span class="line"><span class="comment">//åˆ†ç»„å­—æ®µ driver_id</span></span><br><span class="line">list.stream().collect(Collectors.groupingBy(SafeSystemVO::getDriver_id)).values().stream().map(d -&gt; &#123;</span><br><span class="line">    SafeSystemVO vo = d.get(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//æ±‚å’Œ1</span></span><br><span class="line">    vo.setAg_total(d.stream().map(s -&gt; BigDecimal.valueOf(s.getAg_total())).reduce(BigDecimal.ZERO, BigDecimal::add).doubleValue());    </span><br><span class="line">    <span class="comment">// æ±‚å’Œ2</span></span><br><span class="line">    vo.setScore(d.stream().map(s -&gt; BigDecimal.valueOf(s.getScore())).reduce(BigDecimal.ZERO, BigDecimal::add).doubleValue());  </span><br><span class="line">    vo.setLkj_score(d.stream().map(s -&gt; BigDecimal.valueOf(s.getLkj_score())).reduce(BigDecimal.ZERO, BigDecimal::add).doubleValue());  </span><br><span class="line">    vo.setTotalScore(d.stream().map(s -&gt; BigDecimal.valueOf(s.getTotalScore())).reduce(BigDecimal.ZERO, BigDecimal::add).doubleValue());    </span><br><span class="line">    <span class="keyword">return</span> vo;</span><br><span class="line">&#125;).collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<h3 id="2-list-æ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å•ä¸ªå­—æ®µçš„å¹³å‡å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„å­—æ®µæ’åº"><a href="#2-list-æ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å•ä¸ªå­—æ®µçš„å¹³å‡å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„å­—æ®µæ’åº" class="headerlink" title="2. list æ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å•ä¸ªå­—æ®µçš„å¹³å‡å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„å­—æ®µæ’åº"></a>2. list æ ¹æ®æŸä¸ªå­—æ®µåˆ†ç»„åæ±‚å•ä¸ªå­—æ®µçš„å¹³å‡å€¼ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„å­—æ®µæ’åº</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;SafeSystemVO&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">16</span>);</span><br><span class="line"><span class="comment">//....çœç•¥æ·»åŠ å…ƒç´ çš„ä»£ç </span></span><br><span class="line">Map&lt;String, Double&gt; monthAvg = list1.stream().collect(Collectors.groupingBy(SafeSystemVO::getMonth, Collectors.averagingDouble(SafeSystemVO::getTotalScore)));</span><br><span class="line"><span class="comment">//  æ ¹æ®Map å¯¹è±¡çš„keyæ’åº</span></span><br><span class="line"><span class="comment">// æˆ‘çš„åˆ†ç»„å­—æ®µæ˜¯æ—¥æœŸï¼Œå°±ç”¨äº†ä¸‹é¢çš„</span></span><br><span class="line">monthAvg.entrySet().stream().sorted((o1, o2) -&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Date d1 = DateUtils.convertStringToDate(o1.getKey(), DateUtils.FM2);</span><br><span class="line">        Date d2 = DateUtils.convertStringToDate(o2.getKey(), DateUtils.FM2);</span><br><span class="line">        <span class="keyword">assert</span> d1 != <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> d1.compareTo(d2);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (oldVal, newVal) -&gt; oldVal, LinkedHashMap::<span class="keyword">new</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®Map å¯¹è±¡çš„valueæ’åº</span></span><br><span class="line"><span class="comment">//monthResult = workShopAvg.entrySet().stream().sorted((p1, p2) -&gt; p2.getValue().compareTo(p1.getValue())).collect(Collectors.toList());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line"><span class="comment">//list1.sort((o1, o2) -&gt; o1.getAge().compareTo(o2.getTotalScore())); //æ­£åº</span></span><br><span class="line"><span class="comment">//list1.sort((o1, o2) -&gt; o2.getAge().compareTo(o1.getTotalScore())); //å€’åº</span></span><br><span class="line"><span class="comment">//æ–¹æ³•äºŒ</span></span><br><span class="line"><span class="comment">//list1.sort(Comparator.comparing(Person::getTotalScore)); // æ­£åº</span></span><br><span class="line"><span class="comment">//list1.sort(Comparator.comparing(Person::getTotalScore).reversed()); // å€’åº</span></span><br></pre></td></tr></table></figure>

<h3 id="3-list-æ ¹æ®å­—æ®µåˆ†ç»„æ±‚å’Œåå–-å‰-å10å"><a href="#3-list-æ ¹æ®å­—æ®µåˆ†ç»„æ±‚å’Œåå–-å‰-å10å" class="headerlink" title="3. list æ ¹æ®å­—æ®µåˆ†ç»„æ±‚å’Œåå– å‰/å10å"></a>3. list æ ¹æ®å­—æ®µåˆ†ç»„æ±‚å’Œåå– å‰/å10å</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//listå¯¹è±¡æ¥ä¸Šé¢çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®driver_idåˆ†ç»„ï¼Œæ±‚å¹³å‡å€¼</span></span><br><span class="line">Map&lt;String, Double&gt; driverScores = list3.stream()</span><br><span class="line">        .collect(Collectors.groupingBy(SafeSystemVO::getDriver_id, Collectors.averagingDouble(SafeSystemVO::getTotalScore)));</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’åºåè·å–å10 åï¼Œ å‰10åçš„è¯ä¿®æ”¹sortedé€»è¾‘ä¸ºï¼šsorted((p1, p2) -&gt; p2.getValue().compareTo(p1.getValue()))</span></span><br><span class="line">List&lt;Map.Entry&lt;String, Double&gt;&gt; driverScoresTop10 = driverScores.entrySet().stream().sorted((p1, p2) -&gt; p1.getValue().compareTo(p2.getValue())).limit(<span class="number">10</span>).collect(Collectors.toList());</span><br></pre></td></tr></table></figure>


<h3 id="4-å…¶ä»–"><a href="#4-å…¶ä»–" class="headerlink" title="4. å…¶ä»–"></a>4. å…¶ä»–</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Id, name , age</span></span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person(<span class="number">1</span>,<span class="string">&quot;éº»å­&quot;</span>, <span class="number">31</span>);</span><br><span class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="number">2</span>,<span class="string">&quot;æå››&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        Person p3 = <span class="keyword">new</span> Person(<span class="number">3</span>,<span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">26</span>);</span><br><span class="line">        Person p4 = <span class="keyword">new</span> Person(<span class="number">3</span>,<span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">26</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;Person&gt; personList = <span class="keyword">new</span> ArrayList&lt;Person&gt;();</span><br><span class="line">        personList.add(p1);</span><br><span class="line">        personList.add(p2);</span><br><span class="line">        personList.add(p3);</span><br><span class="line">        personList.add(p4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//java8éå†</span></span><br><span class="line">        personList.forEach(p -&gt; System.out.println(p.getAge()));</span><br><span class="line">        <span class="comment">//æŒ‰ç…§personçš„ ageè¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="comment">//æ–¹æ³•ä¸€</span></span><br><span class="line">        personList.sort((o1, o2) -&gt; o1.getAge().compareTo(o2.getAge())); <span class="comment">//æ­£åº</span></span><br><span class="line">        personList.sort((o1, o2) -&gt; o2.getAge().compareTo(o1.getAge())); <span class="comment">//å€’åº</span></span><br><span class="line">        <span class="comment">//æ–¹æ³•äºŒ</span></span><br><span class="line">        personList.sort(Comparator.comparing(Person::getAge)); <span class="comment">// æ­£åº</span></span><br><span class="line">        personList.sort(Comparator.comparing(Person::getAge).reversed()); <span class="comment">// å€’åº</span></span><br><span class="line">        <span class="comment">//å¤šä¸ªå­—æ®µæ’åº</span></span><br><span class="line">        personList.sort(Comparator.comparing(User::getId).thenComparing(Person::getAge));</span><br><span class="line">        <span class="comment">//æ³¨ï¼šè‹¥é€‰æ‹©æ’åºå­—æ®µä¸ºnullå€¼ï¼Œæ­£åºå¯personList.sort(Comparator.comparing(Person::getAge,Comparator.nullsFirst(Comparator.naturalOrder())))</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;========================================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å¹´é¾„æœ€å¤§çš„Person</span></span><br><span class="line">        Person maxAgePerson = personList.stream().max(Comparator.comparing(Person::getAge)).get();</span><br><span class="line">        System.out.println(maxAgePerson.getAge());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;========================================&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å¹´é¾„æœ€å°çš„Person</span></span><br><span class="line">        Person minAgePerson = personList.stream().min(Comparator.comparing(Person::getAge)).get();</span><br><span class="line">        System.out.println(minAgePerson.getAge());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿‡æ»¤å‡ºå¹´é¾„æ˜¯20çš„personï¼Œæƒ³è¿‡æ»¤å‡ºä»€ä¹ˆæ¡ä»¶çš„å‡å¯ä»¥</span></span><br><span class="line">        List&lt;Person&gt; personList1 = personList.stream().filter(person -&gt; person.getAge() == <span class="number">20</span>).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿‡æ»¤-- ç»Ÿè®¡å‡ºå¹´é¾„ç­‰äº20çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">long</span> count = personList.stream().filter(person -&gt; person.getAge() == <span class="number">20</span>).count();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿‡æ»¤å‡ºå¹´é¾„å¤§çº¦20çš„äºº</span></span><br><span class="line">        List&lt;Person&gt; personList2 = personList.stream().filter(t -&gt; t.getAge().equals(<span class="number">20</span>)).collect(Collectors.toList());</span><br><span class="line">        <span class="comment">//å¾—åˆ°å¹´é¾„çš„å¹³å‡å€¼</span></span><br><span class="line">        <span class="keyword">double</span> asDouble = personList.stream().mapToInt(person -&gt; person.getAge()).average().getAsDouble();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¾—åˆ°å¹´é¾„çš„æ±‚å’Œ--åŸºæœ¬ç±»å‹</span></span><br><span class="line">        <span class="keyword">int</span> sum = personList.stream().mapToInt(person -&gt; person.getAge()).sum();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å¾—åˆ°å¹´é¾„çš„æ±‚å’Œ--åŒ…è£…ç±»å‹,å…¶ä¸­ï¼Œè‹¥bigDecimalå¯¹è±¡ä¸ºnullï¼Œå¯filter()è¿‡æ»¤æ‰ç©ºæŒ‡é’ˆ.</span></span><br><span class="line">        BigDecimal totalAge = personList.stream().map(User::getAge).reduce(BigDecimal.ZERO, BigDecimal::add);</span><br><span class="line"></span><br><span class="line">        ï¼ˆå…¶ä¸­ï¼Œè‹¥bigDecimalå¯¹è±¡ä¸º<span class="keyword">null</span>ï¼Œå¯filter()è¿‡æ»¤æ‰ç©ºæŒ‡é’ˆ.ï¼‰</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å»é‡</span></span><br><span class="line">        List&lt;Person&gt; personList3 = personList.stream().distinct().collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//listè½¬map.</span></span><br><span class="line">        <span class="comment">//ï¼ˆå…¶ä¸­ï¼Œè‹¥é›†åˆå¯¹è±¡keyæœ‰é‡ï¼Œå¯æ ¹æ®(k1,k2)-&gt;k1è®¾ç½®&lt;ä¿ç•™k1ï¼Œèˆå¼ƒk2&gt;.ï¼‰</span></span><br><span class="line">        Map&lt;Long, Person&gt; personMap = personList.stream().collect(Collectors.toMap(User::getId, t -&gt; t,(k1,k2)-&gt;k1));</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¤è¯†UMLä¹‹ç±»å›¾</title>
    <url>/uml/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰ï¼Œè¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹ï¼Œè¯·å†è¯•è¯•ã€‚" data-whm="æŠ±æ­‰ï¼Œè¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«çº æ­£ï¼Œä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹ã€‚">
  <script id="hbeData" type="hbeData" data-hmacdigest="cc2bc471e3e229b1ad9c698b246636ace18afeedfe6aa4b01625bcd50740b25a">1b693c4938223286468132b2f7068bf6bc59b85a9dbfbc2848400429591984f2b8b59db42f0c182ce8e6c9d442818eabffa08720e7b587c1ec526127533b9128077842ec69af29e524ae201676fbedf76d0804816f35ac4b5e46a88f5e0b553c7783c9ea86dfeb885ab6f1ef09a5ad2c184b739bd958021728a490dcb293321a9df04ef06b6ade78e4c781673745d8f3bc8dd1d891354d0f6b174624c3868896fad1f2275555b5c133bec7b755e1e1fcfd5bf2e9bc8e001150f27f60a8cfa1ed6d7a5ff39bfff0e17efc9c0eb420b4877024a12e16a2f19346116df521ac4ec2f5c4af01099c07ae3596f6428a8e2db3f119f97b9dc9a5a17ca2a00c21190f27157d65dac76f5c8fb0d64f863794fefa6ca927f78db4d2eb2ff1031c8dcb17652d72ffde2b063f6e823ac522759970fd1f1862ab6fe50b6e844d397e869186a2695a0a76bff0a8e031d86c43779da2c6416872b8fc36a9fb54a23edf1d19febc735766e5bf94dece2ddf1598b1f34fa26501b34ea79e75ea556f60131a44658f2124e057180c95d5b6037250b23d803e47715a3a92358cb85298b8d7a4d2b3cccf5d43090380469711437c212a8a546f83115296c1782aaf7d3249e66a76f8c4610dac9065b6cf9633aeb957b7c8d1f291e3829010225f457dcb62346b3c143621b01ff4a6f65b58bc3436cd5d525752e711533e4c588fd86c1caa592390ae7c0e76ea533db4aba0f204b1a101b1beef7385637d8a9c917ed00d0e4fbb8e1d98b6c6895b66eb9c9969f2e93eb573a9e588fcee5bbe06e03bad2363e07d3fc7f84eacc72d2649d0c021fc7d05d7695e3279eeb6a0b0c90b1c0265771564051445f2ee328b6d21e2ded7c45fa12db3c488652fd05416c2f0393d54aee4db62c7de6c3a1eb92d5b53a751418ed1d401af4ee3525c9779c0544ff5311e8dde539d484b711a46a202c633052bb10d9b1a19bd29b886cebf52127c0304a2e0fd0940c63ccc6b5e7247277ff5389706e9a3f6eee06195656717026ff52ad7b316ca39cc795fd8d54e6d25e41d6072e1000edf6e51d5f6f21911eeb37cfbef2bc31938ad13dc01bd4ec33ac71377adb48ff54a6ff6e20f41b9ac98969ca9ef933e12e3a9106ba2964a7a51aa7c98e8bebc80dc11116a832d6adb8bc76e3b22eed6a0ce1c9b72a6822ce5998c4297ab36542ba02c5caf40e2487c708875a64e45cf6e90262fff45c51c405ed88b6cd524c208d13a46591a3562109d87d652aa6d9d4d4b3d5d8926d1de51c9ab4e0deaf781ecc9bb7a7746fc13b0e930d78a7de456fd0c1aa725ee20b16bdea165a41da49db0ea6ef96b203675db259f3e28ec2b2218e442499d86af10534a339aa7ee8b7ccd2595e79bd8b8c78ba765146c90cd69086446b7721c3472ccd3b73f37fa9b566735b0619ec3bf52c061450a4f5c4f835101891ee515ec5302caab60282918931dce5da03b6552a382693795e22eb5646fa11ff744d8987321a044e794ca9aff39418fe45637777f7d7ba71ad78bbd0c7552e936a5509fc0d03c872c637d4ba813644221641973f3c3a3f69e4899974bd56d3dbc72309a22cb27abb6ecda2baaadeed6790438907dc81cf2243db4fd9cb2cddb09a21b4fbedd6431474044b55b8fc3d40e56d676707efb779a7c8ed64be1acff3eb1169f00e4ea948220f278aa1f2fc70d4d61ded492f049d9d59c3048ab69af0da36b9570b0eff505211085b30571772c38b2fceeb67a83fa6c12b93a665d39dbd4200ed38f4596ff4fc05dd77f7bde43bb62fc81c4eadc60aba4db48d99365c56e442a980cefea147702c2969d10a6f90e10596a415d8da3676bc885139afe02bc77aeb1a7380e9d845c0d91a73ca51105b3aa489f03e8914b89baeeca477207b7c39c36a9ac3a25058efab786c77cbbdac00afec371a2ce97f6c521deca83ece3af870472b01148f9a6a410c6c9a23d52a01cf9f0a47991fc6086c224aa75d2e6ec90960000a2ddca95193b7c51324accb966600e42a7312955ea257faa80b109d1aea99feecaca33374d640763e1eee086cad60c70979fb33884f8d7f1cc353af96356508a705630077c47c50763b888820a47f30bb0d65e8cd583b6a39f92560850f0f254b6f12e76b154d0330fd7836a74fb78ced19ab2ca9e7bebfdc0dec40a4a7a4a75b1f8181460feb187a74e55452834332720ebad8e96c95e40733cd909b38f1796d7a1888c1bd8115254f2e9ebf6b164d40b06bfd9df7bbb9d59f4bae4297287e3aa76b378aaeb00adabe27a03e21d8f817491625d4f3104be0cb68f8598c2d3ddb272b575e21b153644facba567f73b6fde98dc08332352e879f4bd163aad7490b77313753ccbb08ea5490b3aae2f7e4da423f04e15b60db99966e4228a328724e7727708d62923ad6f2ed9bed0e58053edea9b6dd94100a2e94203fb8baba43f83fc071fbda7d07bb518270ee8d95f8099812eaf152bc8697a32d62d47fe4f7835f355c994d1a23b6b44421ed1dba2e341668f4d6f27f601d0f36812d75918034b4dd9229b96e70c067894802d5a5a31c933bbfbd4992ee36b44c1f9ae665a4a85bb378d72d59bd2426890d524ebfd147279fe77a7560cdb35ce000a6b183b335306920a4560956f51f1a6b334cceab8b87c778402fc8e2f6abed49f34994e31f74154d758db3cacbb191164fda98b216cf5be031d6936bbaf0d207cac2634976446bf442ac00f99e41499854bb9518e37b6c4b1a97fa037bae2b0612cd3675ae0a6abc83a59fdc0f343589e3b4491b1ab6d064973f8afa2f18284cb65b315cb9ac682a34e9c0282cd37996dd9921a223f02f5927f95b82202be1d20cc1b9f0097baeb17310351f73996d32a7faa90e66b77380f116a90881a787ed1b19bb5f3fe3d47d48d4105537c2b7adb6c3e6613e6458b9dfc8e13a7e9a622dbd546edf9b8d75710bec96cdc4a9a73581e5ee5a1cc068fb5e8f0f555ed320da57595c6fd3502dd8813eceab8231816a72ec39bf07446a3cadce3c8886dba72cfa519a88a440ed3abd13a21e32b80fe938373297b8aa2e25610dcc806e58bbf86ec28b0ad77221560dfc87edc43eb4e556069d8a2928a943b943c970aebefeb99928aae6d04dc8723c6478e374568bb25d08198cdc9d8e987548761caf2ac594ad366a03f8f500835fb2b149f375ec00759c83faf4252400659275a3cfa16b303b8b482224f8de6418751bbeb0ae8e5c559aef4b0836383ae245157ef034cae03d88d0e3459da48a5f2ce582f0fc4a3ee7e833bd06cedc54947d4f315f70b45b4f0f819f1fd7c192f6d791b2cea6e136d4bf543aa2caae438f4474df4c199b6cf873c979a0da929b2c8be0791e97049b3d7c087a4a025de14dc9a605fe2fd407b7bcdbd6ce514755f74ee19e8baf0ca896c3fc94d446d1e1fbb1521406b5364f65a6b001a2edf2fc4f935982e78bad5b87065e3c215d11694334b5fbfe7913e5a9477281ce8344409adbcd7e1656d5e8a08f4dfe909c7fb354a50f73175d6a1d83e4aa0819bbe2075bd683efaeff22612d174b714476b14dc536d080e7e015db77b59724d4ff9124a4bb02f27ea07f321094fbe8479b91750a4af6cd673e49952e7d517dab55948b534bab4a73f876059122c98c0b1439706abac02e41991bcb85816ead501811bf519d0a25f4360d97def4e8f899ebc25a0b8fdb51dfdcadc5661e2d6583f5d406a5747e5704a722e42f5d950e1881a011d2bda28e518e1643891a472e42f079715cf6730838cf766d66e613c40a4ac8b7a0a00253cc866f38b834b09c92600f584c21f737726b14aa181c651f80bc43708ce3f5b8339ba5c93d8cd693c60d72c8361ee439610767a97fb7d9c29777b944ac0e54a83eac6fef4e4d08f63525978967939f55bdf461d931eafef36be8610cc72dd9ae6c2e556d68f26017d590e7526f56e33e3b5117e4a8cf36b1dbb55b05b6648676b0e8618ea2cade866ce92a4384c80104d1cf44784885a5148cbb7265f1d60fb53318673de4d3105e2a2aed6ff414acceb181e900e3b23ad117e94906931ccb152d2773ff3701eecc1f8eab1495f43b2554f6756abb0e080a1fac280b811303d79de01fa0004d04eb917f3c00170e0d06307f4df24255a27e7276b609fa7ef4b1dd6ebd978045965f18292fc5d02f8971940495ea3a7301fac6a0127811b99a143d3a4aea3bc2f7907518c2992d5f42b8eb22fc136ff639632c0bc45c2f05e3f8313e3cd2ca75c8a10645c03dae29f1fe929ce6dfa4a415c23aabf9450edd6268ea876df1e71e6efe1f8c1f510b32fa297c48aa7010ea6e8e4a81fb29b9b05fd2199271283ecd26fe4019ab646a8cd1587434d1d7c198b20812657103cdad27217c2e8c079eda9c59a69f1288c2accd643403dcdb1f1649eb9760cc34a19ef0b1ba6ef088313516971ec315fb986211d5acaca2481397a1ec7b1ee77b605b997b6428b0bfa0c0a093fd6217d1ddd14f0ccaeb631cbc357c066f26f04095cd47a66c4a8d5eaf3dcf2c78db57a5e8928a499d2eaf23ac7e2bb497286152009b518cf2c07a4b4458fcdd2f5cd52ff385f22c09d960410f8d5b9fbe96488d5360f42327d7c53b9928d3bdc503f9a293315771ca8750cf2d3ecea1100a299488ee9874dfd197cc9a1602d880b2161b636757c949e87176fc79c2123ca1fad05de6511123bdc1290fe859b20368bfd3b8b278f0d115864ce19ea1256f97008ef6376b0ddb2d5cabd1b91c944a49429c6860c84a37c3ec5841b2099de2ee55f4b50092ab310db60c5524a6aee6e630b843a4902ff195867dc66a6c32bafae3667df9c4d0407c89360c757057528265f7cd4da16056201931a2799a85f0cc88aa0d1ebe1e588ecff2f26e3587b09a946d194af4b3a588128c14c0bd544082aea3991b4f721194360b60ac54a1d711a5272bfd21dd961642e8937dd4cb505111f6ab91ce0fbe6190ea4bc06dfc078d746e18a9e28aedbab7fda1bb6d5c95c761fedb3ad74b983430e5fd8fcff293319d8e8792897c5009099ff4ae0e1130da05f41ac031d8b7982c5a5b5d8caf40d11c2c77f3dcaa10f1f336369c5236cf13902c5c167f139954994d48d0b124a8319a200ed61aeb6b93c2583d147a8977171726778a8212c0739f655100db83659521d91dfa82d65a64913873d869dc19f378d7df2ecb57b74cc4ed1cc280ecda10d3ce395b5f8478e2a568261d67d9ababbd9e3ba328dbb5d409a3bc27047c75094c59cdfe72336155332d0e5acf3a1c494e9abd394b7a2b971429deff9dad54cb7ccd5b82c569b61986b511eef18124aedb17cf0a8bb03cf5843a761674ec13031506dc06fed4169fc24898b4103874dec84b2560526613913ec914154321c3601a99dc00da0172a1d2fc273576189f9da570403b673525c4b842183ad5fdb63cd77c895a77ce0728386ef0654c2979b3d174d9570f77dc8b3ea5badf7bc107678baa4f698ec5a789f5669ae92de5548f1168f83d5f9890f414f15adb598949ef64dc1a28b7371962a711f0f8c665819c3b8f3758e659c994d6622072fb52d0f6b54a53fc520000846bb1fd1f0d74692b7fbb876fed2600f8211aec6e2d555bb8e6c62f4aa92c6455fedffa059bff68a270c461472b77789bc39ac113a98d7a5aff72ac1712f21b1a042a65e1fa909aad364743a6c6c740b59acf96effa3af0a5dd65d5f091a332aceb68609458002dc6519fd7ee579c5bdf46e4befacefde826b14fc3a4c6c0a282989ad28957d9e310b5aa08cd214fdcec0054b62aaf4bad0afea1b6a6efe044bd1cb0b445637447ba04b0d66ca5e84fa4a581f4e60a9088f67656d090619fbe08ebe9328265b520e10598976ec8dabaec96b6abe3497124e72852b19526ee12951ae1864d08dce2e9540913b045f0489e97e4a88914217640dd3a06e0b935c6a97bae5ff2120b85fb1a9c6eed9b9d56ba311ec51b21cda219bab0ae0e56be88bf41e98e01ce35526e359562e4cb0114724cbe1f53884ebab928bac0f813fa4122bbb83c9497aca5442f18f150a89ab5ea55d6d24d88c48f9f3920b41505f5a02dc5915c27be89aaff580509c5ebc413b927305ac6dc3a5492cbf92ba65bb2db06a50ac080ab86fbad3693f4f2c35193e9271bff4e254607ef2f13daa7c7768512086151f1ac69ef4faac79a5cf7a686daf608beb234acdf4d3313d83215c6b1153cd6d4f5621d7be5d534d3c104529a9ee6e499077a7f6f4b004b7832e7e6b65f2ab7e3e4472a9533a510f05b99b282068645f584272da1a80a36fb810597785dae5fa673049c41b983cd7e8768da95b267a092aa70ee41e791dca094752b29f3095b66cbfbdcb2713849d1817925c445bba37628a25f9265cd99a1ed91be73daf3cbfbd547a9188d2f5f7dd27c113e2dbc90276bd2b00012694c4a9d0900a30285de1dcc59d42783e8f1e7526e4c04d9165dedfdb4768a9be2b6a98418d0947b20f51c6f684a7c81e2112eb419ed46e78618e1e63edc116bab96caae2cbbf8459686d057e83fd236c1eba09deaf0f5b8634542850eb76c3c1c7b9f62c32fa75e1a79abe5ee711c062c73306844a7e93cc1263588355d5599963a06f7d46398c262cfeb1a279fdb3d86bfaeaafd59beba9b64263f8afc4ca8322c830c4e31bb33092fa796b0d063be500e37a1795327b295e1dd4d66070018ebbadc4c46baf74f4574351d470427b5a18762e1d47d853c70a56ca78f81a7b1a4d18c379d77bf9f32487fd0ea462c71349eded7b579178b79afedae9ce12df7125e00308aaa093e89e339c7311ddfd85275958bef284ee2dc6b9652cf27a34ada74c13d13d058aaed8e181229eabe406e01fd9f9ada5318775e64291e83d90776339efcbc54f5d8d40362e44afe17385c5fd9ec909c2d93227df49a430ddafb596cf4e507c233e6b11da7aae42e3eb19254a00c592babfb0af5b8fd6d327514f374eb9f6096cbedef135db4970c03d90d06cd80e230f22f9207ff3c8227c4b27fab33e7449de7b4439bdf99bd34b2825ffd9795ca47f95d6b32235c48670f54ac94fb54eae580a6b2acc578e88dd2cc212492d452f4da1f4c2c58facc8de1ab1214bddbd7463ec302463aa951ee07f464f36ddb7df84d367fac19c6b796fe0fd083ba64cf1aea146667db45e119fa95fcec8aefb07598580e6d6ec1aeae40dd3281635a42a7e832e1ac48db6e59b97a47ea2040cb7ee7bf8364009924a9ca4312b0e58b40c3d435e222454e909da98ab4d064cf73697d85a9b93c2fdc888173bfa5efefea1dc41966ce9356b36084d1e4e44e289579a787f35fc8a9c70571256848131b752983c3525db7af1a2b07969d467f33c0ef95922eef15192ef5b2d9f8b19fcfbb7b9b0bf3e2833b4655c1201564b856d5352ea56fd644304c4e734c28b2e9fee7aa076ed3824922a6f5e6752a51b47536786184c902b2ee1ce4a54b75c87da25b908fc364f90c48301bb021853cd65a8c663eb0d1038df65062e85139877f0a74eaee99e2415b9f7bf33ba5a6a2c50e9555fa8cc3c874d49e1929370a61cfa8d40a15b91915a783dc21b4abac4c57235f2528348e12e47bb5f4aab147d64b15a491c3d63f6d17798dd95201f9092d12b843b76ced3f7c7923fda0d8d732ac5cf0dfcd96660a63e7a21dbb46e9799fb821dd5b44c5b212e3c52740605e0edcd08a479166cf97eed4ae50cb193a207c5ac72041cf965c37bdd55c29d123edbc5cfb470322006b32e90086e836f61cff83f0e5228099889dadb39a6fab7e30548993c585f1ecefafb96f051a86dd161303626a2640ea90dfdec7bad157c759fddda99962a2e8e73bc975bfefee5a91160f4d357c70daeddf41e7c8e013b673fb344aeb14805b72f02248a54be0c3c976677f3d90df3aa1960fa31d92616912f57f53cf604d606e3227f565e28bb8f3fe9b703b0ae4143338dc823dac67e22af0bf2779afc4b90fefac97cb0ed7303951ae51b1a08a80c1ea4abaa7640cffb0513e0a7fa1c598a13aa49bea6613cf82bbe9fa064f2726dbcdf45ade911223d99e818da473dd4a8817a6d8aa5954d8718da50f4202856c201865f75ac3fdf1f30d075831d8bdd7729f991ed46b642ca7112fc7b9825999aa907020e63e29dd5fa1ff5708bef6bc390ee9512e7517ad623fd83cbb08509ce20542d902f785342421255cbaa14cf4c89706fd4acf977484133779646b0a8be5b785d1512fd111af08b209e51ecdfebc2ced02f01fa4736e3b0b78c50175c62f6f9eb741384323e8425e192d265135b0b35242c21c94ef1f258b1e523abbf5629b3e1cccf71ddd44c77fb3cf38e696e6e850731a6c72a6b554399a9afe8c63d7c93096dd4246abd5cab83ceb3930f46d695f8d19f7465aab06b9860b9db929d046a2bae2e5bb5bf2eec784830498e3a38594bdab67e100e6cafcc20be564a1639c352cbeef12885ba3af85c118a43b82f9ebc0c00f8cc619f6f07c854a2c56804addb34464997e91a80b80baac3a48eaecd32a86d3d6704e0c5b11211a46675ed21c916eb542243016debef60afe8dfb35dd3af245820492f0c1c6b68a841fef07dbff74499b4c71d1ad77bf958e22f2ad80b45334f5036d01c713c4ce1a5580350306c34d5966096abfdd09cc58d0c30577d30af5e9834973334d6f6889d7ef0790184125bb8c32dababda639f2bed206d70796ae12d9a530112056a73b75eb6054378e6d03357652a174bd7fbe00678deb79a62e1d385cfd1c323dabb48b5c76a74742b72cd93615312906020310969ddb1b0d49c9c7afebe1d5c2d503dfa5b008414911ae7a13fc0cecc759dd1502cc380d7007a3331be14f2ef6acd8f8fedf26ef704e6110e19052f8d57d65c61031df12b3047b80b53b6436a746cadbd9ceca93c50c0feb95ff830cdb2b5c15016b9c4592951c4949c17d13c47daa4e59afa82836a869e9966984cd94d33cd2365a7e4f97e580952577ed7c9b0d3a30376ce39629c966832176541883d2414ab64aa2c24199d28d4e41f58b523669c94e7ea936b989093e0b8abc4ec3480fb3aff776f438802cce36bbec495351b61fbf3747aea3af2eb748d377c262b16e44f28d62bcb8229d464f21610ec1d858e16143a3aca3519404e7e12ac013c9d276863274310dcf49b1b2e336cb366092e1b3f6b02bf42364a38ae56729639b367dbaa28058a08e6f84a527e10d0050675fc16b92a3386166577c5be2aa1b988f9ef12d5b18dda8137a2d941e785867e5a923e4b71a00b0bbfc0ac9c1e7206158fca01b153a11281cf82e8a84573cbaf3ed55d9965e583a746167fbaa08922c2d9bc689a90c8d78c0c1298722e0b8015fef2632663bf11ab4fefe4b79be866dcbbe75f86c9b4b9334ca49d84c5d88f77125fd1acc3d860901ed1c29eda4ce2a01421f23216c02a7d77ad6e6ca56c043e61be304755fb7337ba66aca9b52a89a8474305d00dbb44283e263e8a06775d90d9171b486fd0d6cbc42ae045a811018962ac8f177bd8b88b7f4d32f161d68ba339c77a3a778c23d3072ac30179b5d2ea19d2ddc8c26f19e1ab2f1801a4b9e3aa772871211aea46e478ca6f662ee230d7c40856347b8bc6b8c00ee0e67182217ce699f5debe860f8296b6f7848981e43a713d97c55161eb31361302da30004dad34b4b7c0c93c803cf0bb579d5e407c5e5b3a3abab03277182d471911815583897a6884f5c644e2f8a0dc30ef8742937132de73f9f2105e81c28445e60a623b1834eee33c697139b1bb68b71367782c15be1eae3c9ceae5adfafd21d00ed85ff185183ea6568bd2ad52c0c8b940d54acc674ea2c29f96c99a4546afc50fc4f6136ed7e369b4d1802bc2af00c858682c890e220937f4fc58e1c8cb9d0dd7679ff53aa277bfd896b1a1eabf5ff1f086e81e8c28a12b03d2c754f1c96d13847f41ce3f7a17b7b7d860e8487c1880c4ad7d61d77f83556c24c10111720cf340ceef13ee478cefb3fdeb927bdd72d91b2d78eba7af7a35a8a3586aaf1db2597d768c0eb3701f9e514d48cfa59d3ebd030dc340c35ff3099732af92e2ef65bf2dc7a9087a04cf3d1a9963df7c931e0a875526bf07cea4897d59e1f0a0a8b1d3da98ca0249517f5fa9b87124c941f4d22e60e6beb7d147f5776dec0550b1ea50e9cc8a20c46d1afed2bae58c61fa1f67b24a28fea0fcf391ef3380dd36c85ac29a2af24fb57bbff1832cdce1afdefbea891fde7d11c16c2520b03bcacdcf328013d142791751fdb4483e1713444a78487c43663c8615f11191e3b78bc8e2fb01b083f0629a182f2be0ef8695378d3672c9c64847e8d42e27b45d200df20799dd5403b0fd7a8ce3e97be30249deea6b756fb335612ecab177e8514338e24e3ebaffdf9fe57fe8d55d31a938bc804500047a6582b41b88e1b683405869dc42aa7c4c565a1b0216a76a996c9244bc77baaa82740baeeb0341dbac585762a4cb83dfcb1890c37414f9a208cee40c8e51ab8c6fe883c54cf160109862407a0ae7000515175a613e06edb68bf4afa75202ae5cb93e010e53066cfa168f3ce38d3ab7f2ff4f5157564314133dfb892af6aac286669ada7cec369925663c5e25bef151cffe58136081a95158cd75b275206cfb1144adb5a389428ef989b60ab5e4f1da72c39874168efddfe4d91b70e388c964cf1a908d705796f6f21d2e52698e80fa35360f694fc233812d6f92fda05810842aae4ee84a05d441d02efbcc0cacb688904a244e93a1fc0211c0648e23fb5f1e60f3167c8069ca4a12dd11e2dbf4405e234a48781514169b0481850d97dd1ac2b0a58defd13b315e300008203b0b12db79d46001517e36e5d94b61208d6e25c04f9437d95a989e8c740f937c1ebbbb234e3f6b3e3a1c8c7805755f88bdea4031fb8a19d8f57bc9f72c0b9e28e9ccc4bfce8f0254b06a7a0e2a6c1479444000ec95f94409261249b70564c352eab0a917a9771422ae786f4ecd4d30442d2216696a64eb1dbc1ed567319e17df0602926891e44669dfcb4389da5e5fc7df452a4f1bc169fb32bf8b2841a6b895113713580fab01b56be6fca843d3e3bd97728848da9ebcefd830f12ea29cc70391ebae61da7b2b25f5618386e9591b9ae96503e80487d84730e27903123159b98cbe15392b4883c03cb532ab9417a04d628de60e100caa276ff002176ce667f5b6a0eb96e30f4e97991b8ba2fa82582d02ee1fff1ffbfdc8e104e5f953673a591b51c1af8f114fd21603fb55806ac7d0e84ace404a061fbc335812591e1d5a1301ff9a58d645974d695862471001b764b23fe7481793c40dd56d23c0814ce82b039d809407fc8d2343b74843778b065dbbfcf3bc1a67266bd00552b7d834e2a8322fae0d8030b6c5154b50f15a8396e1461f6fde3c43b18086183f9d5b0d423962c390c4b768fc6b4bfc5adccffa984545c88cc49d4573d05ed518ed4fa83b599c0f97d007c1c2de751c8e0801be6cc1fd9f1d73c5a450a3f8e0baef9c04a835f23ff2f05720eaff09341fcb2df7a35e18b57fc75f43b05579a3afbad4d35d2d1435dec389e848e69b07aeeee9213fe415e3af2bc9b3aef402748255fbbd200174f53dd52d1f0f369bf83f9508a1f0d133ee0107d75fff727049e70d7d561656faf1f5f4461b88834fe44a158bfa2db95f947db862e00842a8eab17b00d3ca41d87c3c5a3cd0cae1fbf2f5d21632ac1a26c85c72a5c6fcfad78169d14bafdff946d733106ac2ff6b48313946130514de6a4f7f642894c2e95157371e1cde9d3c1c1bdcffaaa3b8da83e35c6d432344743cf91bfe89e6c0bd38c1aeb8b7bfefa76e77f1d272930df3c2726514f9df5c57aaa257e84753dcef36a4ed12158573c664283fd1a4c96e955efcbf8e8982c1390508a348c513efea693de7058f848490f12b3d8184bb8102dbccf27db7ef51c8027bec0282c6d9f28f9471640e564485aa04455bb0f87d7d43385f3289387af1b9151183476b9db72f6b5e4b4f579643878367215003d6be223dbf807c7c3afc9503e9c8f097e9c816ed619a365263eceb68dc569a19018b823c7abf6d797a558d4352cdff274678e1a7409216fa0bce2cf70d16600d1b08e28670e47cbbfaac18907087e6b33bad72af599473e292faa008a15cf819f29c7dac93e3ca70b4f01bacdf70f515aca430072c26813f213523a8c040004d204511b2b251b75369a32923986bb4bb920a0577155f3eadbce92b46e3d143f39a94c2f2b6749881b73accf120e9e7f78436d0446210bdd00fa2aef5d7e57cc64f9807e2875510dbd81e74b7229c8e849ce9ffef0b0b95a7261a6771445af36f6a8fc2d4828d16bfbcfd799cc84ffcf0ea5f1c372cb384274c78baa583e2063a1d6f7ef20b646fd119a301f7a930bb5815525cc495feabe569d51c07a3d3311111bce6c8fd67ad0290a5fedd442870929e53142b8d853c06b342af5aef86794c6a3e2f1b6deaefa3604912e0e8be1c7bc5cb0893dbda5909b71864d0f779ec24eaabcca5dbaca52fe862babe685da78db2115cb09a25bc3b63c02f7e1b153a1fd3b51c316d9ecf5417cf9015b5ef4931eb3992dde38ab1389e595a4db49d086bea775ecfe4cccb1e8c7ab9ace4f33c1992bc2b1261c40197d6d6e7da21587cb0848d0fc8f67aefc8921c6c09263d51e3ccea67b5cfcadf2ac40fa27f54c6b593447c441923442fb3f68197ff3bc15af1816aba1a2e6126f647c1b091f845b5e316c463d532ca97a5d9fda60248a003010fd17601f906a1c018e272e9c9254265b802b8a70e41d0fdf720e62ab89baec216509b4cf0c0d2dfaecb162c5bbd52a35bb5fffb280b05c3bd1e6abbc9b650af94bda0f26c25624895273afc0bc7c7f9e5fe3061c4d0872c06618385f50a564fea0a387f79c17cafa55fc47ddd2d3234c051186b140d24f9a7967c2da2eace7e8a5528b7bfffd54c7aef7c162909ac251dbcad130e9fc271375302886c0e6928515770cd526b8b8ea749366001fe91d14b2b6a3f724db8a70e678fa2dca73650718cee56cb854110744a27187105cac54b37a3d9d80921ad9c5bf2190343079a330955fd638fae83e08fead747f0c516ab48987e12f515b59803ae91b3084a217c915fda24c9863e83a0cdc0f702cbcc62a3824393fd8876a8530b1228a40566c8912dce479809422a1e47c4ede87d777b946e3f0b6becd140b5d979f1c9817562dc741bdf24675dbec1deafe7e9d5f2a5046443b5fc5085a1e207ed1c4511427cf7573b8733fe221f67960f5407968d741d27dea24bc42ecce27edd0248284e692914147e1fe0d1e39258f978f8564b9bd3bd922395a670919b8fc438091a415b07da54e189355eb89460d556a5e934bacdc26063a91b35bc491a49f3dd096341a28fac8d9730f90a45e2855898da61d9ce9d162e1c9b6d4f79e30c2c54f125515b2b330c296189f5df2da3ea398858cf3ce3d0f78f886219a1899880d13a1467bda2a228a3937849311231a08182d9f2ad2fff468711a5f8011064205a67c03b2a4ff0d4adb5a8e6f04faf9186f7b36debd8d5de481c254338ad895e73547f6156436fadeb85ab49518bb8283ec677b653469d3c92f016a33aa78e3ac6334c60a2194ac9a828cf897d7873c38962a5a74f4d3ef9be19e0420830ff3535e7f832d3e32f5433fa359841450d5f56897b1feca34a7957afdea04a50e134ade89c0764584acc8cf18f674314eaddcbb50ef564d68ddae03a73fd9a07c7192a6b60a505414e9ae79e1a2e03acde611b8cc162fc57248941af1b6cf20273214ea6819d82ab71dd5ba3ff1426ee948a47fb61f3ebeffef9dee590ba0759da89e121fb86bd8b866cece42b3fc926c9f751ef266750396c6cbaa0953a625e9e64d495257782159fe983ea7e2f961f525183112170b782c2ed653a465d0c9924cc54c7db1e47853aced5ea078966941ddf8ebb084dd74144aa7912a20cdd36dc1a7a35bd9dca22d14012a5ebdff58729055a1b5fe487983caddb51838bc3444cf17a5786f1419f1b30b540b284e4f797ed10bfc1280b61d1021dcaaa6315b18ea59f3da37de695257f127f8c5057d20175fa1a8fd3d6a0b93e7eaeaa7681c10379f1c94b554238ccf5e4363e2d96ae07b15c036b73b8ffde1f90b92810b0206def37958ccfe398e0e42c693226dd515223fcc7e35002531561f9c6e620d03f0809d28c52699cf1d4cbc36f6932a7212293c5eb39f23a1336bf8245ce351e84d4dca4b2d5e0cbc82843bb26007f15d92857fe2963a147c640a7e08d4cb138c0566197f5fdb5b9b496391e1bbc0f4891e550e979e50190dd6d5a48ab0f0b3c55a05bbd3d2126203d88b8cb638965a8296045e84940f60905d271f454aff1ab8798d3332d628f0360ab7f2881ae742a28ed91f017c168c0fac0cf38b68a69b4df75fb5a429c9fa7a49c81a49cf46ff61dcc77e90899d6f79ea628f274a687723ed8a912622bba0452822839701235a0ad030c76fb0a20077c9c12ab73236c2380f71498143858f4edb68d40dc762bb85d61dd89f6d988005920f1c9303531cce4e6f52ca3af438602df619ff323a1c274380f469757c52709396989dac970cbbdaae9569c6f9d632e1eb52fec63c0525908ea53735a566090eed13370df201f0ebb4adc77ec44432dbc4996576fb9b40251f2b1f50ce67b42a5f03948ed27b1ff9f37a4afeba308778c35dbd0b752427ddc89030463c5fe0aed6802cb9b2ecb8fcbd85fbc742cffb4e7c2c88a388725bab0431cc1638de57e5c46d8afa9fa186a91b0623cefe80138231bafaeccf5812b890727300f7bb9aed31147b5974ae50d5d2cac707da656e99378e254c10c13e7990cdef674b4c052cbebeec314aab49c8ebee394482d7ec1e22bed4229d1a6cae3f322b82ad9c0db76a2c6f99147a99c1d4f84ced5d2e05e126dc2e2ff06c74830b3dc8e3bc12973ee7597878b9f5979bf253b632a47644c8fbbcc58f35911998051d23326385fb0ea9c76983f75f23fc0356b86eb6f32a15c16ffcfd1ebc3066c46fbd7a4a7ce35aa2b035331c8996a47ab1443a221ad1cdb4337e825816db4375f9ac15e408d01361042111ef66ce2400267870b43b631bdd39ba7386fbf6aa8329f3972bf03caef1a491359731a6580f9d8a5fda503b573661fd26ed1ba2c736b69521bebedd6be768cdc5e7e690b5f72588059882e9b96a4f52ab05db4acd86a9ff36bfff63b516c500a3a836c6e9dcbf878a74b8957978b0e06b17c5dcb2a378aff4b6e0bc836f567e2a0d28e95acc7d97a41da1d65e368294e0052ef17d7bb203f667c4cde6cff110ee35679fcfbc03f00c8f2c38405659525ff6d6551cb49ce37ee776f9f9f37a766c4f8697058d268ef10068e514449a7b193d90d99ad5571078156ac0ec1a6be398b36a57c2264d47f8251a1c1a29b07498e5d5d2b26a833c59b1bd5df651f66e851a16f4e4e859d4dbe95b67830a529753fe4285d8cb1ec5be53962a918c0a010e45a04cdb2483b87af8426ca877ae425842f963dae6d33bdc2d4052206b08b0835b6cbec9b455a31e860792b492e4f4881d299aa8375d0c45e3aaccd016985facbd0527a281ac224cd9f39a7cc8acaf86b3074c35a988304340814824cd7ab0ea129fe3b9943a1d9ad30e5a78ddfb2fd92c3f1e150f1f9a7e2d3628a236c580d73c87806101501c989b289f51e81798938680b6cf3635508dd7d31bb5a6246cbe6facb5fd6ad8f8009e027b3e28f3dcf18d62a96fd271db58b54a596ad10584ce36291cb32395a258dacc42944e58e20bcbd758b441bf827123c3d54056a8c097a46cd62a66b51ac9f4acb1d5b1721df1477c9738e29b8f8ef04b3acb53f297f7874bcdae213a3c7167bf8612df921e0bf4b06ffc26746dae92d28b900e58cde4289d74e661fa5b9fe3ad85e50c39c2fe3b33a2c2fb805e448c1cd7455ad48299a4f452c44f7d363504b3816c133ce2b53d3564a363de5ef82b4e80da339a80495d034ca573c0d0baa0125add9ac34b2b922e5879452fc0585b6593d9f37c985349f1339032ce17c200572944618ccb26f197c663abf58cd0068612dc90e34e015ffe7d2ed60db4c6676d66c849e9a00aa378cd299eb783ec2b482c25a05d7f76a7361fb28f539eb1eb9b228f2f31cdeabd3602cdfb8ffae0e4e99e43fd546abc52665fe4d97e2a51b43534356d246d6cd230f1b394ae29dcc0ec89c17f92f98b8e88506dd204764a12e28313ad766b81b3991d23924eb7b952fb41483ea6063dd93611bd5338689e24b072d60963997b235fc8d33b5214246ba7e124820cb549ac0831727d7a744e2678f73959f0d3221b6f4ee05eacdf876e6d640ca5e111fd2e50af2037e397ade9ddbaa5ad368ec0f9f84e78786efecac71e21868233bcbb59e6ba24a5e22ed2b8fed596a92de38831ecf4238b7111bb3ea617fcb3c00989fa64e638411503becfda395a8816a6ec89a199b3340be41e42f5bfcbb2805c7fd17941f2fae9dfeef9217d69bcb1ac924d4dcd4c126dc510e6496f4050e6ef296ce15d4b4d1908e903fcd3156ab1018403d732226c7fecfeb9df71792d007286d269eb2b28959c71820d5e99bffadd20ab0e14a47bf549cda9f7d627822fc4be159160eeb84cba800dfb70a4b2ecc6f531ace874f3779a6d80cf4e7d0419a87ff0b2c4768bcb79ef87cc26e4810f80e6aa8955c6009aeb274ca72061cd9efe21f20fb45b1909e014e14588bf5865a71753ee74e92c1c48a6128d17798f2f34b3808dae7c87187a73e9ba0ccd7f1e5522abd9f86747c24385db4a47a6c6f0154324f053f3aaea6c12e225bd58eae372a264d1caab4a38e9119a7e4d355f317b2df19fdb451915a57f7ea88cb0764033ef9f56d0934960f62c1de44a2ce43ca91b570aaa6ae609cf26cd8ba19eb65b7f8140ed5fb05cb318110c9e3a2bea86f45db83ed41b684b0807473ffce065bdd4bbeb2062b4e14ad4007701f5a66f024064a8cb04d704efc509b104f46d106d6a3c20b3eeec0b67098b22555002d1383aa2925652cf842310f3d73529ca23cc7559d57926000cc7bd6ebe910a0d3ff7d6954d5dd00acb8ddaa5aaa6875d2e462f1923c593ed2fe88004a8131299d9b3cf0c3437f07006c66870dd08141244b6e8d0421c9c42fadb2042f0fafdbe726cb28b8b07ae29606184b0e7fca75ed5301d99fb56af7a22c43c52053510df27314b802e16bef0944c041c075b549d06d2e945def64e4920be312ef6282edaa57f1f2fd66b8292f5cb84bf18ddff7f7ceb692a6b75fd781814b841d4496be0a29332cb63ea34d015795de44bbfbff263b9f67e4df5a81c69dac911a87fa6d2f7bc2572922154931ca12bdd87b32d52eba38ed02f24d363856df99ec642a87876457547ad3900e0befef94a38db919e056e141251254ece61d10eed63899aa84ae727afa44811b26f219d13cbfc42f165df0868124a6c4cd2c2758b86cdec442e0ac6baceb93bce683b0c16b42e81ec60d8d8c82ed60846ea57bd0eeb2db8ff543ac3728cf8a10f83e67ddfc79af700ca487adba252775610e0b6a270f59aa2c6ff834fe7c30d1e23882ec997462b2e2edbe4f474123a13b8b426f625377bc3bf9b4de20cc2f83d0db210d2de73c40cc869491dfb6d187a3a5b4a35834443313ce10445f12e173e2e00ebaf3a61d49bcc7eba6b5e8377d3ff05250509f1b525d43dfd5f24e075c52f184474976211dd99bad8c4c70dc6bb41602ddf6ae25e4c8e771ff0e3cfb8f025ad8aeffbfa9d51cfd5a111f026052f0ba18b3685f4ace74c3baa0b49c76668645b66fc3534059a1deb9f54ad41b0503d339d2b0b1c4a51a9229567bb6865c3c77367313c525fff63009ef03c215d7a6fb22dea8b03987f15d470e1c4599baf64defecb80835d954a8ee360e527030301027cccfdd9e16ece304cc40cb66e58da32bdf08e8448f442b46ef69e6a44a010727c1363c382730babbdcddb259f993619a72797863d01c97f53a9f9a31097c98c7afa3652e105345e150573f566c42678da61de04c8fc022d9b40f15b8714047466e0a503e02851b1e1a0650ebd78ee1e805552f5746e794f8607dd12b67b18c86dd8319d5c41864086afb5e7665c4977ed229699b7a7b8318933d777dd31a2699457c32cbda99b75a168b0ab123487742f43663c1dc4f1c548ee487d5207f912c4d5e2a09ed92ef3782c03ad049647196b2b9fd48cd44ef1ee0f12ba1ad946afb4833a53c786ee37e02859b20ba37adaa1ceb291f1c0b153f4696b41fe8714dd9f8065829ea501873f69ef6a708c085997673436f861cf7594370b758de9a8ef348af9674017d93ebf5bb060e22d122c99fd54983ba91b9a237a93aa88b2c70aeb748109e5f56700d79d1bb74c6b98f839a860412294066099c8dfba7826a936b81fdc1a46177aca1e73f1a5d56f94046b03ca641af7479fe2143f011000169c566effc3582a67ac0a6c249fdb16d29ba7ece7410685bc91bf1b42d5e66e90af940d97867762559f1ec7875f233825acfd065e9960b66098e08468ad8bd2db80c9017c890572be493c88d756b9eef64d2996f280479607e9f8fbbc8325ca1d53807881689d237ad836fa0e18f86b19da1e74937adf6f7474c5e5f95cf8c402befc8ddb5dbe8c6c0a1c10fe89355d0a2b25874e2a7bffe8a509a5a1ca01b247ff3a08283dfe2da0a2c68dd6799383edd0fade87de898e5122244034baca6ddde430eca035333435aaffe4183f4147a85e7a5d50060f4166e5c4628ed3200d7611098c9672fb7f83120b0d41142434830fcdf39812107422e97387ff036443429be3296338b7ed6b64d0c4a1bb36bae50038610319fe37302bfd6d197a02f5641170152f6060e9050b306bab21899525b15809df4f08b15e68d33207014a83d8e08322eed7337b444eeda45f53e949725915f9ab14eb07b37825ae2d0625d5144e223127d4e165ef4525c87130140daab07ce382add347fae69a119036c8adb90cb8724f6a43523ed368fd828f0a9be98eece16dd483f416e8ae5e09a594c2d7e6873d6c71f422546b4b5b4e89ccf30e24a24c8ef19142b3508c25b1efbe07be4ff9b66a669e3fe4cd8076ce0447cb9eb6ae68f1c014fa06db125274eff1af569f6a88385b546fd4f53e233912a010e3c50dda11aae4757ad946659c80a942fafdbff53047985cd92692c227e2a70690da3f5a455f1f8925da5b6f1ba011e0cd45900074b961409fdb49c1831753d8a25d1a28ac915b38e97129a99f56468f045b7119f72b6b53c557dd54f657542fe7af7e980fa3ceb89912c3c9b54a9881d4bac594b51be0b0121140942bfbb869df1f7f7dc8df756bcbf61661b21c2fd2a54c9ba9e482712665761aeaa1cf0232ee585bead710aaf9640cec3631175a15f8f29f072006b01232e0232bec1fdfd73e76da6430e25f2972c7897281f2741893cfed72b15a28ae3ce51aa75f80564ab983fe0bff9212f4ec86c849e3ac5f92ed5e83372dc08baf7fd685fcefd42d40d404d594f288bedbee019a48f74aa57a4fba3a6eac19c7acb8af19e4733849a64e2cab5bf32f05401a1dbe81820e2ca3a9cf68550dc3b0dcd62de6c20676754a636dacb9accefe3da5ba014c4fc96ee14bab313cdc7ac0bb7c9f22bcf4c6056ddcec9efcaebbd11ba92116f2931968fca4c7703c253054649e801abf6816d44ae1da6a72182e9de0d544b2ec731cae4b19d4c468ff754dcadda6c91c8ede1a8693c9eeeda9ff879e3c9d5bb6cb92373af3c3a9cdf49e62fceaf873b72da6511216d2fac840217e0</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½ï¼Œè¿™é‡Œéœ€è¦å¯†ç ã€‚</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>æ¶æ„å¸ˆç¬”è®°</category>
      </categories>
      <tags>
        <tag>UML</tag>
      </tags>
  </entry>
  <entry>
    <title>select ... for updateè¡¨é”è¿˜æ˜¯è¡Œé”</title>
    <url>/select-for-update/</url>
    <content><![CDATA[<h2 id="1-æ¦‚è¦"><a href="#1-æ¦‚è¦" class="headerlink" title="1. æ¦‚è¦"></a>1. æ¦‚è¦</h2><p>Select æŸ¥è¯¢è¯­å¥æ˜¯ä¸ä¼šæ·é”çš„ï¼Œä½†æ˜¯Select â€¦ for update é™¤äº†æœ‰æŸ¥è¯¢è¯­å¥çš„ä½œç”¨ï¼Œè¿˜æ˜¯åŠ é”ï¼Œè€Œä¸”æ˜¯æ‚²è§‚é”ã€‚</p>
<ul>
<li>ä½¿ç”¨ç´¢å¼•ï¼š è¡Œé”</li>
<li>æœªä½¿ç”¨ç´¢å¼•ï¼šè¡¨é”</li>
</ul>
<h2 id="2-å»ºè¡¨"><a href="#2-å»ºè¡¨" class="headerlink" title="2. å»ºè¡¨"></a>2. å»ºè¡¨</h2><p><img src="/select-for-update/0.png"></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--å»ºè¡¨è¯­å¥</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_user (</span><br><span class="line">    id <span class="type">INT</span> ( <span class="number">11</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span> ( <span class="number">255</span> ) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    age <span class="type">INT</span> ( <span class="number">11</span> ) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    addr <span class="type">VARCHAR</span> ( <span class="number">255</span> ) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY ( id ), <span class="comment">-- ä¸»é”®ç´¢å¼•</span></span><br><span class="line">    KEY idx_age ( age ) <span class="keyword">USING</span> BTREE    <span class="comment">-- å”¯ä¸€ç´¢å¼•</span></span><br><span class="line">) ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">1</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_user (name, age, addr) <span class="keyword">VALUES</span> (<span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="number">12</span>, <span class="string">&#x27;ä¸Šæµ·&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_user (name, age, addr) <span class="keyword">VALUES</span> (<span class="string">&#x27;æå››&#x27;</span>, <span class="number">31</span>, <span class="string">&#x27;å¹¿ä¸œ&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_user (name, age, addr) <span class="keyword">VALUES</span> (<span class="string">&#x27;ç‹äº”&#x27;</span>, <span class="number">32</span>, <span class="string">&#x27;å—æ˜Œ&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t_user (name, age, addr) <span class="keyword">VALUES</span> (<span class="string">&#x27;èµµå…­&#x27;</span>, <span class="number">24</span>, <span class="string">&#x27;å¹¿ä¸œ&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>éœ€è¦å…³é—­è‡ªåŠ¨æäº¤ï¼Œé€šè¿‡<code>set @@autocommit = 0;</code>è®¾ç½®ä¸ºæ‰‹åŠ¨æäº¤ï¼Œ0ä»£è¡¨æ‰‹åŠ¨æäº¤ï¼Œ1ä»£è¡¨è‡ªåŠ¨æäº¤<br><img src="/select-for-update/1.png" alt="å…³é—­è‡ªåŠ¨æäº¤"></p>
<h2 id="3-éªŒè¯"><a href="#3-éªŒè¯" class="headerlink" title="3. éªŒè¯"></a>3. éªŒè¯</h2><h3 id="3-1-åœºæ™¯ä¸€"><a href="#3-1-åœºæ™¯ä¸€" class="headerlink" title="3.1 åœºæ™¯ä¸€"></a>3.1 åœºæ™¯ä¸€</h3><p>ä½¿ç”¨<strong>ä¸»é”®idä¸º1</strong>æ¡ä»¶å»æŸ¥è¯¢ï¼Œç„¶åå¼€å¯å¦ä¸€ä¸ªäº‹åŠ¡å¯¹<strong>ä¸»é”®idä¸º1</strong>å¯¹æ•°æ®è¿›è¡Œæ›´æ–°ï¼›</p>
<p>ç¬¬ä¸€ä¸ªäº‹åŠ¡ä½¿ç”¨select â€¦ for updateæŸ¥è¯¢ï¼Œæ²¡æœ‰æäº¤äº‹åŠ¡ï¼›<br><img src="/select-for-update/2.png"><br>ç¬¬äºŒä¸ªäº‹åŠ¡ï¼Œå»æ›´æ–°ä¸»é”®idä¸º1çš„æ•°æ®ï¼Œè¢«é˜»å¡äº†ï¼Œé•¿æ—¶é—´æ‹¿ä¸åˆ°é”å¯¼è‡´æŠ¥é”™<br><img src="/select-for-update/3.png"><br><u>ç»“è®ºï¼šä½¿ç”¨ä¸»é”®å­—æ®µè¿›è¡Œselect â€¦ for updateæ“ä½œä¼šé”ä½å½“å‰è®°å½•ã€‚</u></p>
<h3 id="3-2-åœºæ™¯äºŒ"><a href="#3-2-åœºæ™¯äºŒ" class="headerlink" title="3.2 åœºæ™¯äºŒ"></a>3.2 åœºæ™¯äºŒ</h3><p>ä½¿ç”¨<strong>ä¸»é”®id=1</strong>ä¸ºæ¡ä»¶æŸ¥è¯¢ï¼Œå¼€å¯å¦ä¸€ä¸ªäº‹åŠ¡å¯¹<strong>ä¸»é”®id=2</strong>çš„æ•°æ®è¿›è¡Œæ›´æ–°</p>
<p>ç¬¬ä¸€ä¸ªäº‹åŠ¡ä½¿ç”¨select â€¦ for updateæŸ¥è¯¢ï¼Œæ²¡æœ‰æäº¤äº‹åŠ¡ï¼›<br><img src="/select-for-update/2.png"><br>ç¬¬äºŒä¸ªäº‹åŠ¡å¯¹å¦ä¸€æ¡idä¸º2çš„æ•°æ®æ›´æ–°ï¼Œå¯ä»¥çœ‹åˆ°æ›´æ–°æˆåŠŸã€‚<br><img src="/select-for-update/4.png"><br><u>ç»“è®ºï¼šä½¿ç”¨ä¸»é”®å­—æ®µè¿›è¡Œselect â€¦ for updateæ“ä½œä¼šé”ä½å½“å‰è®°å½•ï¼Œå…¶ä»–è¡Œæ•°æ®å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æ›´æ–°æ“ä½œã€‚</u></p>
<h3 id="3-3-åœºæ™¯ä¸‰"><a href="#3-3-åœºæ™¯ä¸‰" class="headerlink" title="3.3 åœºæ™¯ä¸‰"></a>3.3 åœºæ™¯ä¸‰</h3><p>ä½¿ç”¨ <strong>å”¯ä¸€ç´¢å¼•age12</strong> æŸ¥è¯¢ï¼Œå¼€å¯å¦ä¸€ä¸ªäº‹åŠ¡å¯¹ <strong>å”¯ä¸€ç´¢å¼•age=12</strong> çš„æ•°æ®è¿›è¡Œæ›´æ–°</p>
<p>ç¬¬ä¸€ä¸ªäº‹åŠ¡ä½¿ç”¨select â€¦ for updateæŸ¥è¯¢ï¼Œæ²¡æœ‰æäº¤äº‹åŠ¡ï¼›<br><img src="/select-for-update/5.png"><br>ç¬¬äºŒä¸ªäº‹åŠ¡å¯¹age=12çš„æ•°æ®æ›´æ–°ï¼Œè¢«é˜»å¡äº†ã€‚<br><img src="/select-for-update/6.png"><br><u>ç»“è®ºï¼šä½¿ç”¨å”¯ä¸€ç´¢å¼•å­—æ®µè¿›è¡Œselect â€¦ for updateæ“ä½œä¼šé”ä½å½“å‰è®°å½•ï¼Œå…¶ä»–æ•°æ®å¯ä»¥è¿›è¡Œæ­£å¸¸çš„æ›´æ–°æ“ä½œã€‚</u></p>
<h3 id="3-4-åœºæ™¯å››"><a href="#3-4-åœºæ™¯å››" class="headerlink" title="3.4 åœºæ™¯å››"></a>3.4 åœºæ™¯å››</h3><p><strong>ä½¿ç”¨æ™®é€šå­—æ®µ addr è¿›è¡Œæ“ä½œ</strong></p>
<p>ç¬¬ä¸€ä¸ªäº‹åŠ¡ä½¿ç”¨select â€¦ for updateæŸ¥è¯¢ï¼Œæ²¡æœ‰æäº¤äº‹åŠ¡ï¼›<br><img src="/select-for-update/7.png"><br>ç¬¬äºŒä¸ªäº‹åŠ¡<strong>è¿›è¡Œä»»ä½•æ•°æ®æ›´æ–°æ“ä½œ</strong>ï¼Œè¢«é˜»å¡äº†ã€‚<br><img src="/select-for-update/8.png"><br><u>ç»“è®ºï¼šä½¿ç”¨éç´¢å¼•å­—æ®µè¿›è¡Œselect â€¦ for updateæ“ä½œéƒ½ä¼šé”è¡¨ï¼Œæ²¡æœ‰commitä¹‹å‰ä»»ä½•æ›´æ–°æ“ä½œæ— æ³•è·å–é”ã€‚</u></p>
]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶è®¾è®¡ç¯‡</title>
    <url>/distributed-message-middleware1/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="12b3dba18d53a6ea714055d2223901da81d78e1781b8d547a4b4d1e8b890e545">91b4a72afde41933824d9b47e790ab276fb896cf66d88c172d81884618061a3a06494a53a06c86388946a43ef7a98e9bfe2600edaa3821977485df16c9c2abafe7ee9dedd47ef8604d05fef1721f860af822ff215ff3de7dbde0391f0342b707de6577cf886cea37f45aa82519670a95255dd3c5db5869ba932048bee6c4eba6e96d3bb17201535148ef3c31323edc1a8f26f85175c8d8b874292c534425c5ad98151261edbffb60fefb06f5fbd37e51119cfc8f381ed87e3b222d585714d1eb</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>rocketmq</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿‡æ»¤å™¨Filterä¸æ‹¦æˆªå™¨åŒºåˆ«</title>
    <url>/filter-interceptor/</url>
    <content><![CDATA[<h2 id="1-è¿‡æ»¤å™¨ï¼ˆFilterï¼‰"><a href="#1-è¿‡æ»¤å™¨ï¼ˆFilterï¼‰" class="headerlink" title="1. è¿‡æ»¤å™¨ï¼ˆFilterï¼‰"></a>1. è¿‡æ»¤å™¨ï¼ˆFilterï¼‰</h2><p>Servletä¸­çš„è¿‡æ»¤å™¨Filterå®ç°äº†<code>javax.servlet.Filter</code>æ¥å£çš„æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œä¸»è¦ç”¨é€”æ˜¯<strong>è®¾ç½®å­—ç¬¦é›†ï¼ˆCharacterEncodingFilterï¼‰</strong>ã€<strong>æ§åˆ¶æƒé™</strong>ã€<strong>æ§åˆ¶è½¬å‘</strong>ã€<strong>ç”¨æˆ·æ˜¯å¦å·²ç»ç™»é™†</strong>ã€<strong>æœ‰æ²¡æœ‰æƒé™è®¿é—®è¯¥é¡µé¢</strong>ç­‰ã€‚å…¶å·¥ä½œåŸç†æ˜¯ï¼Œåªè¦ä½ åœ¨<code>web.xml</code>æ–‡ä»¶é…ç½®å¥½è¦æ‹¦æˆªçš„å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå®ƒéƒ½ä¼šå¸®ä½ æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œæ­¤æ—¶ï¼Œå…¶å®ä½ å¯ä»¥å¯¹è¯·æ±‚æˆ–å“åº”(Requestã€response)ç»Ÿä¸€è®¾ç½®ç¼–ç ï¼›</p>
<p>å®ƒwebåº”ç”¨å¯åŠ¨è€Œå¯åŠ¨ï¼Œåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œä»¥åå°±å¯ä»¥æ‹¦æˆªç›¸å…³è¯·æ±‚ï¼Œåªæœ‰å½“ä½ çš„webåº”ç”¨åœæ­¢æˆ–é‡æ–°éƒ¨ç½²çš„æ—¶å€™æ‰é”€æ¯ã€‚</p>
<ol>
<li>Filterå¯ä»¥è®¤ä¸ºæ˜¯Servletçš„ä¸€ç§â€åŠ å¼ºç‰ˆâ€ï¼Œå®ƒä¸»è¦ç”¨äºå¯¹<strong>ç”¨æˆ·è¯·æ±‚è¿›è¡Œé¢„å¤„ç†</strong>ï¼Œä¹Ÿå¯ä»¥å¯¹HttpServletResponseè¿›è¡Œåå¤„ç†ï¼Œæ˜¯ä¸ªå…¸å‹çš„å¤„ç†é“¾ã€‚</li>
<li>Filterå¯ä»¥å¯¹ç”¨æˆ·è¯·æ±‚ç”Ÿæˆå“åº”ï¼Œå’ŒServletç›¸åŒ</li>
<li>å¤„ç†æµç¨‹ï¼šç”¨æˆ·è¯·æ±‚-&gt;Filteré¢„å¤„ç†-&gt;Servletå¤„ç†è¯·æ±‚ç”Ÿæˆå“åº”-&gt;Filterå¯¹å“åº”è¿›è¡Œåå¤„ç†</li>
</ol>
<h3 id="1-1-Filterç”¨å¤„"><a href="#1-1-Filterç”¨å¤„" class="headerlink" title="1.1 Filterç”¨å¤„"></a>1.1 Filterç”¨å¤„</h3><ul>
<li>åœ¨<code>HttpServletRequest</code>åˆ°è¾¾<code>Servlet</code>ä¹‹å‰ï¼Œæ‹¦æˆªå®¢æˆ·çš„<code>HttpServletRequest</code>ã€‚</li>
<li>æ ¹æ®éœ€è¦æ£€æŸ¥<code>HttpServletRequest</code>ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹<code>HttpServletRequest</code>å¤´å’Œæ•°æ®ã€‚</li>
<li>åœ¨<code>HttpServletResponse</code>åˆ°è¾¾å®¢æˆ·ç«¯ä¹‹å‰ï¼Œæ‹¦æˆª<code>HttpServletResponse</code>ã€‚</li>
<li>æ ¹æ®éœ€è¦æ£€æŸ¥<code>HttpServletResponse</code>ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹<code>HttpServletResponse</code>å¤´å’Œæ•°æ®ã€‚<br>Filteræœ‰å¦‚ä¸‹å‡ ä¸ªç§ç±»ã€‚</li>
</ul>
<h3 id="1-2-Filterç§ç±»"><a href="#1-2-Filterç§ç±»" class="headerlink" title="1.2 Filterç§ç±»"></a>1.2 Filterç§ç±»</h3><ul>
<li>ç”¨æˆ·æˆæƒçš„Filterï¼šFilterè´Ÿè´£æ£€æŸ¥ç”¨æˆ·è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚è¿‡æ»¤ç”¨æˆ·éæ³•è¯·æ±‚ã€‚</li>
<li>æ—¥å¿—Filterï¼šè¯¦ç»†è®°å½•æŸäº›ç‰¹æ®Šçš„ç”¨æˆ·è¯·æ±‚ã€‚</li>
<li>è´Ÿè´£è§£ç çš„Filter:åŒ…æ‹¬å¯¹éæ ‡å‡†ç¼–ç çš„è¯·æ±‚è§£ç ã€‚</li>
<li>èƒ½æ”¹å˜XMLå†…å®¹çš„XSLT Filterç­‰ã€‚</li>
<li>Filterå¯ä»¥è´Ÿè´£æ‹¦æˆªå¤šä¸ªè¯·æ±‚æˆ–å“åº”ï¼›ä¸€ä¸ªè¯·æ±‚æˆ–å“åº”ä¹Ÿå¯ä»¥è¢«å¤šä¸ªFilteræ‹¦æˆªã€‚</li>
</ul>
<h3 id="1-3-åˆ›å»ºFilteræ­¥éª¤"><a href="#1-3-åˆ›å»ºFilteræ­¥éª¤" class="headerlink" title="1.3 åˆ›å»ºFilteræ­¥éª¤"></a>1.3 åˆ›å»ºFilteræ­¥éª¤</h3><ol>
<li>åˆ›å»º<code>Filter</code>å¤„ç†ç±»ï¼Œå¹¶å®ç°<code>javax.servlet.Filter</code>æ¥å£</li>
<li><code>web.xml</code>æ–‡ä»¶ä¸­é…ç½®Filterï¼ˆæˆ–è€…ä½¿ç”¨@WebFilteræ³¨è§£ï¼‰</li>
</ol>
<p><code>javax.servlet.Filter</code>æ¥å£ä¸­ä¸­å®šä¹‰çš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>void init(FilterConfig config):ç”¨äºå®ŒæˆFilterçš„åˆå§‹åŒ–ã€‚</li>
<li>void destory():ç”¨äºFilteré”€æ¯å‰ï¼Œå®ŒæˆæŸäº›èµ„æºçš„å›æ”¶ã€‚</li>
<li>void doFilter(ServletRequest request,ServletResponse response,FilterChain chain):å®ç°è¿‡æ»¤åŠŸèƒ½ï¼Œè¯¥æ–¹æ³•å°±æ˜¯å¯¹æ¯ä¸ªè¯·æ±‚åŠå“åº”å¢åŠ çš„é¢å¤–å¤„ç†ã€‚è¯¥æ–¹æ³•å¯ä»¥å®ç°å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œé¢„å¤„ç†(ServletRequest request)ï¼Œä¹Ÿå¯å®ç°å¯¹æœåŠ¡å™¨å“åº”è¿›è¡Œåå¤„ç†(ServletResponse response)â€”å®ƒä»¬çš„åˆ†ç•Œçº¿ä¸ºæ˜¯å¦è°ƒç”¨äº†chain.doFilter(),æ‰§è¡Œè¯¥æ–¹æ³•ä¹‹å‰ï¼Œå³å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ï¼›æ‰§è¡Œè¯¥æ–¹æ³•ä¹‹åï¼Œå³å¯¹æœåŠ¡å™¨å“åº”è¿›è¡Œåå¤„ç†ã€‚</li>
</ul>
<h2 id="2-æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰"><a href="#2-æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰" class="headerlink" title="2. æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰"></a>2. æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰</h2><p>æ‹¦æˆªå™¨æ˜¯åœ¨é¢å‘åˆ‡é¢å˜æˆä¸­åº”ç”¨çš„ï¼Œå°±æ˜¯serviceæˆ–ä¸€ä¸ªæ–¹æ³•å‰/åè°ƒç”¨ä¸€ä¸ªæ–¹æ³•ã€‚æ˜¯åŸºç¡€javaçš„æ”¾å°„æœºåˆ¶ã€‚æ‹¦æˆªæ˜¯ä¸æ˜¯åœ¨<code>web.xml</code></p>
<p>åœ¨AOPï¼ˆAspect-Oriented Programming)ä¸­ç”¨äºæŸä¸ªæ–¹æ³•æˆ–å­—æ®µè¢«è®¿é—®ä¹‹å‰ï¼Œè¿›è¡Œæ‹¦æˆªï¼Œç„¶ååœ¨ä¹‹å‰æˆ–ä¹‹ååŠ å…¥æŸäº›æ“ä½œï¼Œç”šè‡³åœ¨æŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™åšä¸šåŠ¡é€»è¾‘çš„æ“ä½œã€‚æ‹¦å‡»å™¨æ˜¯AOPçš„ä¸€ç§å®ç°ç­–ç•¥ã€‚</p>
<h3 id="2-1-æ‹¦æˆªå™¨çš„å®ç°æ–¹å¼"><a href="#2-1-æ‹¦æˆªå™¨çš„å®ç°æ–¹å¼" class="headerlink" title="2.1 æ‹¦æˆªå™¨çš„å®ç°æ–¹å¼"></a>2.1 æ‹¦æˆªå™¨çš„å®ç°æ–¹å¼</h3><p>SpringMVCä¸­çš„Interceptoræ‹¦æˆªè¯·æ±‚æ˜¯é€šè¿‡<code>HandlerInterceptor</code>æ¥å®ç°çš„ï¼Œåœ¨SpringMVCä¸­å®šä¹‰Interceptorä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>å®ç°Springçš„<code>HandlerInterceptor</code>æ¥å£æˆ–è€…ç»§æ‰¿äº†å®ç°<code>HandlerInterceptor</code>æ¥å£çš„ç±»ï¼ˆæ¯”å¦‚ HandlerInterceptorAdapter ï¼‰</li>
<li>å®ç°Springçš„<code>WebRequestInterceptor</code>æ¥å£ï¼Œæˆ–è€…ç»§æ‰¿äº†å®ç°<code>WebRequestInterceptor</code>æ¥å£çš„ç±»</li>
</ol>
<p><code>Interceptor</code>ä¸­çš„æ–¹æ³•ï¼š</p>
<ul>
<li><p>preHandle (HttpServletRequest request, HttpServletResponse response, Object handle) æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œè¯¥æ–¹æ³•å°†åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰è¿›è¡Œè°ƒç”¨ã€‚SpringMVC ä¸­çš„Interceptor æ˜¯é“¾å¼çš„è°ƒç”¨çš„ï¼Œåœ¨ä¸€ä¸ªåº”ç”¨ä¸­æˆ–è€…è¯´æ˜¯åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å¯ä»¥åŒæ—¶å­˜åœ¨å¤šä¸ªInterceptor ã€‚æ¯ä¸ªInterceptor çš„è°ƒç”¨ä¼šä¾æ®å®ƒçš„å£°æ˜é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œè€Œä¸”æœ€å…ˆæ‰§è¡Œçš„éƒ½æ˜¯Interceptor ä¸­çš„preHandle æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›å‰ç½®åˆå§‹åŒ–æ“ä½œæˆ–è€…æ˜¯å¯¹å½“å‰è¯·æ±‚çš„ä¸€ä¸ªé¢„å¤„ç†ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œä¸€äº›åˆ¤æ–­æ¥å†³å®šè¯·æ±‚æ˜¯å¦è¦ç»§ç»­è¿›è¡Œä¸‹å»ã€‚è¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯å¸ƒå°”å€¼Booleanç±»å‹çš„ï¼Œå½“å®ƒè¿”å›ä¸ºfalse æ—¶ï¼Œè¡¨ç¤ºè¯·æ±‚ç»“æŸï¼Œåç»­çš„Interceptor å’ŒController éƒ½ä¸ä¼šå†æ‰§è¡Œï¼›å½“è¿”å›å€¼ä¸ºtrue æ—¶å°±ä¼šç»§ç»­è°ƒç”¨ä¸‹ä¸€ä¸ªInterceptor çš„preHandle æ–¹æ³•ï¼Œå¦‚æœå·²ç»æ˜¯æœ€åä¸€ä¸ªInterceptor çš„æ—¶å€™å°±ä¼šæ˜¯è°ƒç”¨å½“å‰è¯·æ±‚çš„Controller æ–¹æ³•</p>
</li>
<li><p>postHandle (HttpServletRequest request, HttpServletResponse response, Object handle, ModelAndView modelAndView) æ–¹æ³•ï¼Œç”±preHandle æ–¹æ³•çš„è§£é‡Šæˆ‘ä»¬çŸ¥é“è¿™ä¸ªæ–¹æ³•åŒ…æ‹¬åé¢è¦è¯´åˆ°çš„afterCompletion æ–¹æ³•éƒ½åªèƒ½æ˜¯åœ¨å½“å‰æ‰€å±çš„Interceptor çš„preHandle æ–¹æ³•çš„è¿”å›å€¼ä¸ºtrue æ—¶æ‰èƒ½è¢«è°ƒç”¨ã€‚postHandle æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯åœ¨å½“å‰è¯·æ±‚è¿›è¡Œå¤„ç†ä¹‹åï¼Œä¹Ÿå°±æ˜¯Controller æ–¹æ³•è°ƒç”¨ä¹‹åæ‰§è¡Œï¼Œä½†æ˜¯å®ƒä¼šåœ¨DispatcherServlet è¿›è¡Œè§†å›¾è¿”å›æ¸²æŸ“ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯¹Controller å¤„ç†ä¹‹åçš„ModelAndView å¯¹è±¡è¿›è¡Œæ“ä½œã€‚postHandle æ–¹æ³•è¢«è°ƒç”¨çš„æ–¹å‘è·ŸpreHandle æ˜¯ç›¸åçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆå£°æ˜çš„Interceptor çš„postHandle æ–¹æ³•åè€Œä¼šåæ‰§è¡Œï¼Œè¿™å’ŒStruts2 é‡Œé¢çš„Interceptor çš„æ‰§è¡Œè¿‡ç¨‹æœ‰ç‚¹ç±»å‹ã€‚Struts2 é‡Œé¢çš„Interceptor çš„æ‰§è¡Œè¿‡ç¨‹ä¹Ÿæ˜¯é“¾å¼çš„ï¼Œåªæ˜¯åœ¨Struts2 é‡Œé¢éœ€è¦æ‰‹åŠ¨è°ƒç”¨ActionInvocation çš„invoke æ–¹æ³•æ¥è§¦å‘å¯¹ä¸‹ä¸€ä¸ªInterceptor æˆ–è€…æ˜¯Action çš„è°ƒç”¨ï¼Œç„¶åæ¯ä¸€ä¸ªInterceptor ä¸­åœ¨invoke æ–¹æ³•è°ƒç”¨ä¹‹å‰çš„å†…å®¹éƒ½æ˜¯æŒ‰ç…§å£°æ˜é¡ºåºæ‰§è¡Œçš„ï¼Œè€Œinvoke æ–¹æ³•ä¹‹åçš„å†…å®¹å°±æ˜¯åå‘çš„ã€‚</p>
</li>
<li><p>afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handle, Exception ex) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯éœ€è¦å½“å‰å¯¹åº”çš„Interceptor çš„preHandle æ–¹æ³•çš„è¿”å›å€¼ä¸ºtrue æ—¶æ‰ä¼šæ‰§è¡Œã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥æ–¹æ³•å°†åœ¨æ•´ä¸ªè¯·æ±‚ç»“æŸä¹‹åï¼Œä¹Ÿå°±æ˜¯åœ¨DispatcherServlet æ¸²æŸ“äº†å¯¹åº”çš„è§†å›¾ä¹‹åæ‰§è¡Œã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºè¿›è¡Œèµ„æºæ¸…ç†å·¥ä½œçš„</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.handler.HandlerInterceptorAdapter;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExecuteTimeInterceptor</span> <span class="keyword">extends</span> <span class="title">HandlerInterceptorAdapter</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(ExecuteTimeInterceptor.class);</span><br><span class="line">    <span class="comment">//before the actual handler will be executed</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="params"><span class="function">        HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        request.setAttribute(<span class="string">&quot;startTime&quot;</span>, startTime);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//after the handler is executed</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> startTime = (Long)request.getAttribute(<span class="string">&quot;startTime&quot;</span>);</span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//ç»Ÿè®¡è€—æ—¶</span></span><br><span class="line">        <span class="keyword">long</span> executeTime = endTime - startTime;</span><br><span class="line">        <span class="comment">//modified the exisitng modelAndView</span></span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;executeTime&quot;</span>,executeTime);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//log it</span></span><br><span class="line">        <span class="keyword">if</span>(logger.isDebugEnabled())&#123;</span><br><span class="line">           logger.debug(<span class="string">&quot;[&quot;</span> + handler + <span class="string">&quot;] executeTime : &quot;</span> + executeTime + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>éSpringbooté¡¹ç›®<br>ä½¿ç”¨mvc:interceptorsæ ‡ç­¾æ¥å£°æ˜éœ€è¦åŠ å…¥åˆ°SpringMVCæ‹¦æˆªå™¨é“¾ä¸­çš„æ‹¦æˆªå™¨</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨beanå®šä¹‰ä¸€ä¸ªInterceptorï¼Œç›´æ¥å®šä¹‰åœ¨mvc:interceptorsæ ¹ä¸‹é¢çš„Interceptorå°†æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ --&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.company.app.web.interceptor.AllInterceptor&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/parent/**&quot;</span>/&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.company.authorization.interceptor.SecurityInterceptor&quot;</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/parent/**&quot;</span>/&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.company.authorization.interceptor.SecuritySystemInterceptor&quot;</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åˆ©ç”¨mvc:interceptorsæ ‡ç­¾å£°æ˜ä¸€ç³»åˆ—çš„æ‹¦æˆªå™¨ï¼Œç„¶åå®ƒä»¬å°±å¯ä»¥å½¢æˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾ï¼Œæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºæ˜¯æŒ‰å£°æ˜çš„å…ˆåé¡ºåºæ‰§è¡Œçš„ï¼Œå…ˆå£°æ˜çš„æ‹¦æˆªå™¨ä¸­çš„preHandleæ–¹æ³•ä¼šå…ˆæ‰§è¡Œï¼Œç„¶è€Œå®ƒçš„postHandleæ–¹æ³•å’ŒafterCompletionæ–¹æ³•å´ä¼šåæ‰§è¡Œã€‚</p>
<p>  åœ¨mvc:interceptorsæ ‡ç­¾ä¸‹å£°æ˜interceptorä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç›´æ¥å®šä¹‰ä¸€ä¸ªInterceptorå®ç°ç±»çš„beanå¯¹è±¡ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼å£°æ˜çš„Interceptoræ‹¦æˆªå™¨å°†ä¼šå¯¹æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªã€‚</li>
<li>ä½¿ç”¨mvc:interceptoræ ‡ç­¾è¿›è¡Œå£°æ˜ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œå£°æ˜çš„Interceptorå¯ä»¥é€šè¿‡mvc:mappingå­æ ‡ç­¾æ¥å®šä¹‰éœ€è¦è¿›è¡Œæ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ã€‚<br>ç»è¿‡ä¸Šè¿°ä¸¤æ­¥ä¹‹åï¼Œå®šä¹‰çš„æ‹¦æˆªå™¨å°±ä¼šå‘ç”Ÿä½œç”¨å¯¹ç‰¹å®šçš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªäº†</li>
</ul>
</li>
<li><p>Springbooté¡¹ç›®<br> é…ç½®æ‹¦æˆªå™¨</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//@Configurationpublic</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebAppConfigurer</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¤šä¸ªæ‹¦æˆªå™¨ç»„æˆä¸€ä¸ªæ‹¦æˆªå™¨é“¾</span></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> ExecuteTimeInterceptor()).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//APIé™æµæ‹¦æˆª</span></span><br><span class="line">        registry.addInterceptor(accessLimitAjaxInterceptor()).addPathPatterns(<span class="string">&quot;/**&quot;</span>).excludePathPatterns(<span class="string">&quot;/static/**&quot;</span>,<span class="string">&quot;/login.html&quot;</span>);</span><br><span class="line">        registry.addInterceptor(accessInterceptor()).addPathPatterns(<span class="string">&quot;/**&quot;</span>).excludePathPatterns(<span class="string">&quot;/static/**&quot;</span>,<span class="string">&quot;/login.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-æ‹¦æˆªå™¨ï¼ˆinterceptorï¼‰ä½¿ç”¨"><a href="#2-2-æ‹¦æˆªå™¨ï¼ˆinterceptorï¼‰ä½¿ç”¨" class="headerlink" title="2.2 æ‹¦æˆªå™¨ï¼ˆinterceptorï¼‰ä½¿ç”¨"></a>2.2 æ‹¦æˆªå™¨ï¼ˆinterceptorï¼‰ä½¿ç”¨</h3><ol>
<li>è¯·æ±‚åˆ°è¾¾DispatcherServlet</li>
<li>DispatcherServletå‘é€è‡³Interceptorï¼Œæ‰§è¡ŒpreHandler</li>
<li>è¯·æ±‚åˆ°è¾¾Controller</li>
<li>è¯·æ±‚ç»“æŸåï¼Œæ‰§è¡ŒpostHandler</li>
</ol>
<h2 id="3-è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸-æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰çš„åŒºåˆ«"><a href="#3-è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸-æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰çš„åŒºåˆ«" class="headerlink" title="3. è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸ æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰çš„åŒºåˆ«"></a>3. è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸ æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰çš„åŒºåˆ«</h2><p>Springçš„Interceptor(æ‹¦æˆªå™¨)ä¸Servletçš„Filteræœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œæ¯”å¦‚äºŒè€…éƒ½æ˜¯AOPç¼–ç¨‹æ€æƒ³çš„ä½“ç°ï¼Œéƒ½èƒ½å®ç°æƒé™æ£€æŸ¥ã€æ—¥å¿—è®°å½•ç­‰ã€‚ä¸åŒçš„æ˜¯ï¼š</p>
<table>
<thead>
<tr>
<th>Filter</th>
<th>Interceptor</th>
<th>Summary</th>
</tr>
</thead>
<tbody><tr>
<td>Filter æ¥å£å®šä¹‰åœ¨ javax.servlet åŒ…ä¸­</td>
<td>æ¥å£ HandlerInterceptor å®šä¹‰åœ¨org.springframework.web.servlet åŒ…ä¸­</td>
<td></td>
</tr>
<tr>
<td>Filter å®šä¹‰åœ¨ web.xml ä¸­</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Filteråœ¨åªåœ¨ Servlet å‰åèµ·ä½œç”¨ã€‚Filters é€šå¸¸å°† è¯·æ±‚å’Œå“åº”ï¼ˆrequest/responseï¼‰ å½“åšé»‘ç›’å­ï¼ŒFilter é€šå¸¸ä¸è€ƒè™‘servlet çš„å®ç°ã€‚</td>
<td>æ‹¦æˆªå™¨èƒ½å¤Ÿæ·±å…¥åˆ°æ–¹æ³•å‰åã€å¼‚å¸¸æŠ›å‡ºå‰åç­‰ï¼Œå› æ­¤æ‹¦æˆªå™¨çš„ä½¿ç”¨å…·æœ‰æ›´å¤§çš„å¼¹æ€§ã€‚å…è®¸ç”¨æˆ·ä»‹å…¥ï¼ˆhook intoï¼‰è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨è¯·æ±‚è¿‡ç¨‹ä¸­è·å–ä¿¡æ¯ï¼ŒInterceptor é€šå¸¸å’Œè¯·æ±‚æ›´åŠ è€¦åˆã€‚</td>
<td>åœ¨Springæ¶æ„çš„ç¨‹åºä¸­ï¼Œä¼˜å…ˆä½¿ç”¨æ‹¦æˆªå™¨ï¼Œå‡ ä¹æ‰€æœ‰çš„Filterèƒ½å¤Ÿåšçš„äº‹æƒ…ï¼ŒInterceptoréƒ½å¯ä»¥å®ç°</td>
</tr>
<tr>
<td>Filter æ˜¯ Servlet è§„èŒƒè§„å®šçš„ã€‚</td>
<td>è€Œæ‹¦æˆªå™¨æ—¢å¯ä»¥ç”¨äºWebç¨‹åºï¼Œä¹Ÿå¯ä»¥ç”¨äºApplicationã€Swingç¨‹åºä¸­ã€‚</td>
<td>ä½¿ç”¨èŒƒå›´ä¸åŒ</td>
</tr>
<tr>
<td>Filter æ˜¯åœ¨ Servlet è§„èŒƒä¸­å®šä¹‰çš„ï¼Œæ˜¯ Servlet å®¹å™¨æ”¯æŒçš„ã€‚</td>
<td>è€Œæ‹¦æˆªå™¨æ˜¯åœ¨ Springå®¹å™¨å†…çš„ï¼Œæ˜¯Springæ¡†æ¶æ”¯æŒçš„ã€‚</td>
<td>è§„èŒƒä¸åŒ</td>
</tr>
<tr>
<td>Filter ä¸èƒ½å¤Ÿä½¿ç”¨ Spring å®¹å™¨èµ„æº</td>
<td>æ‹¦æˆªå™¨æ˜¯ä¸€ä¸ªSpringçš„ç»„ä»¶ï¼Œå½’Springç®¡ç†ï¼Œé…ç½®åœ¨Springæ–‡ä»¶ä¸­ï¼Œå› æ­¤èƒ½ä½¿ç”¨Springé‡Œçš„ä»»ä½•èµ„æºã€å¯¹è±¡ï¼Œä¾‹å¦‚ Serviceå¯¹è±¡ã€æ•°æ®æºã€äº‹åŠ¡ç®¡ç†ç­‰ï¼Œé€šè¿‡IoCæ³¨å…¥åˆ°æ‹¦æˆªå™¨å³å¯</td>
<td>Springä½¿ç”¨interceptoræ›´å®¹æ˜“</td>
</tr>
<tr>
<td>Filter æ˜¯è¢« Server(like Tomcat) è°ƒç”¨</td>
<td>Interceptor æ˜¯è¢« Spring è°ƒç”¨</td>
<td>Filterä¼˜å…ˆäºinterceptoræ‰§è¡Œ</td>
</tr>
</tbody></table>
<h3 id="3-1-æ‰§è¡Œé¡ºåº"><a href="#3-1-æ‰§è¡Œé¡ºåº" class="headerlink" title="3.1 æ‰§è¡Œé¡ºåº"></a>3.1 æ‰§è¡Œé¡ºåº</h3><p><strong>ç”¨æˆ·è¯·æ±‚ -&gt; è¿‡æ»¤å‰ -&gt; æ‹¦æˆªå‰ -&gt; Actionå¤„ç† -&gt; æ‹¦æˆªå -&gt; è¿‡æ»¤å -&gt; å“åº”</strong><br><img src="/filter-interceptor/1.png" alt="filterä¸interceporçš„æ‰§è¡Œé¡ºåº"><br><img src="/filter-interceptor/2.png" alt="filterä¸interceporçš„æ‰§è¡Œé¡ºåº"></p>
<h2 id="4-è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸-æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰å¸¸è§ç”¨é€”"><a href="#4-è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸-æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰å¸¸è§ç”¨é€”" class="headerlink" title="4. è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸ æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰å¸¸è§ç”¨é€”"></a>4. è¿‡æ»¤å™¨ï¼ˆFilterï¼‰ä¸ æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰å¸¸è§ç”¨é€”</h2><ul>
<li>Authentication Filters</li>
<li>Logging and Auditing Filtersx</li>
<li>Image conversion Filters</li>
<li>Data compression Filters</li>
<li>Encryption Filters</li>
<li>Tokenizing Filters</li>
<li>Filters that trigger resource access events</li>
<li>XSL/T filters</li>
<li>Mime-type chain Filter</li>
</ul>
<p>Request Filters å¯ä»¥:</p>
<ul>
<li>æ‰§è¡Œå®‰å…¨æ£€æŸ¥ perform security checks</li>
<li>æ ¼å¼åŒ–è¯·æ±‚å¤´å’Œä¸»ä½“ reformat request headers or bodies</li>
<li>å®¡æŸ¥æˆ–è€…è®°å½•æ—¥å¿— audit or log requests</li>
<li>æ ¹æ®è¯·æ±‚å†…å®¹æˆæƒæˆ–è€…é™åˆ¶ç”¨æˆ·è®¿é—® Authentication-Blocking requests based on user identity.</li>
<li>æ ¹æ®è¯·æ±‚é¢‘ç‡é™åˆ¶ç”¨æˆ·è®¿é—®</li>
</ul>
<p>Response Filters å¯ä»¥:</p>
<ul>
<li>å‹ç¼©å“åº”å†…å®¹,æ¯”å¦‚è®©ä¸‹è½½çš„å†…å®¹æ›´å° Compress the response stream</li>
<li>è¿½åŠ æˆ–è€…ä¿®æ”¹å“åº” append or alter the response stream</li>
<li>åˆ›å»ºæˆ–è€…æ•´ä½“ä¿®æ”¹å“åº” create a different response altogether</li>
<li>æ ¹æ®åœ°æ–¹ä¸åŒä¿®æ”¹å“åº”å†…å®¹ Localization-Targeting the request and response to a particular locale.</li>
</ul>
<h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><ol>
<li><p>è¿‡æ»¤å™¨ï¼šæ‰€è°“è¿‡æ»¤å™¨é¡¾åæ€ä¹‰æ˜¯ç”¨æ¥è¿‡æ»¤çš„ï¼Œåœ¨java webä¸­ï¼Œä½ ä¼ å…¥çš„request,responseæå‰è¿‡æ»¤æ‰ä¸€äº›ä¿¡æ¯ï¼Œæˆ–è€…æå‰è®¾ç½®ä¸€äº›å‚æ•°ï¼Œç„¶åå†ä¼ å…¥servletæˆ–è€…strutsçš„actionè¿›è¡Œä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚è¿‡æ»¤æ‰éæ³•urlï¼ˆä¸æ˜¯login.doçš„åœ°å€è¯·æ±‚ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»é™†éƒ½è¿‡æ»¤æ‰ï¼‰,æˆ–è€…åœ¨ä¼ å…¥servletæˆ–è€…strutsçš„actionå‰ç»Ÿä¸€è®¾ç½®å­—ç¬¦é›†ï¼Œæˆ–è€…å»é™¤æ‰ä¸€äº›éæ³•å­—ç¬¦ï¼ˆèŠå¤©å®¤ç»å¸¸ç”¨åˆ°çš„ï¼Œä¸€äº›éª‚äººçš„è¯ï¼‰ã€‚filter æµç¨‹æ˜¯çº¿æ€§çš„ï¼Œ urlä¼ æ¥ä¹‹åï¼Œæ£€æŸ¥ä¹‹åï¼Œå¯ä¿æŒåŸæ¥çš„æµç¨‹ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œè¢«ä¸‹ä¸€ä¸ªfilter, servletæ¥æ”¶ç­‰.</p>
</li>
<li><p>javaçš„æ‹¦æˆªå™¨ ä¸»è¦æ˜¯ç”¨åœ¨æ’ä»¶ä¸Šï¼Œæ‰©å±•ä»¶ä¸Šæ¯”å¦‚ hibernate spring struts2ç­‰ æœ‰ç‚¹ç±»ä¼¼é¢å‘åˆ‡ç‰‡çš„æŠ€æœ¯ï¼Œåœ¨ç”¨ä¹‹å‰å…ˆè¦åœ¨é…ç½®æ–‡ä»¶å³xmlæ–‡ä»¶é‡Œå£°æ˜ä¸€æ®µçš„é‚£ä¸ªä¸œè¥¿ã€‚</p>
</li>
<li><p>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯åŸºäºJavaçš„åå°„æœºåˆ¶ï¼Œè€Œè¿‡æ»¤å™¨ï¼ˆFilterï¼‰æ˜¯åŸºäºå‡½æ•°å›è°ƒã€‚ä»çµæ´»æ€§ä¸Šè¯´æ‹¦æˆªå™¨åŠŸèƒ½æ›´å¼ºå¤§äº›ï¼ŒFilterèƒ½åšçš„äº‹æƒ…ï¼Œéƒ½èƒ½åšï¼Œè€Œä¸”å¯ä»¥åœ¨è¯·æ±‚å‰ï¼Œè¯·æ±‚åæ‰§è¡Œï¼Œæ¯”è¾ƒçµæ´»ã€‚Filterä¸»è¦æ˜¯é’ˆå¯¹URLåœ°å€åšä¸€ä¸ªç¼–ç çš„äº‹æƒ…ã€è¿‡æ»¤æ‰æ²¡ç”¨çš„å‚æ•°ã€å®‰å…¨æ ¡éªŒï¼ˆæ¯”è¾ƒæ³›çš„ï¼Œæ¯”å¦‚ç™»å½•ä¸ç™»å½•ä¹‹ç±»ï¼‰ï¼Œå¤ªç»†çš„è¯ï¼Œè¿˜æ˜¯å»ºè®®ç”¨interceptorã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>filter</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlé‡ç½®å¯†ç </title>
    <url>/mysql-forget-pwd/</url>
    <content><![CDATA[<p>Mysql å®‰è£…çš„æ—¶å€™å¿˜è®°ä¿å­˜é»˜è®¤å¯†ç ï¼Œéœ€è¦é‡ç½®å¯†ç ï¼›<br><img src="/mysql-forget-pwd/1.png" alt="å¿˜è®°å¯†ç "></p>
<h3 id="1-è·³è¿‡Mysqlå¯†ç è®¤è¯"><a href="#1-è·³è¿‡Mysqlå¯†ç è®¤è¯" class="headerlink" title="1. è·³è¿‡Mysqlå¯†ç è®¤è¯"></a>1. è·³è¿‡Mysqlå¯†ç è®¤è¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡æ¡£å†…<code>[mysqld]</code>ç¬¬ä¸€è¡Œæ·»åŠ <code>skip-grant-tables</code>ç”¨æ¥è·³è¿‡å¯†ç éªŒè¯çš„è¿‡ç¨‹<br><img src="/mysql-forget-pwd/2.png" alt="è·³è¿‡å¯†ç è®¤è¯"></p>
<h3 id="2-é‡å¯Mysql"><a href="#2-é‡å¯Mysql" class="headerlink" title="2. é‡å¯Mysql"></a>2. é‡å¯Mysql</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">service mysqld restart</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æˆ–è€…</span></span><br><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†è¾“å…¥<code>mysql -uroot -p</code> ä¸€ç›´æŒ‰<code>enter</code> å°±å¯ä»¥é¡ºåˆ©è¿›å…¥æ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line">use mysql;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/mysql-forget-pwd/3.png" alt="è·³è¿‡å¯†ç è®¤è¯"></p>
<h3 id="3-åˆ›å»ºç”¨æˆ·"><a href="#3-åˆ›å»ºç”¨æˆ·" class="headerlink" title="3. åˆ›å»ºç”¨æˆ·"></a>3. åˆ›å»ºç”¨æˆ·</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">identity</span> <span class="keyword">by</span> <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- lolcahostè¡¨ç¤ºæœ¬åœ°ï¼Œmysqlç™»é™†çš„æ—¶å€™ä¸ç”¨æŒ‡å®šIPç™»é™†</span></span><br><span class="line"><span class="comment">-- å¦‚æœéœ€è¦å¤–ç½‘è®¿é—®ï¼Œåˆ™å°†localhostæ”¹æˆ % </span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ­¥éª¤å¯èƒ½ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼Œæ²¡æŠ¥é”™çš„è·³è¿‡ç¬¬4æ­¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statement</span></span><br><span class="line"><span class="meta">#</span><span class="bash">è¾“å…¥</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> flush privileges;åˆ·æ–°é…ç½®</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> create user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identity by <span class="string">&#x27;123456&#x27;</span>;</span></span><br></pre></td></tr></table></figure>
<p><img src="/mysql-forget-pwd/4.png" alt="åˆ›å»ºç”¨æˆ·"><br>å†æ¬¡æŠ¥é”™ï¼Œè¿™æ­¥æ²¡æŠ¥é”™çš„ä¹Ÿæ˜¯ç›´æ¥è·³åˆ°èµ‹äºˆæƒé™é‚£ä¸€æ­¥ï¼ŒæŠ¥é”™çš„ä»¥ä¸‹æ“ä½œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> drop user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> create user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123456&#x27;</span>;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-èµ‹äºˆrootæƒé™"><a href="#4-èµ‹äºˆrootæƒé™" class="headerlink" title="4. èµ‹äºˆrootæƒé™"></a>4. èµ‹äºˆrootæƒé™</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> WITH GRANT OPTION;</span> </span><br><span class="line"><span class="meta">#</span><span class="bash">èµ‹äºˆæ‰€æœ‰åº“æ‰€æœ‰è¡¨æ“ä½œæƒé™</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> flush privileges;</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> <span class="built_in">exit</span>;</span></span><br></pre></td></tr></table></figure>
<p><img src="/mysql-forget-pwd/5.png" alt="èµ‹äºˆæƒé™"><br>å†æ¬¡æŸ¥è¯¢<code>user</code>è¡¨ï¼Œä¼šå‘ç°ç”¨æˆ·è¡¨æ–°å»ºäº†ä¸€ä¸ªrootç”¨æˆ·</p>
<h3 id="5-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#5-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="5. ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>5. ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#åˆ é™¤é…ç½®</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">skip-grant-table=1</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#ä¿å­˜å¹¶é‡å¯mysql</span></span></span><br><span class="line">service myqld restart</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>TidbæŸ¥è¯¢ä¼˜åŒ–</title>
    <url>/tidb-optimization/</url>
    <content><![CDATA[<h3 id="1-tidbæŸ¥è¯¢ä¼˜åŒ–"><a href="#1-tidbæŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="1. tidbæŸ¥è¯¢ä¼˜åŒ–"></a>1. tidbæŸ¥è¯¢ä¼˜åŒ–</h3><p> tidbæ•°æ®åº“æŸ¥è¯¢3äº¿æ¡æ•°æ®éœ€è¦èŠ±è´¹20sä»¥ä¸Šï¼Œç„¶åæŒ‰ç…§ä¸‹é¢çš„ä¼˜åŒ–æ–¹å¼æ‰§è¡Œè¿‡åï¼ŒæŸ¥è¯¢åªéœ€è¦1.5sï¼›</p>
<ol>
<li>æŸ¥çœ‹è¡¨çš„å¥åº·åº¦<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">   <span class="keyword">show</span> stats_healthy <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;xxxx&#x27;</span>;</span><br><span class="line">   ```                        </span><br><span class="line"><span class="number">2.</span> æŸ¥çœ‹è‡ªåŠ¨ç»Ÿè®¡çŠ¶æ€            </span><br><span class="line">    ```<span class="keyword">sql</span></span><br><span class="line">    <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%auto_analyze%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>tidb_auto_analyze_start_timeå’Œtidb_auto_analyze_end_timeæ§åˆ¶äº†è‡ªåŠ¨æ”¶é›†ç»Ÿè®¡ä¿¡æ¯çš„çª—å£ï¼›</li>
<li>tidb_auto_analyze_ratio æ§åˆ¶äº†å¯ä»¥è¿›è¡Œè‡ªåŠ¨æ”¶é›†ç»Ÿè®¡ä¿¡æ¯çš„é˜ˆå€¼ï¼Œé»˜è®¤ä¸º0.5ï¼Œå¦‚æœåç»­è¡¨çš„æ•°æ®é‡å¢åŠ ï¼Œå¯ä»¥é…Œæƒ…è°ƒæ•´è¿™ä¸ªå‚æ•°åˆ°0.3æˆ–è€…0.2ï¼Œæ„å‘³ç€è¿™å¼ è¡¨çš„æ•°æ®ä¿®æ”¹è¶…è¿‡æ€»è¡¨è¡Œæ•°çš„30%æˆ–è€…20%å°±ä¼šè‡ªåŠ¨æ”¶é›†ï¼Œä¼šæ›´æ•æ„Ÿä¸€äº›</li>
</ul>
 å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.pingcap.com/zh/tidb/dev/statistics#%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0">https://docs.pingcap.com/zh/tidb/dev/statistics#%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0</a></li>
<li>è°ƒæ•´è‡ªåŠ¨æ”¶é›†ç»Ÿè®¡ä¿¡æ¯çš„é˜ˆå€¼<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> tidb_auto_analyze_ratio <span class="operator">=</span> <span class="number">0.2</span>;</span><br></pre></td></tr></table></figure></li>
<li>æŸ¥çœ‹å¥åº·åº¦ä½äºé˜ˆå€¼çš„è¡¨ä¿¡æ¯<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> stats_healthy <span class="keyword">where</span> healthy<span class="operator">&lt;</span><span class="number">80</span>;</span><br></pre></td></tr></table></figure></li>
<li>ä½äº80çš„é‡æ–°æ”¶é›†ç»Ÿè®¡ä¿¡æ¯ <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">analyze <span class="keyword">table</span> xxx</span><br></pre></td></tr></table></figure></li>
<li>åŠ å¿«ç´¢å¼•æ·»åŠ é€Ÿåº¦ <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> variables <span class="keyword">like</span> <span class="string">&#x27;tidb_ddl_reorg_%&#x27;</span>;</span><br><span class="line">   </span><br><span class="line"># è®°å½•åŸæ¥çš„æ•°å€¼ï¼Œ æ·»åŠ å®Œç´¢å¼•åè®°å¾—æ”¹å›å»</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> tidb_ddl_reorg_batch_size <span class="operator">=</span> <span class="number">1024</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> tidb_ddl_reorg_worker_cnt <span class="operator">=</span> <span class="number">16</span>;</span><br></pre></td></tr></table></figure>
å¦‚æœæŸå¼ è¡¨å› ä¸ºä¸šåŠ¡éœ€æ±‚å¯¼å…¥äº†å¤§é‡çš„æ•°æ®ï¼Œè€Œè¿™äº›æ•°æ®åœ¨è¾¾åˆ°tidb_auto_analyze_start_timeä¹‹å‰å°±éœ€è¦ä½¿ç”¨SQLè¿›è¡ŒæŸ¥è¯¢ï¼Œæ­¤æ—¶å»ºè®®å¯¹å¯¼å…¥çš„è¡¨è¿›è¡Œæ‰‹åŠ¨çš„æ”¶é›†ï¼›<br>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ†æä¸šåŠ¡çš„è¡Œä¸ºï¼Œå¦‚æœæŸå¼ è¡¨æœ‰å®šæ—¶ä»»åŠ¡ä¼šè‡ªåŠ¨æ’å…¥å¤§é‡æ•°æ®ï¼Œè‡ªåŠ¨ä»»åŠ¡å®Œæˆåéœ€è¦äº§ç”ŸæŠ¥è¡¨çš„éœ€æ±‚ï¼Œä¹Ÿå»ºè®®åœ¨è‡ªåŠ¨ä»»åŠ¡ç»“æŸåæ‰‹åŠ¨å¯¹ç›¸å…³çš„è¡¨è¿›è¡Œæ‰‹åŠ¨æ”¶é›†ï¼›</li>
</ol>
]]></content>
      <categories>
        <category>tidb</category>
      </categories>
      <tags>
        <tag>tidb</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºCanalå’ŒKafkaå®ç°æ•°æ®åŒæ­¥</title>
    <url>/canal-kafka-async/</url>
    <content><![CDATA[<h3 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h3><p>Canalçš„ä½œç”¨ï¼šæŠŠè‡ªå·±â€ä¼ªè£…â€æˆä¸€ä¸ª<code>Mysql</code>çš„<code>slave</code>ï¼Œä¸åœåŒæ­¥<code>master</code>çš„<code>binlog</code>æ•°æ®ï¼Œå†æŠŠ<code>binlog</code>æ•°æ®ä»¥<code>TCP</code>æˆ–è€…<code>MQ</code>çš„æ–¹å¼ï¼ˆæ”¯æŒkafkaã€RabbitMQã€RocketMQï¼‰å‘é€ç»™éœ€è¦åŒæ­¥æ•°æ®çš„é¡¹ç›®</p>
<p><code>canal</code>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/alibaba/canal/releases">https://github.com/alibaba/canal/releases</a> , 2022-05-24å‘å¸ƒçš„æœ€æ–°ç‰ˆ1.1.6ã€‚</p>
<p>æµ‹è¯•éœ€è¦åŒæ­¥çš„ç›®æ ‡æ•°æ®åº“æ˜¯192.168.44.121ä¸Šéƒ¨ç½²çš„æ•°æ®åº“</p>
<h3 id="2-åœ¨ç›®æ ‡æ•°æ®åº“ä¸Šåˆ›å»ºç”¨æˆ·å’Œæ•°æ®åº“"><a href="#2-åœ¨ç›®æ ‡æ•°æ®åº“ä¸Šåˆ›å»ºç”¨æˆ·å’Œæ•°æ®åº“" class="headerlink" title="2. åœ¨ç›®æ ‡æ•°æ®åº“ä¸Šåˆ›å»ºç”¨æˆ·å’Œæ•°æ®åº“"></a>2. åœ¨ç›®æ ‡æ•°æ®åº“ä¸Šåˆ›å»ºç”¨æˆ·å’Œæ•°æ®åº“</h3><p>æ³¨æ„ 121 çš„æ•°æ®åº“é¦–å…ˆè¦å¼€å¯<code>binlog</code>ï¼Œ<code>binlog-format</code>å¿…é¡»æ˜¯<code>ROW</code></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">log-bin</span>=<span class="string">/var/lib/mysql/mysql-bin</span></span><br><span class="line"><span class="meta">binlog-format</span>=<span class="string">ROW</span></span><br></pre></td></tr></table></figure>
<p>ç”¨æˆ·å’Œæ•°æ®åº“åˆ›å»º</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- åˆ›å»ºcanalä¸“ç”¨çš„ç”¨æˆ·ï¼Œç”¨äºè®¿é—®masterè·å–binlog</span><br><span class="line">CREATE USER canal IDENTIFIED BY &#x27;123456&#x27;;</span><br><span class="line"></span><br><span class="line">-- ç»™canalç”¨æˆ·åˆ†é…æŸ¥è¯¢å’Œå¤åˆ¶çš„æƒé™</span><br><span class="line">GRANT SELECT, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO canal@&#x27;%&#x27;;</span><br><span class="line"></span><br><span class="line">-- åˆ·æ–°æƒé™</span><br><span class="line">FLUSH PRIVILEGES;</span><br><span class="line"></span><br><span class="line">ALTER USER &#x27;canal&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br><span class="line"></span><br><span class="line">-- åˆ›å»ºæµ‹è¯•æ•°æ®åº“</span><br><span class="line">CREATE DATABASE `canaltest` CHARSET `utf8mb4` COLLATE `utf8mb4_unicode_ci`;</span><br></pre></td></tr></table></figure>

<h3 id="3-å®‰è£…ZKå’Œkafka"><a href="#3-å®‰è£…ZKå’Œkafka" class="headerlink" title="3. å®‰è£…ZKå’Œkafka"></a>3. å®‰è£…ZKå’Œkafka</h3><p>åœ¨192.168.44.161æœºå™¨ä¸Šå®‰è£…ZKå’Œkafka, è¿™é‡Œæˆ‘ä»¬å®‰è£…ä¼ªé›†ç¾¤ç‰ˆæœ¬ï¼Œå…·ä½“æ­¥éª¤è¯·å‚è€ƒ <a href="https://xiaoyuge.work/kafka-colony-install/">CentOS Kafka 3.2.0 å•æœºé›†ç¾¤å®‰è£…ï¼ˆä¼ªé›†ç¾¤ï¼‰</a></p>
<h3 id="4-å®‰è£…canal"><a href="#4-å®‰è£…canal" class="headerlink" title="4. å®‰è£…canal"></a>4. å®‰è£…canal</h3><ol>
<li>ä¸‹è½½canal<br> ä»¥å®‰è£…ç›®å½•:/usr/local/tools/canal ä¸ºä¾‹ã€‚ <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/</span><br><span class="line">midir canal</span><br><span class="line">cd canal</span><br><span class="line"></span><br><span class="line">wget https://github.com/alibaba/canal/releases/download/canal-1.1.6/canal.deployer-1.1.6.tar.gz</span><br><span class="line">tar -zxvf canal.deployer-1.1.6.tar.gz</span><br></pre></td></tr></table></figure>
 å¦‚æœä¸‹è½½æ…¢çš„è¯ï¼Œå¯ä»¥å…ˆä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨</li>
</ol>
<ol start="2">
<li><p>ä¿®æ”¹é…ç½®ï¼šconf/canal.properties</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/canal/conf</span><br><span class="line">vim canal.propertis</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">canal.serverMode</span>=<span class="string">kafka</span></span><br><span class="line"><span class="meta">canal.mq.servers</span> = <span class="string">192.168.44.160:9092</span></span><br></pre></td></tr></table></figure></li>
<li><p>ä¿®æ”¹é…ç½®ï¼šexample/instance.properties</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/canal/example</span><br><span class="line">vim instance.properties</span><br></pre></td></tr></table></figure>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">canal.instance.master.address</span>=<span class="string">192.168.44.121:3306</span></span><br><span class="line"><span class="meta">canal.instance.dbUsername</span>=<span class="string">canal</span></span><br><span class="line"><span class="meta">canal.instance.dbPassword</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># æ–°å¢</span></span><br><span class="line"><span class="meta">canal.instance.defaultDatabaseName</span>=<span class="string">canaltest</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªtopicä¼šè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="meta">canal.mq.topic</span>=<span class="string">canal-topic</span></span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨canal</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/canal/bin</span><br><span class="line">sh startup.sh</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å®ä¾‹æ—¥å¿—</span></span><br><span class="line">tail -100f /usr/local/tools/canal/logs/canal/canal.log</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-å»ºè¡¨æµ‹è¯•"><a href="#5-å»ºè¡¨æµ‹è¯•" class="headerlink" title="5. å»ºè¡¨æµ‹è¯•"></a>5. å»ºè¡¨æµ‹è¯•</h3><p>åœ¨canaltestæ•°æ®éšè¡¨å»ºä¸€å¼ è¡¨ï¼Œåšå¢åˆ æ”¹çš„æ“ä½œã€‚</p>
<p>åœ¨KafkaæœåŠ¡å™¨ä¸Šæ¶ˆè´¹è¿™ä¸ªtopic</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./kafka-console-consumer.sh --bootstrap-server 192.168.44.160:9092 --topic canal-topic</span><br></pre></td></tr></table></figure>
<p>kafkaç›¸å…³å‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿™ç¯‡åšå®¢ <a href="https://xiaoyuge.work/kafka-command/">kafkaå¸¸ç”¨å‘½ä»¤</a></p>
<p>æˆåŠŸæ¶ˆè´¹åˆ°canalå‘é€çš„æ¶ˆæ¯ï¼š<br><img src="/canal-kafka-async/1.png"></p>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>Canal</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaçŸ¥è¯†ç³»ç»Ÿæ•´ç†1</title>
    <url>/java-basic/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="d68a1494fa0f553b2f3f2951a45775630bab7b58195ea2d6d5b0f12f45512f83">91b4a72afde41933824d9b47e790ab27512af815f571870ab6669de88f4dca4a01f1dd8673e0a7b1d2aa851302adc531b73c67e88a3c1a8f7920c3393e647e8b3ef22b2cc3df7325287cc5b0df457bbe3b6fc05ea02403fc21e1def6e769c1a3</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²å…¥é—¨æ•™ç¨‹</title>
    <url>/jenkins/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="0fd793260deba2e26a94db81ffea6f83df3050e3a938e984d6cb64f74c6fb709">91b4a72afde41933824d9b47e790ab2759c7fe391c65e762bc3007c35c45f1089a915cd27ca7f006fb8f6994027b0fb4ff2ff88963ff86a47aa36379f9efdbcb3726bdee15037ff098da3fc43ecdcdef70bf9f2baa47bcb6cdcf57e92fa6329d2a02d37b05dc88d4b5fbd44e1ca7ba3e2626c642c425ed0153182419e792f7237f1431639816747b6eb7d58db2c1a3dde285e65594e5039fd40fbaa1ea529059328c7034da629c5cb72b8d90adbd6bd5e6e4251e1f4b3f0c6dedd41998df35364dbf5a6eabcdeee3f570b14eea53eeec9523b3e345f876ec600d3ffbb0bd1ce12175b2bfd58fb19eb0c5763ac4a0834e644b0546905fe9466c47627a1b27e696ebcfe963f49b73a7e8a89d17dfc4ae43211156f31e7fcaf7818373110586785ca08aa7e6e7207fa6a3e1d27c27becb67c10a8c5c220f44ee5ca8a595fca945de2ee781989de646a639f41c33e165dd4958cb528403cd7e2d57d81dbd8ac9a2bdb5dedb7f2124880b5ae1baf70e1de9fef232bf933d25d077fc2e12b39b09d5d04bcbccd85b756893a3454f4d729b82c01143e35df2dac00333ce75c19effed1061a0971417c0c9fde66fee172f519906b33a4dfef082c20b2be74b78db5c66e73821ecd639a9386511e4da58129aacbd90d0d43c5c66bc1fba65ae61e26b62ee23a71f2213e4db3e42dbbbca2ebe0208d6606e6df363f6fd91fcdfacd87ca5bb481a5b78c7a311f2e9733c06bb52033bf9800aa1067eca0867eb0873bfc31ebcaee09735d3e41a2f4c1f6e94c76508096be0751d264ec63f23aa04820fd48aeb868aff762d29281378e67c48bba9aa400218cdc9f15229c42cbc3a68186b2ca4827401cd877b39f6918e7b154844fecbbf2cdfc79bd5e69100d67971813f992b7566705584bfc1ac4002c0e345a2f7f0a607c8e1c9b8d269c260ba2349f87f4dcd7dcb0deea40674cec7607f99a0f64d1e922ae11f050cb8f3deaee2252683318f9a4c1af373592fad236a4e7e08ad43da274d9994d538f56bb3a19966de28f0590c4b9d9b1d75b3afb2cd8271f6820252a733f33cf52d7950ab13fd17193061ad1d52d99509a73122a7b487b6eeea17c8b41e780c182e008af33145d98e30c61c94660d8b699b22226ae0dbb34bcb34e4397bdac9eb84b0ff4539b1953b673e704ab9e1e44eb7c4d7de7106f8cca9d86270f45da03ac728ac89c0e50222d0d9b43705d9e2f6fea5f60845332901c688c392832ad327cfdd9eeadfe2ff5a32091495696375474a295992587c062e8592d060b9614d2096f9621908776478c8f6884a0918fe205c1f9e3e0a4a10b14ac767e4671a592937c259789b5f5eb0c6711101fac0e3034c58565f1d3d126569a05c62fa07e9888bde558ee6a39531005cd6ff942cd7a5b859085e70ad7e9f74d445dd3c8e8fb12a6d22a575080d21ee968e2d262d98f1d570d4218a28f7189c1dff813748c7e4e0732014da11f94581f72313913cc992cedcf3d6b930d8edcedda7b805983987a35fcd234dbea653be2c7e984fab92d09e0bb98f1a3f85689920c7624c030287bd49869f8c101443468c4f4e5f43e21e04098b2b25f2a07a4bb4e3eb9287d92339115ace3e97da26efb5df2dca2baf3cba211510dede70a95c469f21319a9bb560f482eb1f447cbc8eebf05581de9ba8b7ccdf2bffb172fe21ef27f5b5aafd1054655e3b5bac0e5dbdb96c992f8ccd30086eb66e8af2d0dd1d95b8398648ce575f684e362d4f1950d524502ffcc7f715e9a817352ec54ee29f724766f199d772621222991da822464c492db4a15359c7514406b9803b183752d91ab91f92f29091c8ba3948a98e2854d669872a3077b6db9ba5d29df58d27e0950c003304cb9b78ace3ac3c67b1d76185805fc2d9e699ff8b301cd9f6fa96c51bdd730a873db40b2ff2b543a601cf58eadce84cae143adafd95f659b4abd46803977a664f18bf6781216ebe24547740715bf5a1bb45782fb7de708c0105b94bbc8b62cb7966a5ed9410dd80cba5f6b540b58f1d69b8e725ba76a26a642a8f56e695f104fd00af4abc07e0fc358177a39479268efbe06f8123b45a2ecbf4c95c879e004c5ba884f34dcb3a9165e13a6d0b5fe893f8585fe158c0242188c2ac17809f5ac0e913dedba20fb6a87eecc4ae0fcb38e15a8279a9d2d44df2d2c28569e940d5442bcce9dcaee1ead4d6f637971bbe096ffa8c0f1be85bf82a1737e00d5d546f127abe4798214b35360911c5d47f4438e3caecab5179733f0c2ddc9e7a1e44d43e2443ad2f5d2a8e53a5fab990db6b680b643539f7729d938b54df0658b1daaca98c0921f113c98958c4a3eadeaaa9726ce8dc8ae35d2d367d505eb5580eee26edff6841a55073449f10536f6a6b1723f20a5b1c53efb6d7f7ce1cd36e396d9ddc744833ef3f9c335f19f2625d79b6f11422969d6566dddd0de3e5eba9fd1d594f69da0ce9044133b1c98388f04e660989f52c7c2631a99111247dcf4a7ae8ac780aada830b8e7ec27a510403f26df63bb4b3fa8298a86d1b20ba4cd9372310b14c0faa5343792a33df778cf425dd77154fd29c1befb3e0ef7d9d6b92977ea116bdd9c60970ab4e7783afe988271e2a931b2233d1386d65c240f01bcb5159181111901858b31e4a8884d543380ec4f50dfbb4b3fb1985621138fd7c2dcb77642d4465f0984620730ce235c49cf3c3f1c39810f9f9b5e1664d9e82706e1b80041e11dc43f430499493e6f380eee0cee410b81474d8e96f7a2226d0e75e98390fba57108b56cf51d6aa61c3edc963bd60f6ca10f85162ff78347831c93ec00b08b7c800d428486e78ea21564fcc00fed4f357c02ed852563fed3515f7a2e504a83ea5e9b33bcb7798206375e5f69d227008a5d1ea74b053fae474923fe410fb8d35ca0b82b942d2f15ad15306765df5038083cc40e28a927032e07a10e776954c0d2eed89fd8a6e12e38006e92b2fd9569830ba32e8d09b122332475009d879f4bc42c684f82a3ec276bd469427898344f6234cce7d17b5b3bc4fa747db192c1d9410f4d40fe3833f1a731c5a3cf1113f413efae42ef8fdc9f10831d3f40edb34ccf07f72cc134fe8fc3227fdb1f568f1eb262a526c62edf6e7216a1b005cc089053b17b27193529875bf9bed661ca424990453f45a0191e730d40bfee73f68332905253ca13dfd492e64f3b78a0b7686b105612f9866c4b737ba2cbf275122e24af3ee4736989e86e5c4419ad1ed0bc51dc98bad0f9be307c7817d4f08e9fe3441fdd82046608c429cbc55a587d92e1c81bc44c4ef48b2359e3c1e37fbcb3ba72747e1b0c43a74946cf7b69d7fd79f89a5136317b3c6b8247457d9075f51e6f7a7df277a4cd899a26ef881efa522e45c55b0324032a671e84d25382862f5db2e062e8a85581e5c7d59dd62476a6123648d31430bebc6d516cc0b15c7fd0ff4f30d729b27d863e89252f3d2de1450e1a45ad16e13c0c7818ded37c5e44b18208d411975705c4e7f997c0c3434a9758c8594e56f3edd4b3517900dfaafe22e4e5604b7c7b6502b688c997b8bf2d2d7b76b8fca347dde19c9d3b86a59c459683ae291c4cd29878993a01cf3b6b153bfa0f665929ef8d93af74b5302200cc1133ca8c9114217c3b6f9f92c12dc6690eb23c117b4e93cca32d3c10f82493623ad2259575d1c75137811856fd6f54c0cd7625812d9f1b506d23d93e5905de076cf4d4e559d73047d4e7636dc91db122d012fba58bd973cae5408ada7eab5bee20142ebb6063e67941e82bd5d24b3182e479bcceacef440bae3c61bd0d8b43d6d2b8f9e119605045b84a35111f2a76d332e0af53e5307a4103ee8d964d7872eca66d87cf58e5627273fba23b08a357c123307863df1fb53f32d82f94ee932a8913540fae26f9b378d5c870105655c5dbf461176548046579878d3db23eddf05e16c5cf6612be67df33a9fc9ab2cb52613f52d3d29682b0062ba606dda83353186a011a5372cfcd4ad49ac77334fd716789608cd8d829d50f1b8784bdbd8c14257a9107619ef77436046ec43ad88395581fa1ad264ff6e9079da2e2d93064d54356752b614f93ae925d3ff67b3ac7103f2a3200837b89e44fa7d867704d0240bfab752e2a6f9ec47f084cdc2a8bf744189935d9ba495e40860487db07024307d7d601f9196514246f245bb1dc534d89ec74cbaeae184853fb3f2bc780002d149d9473630094ddebca568a295c58c307c216cfaeac94ff7cf58b8b1a21a05ca46bcad6a6c5102667ca1b173d0f786c62f1d4e1ac7175d0925783131150f2c00a749de04a3e3a8788fc2cb5e90e4c5c28a652a5a3ce29997e619bb813f0c659a570f8d09b03f9eeea4dc80d4417497659efe3c25a3dc37a3a3df05704540a66ac503d57be4d0f02410a6bd22c6397b0d2b32debd19cfdccb5aecba61f5dc72caa6f12fd7a30cddd7fe871ff5935678b9557b0f6af0d7c036b416934487772685e5618aacac7074c8a02c56d6ea8e7951f2e1ff5160fae1aca477857542c678ef8a8f5ca4aff1d09d8a4fe66d9ea037b6bd76188c717c6ce5dc576fcb1a0662e33314254b23c1e668a0ba922d08d2a6d046a68614484a152680c2ae28144f5d2646c6d619dcff89391b1cb6b0582166510006311b7a106ba0568d868f9cd1030bb12926490e842450450c155acb29f6e4119b067bfda7493aa0d5248011b375bf46efabfa25fe5a4b0417f9ceea1569c07afc744d3f1feceb509c6bcc05dfe749ddd12736fcb55446e0c5231d9a2ec7b19a116e39c81aefeac7242780da92b3643c0ef72a12dec46506791d37ad7d455c36bdb8909467bd55a7a9a11caadae82e80c688e941708c21b4c7f06bedc3a7c82f9804efac631cd72a6539de085082905d5ddcc1915bd311d7b01915e68053dbef978c6bb322cc537bb60f40264c7e60bb799fcc60ba113c193bd695ee06fcad8ff90023edc09119764685b37c5d42e5c400d48a56abb35167e8fd9ecb9ce3f1c9dae4aedb8a27af83b296afdadf076c87305ac5b5c19ed9c03c32d40b746a76a8b208d600318e983f852284c4cccdff65dd5e2ebf3aefd86b3e350ad2b4f46d0e2b8c299610fc3fd525ee439b70222c95790d6e39584db6895ca6cd5068050b32e7f63e2181a2ed0bda7146dd6fa0d763e01771f3258db55da42da2738146dedd5d26fb84ebc60d343d1e0b0d1a4408fa973768a03bfce76f091674f1bdeb6c2ec7286d8f967dda43e74179498e53c4684c57a21dcfeb34c4a3c61c8e2ca11281a8d2cbbfbc78cc83d994630894bddcf9634f7f09f660d0cb14453458bd28328ce005d99d32ff2e75fac94a58260ef2c6e03a8f388ec3aa971205b0d48c496a1e63cbb96a134aac5ff67cfcffeb92711cefdfc266c8a3a59ef080d04cd697d51885af5a3dbf461e7562b48dcbd5f441afdfe2125e25010d4655e02e656ba7311924896533faaabfc935774047ecd17b20e286a38a06fbc8c6c7d7ece3109733ca4986c7b4641708e6353e196fddb2ab2762a0fb802849470d44b1944fedcf34b2d9e9281bb181d434261c8eaf3dc1eab2854da475364aaeb227f564e936a219605440af91a9c467856f95f2dbf98d28e6d6d82b5b9a068174be1225082cec633fd5db0e5f9e3aa62e89ff8571eb21332058543fed46bd096fb09c2854b9aa1aa5a2d8f8b17388e81a6adffc0455cfb5f5a32be5fb2f2c463f7572f5cd4e234658e08436db4b9b0ffb9b77c4fe5a01f4ebb054fb1dbac34478955f8a57ca3a1356a86fdf5a1196a776fa1a890755dac85f74d3fa1d77fb0535d9986cb59073a3850d328bcb9404b4dfbe61a39aaa64c10ab7a48a7c218efcf51f1ffa95e578b22d55773a38a38c69b12dbcd64a0be2b9152794a32d2a3d5a7ff18227fe5b504158ca088082cc333a93a0310b37a03aab221503fc800c14bd17568c5a2509fd693f7d3fa047eabc4bfde9ff5b5a6ad39667c925a9f445012dcadc70895bcc10dc9c51cf56db563b209b018dad446d1f8fdcba8d764a3583882b07c40d1c687397b68d3ca331bdef76f1802051894620d491731eee44cfeb7e6d1c69dd5d1f0d7b273ea052e4992578280d7e4d61824346926b0ac4a208740f54675389d6cd960b3e9769c8c38a462d592f691783e993e718753bd06adaeec1cd429ed80a42368be25582103d0dd1f41f4122d665457fdec7c90c884e084433918d31dc1c188146fd763dd7d355b598dc41afa13dba27c02b24abe06f11e893d7010a388f16bd9fbccd1b84cb0ac83f1c86d667744b742af52174341f5116d8ef39452900ea46945556bed44206f8574e0a1d18d13e46c03a25b024ae93f9876bf71b80a349d6dbbf723085e835402aca91629ff2ccde0826086e190582e3c35f85b64de5014ed4036acf6f636f9dc57a2eb4e5d8e2d961955a3b4e19e87c642e67d430f9e5c7354ed9628622502ec70a90752ec05d1740e8e9940db0a999106a34a87d94303e612f6f02c85394d03e8f72c4f9f6680ad6d127de7c68b35e4035f6064636de70a302b9bddc3e2dca536f27ce0b122e79aef2517d484c0acc22175d95f6559681faa8d1b43f37e93eecb9125bc7ad01be0465078b1568caa9eaa425a9a01e0a2e54f892fb9a1113c48245fd48b55e941cca92176fd47049cc70cab60c95824f4d6b0e11b857deb0661abcb2589b00b0e4cd3865dc3512b7fbcc2f964e0d1d7cedfeb20ac1f93f43703215f474cf6dc0e0a71741261016b739c4efef773ac7e9ca48d0ddccfa4c937b1a4f6c8021e3a9731738cb669efc1f99d009ccaca02a3f23c4b260edc9e6fa549cc4d3788dcf02f97a418da954c5f3ceab51deb9bd09fa70be953fe3bcb9c0e18e9b1ed59da5496f45d067e24a5bbdcab4c967c67e32a90feea10b572bcb77e9445d3797de9f9bc3d5aac571317662e2ffab643326d1e0b88fa95cf029657f5ddbcd2a6319a715cfe65122815a5d8913efa3cd4b49567e454e80fbaff9eab84ad3ceaac899606fb7d81c0e44ccd9514c3621342b7123e18e44798caa4bd8cc01971623200d16a8d084ec73bcd98a55a34205b937d7ad6fd0cb0d1564b275bc31076310b5e6e048115fde981f92ba73ad04fbebd16d9f87d17a1856040772275797e20431e1b7cbeeee0658273d2e96647eb0c595417dd9b97f345e4a70ea3c582b35d2146a89a05843e11cc49faea92e4d3dc5068876ffb978107b1f6834d8adf645b815ce203025fb3a081f8935544a5e590fb51997e14c43efb700a6fa30500d18503731443e02622d47aeac8cce861473c672759adfc463975ec41c00ab61f59debbf38ebbace4a55c9faeca64f5d578c250604123c2813e407db12b03f3b801cb8f07859bb557082e8f3ad6275e5658af7410e7877eca2041108dba8b55bde40976e52b7d56a3adee4c140fe877ef78e050a44913d9ed119b7df3486bd178237394aee20353385a3041f879c164943f819d7462f845ccf6c7afb573e077f907760895abb856d50be143220a2b89a9acbd71055bbbf9f933b988a1545e37b923c66c7b71a5f89e54d3cc5013f8ffd948b212cfdb066d57e4a19682713150a61432a5f46a0b19c2f0b6b47aa0081cb536ded9268dfb081b6a3606b942aa54aafee4b548c4b629104abf7a18fda2adda283e4653422ed71dd0319c0a459d645c00168f85c88bbab5ec5180b5c8a401d626e9b3c6f74c3462c7c0113f2da032d786c0853e8dff23ae6aec1d7787622c18d2da1385de1f519e824ad4509eb204d4880e486b0148fc3b3a61e060fa43332129974a0b0872f645ee6270f520443a8d82e429ca1129ec6db488b5a7567fe41f8ec06021fe7a19dd944c8e44c72dc525f7e14ab9f1fb5b7e92ea2ab133a7f6137ae916426c9a31a897cb6f019d8952290c07c8c0821ec18b2680d10df4d66671cb15061ba9b8dfb2ecced0edc7d12aee21bdd8800d3abf07ae0501d9aec17c6c74c287aa4f28e1eb1f27cb364828d0bf9bf1d9ddb8fd97e2c1bbc9e3fbc8047f095580c376825c904bdceb8e3bf75e45d040cff97bcac48c793de15e5f712c7d55e4d62bd27234acb4ed6c10b13c07829d6f047b6816cd522b07490c47764c08560ca5f7cc9ce426eb76ad4c89021e1ccc2e48d690c51dcb8d74237d9908c5c0a6a275f0192323745c585ba31fa4bbae29535b9377a1d9c29543f3864ff5a826847690193d4879de3df640fed923afd81e53d2a61348e5af7f1da8ee3dff33d2de4e5c1e4dcde507f8d049b57ea76be7e7bcc6e4479fdbaefbc90b096498ecabc96f620b843048b35c39f4345b195df14b68f460629cf7e263d7db5aecde142bfb2960d668d2f9b9ae310578d671cfe5c916af0b4ae9243d0df4499fb9eeeab628e70ec35f05952b86658e9cbaa2b609c41f1963c3a83c8b8bd72971a65ef6b2f5f44c76b93c77660c0d208ce29c7ddfc4d8f12a4e39d64b35f9fbf591e89b0b4e38a00953b55401807c01fe8676ddc86754d3c872ae116c4e3934460b974aa7e06753ae22224ea2505cbf942a9cfb6038e7db8f79cde884010720d1e72511bc3dc70801aa19501d5bfafc1cd7be4c9b0a21c11a8afc1750d743d3409f701b10300db3d0bb367d1e04d44a2c61f6b010b575c736fb810f5d737ffda4cf251e87875cbb4995c84fc6d1317cf0b642c52c6526fcc8cede76152eeba9a6de62fd85efa41c8c7920ad71b97167a3b64ab17059823317b1911654a0a53b7e5379cd9a9284c12ececc723a6fe45ef866fce87795ea3ba1eaa30c716b0513d0c4186cc37c2decbe872f15eee999f40f698660ca69634529c1fb4b80b9aeaab156cd458ac4129ed5ee6b15d7304158c9b039a71bd2c7cd802993f748734f2fab99d82dd95e917dd806b5f47434585abc574e9ea25b460f2af07ae1b95ae353e92f8ca7771072bf2616c1321603b612c681c6a4c68f7b259276089ca46034f0e6ba83d9052207f3b0135c7d831cf78868ecf5773f450c441751db8f269e4c0f83e23f9b4fa58ba5872b4b14952dc7cc3307ad9301713f232f9d55bcc62c2506cc1824e405334aea666a901aa5ad73f2754bac6e9cbfa8335ad2335e70c2849ff90a1691001122f527f25761dec278db70b8a89d0d41af45b45091e14c35f39566b9596e3fe0aea862a203846fd9821f341915d2dda6abd2f2737b29efdcc4140b301d28deee6ed4e53fd662626fb5ad8b06f462d55ee49eca2f2edaa5bf74eeee43b321720eab640ed1caa10d8f529bb948f8f8e3c58c1af765d042f6682ea1e41751c182120d13d2270feb73b8fd37023f2f5b9fa698219a5c757c06465a132029243c1fd534df68aa3732cad0773286de3f6444109366cc9bd1ef9e488cb7a3113ae89f8b8e54b4fc5c47763ed0915b62df94aae233b28bce286982fcc80cf5f5c32037c65a7ae7fc35959d557ac7ac6e663c41fbb8d903ce36ab9af4566a304b06b5addb014b82d2a3327297cef063525921ad41fbf3b9bc5a1fc89bf9167b031e18a3ca461c415967003934b01c3237084cdce20e285410f4cb32d64664bad3688248595fcd57fc98ca2a8c9f85fb0ef2de66584f150516b174b992ccaa005cd04faf1436c081e6be526f4c4b0513469e47dc435d10801e2c4859c813b63a1973ddeee9f87a87b32501b8d1dfddbd729cc91d69bb2afed6879d5201ab2d04edefd037278ac6e6b67ab88c6d8f123b3952c96bf64813d168b8f03cd223c7afe97c2684ca661c18ab60f74cbd66f4b3b8759eb22a82356c3e31abc9061a98b8c86477965a74c8cb106a6ea8d4325a730cd191403e3733ae88f101ab0e531eb8482142b392358fbcc541159ba2336b66aa5f7ffcb364506fd5a1535b4b2301e41f60e380ad2867db80de4282f7f110c127d2fc1123b32e7f104bded890d259122ff3b9ddc15ac531ec6ca793ec46a0f23ccf319b897b51fa408b6424dca6f1cdf6af5b0b820607e5a07d6c527093b8509d37f9ca99230930a711169065682e25a0c3c804c2bc66f5222d6c63fd5ab0026bd74d7ce39e17a639e42b9143f5feef59573935ff3e9fda4b9b9bc490c92d05656f5cc488e4cd0ca99bbeacbc870da7dfa96d3b58166a435e02174f23ac1ee6d4c00cc3b96a59c68407f6154dab03d33109de235020d5b48420e71a56cae7f0fa4b66e6b0dab5c00093dbafd4877f9668a44e0eb4d3084eda3fba467bdce5677fd6bc51172271680ba088d58e30586acc8d4db71d1191143c690bb4f8ae475d72902897664fde84b06cc67489dae91beb5aaa084b6dc5de073701f84c91924264f6ec7b3a665b2bd4685133c8f5479b1f18b7b5e96a40e9137f855d4c1fbb375e4bf4d64e03afcf5a6b5aeef1bb37d8b0f800cb9dbd94e1b893492cf545260cd5f46ea786005024974e165627858e8bf41676fb0d9a027e8d7319f6f9863398b0aeaede6fe9b2b2d598e8eeda5d67b7b9a81f0b92b5d9286c9ce8530aeb09d66df10ded7c953d1412c377c8314911b504066c93156e921cd48a1ae430ac19df3457f2dc8bf48c554e77e9575af93bb4e474c12a00a02998b4622f0927f899df67744676fa03544ad27de53ffffa742211cfe0cc103ba0492a28d2090df8d43b1afabcc572240ea7d8c6ae535a7aaeb3f6b784c754394de8922a8cb2088acb8c917dba2da013581ff0c82c4f2ece7a247c223564609a36a2a88ab84ec949afd112a90777e55beb35bb6de6d62c2b93b019e133af60f264309350cc308630cebf05b238e16ad5bae874940b3cf8a15bbcfdd047c57581af9813ca14989e4ae1385a176575a0a179661da7e4091f9f3b2df7c2fb620cc85c1273a56289bac9c60a730c380cc1735f03a61a64d8e58432d4d973c016cfadf2b05379027d7b6be679f9ec290e401b2b5b3ea08a60be73c52883df6fc48962f73f44eeadbeeb54c4900ea9e321f1605e12ff6d12bbb4d7dea302f72d9bce73d7f7384a7d60e9babd09ea28811f70452997d7f4881798dca0db2b164f06598eefd937e21c9a6ce711cb461703206ea43ae8b495e6ac47c52adca4536825d3fb1254ef4a0d8b7bd3acc7388b71005ed061984de31f4cbcc041c7045c6dbd8f419da144e3d820311d15107f70c14255ae57733dda8d876c4edeebc3bb224cfc84969464ec9918ef3b62161db1dd1f0e7b3fdf8b93045f254d9faec4842f9b68302e5138c67c3b6654ebcd292b1553e93c9f2e2ac033d110b342eda6933556e25e55cd8610dea56503badcad74edeb56e4ee862173cf9e0a5637e27977a293ce76fdb88ea85e3ef958edf7f9387e7bbe591e441591d4951df9b37116406780e7439d277163d8561c3868ea95a13b1539440363c79cecc2a2b1ff0456c81f7455f22ab12adc48b628c206108d72e6241f67d04adbc549573d0abf16375f1299087132f43f102f69f7e7869fdcc636e99b4d2df62d703d2bdc968a9f88e0ac7b926ebf0faf60765b04e8ec159fd65326000c72a5697e1be5acf47f22ccdcac75334e7832f79e59ee1b0a6ff6939e8fdb87db1c2bcea1c02ff43d065de32e6f7c89ff7190897dc9eb75380be713aca4bfd3f83052ba18a3bf6a239ff1edc2ce5ea481bf31c4bb91b26705801f2bcd3a4ce9f074485b4d8c0adf308602612ebe7b7c474cd14dff2cd5de7d2bf156ec41d17ae9b29ddefb32eb3dfa844367f67352c187550a39a12caadad36d2a900f7166dc1d81d7930a2117248285cbe30e5214b378aa034af03acb5dc868186dd86d2919571cd645ea30eb061919e7ecb925e257d2c4e01f96d6cb55ddfb72e3b7d9b3ff774bc70fd35f8df8626aae7f7125715e586f3a9c21bf57a9dcbdea203e999ecb38e665ac39798ba5706d973fab248bc1cec3c63e39c0931146b60f4e20cadf20d620b3f4af7f9ee56f98b663949f0e005c1676c36859dbf5d4bd8f10bf598639945456ee2d8392c11aa1b0ab8e793732db796c7735869ccf14c2f0e48c2ec74ea37cec731255bc79bc8d990ff165af564124fe503cc602eff33df434b6ebfa48e64facdf8b7452a4cc951dae5f3cf0cfe61865f9f7f69ab97ce4dbbf8a66d33d11ace11539a2ebcc558dabc612c50671058cd0a555e086d1a08465ddd8aebacf9002a97c68ae994ef75474894f16704b03cbaa74d26663dbf6225cbb244bb491aafc4ce00f682eeb756728631987a35c8879f09c64413b7e2a54011bc2316b770bbb848657601255d64c59fc9583828e5e4108468df559c53bcde42a15196626bdd983b6d673d78fed8fd80071609781028006d06b2a0d0b65ffaad6f4694442ea74cb54d57b6ae040fbcb36bff4020c8123dc19da78bb274aa5d758e6ad95f71b3723626b132faba11f4bf67ffcf4da36a2127a0843c199fb3c1b7750baa9cc321eef5c8cadb6ec96ffccd7fb289644f586ad7c1c9d3c292ff614e5426773aae6ee8db6d5849a99c73d35c6597a46cf39e654b01c7be15bac2fa67a8fcb87487fe165b9f349a651dc5dde35077029c34ecd87ce4a89ecb672f465144e7472421ddb500a6b4ba9c1594bd03b59fcce0ac935e9d4946dcd2492ff6c20c9ab080b618391cb41d33f04cdea180f3a3a8e7f1c4ec050752bf64590f1f575326059844816062531eb2b459644d36f914e344600edff902808746690996666fff6dd7d5d32d7d64a719cdf59290542cb970ed2d13f51521b9ab26b2e340c1b7021d24e5dd7b272b36cf0a6b559c68424acfbaaa9d7cb6c924f86db9a0cb488a36a2e4521b56aee2b24c97eb2ffebad7864f71404cbbf6518d41098ea4888292d0793f4ae7615e922b13ed9520c46b6742a9dcecb9acbcf4fd50105637e81c6ef6e09c3e1c3316810bb11246764251e8b82f49b2f8c8508cd339c6a410f111628839499fd456b229589041554398b2e80845e82a001175966b3d5b047a74cb5cd181d48c9cc7bed2b43c83daa17e3aa8d35e87b5310c1b41495d21ff6a4382e78478cd1c1d98f640b41534017276528e2035de03f7fda2584e259b601ff40ef0b7187b67c038c6d677a8a9bd7ac1240c2e779411ce8e7f89d786cf30b09a493f7de3d85b3f6a6cab50d64a441a26baef945f5bf0b244ee645b2fac0a90b99097cb8c271e30d6555bb04e167ebc940a76baa90f5fd4ae6ea0c11bcbb47fe3fa08ede2ba1d9d999d72bc7c2ec4a25ff986e1f573936064b68afe57a469634f76da42ed6661f4ef20bab53636c608bcb9b77536d5234946383d5e0aa733b19041f0b3c6999f2c840d5b414f016a99e8a1fda6abb8d975a27679985c163bc7d3083a8ca5467c979ddd95f3f43485abeaa20afbd0e40af71917cebd1850596c933e05ad1361e764214555eadf79f6f4cbef1bc1d4be0d62a24cb81bfe7eec0b3275816612db9bed8c8bbaecf4494754f26814382eb047d3573225d021eb02f74ea9848813e039daf25e681d080473b1acf974d1d06f30ddb6a66a6a59dc43092d5004b44b8c17c9f4d4646435910a8d1f5f2634606cd0fa8749f5f9c7ca65c236b5316bfd346a9de01e3ae738af5b37546f6cd88747f252cc6cbaeafea3ae22aff6d2029d75bcfa3bbf008704e6a0a0d502fee49ea69bd923c914bbca467ae765dfacf96d570d5003bc90d3fbbf51144ac78369f484c8f87a3691d015a9f783ef109f91a16f3d768dd305e6bea71a0413a0f451b2335d0fb887c4b73237042e73fdc08d6a130dd2ca545f49d33b2ca085aeb452a43b9b241b029bcdb5411940da828a780fb2564260f2d032302ae36905042a8a012dbc3d9e2e130747354457e6fc359e39d875acebe18f3cae79fad8443e9fbf5986c4d4745b9ba59b5ede7970b481e55553df6b3128ccc9935951874bd22bb55a32e3c1641f482644d2fe12dcd7b4efa60734c5c328416c9235b20843aa5fa7236a22502b156bb105475eca7847ccf1b65ba488784ed9d85f3ac3e31bf749fad78b3c088663a0b453862fd8a0bee119093c7ca9fc75f0659f22266e1c71e5da37f35219f5edc5ef44b43fc8522ac9af3a007ec795e0ab6949c521ea754e85fd32c4902beb9a75932949b5ad961e251f9a6f68f3568cc5f39d122bc8aa466596254ac16489349a093b00fe5a39b2d58c02c241b24ea557dc3b62c7e93a55f7769d24ef8b3593c6ca559f410d3a58a60b64f45a8ce5622774943904a30524e3bde6fdc4833d6abd6092b9300426c28f69dcbc976d62c27e48f0333c78a0fd72691a6f9ab22dd71ba1747404f8b54f5bff5423cdf3371bf5b50e496a48e74013c225c59152806baa5af3b264ce02062eeedb89514261543f098e5062ea48af55e609cb95f78c93296d347e3d421d656c77155dd1e00f05425e1fd6ef26fb3ba9dc63d3edb6551ebd6e4b148f2289389bbf8d2e3ed8655fb6bf56f09f340bfbb91441eaf50a5ba7838ba4e443b3b3065e09ea0361d3d82327f00fe114ecc8f2102cbcc7a7a77a543a5d77a45f2258174938aa91664054a3c3a3dcb4c20c21f80b15845bbd03e278221b6e59a52ccf0dbdd858743e80b11eb32f72e3c284c3503b95d0ca5e62dc09513395fb7713fb82a0b3a657cf240190441b89cc6e4abc74e65482bcc182de25b682ab9d927952f297b2bff39f43d4f0a44c6d4955acc96bf9c020b1901ae9c6f9012f98dece7d5556f53b129eae569868eed6fcafd8f23bcaec1096ff40d6904926610ae17242876c9eac56ac05ae404a9ffb0985f48501c03d46e68fbdf1b9ae53f62513447853e7124efc148a356b196526591961a4a3196a133fe0f0789dd1aad9fa20833d30ecd3f06c863c8faa10b40b1ecbcc3069229ebd7deb20b39f06c22a0875a4d8c7594cfc5bf5b06b00cb7254de7a17ee21171e69272dd209488beb6d24a38570429a38a4b510a806fc1aaf8a5a40bb43511bfe60ec761f2e1f6bf102e9df71c20891e82084e6d336d1c24913efe5de7eb8ea060e443d6e0aaf5944c4ac72f8b29f83c4808ac80077852e8e94eca480764ee16876c95e653fac631b9500105e68a221f456c01663bcfbaa2f0c7c52c4cf5aae2ac8f6669defb0fc522e70ab22b89c79d538d6367bfa7c680b469a097e23e988d309b7fd573d7afbd617fb1477b88bc6adb9e9f8ebac88180a85f3ff689408bb8d0e6b544725f02bc63f0d999c6e51f23488e92c755e49ad20d8299688e24349a519df002173e00db9224e4b4e5440bffe10aa1b26dc7007bc25abbcf377663dba183bca7b31ebc9e419808d3aa0caf8c04c19d05004df3beabf7b5ab730a5d6f631e5afc903c716b12b1bc762858847a4a5c37d4ec1eba73eb93573e8e447b5508bad86908308feeb9125dde194bcf8e317a4224c229f4e721f783104b6e60c662b19181de4901d745522d60c6e0ac9d70ef84500aa7af6e2aee127a1cea</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>devops</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS Kafka 3.2.0 å•æœºé›†ç¾¤å®‰è£…ï¼ˆä¼ªé›†ç¾¤ï¼‰</title>
    <url>/kafka-colony-install/</url>
    <content><![CDATA[<h3 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1. å‡†å¤‡å·¥ä½œ"></a>1. å‡†å¤‡å·¥ä½œ</h3><p>ç”±äºæ²¡æœ‰é‚£ä¹ˆå¤šå°æœºå™¨ï¼Œæ‰€ä»¥åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œå¤šä¸ªKafkaæœåŠ¡ï¼Œåªæ˜¯ç«¯å£ä¸åŒ</p>
<ol>
<li><p>å®‰è£…è·¯å¾„ï¼š /usr/local/tools ; æœåŠ¡å™¨IPï¼š 192.168.44.161</p>
</li>
<li><p>åŸºäºKafkaå•æœºç‰ˆå®‰è£…æµç¨‹ï¼Œè¯·æŸ¥çœ‹ <a href="https://xiaoyuge.work/kafka-install/">CentOSå®‰è£…kafka 3.2.0å•æœºç‰ˆ</a></p>
</li>
<li><p>æ‰€æœ‰KafkaèŠ‚ç‚¹è¿æ¥åˆ°ç›¸åŒçš„ZKï¼ˆæˆ–ZKé›†ç¾¤ï¼‰ï¼Œéœ€è¦å…ˆå®‰è£…ä¸€ä¸ªZKï¼Œè¯·å‚è€ƒ <a href="https://xiaoyuge.work/zookeeper-install/">CentOSå®‰è£…Zookeeper 3.7.1å•èŠ‚ç‚¹</a> , åœ¨æœ¬ä¾‹ä¸­ZKä¹Ÿå®‰è£…åœ¨è¿™å°æœºå™¨ä¸Šã€‚</p>
</li>
</ol>
<p>æ³¨æ„ï¼šå•æœºçš„kafkaå’Œé›†ç¾¤çš„Kafkaä¸è¦æ··ç”¨ä¸€ä¸ªZKï¼Œå¦åˆ™ä¼šå‡ºç°æ•°æ®æ··ä¹±çš„é—®é¢˜ã€‚</p>
<h3 id="2-ä¸‹è½½è§£å‹kafka"><a href="#2-ä¸‹è½½è§£å‹kafka" class="headerlink" title="2. ä¸‹è½½è§£å‹kafka"></a>2. ä¸‹è½½è§£å‹kafka</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools</span><br><span class="line">wget https://dlcdn.apache.org/kafka/3.2.0/kafka_2.12-3.2.0.tgz</span><br><span class="line">tar -xzvf kafka_2.12-3.2.0.tgz</span><br><span class="line">cd kafka_2.12-3.2.0</span><br></pre></td></tr></table></figure>

<h3 id="3-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#3-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="3. ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>3. ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>å¤åˆ¶3ä¸ªé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd config</span><br><span class="line">cp server.properties server1.properties </span><br><span class="line">cp server.properties server2.properties </span><br><span class="line">cp server.properties server3.properties </span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„broker.idåˆ†åˆ«ä¸º1ã€2ã€3</p>
<p>listenersè¿™ä¸€è¡Œå–æ¶ˆæ³¨é‡Šï¼Œç«¯å£å·åˆ†åˆ«ä¸º9093ã€9094ã€9095</p>
<p>log.dirsåˆ†åˆ«è®¾ç½®ä¸ºkafka-logs1ã€kafka-logs2ã€kafka-logs3ï¼ˆå…ˆåˆ›å»ºï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /tmp/kafka-logs1 /tmp/kafka-logs2 /tmp/kafka-logs3</span><br></pre></td></tr></table></figure>
<ul>
<li><p>server1.properties çš„é…ç½®ï¼š</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">broker.id=1</span><br><span class="line">listeners=PLAINTEXT://192.168.44.161:9093</span><br><span class="line">log.dirs=/tmp/kafka-logs1</span><br></pre></td></tr></table></figure></li>
<li><p>server2.properties çš„é…ç½®:</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">broker.id=2</span><br><span class="line">listeners=PLAINTEXT://192.168.44.161:9094</span><br><span class="line">log.dirs=/tmp/kafka-logs2</span><br></pre></td></tr></table></figure></li>
<li><p>server3.properties çš„é…ç½®ï¼š</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">broker.id=3</span><br><span class="line">listeners=PLAINTEXT://192.168.44.161:9095</span><br><span class="line">log.dirs=/tmp/kafka-logs3</span><br></pre></td></tr></table></figure></li>
</ul>
<p>å¦‚æœlistenerså–æ¶ˆæ³¨é‡Šå¯¼è‡´topicåˆ›å»ºå¤±è´¥ï¼Œå¯ä»¥ä¿®æ”¹ä¸º</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">listeners</span>=<span class="string">PLAINTEXT://:9093</span></span><br><span class="line"><span class="meta">advertised.listeners</span>=<span class="string">PLAINTEXT://10.1.14.159:9093</span></span><br></pre></td></tr></table></figure>
<h3 id="4-å¯åŠ¨3ä¸ªæœåŠ¡"><a href="#4-å¯åŠ¨3ä¸ªæœåŠ¡" class="headerlink" title="4. å¯åŠ¨3ä¸ªæœåŠ¡"></a>4. å¯åŠ¨3ä¸ªæœåŠ¡</h3><ol>
<li>å¯åŠ¨ZK<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/apache-zookeeper-3.7.1-bin/bin</span><br><span class="line">./zkServer.sh start</span><br></pre></td></tr></table></figure></li>
<li>å¯åŠ¨Kafka <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ../bin</span><br><span class="line">./kafka-server-start.sh -daemon ../config/server1.properties</span><br><span class="line">./kafka-server-start.sh -daemon ../config/server2.properties</span><br><span class="line">./kafka-server-start.sh -daemon ../config/server3.properties</span><br></pre></td></tr></table></figure></li>
</ol>
<p>PSï¼šå¦‚æœé‡åˆ°zk node existsçš„é—®é¢˜ï¼Œå…ˆæŠŠbrokersèŠ‚ç‚¹åˆ æ‰ï¼ˆä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼‰ã€‚</p>
<h3 id="5-é›†ç¾¤ä¸‹åˆ›å»ºTopic"><a href="#5-é›†ç¾¤ä¸‹åˆ›å»ºTopic" class="headerlink" title="5. é›†ç¾¤ä¸‹åˆ›å»ºTopic"></a>5. é›†ç¾¤ä¸‹åˆ›å»ºTopic</h3><p>åœ¨binç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºygbtestçš„<code>topic</code>ï¼Œåªæœ‰ä¸€ä¸ªæœåŠ¡æœ¬ä¸€ä¸ªåˆ†åŒºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic ygbtest</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹ä¸€åˆ›å»ºçš„topicï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh kafka-topics.sh -list -zookeeper localhost:2181</span><br></pre></td></tr></table></figure>

<h3 id="6-é›†ç¾¤ä¸‹å¯åŠ¨Consumer"><a href="#6-é›†ç¾¤ä¸‹å¯åŠ¨Consumer" class="headerlink" title="6. é›†ç¾¤ä¸‹å¯åŠ¨Consumer"></a>6. é›†ç¾¤ä¸‹å¯åŠ¨Consumer</h3><p>åœ¨ä¸€ä¸ªæ–°çš„åŸè½¦é¥çª—å£ä¸­ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh kafka-console-consumer.sh --bootstrap-server 192.168.44.161:9093,192.168.44.161:9094,192.168.44.161:9095 --topic ygbtest --from-beginning</span><br></pre></td></tr></table></figure>
<p>kafkaç›¸å…³å‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿™ç¯‡åšå®¢ <a href="https://xiaoyuge.work/kafka-command/">kafkaå¸¸ç”¨å‘½ä»¤</a></p>
<h3 id="7-é›†ç¾¤ä¸‹å¯åŠ¨Producer"><a href="#7-é›†ç¾¤ä¸‹å¯åŠ¨Producer" class="headerlink" title="7. é›†ç¾¤ä¸‹å¯åŠ¨Producer"></a>7. é›†ç¾¤ä¸‹å¯åŠ¨Producer</h3><p>æ‰“å¼€ä¸€ä¸ªæ–°çš„çª—å£ï¼Œåœ¨kafkaè§£å‹ç›®å½•ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh kafka-console-producer.sh --broker-list 192.168.44.161:9093,192.168.44.161:9094,192.168.44.161:9095 --topic ygbtest</span><br></pre></td></tr></table></figure>

<h3 id="8-é›†ç¾¤ä¸‹Producerçª—å£å‘é€æ¶ˆæ¯"><a href="#8-é›†ç¾¤ä¸‹Producerçª—å£å‘é€æ¶ˆæ¯" class="headerlink" title="8. é›†ç¾¤ä¸‹Producerçª—å£å‘é€æ¶ˆæ¯"></a>8. é›†ç¾¤ä¸‹Producerçª—å£å‘é€æ¶ˆæ¯</h3><p>åœ¨ç”Ÿäº§è€…<code>Producer</code>çª—å£è¾“å…¥hello world å›è½¦</p>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis6.2.6ä¸€ä¸»äºŒä»Sentinelç›‘æ§é…ç½®</title>
    <url>/redis-sentinel/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="Oh, these decrypted content cannot be verified, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="8aa9961e0b7e5c47b6e1610b50ff83729c4dffd43469e7c621c8418d3230e7c3">91b4a72afde41933824d9b47e790ab276fb896cf66d88c172d81884618061a3a75664e9706a6c5e880144f13279c1699d5a3a16cec695797165d155ca68ecc5e8e550b08cc074462ab09d7c7927f765750dfb6fe022b436487d42ac708d3c0245549058419df07540b608fecbcf2d32542ae3ee854f3628f3cd94fbd4239d11b659801fd79fc4dced3862207a1c5f9e8cac24fe39d1ca54e555a14a40bca4c47ef2db73282aa89c637f59bde243af465ddf43a532c250ac8579c8b69313ddb9ba14b7aa63d7ed2dfb1fa352f82d74808f0213c39f15da37c94163585cd3052eb939b84f90d2d7b4b609d7cfda9b6c072ed0f5ff463b3c53f612fc0c79f5e41653ce703af854782673c12fd8ac9ad41d5a517acad0bf7ea6bc0fea717c11d7aa8a3a251b7895c52fa24bc1a043b23411b62171defe371c4155d725a62802d93dd4b7ccba2a227d1528ed3ea89d76dfddf1279ea0427240320f26284ae497f907974c628307fc54f7923d50a32672bbc812a73d17e82d48f8a12cb7c9b6ef49bc6ff04b74c458d9cbdf17aa968c13b4919b6cfc2f4746c0907d7102dd85eba16a88be0b4994231e4205055868ead1b97b9dc7eeca2b497cf3646b341f23fab138679a6c10e33268d11a7983104929d2acecac606503d1553d27803a380b7419365acbc7dbdacb2b1c36c620d1272b96bbb7710e293b0a3efd659d62b3736e387ee00e387f0273f4dd70e314466c592bcf712f394235a7fb4437db2319ab6bbec5c57b0fa488980c53aa351527438e9fd500fd632822ac0dd19bbfbc0cd8ef5151050a6e4b99a87daa98e16a31f3535f763cedbd40edf3d878bdcfb748983c2b6673de866ed66fe1612807e4c0f7fbac77a821ed8401810ba1567dc9af801543d18f3d884feb294d768afcdbb5282dc976c4f49fb330d5e25f6bd09de88c44219e566bbae591a72c14eb865348015f8149e4ebef1d373259188afa797e0d7855b6472d7371c1e0b8bf88e480313949090a99a17ab0b22807e85163d1bb84f4d7406b88d26dbed92294a6c054c4dbe8e95538aae0f284daa1e16eb19f1f659386932bc067f8add03745233b5e1293accc52bfaa89e880eaf081233707ee78db281066d09c4ba40275e86567f07fba9bf9c9496239bd83bc85ac796c473d71420117291a445cc58e9be457d605979b3d067b0de8a0854a25c8dc4d45209a50bb0a0923ac30af36a3c6f9302d4380caed79e43d207ba17762f09229a9b3112bb4987fd458da9327657ebf7b721d8728937847cc9d38566bb4f4d29088d273d87c05f4e7d22033a09feb8555c0eec2d9c8aea0cde3af68430cdc8e774b6a654bb6a5182ff84105f8f11dd81ccb28d2feb6778af23380d92d7d2a2321f6a193442456434f8bb169bc1ffc69df9229da916657a4cd60f9a7c22be52cd5b35b582218de139e3be1ecc874b7cb16f0ae92b407f346c5ab8fd6c2e1f85a1c5796a534a8f1ae50bfa0c6bc8d673dfebe505a5c18986964732410b5f16355fac43017012c5c57a13912fcd4bdada0c7b16666897239c20400fb80bab88a697aa0628a61eec9665b4cbc0d12f9373c2d20eda0628740f91ce3cf16e33bf1b9e2aed87159734c301da5bd17c532a77f99654c0476f72437054d87430d5c89318c49f59365b31eefd39614d91966d415cf85d78b4fa227e831db11da318a931a8716cf3dbcfe9342dd2739c8695a6d390de2cb2e92dfb0cb6c28dfd54deded08a45aba19d35ce9cdbab8ce8d8df7c0c06314493fb544d64cddc95365121e17e5254a619047de501e2f4f42654a325f336ab90a74fdf4803691c8f1695b8a0fe8b9564211134293f61c06cd7ee2521e3114fe0484713515734157b4130e1ebff0a97c62f4b8162e5a51fafaf3b79b3a0248270776a1ee074146dce491706ef9fe91c398bc79b586bd8241e32222a39f179fc96489b7435e62e975a87175569d20868a329f950b353f75f6e9e2ccd99e6876e148193642d71c89809e666a0e9e9b19c903946e7681d1750aa83a894f7b297d7f9b5f1862ea54d837b719a57a77687e7956aba2641e6e59697c6375ab245c8733e3b9eed2ef3c6ba2d986ed95f15ec6d3e143da57966fb09751721bf34a4c4960d590fd7a94358caaa92bde8ad882cf6da572e38ba4e71332fc99f112feaa1696335c84d99aa8bb7d8eb5dee46e9cfbf296c91946ae90d3817fd930bdca5c2b011fd8490969170f9cf8b79f0f55be2f70a5d8c57b01feb93f61e17c6c30805840c987bbdb68f40dd1810f6ffcd097d91dc79e1bf7531f53b455da0152c75361e3700e85adf1ac6123c67173095437678a7620b63f96950b343f370ba5d98d58519a1ea4b5384f8993d06980c17ddda98c6c4d324a34838155f0221e93f2c24ccfd5384d7a72ea975bbbfc6a7e807281d61d6d94aea70c22c35e7956c2e31f7df816a840154d109c2029ba85a5eab505045ec360190265ef58c09decff4fa4f5c6817363b2dae538bac9358f3521b7f922f2dbb66ae8ead03440f95df5abb57f1f6b8a079cb2c828478daf4158ed0c1fd795791cee38d7f66e6a2b2c0d6dbb7eabc3949f3b459fdfefe056e939748e514bd6546da489535c81b19bdf82718b78beba235b5cedabe7b661bb76f178875557f3911146a78ed22f0950cc79e94041f5b9969d4a19e48c7bb056d89fb55e6425547b85bed9e9590e0fa713735fd361080e69fcfe065c3d18bf9a092f3629c5e30e09f6cf12c7ca8a3057cdd98d9b731167c0d414a40e161d21d65444b309af0265ccd5886b0748d5ffe3a902cc37724d03ba7b84f9e1259d1a38c21c75ec5af7c2a8abb6e709cac41795dea18c052bb74c8c181ecbc2b540090735f15781602e3787e33bfa699493833535e36bb4b951908344865347d25562e19a1fbe0b5a3d1be530353261e46d2a818f889085d2e51325d094c682f80c0be10a95c255b85930154f7bc5acab87871c261098a1d1177ef0aa9fa2884453b9c0a4423b39fbf21b3897a501d1bebbeb4049788d4a2e6b165f0646ef417bd47ba91b975ef9535953069c982c1b50098909513294acb69cd91091d724a728e5623d94c7bdd1811891090ad5c5d147a0a5e8938a49f6aa452951d7a0271866489f10887a149e6175a3953c79d794bd5cedce087923067759ebc48854c67b45be24d325aaddc4731f1be7f31f220edb91a2ea1f921096661c5d138b8dad34bd40e539f65929fdefc766cdf9edc13c6bb5140a9241fe77b2fde65d804af8682849a4563136c18aa3c3d26bb90e373e9b2364e5a438e452b4218ae7af901e6c9c407bf5ca3ad437601d2c00e339af10a5af8e5753a1ff18fbc151a569cc1233744ce73fdc578cd4445fcaff8dac8aaf9206c4c52cb2ce96e2f1e0ad18263c78f9dd3b22ecf48a158ff92fd3304168e70e954fa2cb85b1f44ba6dec43c87b4b2fcb6ca4190ea3af91f5c6dc21ba0baeee08394c753ba2aaf32962e461b92e919dbe82161917005f2785caed0af3cb205550e142cfd054b5c0662efc73fa3a364906583fe78b4b2009e577815bdb45a7e7373ea87ebeb33ddcd0857a5eed8461487150e417ace8e1817a9e56dadb2fa1e12626933feb353a453ee266414c9123fdf5ff5faeff5274c5380f60b21cbf088f8405167112c2e13666eaa7cc58bbbac6fe8c215c428daebac363029a9fd636f26b6e80c0022d12d889abdd684565c864af12e4f3d891ff77a01b9f86cf462f5ac1a3e024ef3b23f4ea8039db41786bc1a8922627642c09a453b5373657463ef5239ede889545e6839eab3a43848e93d96c7f193a4462743f0bbed44404855e835b811d6ca1b86c0748b9a5646272dec6ec88f20f37d64cf68077533561eac539009c4b89b3b0ea86e8492b5e35425969d4780932df00d9b2cdb3534c4f01edff0fc209ad23fa215a8e92e9fa2b06e708d17c043e6dd501440541d8fd95cab677cb7eeb8a93c744e9e1225957661a53486b7912de883695ba47497e70ee75015565bd89827d8888f841ea156f607db989b384ccfbdcf8510af6cf7ec99383a7de96ed348081d2900a6e7524f11a23fb6bf8aa6a1568f51f9ec8c0acdc2468484ca969d97ac8c97057e9ea3a8c32d688152fc4502a76c87f2334febbd3bbafd0f904dc6dc8c65e84897b9e83da6879e10245d27be92082cb9ad52022c321207073eef9dac93a55aef329580f94690475b08f5b0393f98dfa9a39bf4a0ca111e9e473779e95fbfd005f01c521406dcaea0a9b43c37eea097a720c7ac4b5cc8481b9b1aa75eb5336f822b3535e80a95a06ba2633130a65df4de52fc0caa248c66a2b77057c29f2dd563b6c4f7c66798791c64ff9e16ee3bef08c797edc5bf4bf983eaefc3ff92c44a94e843f7b3283b6e3cc3b183629347d4e75e775bf002fd2ed41ede1fb81214d0cc29869dc805af1f3a6e56e537052176d603be6d940f291ef80077080fbef5f1ce03a54516dbf2037bacc8661ec00befbd3676123368ae0f32b6a5f42b6a9334f6c8e75565c5d1070c7613ffb0986b358251fb3acd57bf1e4111f34d27cb3b743be60b3e8b9688af44c50ace30b2c8ba0c9ff3d0aa35dcb0fd5f2d153e408099602152179887e6465f7a147c09aa20eb575cbdefa0456a13c829f67432ea0ab6eb7ef34512ddb84e6cda5864d340784db9798516ef790e1f580067daeb1f5600813f9fe60a8b28f55e7a4413d1c17c215eb7486c56c264bdbb5c665430e24a983459a5f951c4e081a48496311da1979f6e07a261400d5d258316df4b940273d61d663f85aa5cb03823cce124db9668f56c163e404b398e21de169646de46886e9f5f5dfffb2067ceb76bcb639d97f304e7b1e5d4201270dcd5e87d7b8f0cb1fd1664b134dc401a5780072ee6db0946de3788d1e8bc09e3ab4d697534a740c5b21cef0b9718f5af57620082719a3ba355359c768981ce16f092480a13b2e4192b1f92e9ec3bb51f9824d4508e0a54281a9560e89f04f744c776540c510515b8b4210165757c49630b27edf965fc65b569ffe9ecbd12f4e91e47aba6dfad581b01c02abc95e5906986e1333e0a18b186e9d79a6be83f3344066230a16f24dc4e3e4ff963cafb6e13a215ebab6e46c142a6943f462ed3f31d5d4a0fca2fdec3c9e39039caa5835a46bf40eef8a77132c712a42692e9aa42430fd6c8b33cc65320a934f5fa7a7e150d7b5759e60af2fa0927b0069a15327fa18c5d1ded7be19676d30ee22bfa24a51fcbb95c18b72bde8335cf1466cf7b49258d5a92cf4bc739e6d98055154aeb2fff6c5ae37c5b6c3e8283bd384cb8a59139fcf1139249fd20255982b249e4af09213c94cfc2d58aef62cac96a28924a0498d1bf8161cb615c5a565b05d40d77a7cbaca1453cd0f411b0c63983185e4d243ac0d1f7bf23435f39585997ea9ad361aab1d3f46118cf656151b1d0f720ec7ca21d3b855df753982ccef25b08e22801e4828aef191e6f580381a96cca6f75162bed241dd45d8ecf4e803d3801a73e427824084c02db757dfac4fba4901507adf6e71cbbd8d4731576fc9d98814d3d7b6c42d6740758df11769fbf48883c3d4c5bf48cb01deb864db0baecc4ad215a0cedbc7d5ad5d343ce0ae4b4d3439af81dc18dcebfb4138637685bc22024b5d2f8a1a7eb381c83228e112b194b03d3f5f09827d033de01132fbc59cf1af4892fb742d5601f28202a186cf7d0f631958e6f48edf40ae7b6b73a032a074328108ecba84c3a1382b4ba1bbbbac4de25c9b8b4f4ff9b5fc1501f89ba258d74154aba2ea3de6849fc13e8e99649b596057801532334f6a85b5bf684a1a123f3024fb0c735e16f02e90f07b0d6b0518b702932f8e00d67ac5d865d84a09df4b58a2a6784385f513c5e9abeaa7f014dc49efbb1ded0fbedd8657e4ee2a45ce4a3238c79f5bda2b82fd74e0598cd70684542cd3e01a7334a84f7d574ef6ed4ed83d73962268129152fe568830b73c1416d3fec67de016157d65e81d4aa2785217a0167dc46044ca006f9b7dc3ca5c2fd9737556c8302d88b9962c9899715446710b5909b72ab6d59fff8f2c2ad2fb1412b62b9f9318312c024e30ee8a51dc1fe4cf0e18fb307632b09498a155a1f35ecaf04661184fffe476dab48d863f268bf4687cc1e0d858045a431d4eddbe8768b8393c698a74d73d9f87b58dba6fbdc87c38a2ff9d900d9b70486364e08bff3d3c47bb5a94b6744c2627a22169a9234657376db85240be80dce3708c619c8d61d15862b3f41242232d2857625168cf8928568bbf3ef223c2fed5f434a1f0101260564eda660c36d73f413dca59d5d4e53d5e6db4fd4a533fa1165ed8a3d420e9311b459ec805a18cadcd91c60b2928d9cdd0719cbda9c53b974acb2167798dc93ff0b88689fc80bdeeb42adc2f5e54466eef53d4b76c29b5518802c8d586a4c16c52c35ff13345e253ffc668b49fb626b5cd018e9aca56ed7d6a9656bfa3d6ac93b848f2577b01a8336e7393df0f6a73322ae2a9419cd7c5adeaf5efb6a7f518f0ceeadf62fe2538084037042c1a909be8809d2a3098f8be0f37b66baaa1d4f2de0704eebe117c6a60d0d3c6a16d2baa1c07d364c8a03cf18a19061b31779c41bea78bb97b353b72718af541a3adcac41bcacce9d2762c44be9c516290015afa918b38f0ca0d4953d7ab86e53c70dc86584a78487bfb57fb6255d5f1240aa34620648a13a515051248660a4529a77670d06868467dcb6592c01932c5ba75b5b75df2f6b0df620843a5a92670991e8a49f35969822d28179030ab3aa76ee46b563849c1759f3a82a788f28c6bd504ad1cc60058063adec99fc8b8f489cbf382b2e1ef1d896931cff3c2d90b748684f8bd5cfd62a8e23db5d6c053ee56d056d38e8e7595280be85bc8fd40d10cdc2c7bb97cfd39bc3223196a7be7c4cac17e50ff89cd7cbd5a20d7bf7ba0cea8fa3ad041dda8e59e60994334cf33e3cff68f92ccd53f1cca53c52e5467921767705e34dceafc3f1305fc5d6ba5bba316bc3e7a32f6925198249e8b4c833827493d92fa55d13f402c956ded7ce2d85040626e1e919601671095448ee027a95330e0c8c816a97115022af199edf09fd153e1e8b5a7203f1532b83f678b4cedbe782df4a100a99448e5733fcdc79cd27b2fd3b76caf3581c12ae8a085cb111b16d6109455a3a8c8d6e04a355d3a938bfd59fd1e40bc62167ce0becc3d76d068dafb5de8f4b54a075d56706a7898c935f68fa65b231adc7b6ef63618bab6ccc07b7348be3e3f3a1018c90ce155b4435c8013a1a16eedeb69a59a57c33474f4b62bb64fed1e349bc5279f3167bf04fcf25cda5abbc37958bd24787b88c7e2e080238fea76e9226ce27ad511f60d7a928aa39c5c44a830b3e42e3a12a65876505a13c67f588d18fc940a80189c7ddfe29def5d338f41b74e749e8312178c661d794814f371e07e61b90da5b1d59ad87dc0299a051e13255efb877c4d2350390ed7b410586ed315c62cea1f7d59ed3a99174495dc8a0aa2fd409f7f41d09c9f1f2d08d819e8c250d3b9f15922f8d7a25248b3a4f585482a4d478d5707ad745347f76cf4dbb1ed763aed3affa391c852b7d5fd0fcbdcf0ac4fb9bb0b6ae3d150565322f20df508e971ed63e4fe0e04dad1975949d2c07a32967e7a44454b5e7701b7db7a0eea02401c0e473dfe67f928191313b76da7a3cfaff86c6406a9c85d069077c19a444430cffb1021e72beed4eab38b3c21f0db16013bd716b27b3f659164de3f916494e040d087e3c38f17c91e0b0ff227a84e4f21e996191ffe6b888441612d4c2682aacd15c86fa2b2c9cde8ad04967d4081f44cbb8e9bfb5e22ccbf512163d89549c2611fd7917212c20ea30ae5a55290d8dcb585519cbb7c5f51c26c8d520bd33f5768db67fb2a0b6269b5ccad2a85300ba719c7237e485ca201292bb6c4df03a1fba14066235f7f559e4117cf9e8d80b32ef34e58a93917d0357d68cd6b5ec9c08456c57e505f7158c4e1e73851ed5147ff5c08c52e9ab6b4be6970b609bc0c26c4e7fed0777ea7f9b8af64bc5c4a409019d9499204ab7ca189b9dfc856237045be7c9b57a700b9bfdf53b2297f998465085dd8bb92b4f26d1c3e47de2e1a9ff1164e9844ae485a56e8d1a6cd210e1a03974346925eca23a7cce81165d88681958a24aa3c8facf3410600a27a30ed051a8c7f3d19ab8343e53ab3926ea625d7d8795667a13a56437c9fb0fdfeebaf2d347fc72cc848e97b21189a170c638d4aca3765d3ed8435c2ec6f5fa8489ac1b839f092d57261994c33226c767a12bd4724edc74e5857c780366fefd43671cb6ab05a3a1221f7a0fa062683fd782d898f75789a6f295acf3b6d089a46df2f4b4e0ea144d4802c64fbd5b86bb79c836b42bc60e36c167e7f068c548c61fc3bae10feeae12d1cb2e605bb3b54c2af48a98b96be163a6b2912231c4433f8528d9e68d76c5584737649bfe08999ac2e2348dac3942c2f202ef3b8ea7302df1c6bc9546c0424f06beffabf125a11ea28834e054cf30fac4246306dd1446944f27416442a36ae5fedd83a92a892402dde7376d65ffd6659898c219e36f490e12cee292ea4326485f6f4cb7549a941e34982914bb01d2bc2769532916f162c22b6534cb2be94276fc16e18dd8b4a3ca7dec26323d71b552cdae9c8a3fabae5de47f1cf5c546539b48aba44b7c68fbc632063fc52fed091ff1c5fc23f560b8f5a632a0522c7ed496efa4a471a55b31b465fd04877cf2436d3c1e67d7a7592ff1ca202c71accac31d6e301c24bb2a4505d8f7072251b687a339074c7fabdd2673eba04c4c4fabc392f1433e2c9ee56b00d255c2094dd8c0fd8b694a1f03492bf56bc3f1be954ab84cd13f949adef42046a2b1d9f6e841b5161d02a1cea51587010aabfdeca0e05f26c9cac713cbe80e0b941675bb65b1e56fe44b2e6a35d12be21fc3e0e62a2055998e8a96b127753a7faab12c1360abd2f2d4851bf98aa133047514a5685c43601c96f1d76bfe2eea06944e368281ae266799486e5db0c50273138367c92765565e9be00f6872d252fd0789d793b59ca1545b3d786d93e466bdb3423612521434c9a12afd14db39c578f1ae17fdb6e0ffd0a70a5d4d0d3cc0967a55c1213be6f560af5a52113aac245b476262aef2e18ebe7d741fc85830c4169278170847db1c04b83f400acdec5e6745c3666629297f80a27593be1e1a1e5d9005b5f011fe02df00b210076bee38690d36129ad7c79a9248880175c2e8a643fb2078f7b7a1bf062c22f03d8134b3264608c06719ff52d5d4b2a511a5cc32ba5e73c15da6823f566e38f052d457f85ef2e096ef556b7e9608014f219179f77549c8207fd0c167de57f948d6f65c40198074b45dc425bdcdf8566a0d0a2b51dda7881aeea478a717239788b2598f7c8c2659b6e6e7dca18f1d565c11f1e04a5b58d75e983fda211eed642d6ef90a8871d798eda3ef58fc39058216a23aabf0a31ad4fd3261d4eff165c4461eb8f5e259dabf114e5c03041076992b6b117c577ffdb2a443ca93019fa1b4d9d1ca219b63fb2b57bdb6766de367b1c21cbf0a4cb85f3f13847e5de2411edf1052f0cbab39b592f9dac78d12cdf18c60e9372ba2da1dc4832a7a892394666ccf9ddf47e4d1aca11d80101fcf698f28377d0b507efae8083492ca5b2218ac3b329acfb252612cafde6872c995e5eb0d66aedb28cf1d9838a6f235b220050a5a16b5247629c2c76be0e59661e1c7c1a8f7390776a8155583bef3623724035ba08547b2aabe7855bbd4aed6ba33dd666597a097c95b095f010afb23da4d6121f3c25b0360a7ab5a333a6e91a4fb35d0af38d434c99ba1ad479114089e0ab2d0f84a54375a392d32becf2fcd8739f0df7ad23889457615e910296e9a1b8957e12c3c7ea9d7bb786c1423a2e8caeea09c3eb8a7bfcb457623570cfe29392d6096b98b605d9be69f3b7752f7bcfd00ba30bf7ce80d598f9f14c8988ffdf2f1e8830c1d62df9a941a3a9113cde920249c43c9e85af3d15595bebe83c064aeff83408b8b19a1e897684a21f8bcdf86048b7f65f3bbdcecee540bdf6525b3aa5123c1bedf244ad6e51c8dbbca44b8fc3aed44d518cb208836c10c9b2c4d0054078e3ec63e6225382707ea7afc6a17ffe51e2fb6db35b4cf862239b59666b024571fe33868342ecee0fd71c233d231972df1bca6d662b457db535338fb689a296383933026864b12660ffeecf2f314601ebf090b8bf6da2a7c1c238ea2b8a81728761f417d56ee60e5a1d1e5107d6acd3deec661c9ef0c057b19157495c82f964cc8d674635ccb6155cba589dba9717567d3af6f40164c58b7260ca2ab549948399a8199fd8b40bcd271c0bd7c61e453f1461dcfd19d64d30c5f4a2f4e1f13e30022df35130f1ded9a0eb5670f7346f9a08c6e3e8eeca63709fffcf95426e71ca18004d1af75a0fa83809d695c053fd018c1bf786c7f48e508001e6676fddc7516a4064662fdc2dc1fb3acc7dfbf3811926f5b282451d64a16d65bc0cef87e2fc24622e1abaeae06d6a3d630d32457e930e29a0c811bcf5dfde32336899914c438d7ac0a6e4c5da053190dda6a8437a12bc50ee20d30f300f69dd19294c1c88a0774b2a08e4bad9255703bf9028f4291418691daece76697da116d1a7ca6ebe34056895cd7734ca207b2d142907d26bb4b8341043ece31c9a519ba99a92a66602e64a4d95f4300a8c4c79eecdc596af8e9a926d8c9972655d952b9712d2c5b7c3bf41c43d2126e8017e7afd304ea187f88315081e3a354f37cd50aeb86ab6c0863b3e7a882b58475443cf30cbe115708e4c8bbc87275818dfa712818ecae51d887f65417c0177e619e99c675eb9824211be87ae4e31bd0b377166a9516385660ab7d9f52499bc958112f33c1c4894a9e338ca255e5596162378869e38a4e084001dc799eef7ef18baf99a0da24a16796a5db1dbe0a93d7a1c5049d66fca7b81bed5a06381b6e76a162c93efb1e01c97f4f57b6e8a1a3b840b927f31799ce66ecd13e05458c2560c8086887844c6f1ba8d82881f25ad0b8e6b43c875bb2fa2ae37f1230955803be9ad83fc60f51abb366e0dd9db639e1e5f97cc24ea770a66545d1f54be2bd79bdc57bb5cf8c49e6aa08b8abf43234160b8f9858b48e0852f366f2f39786267af7374649138ea164dd70f4128f9fe45e7414bf8986d3a099a71075d3902b4830e601ae2e6ae45f907c4f7ea14f2ad1625ca16130c91ac151d2a8e8380c423dbdf6fd883e80e063c61714386f4c1ec1ad0d48caf7cca943f2293854907b911b53a568f9ef35380c285c439802d4a2c5b5c2cf1943d48b12dc8853d38aa0e6a39a5d0e2a35ffc3036040452f11d4672e6d65cbd5de9a59f5156ee8bc8be840b7f0e8407174c1d821f3253ee087e1f31b4a3f19b9ea975a1a390da9f74902962e5dca9059e98429c3e9220db7fd7c90fce0cae4e55a4b7b6adac185287f24e4368d8862be1ca4ef7afe76a265f653e8f4a4141f11d40067182dade40df1f810f513e60e86647e1e436554b056addd00cd05ba8cc0872a707a86dcec8a936752fbe3f56e465ef703a72243bc64e428f5afbffcd374c65088237c45c87498c094fe628e45f54719951164c7fcb58208799d725934adee7259939626b760509162829156bebaac48df7ff4891a276300a0b73596c54f456342cf2b8944e605f6aa14f78a0714770f0b13833655bb9e382e7f4095922735a8a9c9d37e9622af70ee5ea7ed1af863e1484b1e1b176f16f4a954776c2de7b9ff7628a53851b0581b7105587c9ccd2515f0e7e5b16d943d66d2194bb91b58343b55f99d418f23366818098e4d42c1f947b2cfc37ac533639be63c1c802cc92ea9e795cfdf948a8fbca00a81e2e0b3a84604eabcaea79f671eb18fabf2d1583a6a03436c7f29d4f521c68840374335c9a2929de69c28ccdbebffd94be07af9d41392e6e49b0f6d2496649828362bdb124f4f78eee090a3d18b373a0c1833aab1b6c636ad15ef28edd378f992bc0d6d2c08ade58269374381c07c91c759379d482b892326f8727735b33cc1bf9861abb367bdf788dfeb72950b8cf398aec70d230769160abe52a58b810a87abf4a24812eb8ce5f2dc6c8999e6f43e6a97cd66979a747330d5de9ea2ecd918416c044d3fa00ada8793df8c97b557e3723f46d64aa17e68f101825f8708768059f071d92af63c1b08622448307c4d6289050a81560c8afdf9e438b4e731c27cd3d3be9780d088b01cf78c4e6da539f79ea36de9b43d279331e51893d464fbef8ff1ae5573639a721bf3975d9f65f8467a1eecee8e0eba0c9974a2e95c8a6bf23201bab52c3ec014070d764c74a3a4d82424ee3d63303996df18467046661abca8c3ce3fefb2189387dbd91f6fca28383790640930d2120586fe190a2e48915309f414fd1eb578a213f78bf92d040293d07bf132171034d417880abc8b86495649352616330f2916a974d93cd8ceff6978863e7ecc1985c16134a6807e3b975f6fa2d7730beb12b638ebb8b2602cc306c136ccedf4b54f9dfccb5bf3f19c2bc9bbb01f92e3f1654087692f82bd78b5c4272efdaf84c0b82a4ffb2b43f5166b2a82ae39e06c041eaf2f0b21bb07239cc48768370cd9fb5a70c35335e8f98a2405a9c57afccab4e4ebe79d867a44626edfc125751083c73baac75c1754d78067f872e1eaa19a035de7a2263fd946ac89427eb0990b396eb2be4a8d4f797b507292e03e2c998c7d1d19517e7e824b0fe2494149aa94fec5a8145b9ee79ff2bf26ce32c4952db6cbf8d1b4b7e4e4a2eb716f162b86b163bfc22d983892f0c2febe43cc00eb561c67c924911ee08bd66ea5eecce90b22a7dc95b43e036cfda5fcc34676adfd8ae0d6e0f614f2defebb55c246f71b58acb7a0d63bbd3614deabca1288f6a9e814a2ac1b536782c22d3f931e45425054f016b8f3a1a480d205528d5c17d0a15d6e33491a5a4d34ac5eeb85d892cc70280df73f6995acac5d7991c767ed800a98422fefc60f1398686f624b3d66a7e67b3a1e6ac0e93305f7c064ea3a6777834f04b6bf06e51df10547a68df92fc5484418bf3adc36389004e4c43787ab9c433bf02c3771c8b5faffdcd06b082bc3d2e731c061924cf943445c44ad90dfa53875e2b2efa333c3dc8fef130ab1ae2ab9f4dc3c0f71c2a5ca0551625f00f88d352d480cb1eee75ba8d00fd54ef9d8fd4b798625bd9bc80dabc91bb9fe1e2f636b5cb5f9adbcc5e9bb1c986ab56c79b867681b5e4a000289d0b8ee956bf57ce2371b7d5e36a4e3d5ba90282c64ff5757f238c5ce534482a108fa38d1979e4085fed75e6580c1e64b7e09c0ae8b86c5d654a5e479ba989a10785581fdc80cb131a676dcdbbcbe7b101cb6bcfacc15a129578b420475ca1bc6b42acd1203300ef7fc0a7235a1d33deee8629673df17855e7ba3fe2fbd1d12b34f6bacf6fa596227b8ac37a6088d1884c44229394cb88c3315f629437f7f66cc25b252d6e8e1e28006fe7f20d938dbf840aa52b7544e592d4a42b303bfdef3df6831a84b84bec00e2b5cee1ec51d3e262463e7f27cc63c515705ab563ef485f149257445686d1e7fe8f1c3b239b0b6ed29a9af3ae5dbe7dee002431a15181f787430eea9aad435bdbe26184f625431f2bc7db279f47d0a5a20478dd33b50ae71d562937228a4ee63617975b9c24a4b942e818b96d8bb3fb3e31930f5a95a8c484eb3790f5bb1405a45b34491f6f9e8c0378dd4ca43ef1aff07dee1767afd41c1ef9b9593032afe84085577b94e1ee75627137b29b18febae8fb3a6d20effc28f1a0c49e99ab983ab5aced1f1f3303898fdb279ff25d754bbd0818cb8fb13489023880b513cef7b28b910c1584758de30b0865b5b374538f2f0e8b652a494174f5dab312c9c073879a1f8ed37c675763a04579d4c227af176578445812cd3a945ac08607e8ca4301ea89ea848f93e6099e6b0c85f2283d4ecf315c3db30e0fc00a53ddb0f9855901a475d4c3848907490a516b0b8a530ed1d23f1a5956ac29734e28818589b24336c9aa43f7579df25df01e7659b2f811806cea4199cac46da2358fe3babdd998a9466e679a663e72629d4baad7cbd4ee32906a0e7c39824b1ad87e066833b4bacda0aa10c986ce3610881646fdd5aac363dc01601ff3c477718abf55685481bf40b9f4d3c53c86506a7bbfd287bd4ae3a6dfda79e7</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-xray">
      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">Hey, password is required here.</span>
      </label>
      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">
        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>
        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>
      </svg>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>RocketMQ äºŒä¸»äºŒä»å¼‚æ­¥é›†ç¾¤éƒ¨ç½²</title>
    <url>/rocketmq-colony-install/</url>
    <content><![CDATA[<h3 id="1-èŠ‚ç‚¹è§„åˆ’"><a href="#1-èŠ‚ç‚¹è§„åˆ’" class="headerlink" title="1. èŠ‚ç‚¹è§„åˆ’"></a>1. èŠ‚ç‚¹è§„åˆ’</h3><ol>
<li><p>ç¬¬ä¸€å°æœºå™¨ <strong>192.168.44.163</strong></p>
<table>
<thead>
<tr>
<th align="left">ç«¯å£</th>
<th align="left">åç§°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">9876</td>
<td align="left">NameServer1</td>
</tr>
<tr>
<td align="left">10910</td>
<td align="left">BrokerA-master</td>
</tr>
<tr>
<td align="left">10921</td>
<td align="left">BrokerB-slave</td>
</tr>
</tbody></table>
</li>
</ol>
<ol start="2">
<li><p>ç¬¬äºŒå°æœºå™¨ <strong>192.168.44.164</strong></p>
<table>
<thead>
<tr>
<th align="left">ç«¯å£</th>
<th align="left">åç§°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">9876</td>
<td align="left">NameServer2</td>
</tr>
<tr>
<td align="left">10911</td>
<td align="left">BrokerA-slave</td>
</tr>
<tr>
<td align="left">10920</td>
<td align="left">BrokerB-slave</td>
</tr>
</tbody></table>
</li>
</ol>
<p><img src="/rocketmq-colony-install/1.png"></p>
<h3 id="2-ä¸‹è½½å¹¶è§£å‹"><a href="#2-ä¸‹è½½å¹¶è§£å‹" class="headerlink" title="2. ä¸‹è½½å¹¶è§£å‹"></a>2. ä¸‹è½½å¹¶è§£å‹</h3><p>å…·ä½“æ“ä½œå¯ä»¥æŸ¥çœ‹ <a href="https://xiaoyuge.work/rocketmq-install/">CentOSå®‰è£…RocketMQä»¥åŠå¸¸ç”¨å‘½ä»¤</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools</span><br><span class="line">wget https://dlcdn.apache.org/rocketmq/4.9.4/rocketmq-all-4.9.4-bin-release.zip</span><br><span class="line"><span class="meta">#</span><span class="bash">è§£å‹</span></span><br><span class="line">unzip rocketmq-all-4.9.4-bin-release.zip </span><br><span class="line"><span class="meta">#</span><span class="bash">æ”¹å</span></span><br><span class="line">mv rocketmq-all-4.9.4-bin-release rocketmq</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸¤å°æœºå™¨ä¸Šéƒ½ä¸‹è½½ã€è§£å‹å¥½ã€‚<br>åœ¨<code>rocketmq/conf</code>ç›®å½•ä¸‹ï¼Œæœ‰ä¸‰ç§å»ºè®®é…ç½®æ¨¡å¼ï¼š</p>
<ul>
<li>2m-2s-async(2ä¸»2ä»å¼‚æ­¥) â€”â€” æœ¬æ–‡é‡‡ç”¨è¿™ç§</li>
<li>2m-2s-sync (2ä¸»2ä»åŒæ­¥)</li>
<li>2m-noslave (2ä¸»)</li>
</ul>
<p><img src="/rocketmq-colony-install/2.png"><br>ç°åœ¨éœ€è¦ä¿®æ”¹ä¸¤å°æœºå™¨ä¸Š<code>2m-2s-async</code>è¿™ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶ã€‚<br>é…ç½®æ–‡ä»¶ä¿®æ”¹ä¹‹å‰å…ˆå¤‡ä»½ã€‚</p>
<h3 id="3-é…ç½®ç¬¬ä¸€å°æœºå™¨163"><a href="#3-é…ç½®ç¬¬ä¸€å°æœºå™¨163" class="headerlink" title="3. é…ç½®ç¬¬ä¸€å°æœºå™¨163"></a>3. é…ç½®ç¬¬ä¸€å°æœºå™¨163</h3><p>192.168.44.163çš„ä¸¤ä¸ªé…ç½®æ–‡ä»¶<br><img src="/rocketmq-colony-install/3.png"></p>
<ol>
<li>broker-a.properties <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/rocketmq/conf/2m-2s-async</span><br><span class="line">vim  broker-a.properties</span><br></pre></td></tr></table></figure>
 ä¿®æ”¹çš„å†…å®¹ï¼ˆåå­—è‡ªå®šä¹‰ï¼Œä¿æŒä¸€ç›´ï¼Œå¦åˆ™ä¸èƒ½ç»„æˆé›†ç¾¤ï¼‰ <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">brokerClusterName</span>=<span class="string">ygb-cluster</span></span><br></pre></td></tr></table></figure>
 å¢åŠ å†…å®¹: <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span><br><span class="line"><span class="attr">listenPort</span>=<span class="string">10910</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateTopicEnable</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateSubscriptionGroup</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span><br><span class="line"><span class="attr">namesrvAddr</span>=<span class="string">192.168.44.163:9876;192.168.44.164:9876</span></span><br><span class="line"><span class="comment">#å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathRootDir</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a</span></span><br><span class="line"><span class="comment">#commitLog å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathCommitLog</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/commitlog</span></span><br><span class="line"><span class="comment">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathConsumeQueue</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/consumequeue</span></span><br><span class="line"><span class="comment">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathIndex</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/index</span></span><br><span class="line"><span class="comment">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storeCheckpoint</span>=<span class="string">/usr/local/tools/rocketmq/store/checkpoint</span></span><br><span class="line"><span class="comment">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">abortFile</span>=<span class="string">/usr/local/tools/rocketmq/store/abort</span></span><br></pre></td></tr></table></figure></li>
<li>broker-b-s.properties <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim  broker-b-s.properties</span><br></pre></td></tr></table></figure>
 ä¿®æ”¹çš„å†…å®¹ï¼ˆåå­—è‡ªå®šä¹‰ï¼Œä¿æŒä¸€ç›´ï¼Œå¦åˆ™ä¸èƒ½ç»„æˆé›†ç¾¤ï¼‰ <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">brokerClusterName</span>=<span class="string">ygb-cluster</span></span><br></pre></td></tr></table></figure>
 å¢åŠ å†…å®¹: <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span><br><span class="line"><span class="attr">listenPort</span>=<span class="string">10921</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateTopicEnable</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateSubscriptionGroup</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span><br><span class="line"><span class="attr">namesrvAddr</span>=<span class="string">192.168.44.163:9876;192.168.44.164:9876</span></span><br><span class="line"><span class="comment">#å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathRootDir</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b-s</span></span><br><span class="line"><span class="comment">#commitLog å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathCommitLog</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b-s/commitlog</span></span><br><span class="line"><span class="comment">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathConsumeQueue</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b-s/consumequeue</span></span><br><span class="line"><span class="comment">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathIndex</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b-s/index</span></span><br><span class="line"><span class="comment">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storeCheckpoint</span>=<span class="string">/usr/local/tools/rocketmq/store/checkpoint</span></span><br><span class="line"><span class="comment">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">abortFile</span>=<span class="string">/usr/local/tools/rocketmq/store/abort</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-é…ç½®ç¬¬äºŒå°æœºå™¨164"><a href="#4-é…ç½®ç¬¬äºŒå°æœºå™¨164" class="headerlink" title="4. é…ç½®ç¬¬äºŒå°æœºå™¨164"></a>4. é…ç½®ç¬¬äºŒå°æœºå™¨164</h3><p>192.168.44.164çš„ä¸¤ä¸ªé…ç½®æ–‡ä»¶; ä¿®æ”¹çš„å†…å®¹åŸºæœ¬ä¸€è‡´ï¼Œä¸»è¦æ˜¯æ³¨æ„ä¸€ä¸‹ç«¯å£å·ã€è·¯å¾„åã€‚<br><img src="/rocketmq-colony-install/4.png"></p>
<ol>
<li><p>broker-b.properties</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/rocketmq/conf/2m-2s-async</span><br><span class="line">vim  broker-b.properties</span><br></pre></td></tr></table></figure>
<p> ä¿®æ”¹çš„å†…å®¹ï¼ˆåå­—è‡ªå®šä¹‰ï¼Œä¿æŒä¸€ç›´ï¼Œå¦åˆ™ä¸èƒ½ç»„æˆé›†ç¾¤ï¼‰</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">brokerClusterName</span>=<span class="string">ygb-cluster</span></span><br></pre></td></tr></table></figure>
<p> å¢åŠ å†…å®¹:</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span><br><span class="line"><span class="attr">listenPort</span>=<span class="string">10920</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateTopicEnable</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateSubscriptionGroup</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span><br><span class="line"><span class="attr">namesrvAddr</span>=<span class="string">192.168.44.163:9876;192.168.44.164:9876</span></span><br><span class="line"><span class="comment">#å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathRootDir</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b</span></span><br><span class="line"><span class="comment">#commitLog å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathCommitLog</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b/commitlog</span></span><br><span class="line"><span class="comment">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathConsumeQueue</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b/consumequeue</span></span><br><span class="line"><span class="comment">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathIndex</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-b/index</span></span><br><span class="line"><span class="comment">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storeCheckpoint</span>=<span class="string">/usr/local/tools/rocketmq/store/checkpoint</span></span><br><span class="line"><span class="comment">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">abortFile</span>=<span class="string">/usr/local/tools/rocketmq/store/abort</span></span><br></pre></td></tr></table></figure></li>
<li><p>broker-a-s.properties</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/rocketmq/conf/2m-2s-async</span><br><span class="line">vim broker-a-s.properties</span><br></pre></td></tr></table></figure>
<p> ä¿®æ”¹çš„å†…å®¹ï¼ˆåå­—è‡ªå®šä¹‰ï¼Œä¿æŒä¸€ç›´ï¼Œå¦åˆ™ä¸èƒ½ç»„æˆé›†ç¾¤ï¼‰</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">brokerClusterName</span>=<span class="string">ygb-cluster</span></span><br></pre></td></tr></table></figure>
<p> å¢åŠ å†…å®¹:</p>
 <figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span><br><span class="line"><span class="attr">listenPort</span>=<span class="string">10911</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateTopicEnable</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateSubscriptionGroup</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span><br><span class="line"><span class="attr">namesrvAddr</span>=<span class="string">192.168.44.163:9876;192.168.44.164:9876</span></span><br><span class="line"><span class="comment">#å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathRootDir</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a-s</span></span><br><span class="line"><span class="comment">#commitLog å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathCommitLog</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a-s/commitlog</span></span><br><span class="line"><span class="comment">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathConsumeQueue</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a-s/consumequeue</span></span><br><span class="line"><span class="comment">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathIndex</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a-s/index</span></span><br><span class="line"><span class="comment">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storeCheckpoint</span>=<span class="string">/usr/local/tools/rocketmq/store/checkpoint</span></span><br><span class="line"><span class="comment">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">abortFile</span>=<span class="string">/usr/local/tools/rocketmq/store/abort</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-åˆ›å»ºæ•°æ®ç›®å½•"><a href="#5-åˆ›å»ºæ•°æ®ç›®å½•" class="headerlink" title="5. åˆ›å»ºæ•°æ®ç›®å½•"></a>5. åˆ›å»ºæ•°æ®ç›®å½•</h3><ol>
<li><p>åœ¨ç¬¬ä¸€å°æœºå™¨163 æ‰§è¡Œï¼ˆåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼‰</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/local/tools/rocketmq/store/broker-a /usr/local/tools/rocketmq/store/broker-a/consumequeue /usr/local/tools/rocketmq/store/broker-a/commitlog /usr/local/tools/rocketmq/store/broker-a/index /usr/local/tools/rocketmq/logs /usr/local/tools/rocketmq/store/broker-b-s /usr/local/tools/rocketmq/store/broker-b-s/consumequeue /usr/local/tools/rocketmq/store/broker-b-s/commitlog /usr/local/tools/rocketmq/store/broker-b-s/index</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨ç¬¬äºŒå°æœºå™¨164 æ‰§è¡Œï¼ˆåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼‰</p>
 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/local/tools/rocketmq/store/broker-a-s /usr/local/tools/rocketmq/store/broker-a-s/consumequeue /usr/local/tools/rocketmq/store/broker-a-s/commitlog /usr/local/tools/rocketmq/store/broker-a-s/index /usr/local/tools/rocketmq/logs /usr/local/tools/rocketmq/store/broker-b /usr/local/tools/rocketmq/store/broker-b/consumequeue /usr/local/tools/rocketmq/store/broker-b/commitlog /usr/local/tools/rocketmq/store/broker-b/index</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="6-å¯åŠ¨ä¸¤ä¸ªNameServer"><a href="#6-å¯åŠ¨ä¸¤ä¸ªNameServer" class="headerlink" title="6. å¯åŠ¨ä¸¤ä¸ªNameServer"></a>6. å¯åŠ¨ä¸¤ä¸ªNameServer</h3><ol>
<li><p>å¯åŠ¨ç¬¬ä¸€å°163çš„NameServer</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup sh /usr/local/tools/rocketmq/bin/mqnamesrv &gt;/usr/local/tools/rocketmq/logs/mqnamesrv.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨ç¬¬äºŒå°164çš„NameServer</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup sh /usr/local/tools/rocketmq/bin/mqnamesrv &gt;/usr/local/tools/rocketmq/logs/mqnamesrv.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-å¯åŠ¨Broker"><a href="#7-å¯åŠ¨Broker" class="headerlink" title="7. å¯åŠ¨Broker"></a>7. å¯åŠ¨Broker</h3><ol>
<li><p>å¯åŠ¨ 163 æœºå™¨ä¸Šçš„<code>broker-a-master</code>ï¼ˆåœ¨163ä¸Šæ‰§è¡Œï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup sh /usr/local/tools/rocketmq/bin/mqbroker -c /usr/local/tools/rocketmq/conf/2m-2s-async/broker-a.properties &gt; /usr/local/tools/rocketmq/logs/broker-a.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>
<p>åœ¨è™šæ‹Ÿæœºä¸­å¯èƒ½ç”±äºå†…å­˜ä¸å¤Ÿå¯¼è‡´æ— æ³•å¯åŠ¨ï¼Œæ—¥å¿—æ–‡ä»¶ä¸­å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nohup: ignoring input</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x00000005c0000000, 8589934592, 0) failed; error=&#x27;Cannot allocate memory&#x27; (errno=12)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/local/tools/rocketmq/bin/runbroker.sh</span><br></pre></td></tr></table></figure>
<p>æŠŠ8gå’Œ4gæ”¹æˆ512må’Œ256m</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">JAVA_OPT</span>=<span class="string">&quot;$&#123;JAVA_OPT&#125; -server -Xms512m -Xmx512m -Xmn256m&quot;</span></span><br></pre></td></tr></table></figure>
<p>å†æ¬¡å¯åŠ¨ã€‚</p>
</li>
<li><p>å¯åŠ¨ 164 æœºå™¨ä¸Šçš„<code>broker-a-s</code>ï¼ˆåœ¨164ä¸Šæ‰§è¡Œï¼‰</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">nohup</span> <span class="string">sh /usr/local/tools/rocketmq/bin/mqbroker -c /usr/local/tools/rocketmq/conf/2m-2s-async/broker-a-s.properties &gt; /usr/local/tools/rocketmq/logs/broker-a-s.log 2&gt;&amp;1 &amp;</span></span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨ 164 çš„<code>broker-b-master</code>ï¼ˆåœ¨164ä¸Šæ‰§è¡Œï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup sh /usr/local/tools/rocketmq/bin/mqbroker -c /usr/local/tools/rocketmq/conf/2m-2s-async/broker-b.properties &gt; /usr/local/tools/rocketmq/logs/broker-b.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨ 163 æœºå™¨ä¸Šçš„<code>broker-b-s</code>ï¼ˆåœ¨163ä¸Šæ‰§è¡Œï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup sh /usr/local/tools/rocketmq/bin/mqbroker -c /usr/local/tools/rocketmq/conf/2m-2s-async/broker-b-s.properties &gt; /usr/local/tools/rocketmq/logs/broker-b-s.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></li>
<li><p>æŸ¥çœ‹ä¸¤å°æœºå™¨çš„ç«¯å£å¯åŠ¨æƒ…å†µ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netstat -an|grep ç«¯å£å·</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>rocketmq</tag>
      </tags>
  </entry>
  <entry>
    <title>mycatå­¦ä¹ </title>
    <url>/mycat/</url>
    <content><![CDATA[<h1 id="Mycat-åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶"><a href="#Mycat-åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶" class="headerlink" title="Mycat(åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶)"></a>Mycat(åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶)</h1><h2 id="1-æ•°æ®åº“ä¼˜åŒ–ç­–ç•¥"><a href="#1-æ•°æ®åº“ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="1. æ•°æ®åº“ä¼˜åŒ–ç­–ç•¥"></a>1. æ•°æ®åº“ä¼˜åŒ–ç­–ç•¥</h2><ol>
<li> é‡å¯ï¼šé‡Šæ”¾èµ„æº</li>
<li> SQLä¸ç´¢å¼•</li>
<li> è¡¨ä¸å­˜å‚¨å¼•æ“ï¼ˆå­—æ®µç±»å‹é€‰æ‹©ï¼Œé•¿åº¦è®¾ç½®ï¼Œæ˜¯å¦éœ€è¦åˆ†è¡¨ã€åˆ†åŒºï¼‰</li>
<li> æ•°æ®åº“ä¸åº”ç”¨æ¶æ„ï¼ˆè€ƒè™‘ä½¿ç”¨ç¼“å­˜æœåŠ¡å™¨ï¼Œå‡è½»æ˜¯æ•°æ®åº“å‹åŠ›ï¼›å¯ä»¥æ•°æ®åº“åˆ†å¸ƒå¼ï¼Œè¯»å†™åˆ†ç¦»ï¼Œä¸»ä»å¤åˆ¶ï¼‰</li>
<li> æ•°æ®åº“ä¸æ“ä½œç³»ç»Ÿé…ç½®ï¼ˆä¿®æ”¹mysqlé…ç½®ï¼Œä½¿ç”¨å•ç‹¬æœåŠ¡å™¨éƒ¨ç½²æ•°æ®åº“ï¼‰</li>
<li> ç¡¬ä»¶</li>
</ol>
<h2 id="2-æ•°æ®åº“æ¼”åŒ–"><a href="#2-æ•°æ®åº“æ¼”åŒ–" class="headerlink" title="2. æ•°æ®åº“æ¼”åŒ–"></a>2. æ•°æ®åº“æ¼”åŒ–</h2><p>æ ¹æ®ä¸šåŠ¡éœ€è¦ã€æ•°æ®é‡å˜åŒ–ï¼Œéšä¹‹è€Œæ¥çš„æ•°æ®åº“çš„å˜åŒ–</p>
<ol>
<li><p> æ•°æ®åº“ä¸åº”ç”¨éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨<br><img src="/mycat/image-20201104204430049.png" alt="mycat"></p>
</li>
<li><p>å•ä½“åº”ç”¨æ¶æ„ï¼Œå•æ•°æ®åº“ï¼ˆæ•°æ®åº“æœåŠ¡å™¨å’Œåº”ç”¨æœåŠ¡å™¨åˆ†ç¦»ï¼Œä½†æ˜¯ä¸šåŠ¡ç³»ç»Ÿè¶Šåšè¶Šå¤§ï¼‰<br> <img src="/mycat/image-20201104204624925.png" alt="mycat"></p>
</li>
<li><p>å¤šåº”ç”¨å•æ•°æ®åº“ï¼ˆåº”ç”¨è§£è€¦ï¼‰<br> <img src="/mycat/image-20201104204933409.png" alt="mycat"></p>
</li>
<li><p>å¤šåº”ç”¨ ç‹¬ç«‹æ•°æ®åº“<br> <img src="/mycat/image-20201104205054233.png" alt="mycat"></p>
</li>
<li><p>ä½†åº”ç”¨å¤šæ•°æ®åº“(åˆ†è¡¨)<br> <img src="/mycat/image-20201104205319372.png" alt="mycat"></p>
</li>
</ol>
<h2 id="3-å¦‚ä½•åˆ†åº“åˆ†è¡¨"><a href="#3-å¦‚ä½•åˆ†åº“åˆ†è¡¨" class="headerlink" title="3. å¦‚ä½•åˆ†åº“åˆ†è¡¨"></a>3. å¦‚ä½•åˆ†åº“åˆ†è¡¨</h2><p><img src="/mycat/image-20201104205653611.png" alt="mycat"></p>
<ul>
<li><p>å‚ç›´åˆ‡åˆ†</p>
<ul>
<li><p>å•åº“<br>  <img src="/mycat/image-20201104205756827.png" alt="mycat"></p>
</li>
<li><p>å¤šåº“<br>  <img src="/mycat/image-20201104210008624.png" alt="mycat"></p>
</li>
</ul>
</li>
<li><p>æ°´å¹³åˆ‡åˆ†</p>
<ul>
<li><p>æŒ‰ç…§æœˆåˆ†è¡¨æˆ–è€…åˆ†æˆå®æ—¶ã€å†å²è¡¨ç­‰<br>  <img src="/mycat/image-20201104210117373.png" alt="mycat"></p>
</li>
<li><p>åˆ†æˆå¤šåº“<br>  <img src="/mycat/image-20201104210416994.png" alt="mycat"></p>
</li>
</ul>
</li>
</ul>
<h2 id="4-åˆ†åº“åˆ†è¡¨å¸¦æ¥çš„é—®é¢˜"><a href="#4-åˆ†åº“åˆ†è¡¨å¸¦æ¥çš„é—®é¢˜" class="headerlink" title="4. åˆ†åº“åˆ†è¡¨å¸¦æ¥çš„é—®é¢˜"></a>4. åˆ†åº“åˆ†è¡¨å¸¦æ¥çš„é—®é¢˜</h2><ol>
<li><p>è·¨åº“å…³è”æŸ¥è¯¢</p>
<ul>
<li>  å¢åŠ å†—ä½™å­—æ®µï¼ˆè¿åäº†ç¬¬ä¸‰èŒƒå¼ï¼šè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®å…ƒç´ ä¸ä½†è¦èƒ½å”¯ä¸€åœ°è¢«ä¸»å…³é”®å­—æ‰€æ ‡è¯†,è€Œä¸”å®ƒä»¬ä¹‹é—´è¿˜å¿…é¡»ç›¸äº’ç‹¬ç«‹,ä¸å­˜åœ¨å…¶ä»–çš„å‡½æ•°å…³ç³»ï¼‰</li>
<li>  è·¨æ•°æ®åº“çš„åŒæ­¥ï¼ˆcanalã€Mqï¼ˆæœ€å¥½ï¼‰ã€ETLã€kettleã€oggï¼‰(åœ¨æŸä¸ªåº“ä¸­åŒæ­¥å…¶ä»–æ•°æ®åº“ä¸­è¡¨çš„æ•°æ®ï¼Œé¿å…è·¨åº“å…³è”æŸ¥è¯¢)</li>
<li>  å…¨å±€è¡¨(å¹¿æ’­è¡¨)ï¼šæ¯”å¦‚è¡Œæ”¿åŒºåˆ’è¡¨ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿéƒ½æ˜¯ä¸€æ ·çš„ï¼›</li>
<li>  API</li>
</ul>
</li>
<li><p>åˆ†å¸ƒå¼äº‹åŠ¡</p>
<ul>
<li>  Local</li>
</ul>
</li>
<li><p>æ’åºã€ç¿»é¡µã€å‡½æ•°è®¡ç®—</p>
<p> -</p>
</li>
<li><p>å…¨å±€ä¸»é”®</p>
<ul>
<li>  é›ªèŠ±ç®—æ³•leaf</li>
<li>  redis(int ç±»å‹å¯ä»¥è®¾ç½®incby)</li>
<li>  ZookKeeper</li>
<li>  uuid(æ•°æ®è¿‡é•¿ï¼Œ å½±å“ç´¢å¼•å­˜å‚¨)</li>
</ul>
</li>
<li><p>å¤šæ•°æ®æºè¿æ¥ï¼ˆåŠ¨æ€æ•°æ®æºï¼‰<br> <img src="/mycat/image-20201104213343204.png" alt="mycat"></p>
</li>
</ol>
<h2 id="5-Mycatåˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶"><a href="#5-Mycatåˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶" class="headerlink" title="5. Mycatåˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶"></a>5. Mycatåˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶</h2><p><strong>å®˜ç½‘åœ°å€</strong>ï¼š<a href="http://www.mycat.org.cn/">http://www.mycat.org.cn/</a></p>
<p>ä»é˜¿é‡Œcobarå‡çº§è€Œæ¥ï¼Œå®Œå…¨å®ç°äº†mysqlåè®®ï¼Œå¯ä»¥å½“ä½œä¸€ä¸ªmysqlæ•°æ®åº“æ¥ä½¿ç”¨ï¼Œé€šè¿‡JDBCæ”¯æŒå…¶ä»–æ•°æ®åº“å®ç°åˆ†åº“åˆ†è¡¨ï¼Œè§£å†³äº†<strong>å¤šè¡¨joinã€åˆ†å¸ƒå¼äº‹åŠ¡ã€å…¨å±€åºåˆ—å·ã€ç¿»é¡µæŸ¥è¯¢ã€å‡½æ•°è®¡ç®—</strong>çš„é—®é¢˜</p>
<ul>
<li>  ä¸€ä¸ªå½»åº•å¼€æºçš„ï¼Œé¢å‘ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤§æ•°æ®åº“é›†ç¾¤</li>
<li>  æ”¯æŒäº‹åŠ¡ã€ACIDã€å¯ä»¥æ›¿ä»£MySQLçš„åŠ å¼ºç‰ˆæ•°æ®åº“</li>
<li>  ä¸€ä¸ªå¯ä»¥è§†ä¸ºMySQLé›†ç¾¤çš„ä¼ä¸šçº§æ•°æ®åº“ï¼Œç”¨æ¥æ›¿ä»£æ˜‚è´µçš„Oracleé›†ç¾¤</li>
<li>  ä¸€ä¸ªèåˆå†…å­˜ç¼“å­˜æŠ€æœ¯ã€NoSQLæŠ€æœ¯ã€HDFSå¤§æ•°æ®çš„æ–°å‹SQL Server</li>
<li>  ç»“åˆä¼ ç»Ÿæ•°æ®åº“å’Œæ–°å‹åˆ†å¸ƒå¼æ•°æ®ä»“åº“çš„æ–°ä¸€ä»£ä¼ä¸šçº§æ•°æ®åº“äº§å“</li>
<li>  ä¸€ä¸ªæ–°é¢–çš„æ•°æ®åº“ä¸­é—´ä»¶äº§å“</li>
</ul>
<p>åä¸ºäº‘çš„DDMå…¶å®ä¹Ÿæ˜¯æ ¹æ®mycatåšçš„</p>
<h3 id="5-1-æ ¸å¿ƒæ¦‚å¿µ"><a href="#5-1-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="5.1 æ ¸å¿ƒæ¦‚å¿µ"></a>5.1 æ ¸å¿ƒæ¦‚å¿µ</h3><p><img src="/mycat/image-20201104215015366.png" alt="image-20201104215015366"></p>
<h3 id="5-2-Mycatå®‰è£…ä¸é…ç½®"><a href="#5-2-Mycatå®‰è£…ä¸é…ç½®" class="headerlink" title="5.2 Mycatå®‰è£…ä¸é…ç½®"></a>5.2 Mycatå®‰è£…ä¸é…ç½®</h3><h4 id="5-2-1-Mycatå®‰è£…"><a href="#5-2-1-Mycatå®‰è£…" class="headerlink" title="5.2.1 Mycatå®‰è£…"></a>5.2.1 Mycatå®‰è£…</h4><p>ä»å®˜ç½‘ä¸‹è½½å®‰è£…ç‰ˆæœ¬ï¼Œè§£å‹åˆ°æ–‡ä»¶(å®˜ç½‘å»ºè®®å®‰è£…åœ¨/usr/local/Mycat)åé¡µé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/mycat/image-20201127094703483.png" alt="image-20201127094703483"></p>
<p>ç›®å½•è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>binï¼š</strong>å­˜æ”¾windowç‰ˆå’Œlinuxç‰ˆæœ¬é™¤äº†æä¾›å°è£…æˆæœåŠ¡çš„ç‰ˆæœ¬ä¹‹å¤–ï¼Œä¹Ÿæä¾›äº†nowrapçš„shellè„šæœ¬å‘½ä»¤ï¼Œæ–¹ä¾¿é€‰æ‹©å’Œä¿®æ”¹ï¼›Linuxä¸‹è¿è¡Œ:./mycat consoleï¼Œ é¦–å…ˆè¦chmod + x*;(mycatæ”¯æŒçš„å‘½ä»¤consoleã€startã€stopã€restartã€statusã€dump)</li>
<li><strong>confï¼š</strong>server.xmlæ˜¯mycatæœåŠ¡å™¨å‚æ•°è°ƒæ•´å’Œç”¨æˆ·æˆæƒçš„é…ç½®æ–‡ä»¶ï¼Œschema.xmlæ˜¯é€»è¾‘åº“å®šä¹‰å’Œè¡¨ä»¥åŠåˆ†ç‰‡å®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼Œrule.xmlæ˜¯åˆ†ç‰‡è§„åˆ™çš„é…ç½®æ–‡ä»¶ï¼Œåˆ†ç‰‡è§„åˆ™çš„å…·ä½“ä¸€äº›å‚æ•°ä¿¡æ¯å•ç‹¬å­˜æ”¾ä¸ºæ–‡ä»¶ï¼Œä¹Ÿåœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œé…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œéœ€è¦é‡å¯mycatæˆ–è€…é€šè¿‡9066ç«¯å£reload</li>
<li>**lib:**ä¸»è¦å­˜æ”¾mycatä¾èµ–çš„ä¸€äº›jaræ–‡ä»¶</li>
<li><strong>logs:<strong>æ—¥å¿—å­˜æ”¾åœ¨mycat.logä¸­ï¼Œæ¯å¤©ä¸€ä¸ªæ–‡ä»¶ï¼Œæ—¥å¿—çš„é…ç½®æ˜¯åœ¨conf/log4j.xmlä¸­ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œå¯ä»¥è°ƒæ•´è¾“å‡ºçº§åˆ«ä¸ºdebugï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜ï¼›æ³¨æ„Linuxä¸‹éƒ¨ç½²å®‰è£…mysqlï¼Œé»˜è®¤ä¸å¿½ç•¥ï¼Œéœ€è¦æ‰‹åŠ¨åˆ°/etc/my.cnfä¸‹é…ç½®</strong>lower_case_table_names=1</strong>ä½¿Linuxç¯å¢ƒä¸‹MySQLå¿½ç•¥è¡¨æ˜å¤§å°å†™ï¼Œå¦åˆ™ä½¿ç”¨mycatçš„æ—¶å€™ä¼šæç¤ºæ‰¾ä¸åˆ°è¡¨çš„é”™è¯¯</li>
</ul>
<h4 id="5-2-2-æœåŠ¡å¯åŠ¨ä¸é…ç½®"><a href="#5-2-2-æœåŠ¡å¯åŠ¨ä¸é…ç½®" class="headerlink" title="5.2.2 æœåŠ¡å¯åŠ¨ä¸é…ç½®"></a>5.2.2 æœåŠ¡å¯åŠ¨ä¸é…ç½®</h4><p>Mycatåœ¨Linuxä¸­éƒ¨ç½²å¯åŠ¨æ—¶ï¼Œé¦–å…ˆéœ€è¦åœ¨Linuxç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­é…ç½®MYCAT_HOE,æ“ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ol>
<li><p>vi /etc/profileï¼Œåœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­å¢åŠ MYCAT_HOME=/usr/lib/tools/mycat<br><img src="/mycat/image-20201127103212598.png" alt="image-20201127103212598"></p>
</li>
<li><p>æ‰§è¡Œ source/etc/profileå‘½ä»¤ï¼Œä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚å¦‚æœæ˜¯å¤šå°Linuxç³»ç»Ÿä¸­ç»„ä»¶Mycaté›†ç¾¤ï¼Œé‚£éœ€è¦åœ¨mycat Serveræ‰€åœ¨çš„æœåŠ¡å™¨é…ç½®å¯¹å…¶ä»–ipå’Œä¸»æœºåçš„æ˜ å°„ï¼Œé…ç½®æ–¹å¼å¦‚ä¸‹ï¼š<br><img src="/mycat/image-20201127104159580.png" alt="image-20201127104159580"></p>
<p>ç»è¿‡ä»¥ä¸Šä¸¤ä¸ªæ­¥éª¤çš„é…ç½®ï¼Œå°±å¯ä»¥åˆ°/usr/lib/tools/mycat/binç›®å½•ä¸‹æ‰§è¡Œ./mycat startå¯åŠ¨mycatæœåŠ¡ï¼›ä½¿ç”¨mycat statusæŸ¥çœ‹mycatçš„è¿è¡ŒçŠ¶æ€ï¼›å¦‚ä¸‹å›¾<br><img src="/mycat/image-20201128135953635.png" alt="image-20201128135953635"></p>
</li>
</ol>
<h5 id="5-2-2-1-å®‰è£…é‡åˆ°çš„é—®é¢˜"><a href="#5-2-2-1-å®‰è£…é‡åˆ°çš„é—®é¢˜" class="headerlink" title="5.2.2.1 å®‰è£…é‡åˆ°çš„é—®é¢˜"></a>5.2.2.1 å®‰è£…é‡åˆ°çš„é—®é¢˜</h5><ol>
<li><p>schema TESTDB refered by user root is not exist!<img src="/mycat/image-20201215152125176.png" alt="image-20201215152125176"></p>
<p>è§£å†³æ–¹å¼ï¼š</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨conf/server.xmlæ–‡ä»¶ä¸­schemasä¸­é…ç½®schema.xmlæ–‡ä»¶ä¸­çš„schemaçš„nameå€¼--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--userä¸­çš„nameä¸ºmycatæœåŠ¡çš„ç”¨æˆ·å--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">user</span> <span class="attr">name</span>=<span class="string">&quot;root&quot;</span> <span class="attr">defaultAccount</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--è¿™ä¸ªæ˜¯mycatæœåŠ¡è¿æ¥çš„å¯†ç --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;schemas&quot;</span>&gt;</span>xiaoyuge<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="5-2-3æ—¥å¿—åˆ†æ"><a href="#5-2-3æ—¥å¿—åˆ†æ" class="headerlink" title="5.2.3æ—¥å¿—åˆ†æ"></a>5.2.3æ—¥å¿—åˆ†æ</h4><p>mycatçš„æ—¥å¿—æ–‡ä»¶é…ç½®ä¸ºMYCAT_HOME/conf/log4j.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">log4j</span>:configuration <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;log4j.dtd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">xmlns:log4j</span>=<span class="string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ConsoleAppender&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%d&#123;MM-dd HH:mm:ss.SSS&#125; %5p [%t] (%F:%L) -%m%n&quot;</span> /&gt;</span></span><br><span class="line">true<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ—¥å¿—æ–‡ä»¶å­˜æ”¾çš„ç›®å½•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;MYCAT_HOME&#125;/logs/mycat.log&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;Append&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;MaxFileSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10000KB&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;MaxBackupIndex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;encoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%d&#123;MM/dd HH:mm:ss.SSS&#125; %5p [%t] (%F:%L) -%m%n&quot;</span> /&gt;</span></span><br><span class="line">true<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--levelæ˜¯æ—¥å¿—çº§åˆ«ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹åŠ ä»¥å°†çº§åˆ«è°ƒæ•´ä¸ºinfo/wareï¼Œå¦‚æœæ˜¯ç ”ç©¶æµ‹è¯•ï¼Œç¢°åˆ°å¼‚å¸¸è®¾ç½®ä¸ºdebug--&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line">truetrue<span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ConsoleAppender&quot;</span> /&gt;</span></span><br><span class="line">true<span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="5-2-3-1-warpperæ—¥å¿—"><a href="#5-2-3-1-warpperæ—¥å¿—" class="headerlink" title="5.2.3.1 warpperæ—¥å¿—"></a>5.2.3.1 warpperæ—¥å¿—</h5><p>ç›®å‰mycatçš„å¯åŠ¨æ—¶ç»è¿‡warpperå°è£…æˆå¯åŠ¨è„šæœ¬ï¼Œæ‰€ä»¥æ—¥å¿—ä¹Ÿä¼šæœ‰å…¶ç›¸å…³çš„æ—¥å¿—æ–‡ä»¶ï¼š${MYCAT_HOME}/logs/warapper.logï¼Œ åœ¨å¯åŠ¨çš„æ—¶å€™å¦‚æœç³»ç»Ÿç¯å¢ƒé…ç½®é”™è¯¯æˆ–ç¼ºå°‘é…ç½®æ—¶ï¼Œå¯¼è‡´mycatæ— æ³•å¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹wrapper.logæŸ¥çœ‹å…·ä½“é”™è¯¯åŸå› ã€‚</p>
<ol>
<li><p>æ­£å¸¸å¯åŠ¨</p>
 <figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line">STATUS | wrapper | <span class="number">2015</span>/<span class="number">04</span>/<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">00</span> | --&gt; Wrapper Started as Daemon</span><br><span class="line">STATUS | wrapper | <span class="number">2015</span>/<span class="number">04</span>/<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">00</span> | Launching a JVM...</span><br><span class="line">INFO | jvm <span class="number">1</span> | <span class="number">2015</span>/<span class="number">04</span>/<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">01</span> | Wrapper (Version <span class="number">3</span><span class="variable">.2</span><span class="variable">.3</span>) http:<span class="comment">//wrapper.tanukisoftware.org</span></span><br><span class="line">INFO | jvm <span class="number">1</span> | <span class="number">2015</span>/<span class="number">04</span>/<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">01</span> | Copyright <span class="number">1999</span>-<span class="number">2006</span> Tanuki Software, Inc. AllRights Reserved.</span><br><span class="line">INFO | jvm <span class="number">1</span> | <span class="number">2015</span>/<span class="number">04</span>/<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">01</span> |</span><br><span class="line">INFO | jvm <span class="number">1</span> | <span class="number">2015</span>/<span class="number">04</span>/<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">01</span> | log4j <span class="number">2015</span>-<span class="number">04</span>-<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">01</span> [./conf/log4j<span class="variable">.xml</span>]load completed.</span><br><span class="line">INFO | jvm <span class="number">1</span> | <span class="number">2015</span>/<span class="number">04</span>/<span class="number">12</span> <span class="number">15</span>:<span class="number">05</span>:<span class="number">02</span> | MyCAT Server startup successfully. see logs in logs/mycat<span class="variable">.log</span></span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨å¼‚å¸¸</p>
 <figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line">STATUS | wrapper | <span class="number">2015</span>/<span class="number">02</span>/<span class="number">14</span> <span class="number">01</span>:<span class="number">43</span>:<span class="number">44</span> | --&gt; Wrapper Started as Daemon</span><br><span class="line">STATUS | wrapper | <span class="number">2015</span>/<span class="number">02</span>/<span class="number">14</span> <span class="number">01</span>:<span class="number">43</span>:<span class="number">44</span> | Launching a JVM...</span><br><span class="line">INFO | jvm <span class="number">1</span> | <span class="number">2015</span>/<span class="number">02</span>/<span class="number">14</span> <span class="number">01</span>:<span class="number">43</span>:<span class="number">45</span> | Error: Exception thrown by the agent : java<span class="variable">.rmi</span><span class="variable">.server</span><span class="variable">.ExportException</span>:</span><br><span class="line">Port already in <span class="keyword">use</span>: <span class="number">1984</span>; nested exception is:</span><br><span class="line">INFO | jvm <span class="number">1</span> | <span class="number">2015</span>/<span class="number">02</span>/<span class="number">14</span> <span class="number">01</span>:<span class="number">43</span>:<span class="number">45</span> | java<span class="variable">.net</span><span class="variable">.BindException</span>: Address already in <span class="keyword">use</span></span><br><span class="line">ERROR | wrapper | <span class="number">2015</span>/<span class="number">02</span>/<span class="number">14</span> <span class="number">01</span>:<span class="number">43</span>:<span class="number">45</span> | JVM exited <span class="keyword">while</span> loading the application.</span><br><span class="line">    </span><br><span class="line"># æ—¥å¿—æ˜¾ç¤ºå¼‚å¸¸åŸå› ä¸º java<span class="variable">.net</span><span class="variable">.BindException</span>: Address already in <span class="keyword">use</span>,ä¹Ÿå°±æ˜¯ç«¯å£å ç”¨ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯åŸæœ‰æœ</span><br><span class="line">åŠ¡æœªåœæ­¢ï¼Œæˆ–è€… Mycat é»˜è®¤ç«¯å£è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Œæ­£å¸¸å¯åŠ¨æˆåŠŸåä¼šæœ‰ mycat<span class="variable">.log</span> æ—¥å¿—ï¼Œå¦‚æœæœåŠ¡æœªå¯åŠ¨æˆåŠŸä¸ä¼šæœ‰å¯¹åº”çš„æ—¥å¿—ã€‚ ä¹Ÿå¯ä»¥å»ä¿®æ”¹ conf æ–‡ä»¶å¤¹é‡Œçš„ wrapper<span class="variable">.conf</span> é‡Œçš„ wrapper<span class="variable">.java</span><span class="variable">.additional</span><span class="variable">.7</span>=-Dcom<span class="variable">.sun</span><span class="variable">.management</span><span class="variable">.jmxremote</span><span class="variable">.port</span>=<span class="number">1984</span>ï¼Œserver<span class="variable">.xml</span> çš„&lt;<span class="keyword">property</span> name=<span class="string">&quot;serverPort&quot;</span>&gt;<span class="number">8066</span>&lt;/<span class="keyword">property</span>&gt;å’Œ</span><br><span class="line">&lt;<span class="keyword">property</span> name=<span class="string">&quot;managerPort&quot;</span>&gt;<span class="number">9066</span>&lt;/<span class="keyword">property</span>&gt;ï¼Œè¿™æ–¹æ³•é€‚</span><br><span class="line">åˆä¸€å°æœºå™¨ä¸Šä¸¤ä¸ª mycat æˆ–è€… <span class="number">1984</span>,<span class="number">8066</span>,<span class="number">9066</span> ç«¯å£è¢«å…¶å®ƒåº”ç”¨å ç”¨çš„æƒ…å†µ</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="5-2-3-2-mycatæ—¥å¿—"><a href="#5-2-3-2-mycatæ—¥å¿—" class="headerlink" title="5.2.3.2 mycatæ—¥å¿—"></a>5.2.3.2 mycatæ—¥å¿—</h5><h4 id="5-2-4-mycaté˜²ç«å¢™è®¾ç½®"><a href="#5-2-4-mycaté˜²ç«å¢™è®¾ç½®" class="headerlink" title="5.2.4 mycaté˜²ç«å¢™è®¾ç½®"></a>5.2.4 mycaté˜²ç«å¢™è®¾ç½®</h4><p>ç™½åå•å’ŒSQLé»‘åå•è¯´æ˜ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨ server.xml ä¸­é…ç½®ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">firewall</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--ip ç™½åå•åˆ—è¡¨ï¼Œå¯ä»¥é…ç½®å¤šä¸ª--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">whitehost</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ip ç™½åå• ç”¨æˆ·å¯¹åº”çš„å¯ä»¥è®¿é—®çš„ ip åœ°å€--&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">host</span> <span class="attr">user</span>=<span class="string">&quot;mycat&quot;</span> <span class="attr">host</span>=<span class="string">&quot;127.0.0.1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">host</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">whitehost</span>&gt;</span></span><br><span class="line">     &lt;!-æ˜¯å¦å¼€å¯æ£€æŸ¥é»‘åå•åˆ—è¡¨--&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">blacklist</span> <span class="attr">check</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é»‘åå•å…è®¸çš„ æƒé™ åé¢ä¸ºé»˜è®¤--&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;selelctAllow&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">blacklist</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">firewall</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>é»‘åå•é…ç½®æ‹¦æˆªæ˜ç»†å¦‚ä¸‹ï¼š</strong></p>
<table>
<thead>
<tr>
<th align="center">é…ç½®é¡¹</th>
<th align="center">ç¼ºçœå€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">rollbackAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ roll back æ“ä½œ,å¦‚æœæŠŠ selectIntoAllowã€deleteAllowã€updateAllowã€insertAllowã€mergeAllow éƒ½è®¾ç½®ä¸º falseï¼Œè¿™å°±æ˜¯ä¸€ä¸ªåªè¯»æ•°æ®æºäº†ã€‚</td>
</tr>
<tr>
<td align="center">selectAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦è¿è¡Œæ‰§è¡ŒSELECTè¯­å¥</td>
</tr>
<tr>
<td align="center">selectAllColumnAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ SELECT * FROM T è¿™æ ·çš„è¯­å¥ã€‚å¦‚æœè®¾ç½®ä¸º falseï¼Œä¸å…è®¸æ‰§è¡Œ select * from tï¼Œä½† select * from (select id, name from t) aã€‚è¿™ä¸ªé€‰é¡¹æ˜¯é˜²å¾¡ç¨‹åºé€šè¿‡è°ƒç”¨ select *è·å¾—æ•°æ®è¡¨çš„ç»“æ„ä¿¡æ¯</td>
</tr>
<tr>
<td align="center">selectIntoAllow</td>
<td align="center">true</td>
<td align="center">SELECT æŸ¥è¯¢ä¸­æ˜¯å¦å…è®¸ INTO å­—å¥</td>
</tr>
<tr>
<td align="center">deleteAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ DELETE è¯­å¥</td>
</tr>
<tr>
<td align="center">updateAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ UPDATE è¯­å¥</td>
</tr>
<tr>
<td align="center">insertAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ INSERT è¯­å¥</td>
</tr>
<tr>
<td align="center">replaceAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ REPLACE è¯­å¥</td>
</tr>
<tr>
<td align="center">mergeAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ MERGE è¯­å¥ï¼Œè¿™ä¸ªåªåœ¨ Oracle ä¸­æœ‰ç”¨</td>
</tr>
<tr>
<td align="center">callAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸é€šè¿‡ jdbc çš„ call è¯­æ³•è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</td>
</tr>
<tr>
<td align="center">setAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸ä½¿ç”¨ SET è¯­æ³•</td>
</tr>
<tr>
<td align="center">truncateAllow</td>
<td align="center">true</td>
<td align="center">truncate è¯­å¥æ˜¯å±é™©ï¼Œç¼ºçœæ‰“å¼€ï¼Œè‹¥éœ€è¦è‡ªè¡Œå…³é—­</td>
</tr>
<tr>
<td align="center">createTableAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸åˆ›å»ºè¡¨</td>
</tr>
<tr>
<td align="center">alterTableAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ Alter Table è¯­å¥</td>
</tr>
<tr>
<td align="center">dropTableAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸ä¿®æ”¹è¡¨</td>
</tr>
<tr>
<td align="center">commentAllow</td>
<td align="center">false</td>
<td align="center">æ˜¯å¦å…è®¸è¯­å¥ä¸­å­˜åœ¨æ³¨é‡Šï¼ŒOracle çš„ç”¨æˆ·ä¸ç”¨æ‹…å¿ƒï¼ŒWall èƒ½å¤Ÿè¯†åˆ« hintså’Œæ³¨é‡Šçš„åŒºåˆ«</td>
</tr>
<tr>
<td align="center">noneBaseStatementAllow</td>
<td align="center">false</td>
<td align="center">æ˜¯å¦å…è®¸éä»¥ä¸ŠåŸºæœ¬è¯­å¥çš„å…¶ä»–è¯­å¥ï¼Œç¼ºçœå…³é—­ï¼Œé€šè¿‡è¿™ä¸ªé€‰é¡¹ å°±èƒ½å¤Ÿå±è”½ DDLã€‚</td>
</tr>
<tr>
<td align="center">multiStatementAllow</td>
<td align="center">false</td>
<td align="center">æ˜¯å¦å…è®¸ä¸€æ¬¡æ‰§è¡Œå¤šæ¡è¯­å¥ï¼Œç¼ºçœå…³é—­</td>
</tr>
<tr>
<td align="center">useAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ mysql çš„ use è¯­å¥ï¼Œç¼ºçœæ‰“å¼€</td>
</tr>
<tr>
<td align="center">describeAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ mysql çš„ describe è¯­å¥ï¼Œç¼ºçœæ‰“å¼€</td>
</tr>
<tr>
<td align="center">showAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ mysql çš„ show è¯­å¥ï¼Œç¼ºçœæ‰“å¼€</td>
</tr>
<tr>
<td align="center">commitAllow</td>
<td align="center">true</td>
<td align="center">æ˜¯å¦å…è®¸æ‰§è¡Œ commit æ“ä½œ</td>
</tr>
</tbody></table>
<p><strong>æ‹¦æˆªé…ç½®=-æ°¸çœŸæ¡ä»¶ï¼š</strong></p>
<table>
<thead>
<tr>
<th align="center">é…ç½®é¡¹</th>
<th align="center">ç¼ºçœå€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">selectWhereAlwayTrueCheck</td>
<td align="center">true</td>
<td align="center">æ£€æŸ¥ SELECT è¯­å¥çš„ WHERE å­å¥æ˜¯å¦æ˜¯ä¸€ä¸ªæ°¸çœŸæ¡ä»¶</td>
</tr>
<tr>
<td align="center">selectHavingAlwayTrueCheck</td>
<td align="center">true</td>
<td align="center">æ£€æŸ¥ SELECT è¯­å¥çš„ HAVING å­å¥æ˜¯å¦æ˜¯ä¸€ä¸ªæ°¸çœŸæ¡ä»¶</td>
</tr>
<tr>
<td align="center">deleteWhereAlwayTrueCheck</td>
<td align="center">true</td>
<td align="center">æ£€æŸ¥ DELETE è¯­å¥çš„ WHERE å­å¥æ˜¯å¦æ˜¯ä¸€ä¸ªæ°¸çœŸæ¡ä»¶</td>
</tr>
<tr>
<td align="center">deleteWhereNoneCheck</td>
<td align="center">false</td>
<td align="center">æ£€æŸ¥ DELETE è¯­å¥æ˜¯å¦æ—  where æ¡ä»¶ï¼Œè¿™æ˜¯æœ‰é£é™©çš„ï¼Œä½†ä¸æ˜¯ SQL æ³¨å…¥ç±»å‹çš„é£é™©</td>
</tr>
<tr>
<td align="center">updateWhereAlayTrueCheck</td>
<td align="center">true</td>
<td align="center">æ£€æŸ¥ UPDATE è¯­å¥çš„ WHERE å­å¥æ˜¯å¦æ˜¯ä¸€ä¸ªæ°¸çœŸæ¡ä»¶</td>
</tr>
<tr>
<td align="center">updateWhereNoneCheck</td>
<td align="center">false</td>
<td align="center">æ£€æŸ¥ UPDATE è¯­å¥æ˜¯å¦æ—  where æ¡ä»¶ï¼Œè¿™æ˜¯æœ‰é£é™©çš„ï¼Œä½†ä¸æ˜¯SQL æ³¨å…¥ç±»å‹çš„é£é™©</td>
</tr>
<tr>
<td align="center">conditionAndAlwayTrueAllow</td>
<td align="center">false</td>
<td align="center">æ£€æŸ¥æŸ¥è¯¢æ¡ä»¶(WHERE/HAVING å­å¥)ä¸­æ˜¯å¦åŒ…å« AND æ°¸çœŸæ¡ä»¶</td>
</tr>
<tr>
<td align="center">conditionAndAlwayFalseAllow</td>
<td align="center">false</td>
<td align="center">æ£€æŸ¥æŸ¥è¯¢æ¡ä»¶(WHERE/HAVING å­å¥)ä¸­æ˜¯å¦åŒ…å« AND æ°¸å‡æ¡ä»¶</td>
</tr>
<tr>
<td align="center">conditionLikeTrueAllow</td>
<td align="center">true</td>
<td align="center">æ£€æŸ¥æŸ¥è¯¢æ¡ä»¶(WHERE/HAVING å­å¥)ä¸­æ˜¯å¦åŒ…å« LIKE æ°¸çœŸæ¡ä»¶</td>
</tr>
</tbody></table>
<p><strong>å…¶ä»–æ‹¦æˆªé…ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th align="center">é…ç½®é¡¹</th>
<th align="left">ç¼ºçœå€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">selectIntoOutfileAllow</td>
<td align="left">false</td>
<td align="center">SELECT â€¦ INTO OUTFILE æ˜¯å¦å…è®¸ï¼Œè¿™ä¸ªæ˜¯ mysql æ³¨å…¥æ”»å‡»çš„å¸¸è§æ‰‹æ®µï¼Œç¼ºçœæ˜¯ç¦æ­¢çš„</td>
</tr>
<tr>
<td align="center">selectUnionCheck</td>
<td align="left">true</td>
<td align="center">æ£€æµ‹ SELECT UNION</td>
</tr>
<tr>
<td align="center">selectMinusCheck</td>
<td align="left">true</td>
<td align="center">æ£€æµ‹ SELECT MINUS</td>
</tr>
<tr>
<td align="center">selectExceptCheck</td>
<td align="left">true</td>
<td align="center">æ£€æµ‹ SELECT EXCEPT</td>
</tr>
<tr>
<td align="center">selectIntersectCheck</td>
<td align="left">true</td>
<td align="center">æ£€æµ‹ SELECT INTERSECT</td>
</tr>
<tr>
<td align="center">mustParameterized</td>
<td align="left">false</td>
<td align="center">æ˜¯å¦å¿…é¡»å‚æ•°åŒ–ï¼Œå¦‚æœä¸º Trueï¼Œåˆ™ä¸å…è®¸ç±»ä¼¼ WHERE ID = 1 è¿™ç§ä¸å‚æ•°åŒ–çš„ SQL</td>
</tr>
<tr>
<td align="center">strictSyntaxCheck</td>
<td align="left">true</td>
<td align="center">æ˜¯å¦è¿›è¡Œä¸¥æ ¼çš„è¯­æ³•æ£€æµ‹ï¼ŒDruid SQL Parser åœ¨æŸäº›åœºæ™¯ä¸èƒ½è¦†ç›–æ‰€æœ‰çš„ï¼ŒSQL è¯­æ³•ï¼Œå‡ºç°è§£æ SQL å‡ºé”™ï¼Œå¯ä»¥ä¸´æ—¶æŠŠè¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸º falseï¼ŒåŒæ—¶æŠŠ SQL åé¦ˆç»™ Druid çš„å¼€å‘è€…</td>
</tr>
<tr>
<td align="center">conditionOpXorAllow</td>
<td align="left">false</td>
<td align="center">æŸ¥è¯¢æ¡ä»¶ä¸­æ˜¯å¦å…è®¸æœ‰ XOR æ¡ä»¶ã€‚XOR ä¸å¸¸ç”¨ï¼Œå¾ˆéš¾åˆ¤æ–­æ°¸çœŸæˆ–è€…æ°¸å‡ï¼Œç¼ºçœä¸å…è®¸ã€‚</td>
</tr>
<tr>
<td align="center">conditionOpBitwseAllow</td>
<td align="left">true</td>
<td align="center">æŸ¥è¯¢æ¡ä»¶ä¸­æ˜¯å¦å…è®¸æœ‰â€&amp;â€ã€â€~â€ã€â€</td>
</tr>
<tr>
<td align="center">conditionDoubleConstAllow</td>
<td align="left">false</td>
<td align="center">æŸ¥è¯¢æ¡ä»¶ä¸­æ˜¯å¦å…è®¸è¿ç»­ä¸¤ä¸ªå¸¸é‡è¿ç®—è¡¨è¾¾å¼</td>
</tr>
<tr>
<td align="center">minusAllow</td>
<td align="left">true</td>
<td align="center">æ˜¯å¦å…è®¸ SELECT * FROM A MINUS SELECT * FROM B è¿™æ ·çš„è¯­å¥</td>
</tr>
<tr>
<td align="center">intersectAllow</td>
<td align="left">true</td>
<td align="center">æ˜¯å¦å…è®¸ SELECT * FROM A INTERSECT SELECT * FROM B è¿™æ ·çš„è¯­å¥</td>
</tr>
<tr>
<td align="center">constArithmeticAllow</td>
<td align="left">true</td>
<td align="center">æ‹¦æˆªå¸¸é‡è¿ç®—çš„æ¡ä»¶ï¼Œæ¯”å¦‚è¯´ WHERE FID = 3 - 1ï¼Œå…¶ä¸­â€3 - 1â€æ˜¯å¸¸é‡è¿ç®—è¡¨è¾¾å¼ã€‚</td>
</tr>
<tr>
<td align="center">limitZeroAllow</td>
<td align="left">false</td>
<td align="center">æ˜¯å¦å…è®¸ limit 0 è¿™æ ·çš„è¯­å¥</td>
</tr>
</tbody></table>
<p><strong>ç¦ç”¨å¯¹è±¡æ£€æµ‹é…ç½®ï¼š</strong></p>
<table>
<thead>
<tr>
<th align="center">é…ç½®é¡¹</th>
<th align="center">ç¼ºçœå€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">tableCheck</td>
<td align="center">true</td>
<td align="center">æ£€æµ‹æ˜¯å¦ä½¿ç”¨äº†ç¦ç”¨çš„è¡¨</td>
</tr>
<tr>
<td align="center">schemaCheck</td>
<td align="center">true</td>
<td align="center">æ£€æµ‹æ˜¯å¦ä½¿ç”¨äº†ç¦ç”¨çš„ Schema</td>
</tr>
<tr>
<td align="center">functionCheck</td>
<td align="center">true</td>
<td align="center">æ£€æµ‹æ˜¯å¦ä½¿ç”¨äº†ç¦ç”¨çš„å‡½æ•°</td>
</tr>
<tr>
<td align="center">objectCheck</td>
<td align="center">true</td>
<td align="center">æ£€æµ‹æ˜¯å¦ä½¿ç”¨äº†â€œç¦ç”¨å¯¹å¯¹è±¡â€</td>
</tr>
<tr>
<td align="center">variantCheck</td>
<td align="center">true</td>
<td align="center">æ£€æµ‹æ˜¯å¦ä½¿ç”¨äº†â€œç¦ç”¨çš„å˜é‡â€</td>
</tr>
<tr>
<td align="center">readOnlyTables</td>
<td align="center">ç©º</td>
<td align="center">æŒ‡å®šçš„è¡¨åªè¯»ï¼Œä¸èƒ½å¤Ÿåœ¨ SELECT INTOã€DELETEã€UPDATEã€INSERTã€MERGE ä¸­ä½œä¸ºâ€è¢«ä¿®æ”¹è¡¨â€å‡ºç°</td>
</tr>
</tbody></table>
<h4 id="5-2-5-mycaté…ç½®æ–‡ä»¶"><a href="#5-2-5-mycaté…ç½®æ–‡ä»¶" class="headerlink" title="5.2.5 mycaté…ç½®æ–‡ä»¶"></a>5.2.5 mycaté…ç½®æ–‡ä»¶</h4><h5 id="5-2-5-1-schema-xmlé…ç½®"><a href="#5-2-5-1-schema-xmlé…ç½®" class="headerlink" title="5.2.5.1 schema.xmlé…ç½®"></a>5.2.5.1 schema.xmlé…ç½®</h5><p>schema.xmlä½œä¸ºmycatä¸­é‡è¦çš„é…ç½®æ–‡ä»¶ä¹‹ä¸€ï¼Œç®¡ç†è€…mycatçš„é€»è¾‘åº“ã€è¡¨ã€åˆ†ç‰‡è§„åˆ™ã€DataNodeä»¥åŠDataSourceã€‚</p>
<h5 id="5-2-5-2-schemeæ ‡ç­¾"><a href="#5-2-5-2-schemeæ ‡ç­¾" class="headerlink" title="5.2.5.2 schemeæ ‡ç­¾"></a>5.2.5.2 schemeæ ‡ç­¾</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">&quot;TESTDB&quot;</span> <span class="attr">checkSQLschema</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sqlMaxLimit</span>=<span class="string">&quot;100&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">schema</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>schemaæ ‡ç­¾ç”¨äºå®šä¹‰mycatå®ä¾‹ä¸­çš„é€»è¾‘åº“ï¼Œmycatå¯ä»¥ç”±å¤šä¸ªé€»è¾‘åº“ï¼Œæ¯ä¸ªé€»è¾‘åº“éƒ½æœ‰è‡ªå·±çš„ç›¸å…³é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨schemaæ ‡ç­¾æ¥åˆ’åˆ†è¿™äº›ä¸åŒçš„é€»è¾‘åº“ã€‚å¦‚æœä¸é…ç½®schemaæ ‡ç­¾ï¼Œæ‰€æœ‰çš„è¡¨é…ç½®ï¼Œä¼šå±äºåŒä¸€ä¸ªé»˜è®¤çš„é€»è¾‘åº“ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é€»è¾‘åº“TESTDB--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">&quot;TESTDB&quot;</span> <span class="attr">checkSQLschema</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sqlMaxLimit</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">table</span> <span class="attr">name</span>=<span class="string">&quot;travelrecord&quot;</span> <span class="attr">dataNode</span>=<span class="string">&quot;dn1,dn2,dn3&quot;</span> <span class="attr">rule</span>=<span class="string">&quot;auto-sharding-long&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">schema</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--USERDB--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">&quot;USERDB&quot;</span> <span class="attr">checkSQLschema</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sqlMaxLimit</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">true<span class="tag">&lt;<span class="name">table</span> <span class="attr">name</span>=<span class="string">&quot;company&quot;</span> <span class="attr">dataNode</span>=<span class="string">&quot;dn10,dn11,dn12&quot;</span> <span class="attr">rule</span>=<span class="string">&quot;auto-sharding-long&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">schema</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	é€»è¾‘åº“çš„æ¦‚å¿µå’ŒMySQLæ•°æ®åº“ä¸­çš„databaseæ¦‚å¿µç›¸åŒï¼Œæˆ‘ä»¬åœ¨æŸ¥è¯¢è¿™ä¸¤ä¸ªä¸åŒçš„é€»è¾‘åº“ä¸­è¡¨çš„æ—¶å€™éœ€è¦åˆ‡æ¢åˆ°è¯¥é€»è¾‘åº“ä¸‹æ‰å¯ä»¥æŸ¥è¯¢åˆ°æ‰€éœ€è¦çš„è¡¨</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨server.xmlä¸­å¯ä»¥é…ç½®ä¸åŒçš„ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨çš„schema</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">name</span>=<span class="string">&quot;root&quot;</span> <span class="attr">defaultAccount</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;schemas&quot;</span>&gt;</span>TESTDB<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultSchema&quot;</span>&gt;</span>TESTDB<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--No MyCAT Database selected é”™è¯¯å‰ä¼šå°è¯•ä½¿ç”¨è¯¥schemaä½œä¸ºschemaï¼Œä¸è®¾ç½®åˆ™ä¸ºnull,æŠ¥é”™ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨çº§ DML æƒé™è®¾ç½® --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        &lt;privileges check=&quot;false&quot;&gt;</span></span><br><span class="line"><span class="comment">                &lt;schema name=&quot;TESTDB&quot; dml=&quot;0110&quot; &gt;</span></span><br><span class="line"><span class="comment">                        &lt;table name=&quot;tb01&quot; dml=&quot;0000&quot;&gt;&lt;/table&gt;</span></span><br><span class="line"><span class="comment">                        &lt;table name=&quot;tb02&quot; dml=&quot;1111&quot;&gt;&lt;/table&gt;</span></span><br><span class="line"><span class="comment">                &lt;/schema&gt;</span></span><br><span class="line"><span class="comment">        &lt;/privileges&gt;</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">user</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>user<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;schemas&quot;</span>&gt;</span>TESTDB<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;readOnly&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultSchema&quot;</span>&gt;</span>TESTDB<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/mycat/image-20201129110838590.png"></p>
<p>schemaæ ‡ç­¾çš„ç›¸å…³å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å±æ€§å</th>
<th align="center">å€¼</th>
<th align="center">æ•°é‡é™åˆ¶</th>
</tr>
</thead>
<tbody><tr>
<td align="center">dataNode</td>
<td align="center">ä»»æ„string</td>
<td align="center">ï¼ˆ0..1ï¼‰</td>
</tr>
<tr>
<td align="center">checkSQLschema</td>
<td align="center">Boolean</td>
<td align="center">ï¼ˆ1ï¼‰</td>
</tr>
<tr>
<td align="center">sqlMaxLimit</td>
<td align="center">Integer</td>
<td align="center">ï¼ˆ1ï¼‰</td>
</tr>
</tbody></table>
<h6 id="5-2-5-2-1-dataNode"><a href="#5-2-5-2-1-dataNode" class="headerlink" title="5.2.5.2.1  dataNode"></a>5.2.5.2.1  dataNode</h6><p>è¯¥å±æ€§ç”¨äºç»‘å®šé€»è¾‘åº“åˆ°æŸä¸ªå…·ä½“çš„databaseä¸Šï¼Œ1.3ç‰ˆæœ¬å¦‚æœé…ç½®äº†dataNode,åˆ™ä¸å¯ä»¥é…ç½®åˆ†ç‰‡è¡¨ï¼Œ1.4å¯ä»¥é…ç½®é»˜è®¤åˆ†ç‰‡ï¼Œåªéœ€è¦é…ç½®éœ€è¦åˆ†ç‰‡çš„è¡¨å³å¯ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.3ç‰ˆæœ¬é…ç½®--&gt;</span><span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">&quot;USERDB&quot;</span> <span class="attr">checkSQLschema</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sqlMaxLimit</span>=<span class="string">&quot;100&quot;</span> <span class="attr">dataNode</span>=<span class="string">&quot;dn1&quot;</span>&gt;</span>&lt;!â€”é‡Œé¢ä¸èƒ½é…ç½®ä»»ä½•è¡¨--&gt;<span class="tag">&lt;/<span class="name">schema</span>&gt;</span><span class="comment">&lt;!--1.4ç‰ˆæœ¬é…ç½®--&gt;</span><span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">&quot;USERDB&quot;</span> <span class="attr">checkSQLschema</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sqlMaxLimit</span>=<span class="string">&quot;100&quot;</span> <span class="attr">dataNode</span>=<span class="string">&quot;dn2&quot;</span>&gt;</span>&lt;!â€”é…ç½®éœ€è¦åˆ†ç‰‡çš„è¡¨--&gt;	<span class="tag">&lt;<span class="name">table</span> <span class="attr">name</span>=<span class="string">â€œtuserâ€</span> <span class="attr">dataNode</span>=<span class="string">â€dn1â€/</span>&gt;</span><span class="tag">&lt;/<span class="name">schema</span>&gt;</span><span class="comment">&lt;!-- 	é‚£ä¹ˆç°åœ¨tuserå°±ç»‘å®šåˆ°dn1æ‰€é…ç½®çš„å…·ä½“databaseä¸Šï¼Œå¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªdatabaseï¼Œæ²¡æœ‰é…ç½®çš„è¡¨åˆ™ä¼šèµ°é»˜è®¤çš„èŠ‚ç‚¹dn2ï¼Œè¿™é‡Œæ³¨æ„æ²¡æœ‰é…ç½®åœ¨åˆ†ç‰‡é‡Œé¢çš„è¡¨å·¥å…·æŸ¥çœ‹æ— æ³•æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚--&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="5-2-5-2-2-checkSQLschema"><a href="#5-2-5-2-2-checkSQLschema" class="headerlink" title="5.2.5.2.2 checkSQLschema"></a>5.2.5.2.2 checkSQLschema</h6><p>å½“æ”¹åˆ¶è®¾ç½®ä¸ºtrueæ—¶ï¼Œæˆ‘ä»¬æ‰§è¡Œâ€œSELECT * FROM TESTDB.travelrecordï¼›â€åˆ™mycatä¼šæŠŠè¯­å¥ä¿®æ”¹ä¸ºâ€œSELECT * FROM travelrecord;â€å³æŠŠè¡¨ç¤ºschemaçš„å­—ç¬¦å»æ‰ï¼Œé¿å…å‘é€åˆ°åç«¯æ•°æ®åº“æ‰§è¡ŒæŠ¥ERROR 1146ï¼šTable â€˜testdb.travelrecordâ€™ doestâ€™t exist.ä¸è¿‡ï¼Œå³ä½¿è®¾ç½®è¯¥å€¼ä¸º true ï¼Œå¦‚æœè¯­å¥æ‰€å¸¦çš„æ˜¯å¹¶éæ˜¯ schema æŒ‡å®šçš„åå­—ï¼Œä¾‹å¦‚ï¼š<strong>select * from db1.travelrecord;</strong> é‚£ä¹ˆ MyCat å¹¶ä¸ä¼šåˆ é™¤ db1 è¿™ä¸ªå­—æ®µï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰è¯¥åº“çš„è¯åˆ™ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åœ¨æä¾› SQLè¯­å¥çš„æœ€å¥½æ˜¯ä¸å¸¦è¿™ä¸ªå­—æ®µã€‚</p>
<h6 id="5-2-5-2-3-sqlMaxLimit"><a href="#5-2-5-2-3-sqlMaxLimit" class="headerlink" title="5.2.5.2.3 sqlMaxLimit"></a>5.2.5.2.3 sqlMaxLimit</h6><p>å½“è¯¥å€¼è®¾ç½®ä¸ºæŸä¸ªæ•°å€¼æ—¶ã€‚æ¯æ¡æ‰§è¡Œçš„ SQL è¯­å¥ï¼Œå¦‚æœæ²¡æœ‰åŠ ä¸Š limit è¯­å¥ï¼ŒMyCat ä¹Ÿä¼šè‡ªåŠ¨çš„åŠ ä¸Šæ‰€å¯¹åº”çš„å€¼ã€‚ä¾‹å¦‚è®¾ç½®å€¼ä¸º 100ï¼Œæ‰§è¡Œ**select * from TESTDB.travelrecord;<strong>çš„æ•ˆæœä¸ºå’Œæ‰§è¡Œ</strong>select * from TESTDB.travelrecord limit 100;**ç›¸åŒã€‚</p>
<p>è®¾ç½®è¯¥å€¼çš„è¯ï¼ŒMyCat é»˜è®¤ä¼šæŠŠæŸ¥è¯¢åˆ°çš„ä¿¡æ¯å…¨éƒ¨éƒ½å±•ç¤ºå‡ºæ¥ï¼Œé€ æˆè¿‡å¤šçš„è¾“å‡ºã€‚æ‰€ä»¥ï¼Œåœ¨æ­£å¸¸ä½¿ç”¨ä¸­ï¼Œè¿˜æ˜¯å»ºè®®åŠ ä¸Šä¸€ä¸ªå€¼ï¼Œç”¨äºå‡å°‘è¿‡å¤šçš„æ•°æ®è¿”å›ã€‚</p>
<p>å½“ç„¶ SQL è¯­å¥ä¸­ä¹Ÿæ˜¾å¼çš„æŒ‡å®š limit çš„å¤§å°ï¼Œä¸å—è¯¥å±æ€§çš„çº¦æŸã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¿è¡Œçš„ schema ä¸ºéæ‹†åˆ†åº“çš„ï¼Œé‚£ä¹ˆè¯¥å±æ€§ä¸ä¼šç”Ÿæ•ˆã€‚éœ€è¦æ‰‹åŠ¨æ·»åŠ  limit è¯­å¥ã€‚</p>
<h3 id="5-2-åˆ†é…è§„åˆ™"><a href="#5-2-åˆ†é…è§„åˆ™" class="headerlink" title="5.2 åˆ†é…è§„åˆ™"></a>5.2 åˆ†é…è§„åˆ™</h3><p><img src="/mycat/image-20201104222632963.png" alt="image-20201104222632963"><br><img src="/mycat/image-20201104221336437.png" alt="image-20201104221336437"></p>
<ul>
<li><p>  èŒƒå›´åˆ†ç‰‡ï¼šæ ¹æ®æŸä¸ªå­—è®¾ç½®auto-sharding-longï¼Œå¦‚æœè¿™ä¸ªprimaryKeyè¶…å‡ºäº†èŒƒå›´ä¼šæŠ¥é”™</p>
</li>
<li><p>  å–æ¨¡åˆ†ç‰‡ï¼š</p>
</li>
<li><p>ERåˆ†ç‰‡ï¼ˆå°†çˆ¶å­è¡¨æœ‰å…³è”çš„æ•°æ®æ”¾åœ¨ä¸€ä¸ªdata-nodeé‡Œé¢ï¼‰</p>
<p>  <img src="/mycat/image-20201104221659540.png" alt="image-20201104221659540"></p>
</li>
<li><p>  å…¨å±€è¡¨ï¼šæ‰€æœ‰dataNodeå­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼ŒæŸ¥è¯¢çš„æ—¶å€™æ˜¯éšæœºæŸ¥è¯¢æŸä¸ªè¡¨ type=globalï¼ŒæŸ¥è¯¢çš„æ—¶å€™éšæœºä»æŸä¸ªdatanodeè·å–</p>
</li>
<li><p>  éåˆ†ç‰‡è¡¨ï¼šåªåœ¨æŸä¸ªdataNodeä¸Šå­˜å‚¨,æŒ‡å®šä¸€ä¸ªdataNodeå¹¶ä¸”ä¸å†™åˆ†ç‰‡è§„åˆ™</p>
</li>
<li><p>  å•åº“åˆ†è¡¨ï¼šæœ‰ä¸ªbugåœ¨å®é™…æ•°æ®åº“ä¸­å¿…é¡»è¦åˆ›å»ºmycatä¸­ä¸€æ‘¸ä¸€æ ·çš„æ•°æ®è¡¨ï¼Œè€Œä¸”truncatçš„æ—¶å€™è¦ç°åœ¨dataNodeå…ˆåˆ é™¤ï¼Œæ‰èƒ½åˆ é™¤çš„æ‰mycatçš„æ•°æ®</p>
</li>
</ul>
<h3 id="5-3-å…¨å±€ID"><a href="#5-3-å…¨å±€ID" class="headerlink" title="5.3 å…¨å±€ID"></a>5.3 å…¨å±€ID</h3><p><img src="/mycat/image-20201104223246735.png" alt="image-20201104223246735"></p>
<ul>
<li>  æ–‡ä»¶æ–¹å¼â€”0</li>
<li>  æ•°æ®åº“æ–¹å¼â€”1</li>
<li>  æœ¬åœ°æ—¶é—´æˆ³â€”-2</li>
<li>  ZKæ–¹å¼â€”-3</li>
</ul>
<h2 id="6-Mycatåˆ†ç‰‡ç­–ç•¥è¯¦è§£"><a href="#6-Mycatåˆ†ç‰‡ç­–ç•¥è¯¦è§£" class="headerlink" title="6. Mycatåˆ†ç‰‡ç­–ç•¥è¯¦è§£"></a>6. Mycatåˆ†ç‰‡ç­–ç•¥è¯¦è§£</h2><p>è¿ç»­åˆ†ç‰‡ä¸ç¦»æ•£åˆ†ç‰‡</p>
<p><img src="/mycat/image-20201107201442912.png" alt="image-20201107201442912"></p>
<p><strong>è¿ç»­åˆ†ç‰‡</strong>ï¼š</p>
<ul>
<li>  èŒƒå›´åˆ†ç‰‡</li>
<li>  æ—¥æœŸ/äº‹ä»¶</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>  å­˜åœ¨æ•°æ®çƒ­ç‚¹çš„å¯èƒ½æ€§</li>
<li>  å¹¶å‘è®¿é—®èƒ½åŠ›å—é™äºå•ä¸€æˆ–å°‘é‡DataNodeï¼ˆè®¿é—®é›†ä¸­ï¼‰ï¼Œå¹¶ä¸èƒ½åˆ†æ‘Šæ•°æ®åº“è®¿é—®çš„å‹åŠ›</li>
</ul>
<p><strong>ç¦»æ•£</strong>ï¼š</p>
<ul>
<li><p>  å–æ¨¡ï¼ˆpartioncount çš„æ€»æ•°å¿…é¡»å’Œåˆ†ç‰‡æ€»æ•°ç›¸åŒï¼‰</p>
</li>
<li><p>  æšä¸¾</p>
</li>
<li><p>  ä¸€è‡´æ€§å“ˆå¸Œ(qs-murmur)</p>
</li>
<li><p>å›ºå®šåˆ†ç‰‡å“ˆå¸Œ</p>
<ul>
<li><p>  partitionCount: 2, 1è¡¨ç¤ºæœ‰ä¸‰ä¸ªåˆ†ç‰‡å¿…é¡»å’ŒèŠ‚ç‚¹æ•°é‡ä¸€è‡´ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå‰é¢ä¸¤ä¸ªä¸€æ ·é•¿</p>
</li>
<li><p>  partitionLength: 256, 512è¡¨ç¤ºé•¿åº¦ä¸º256å’Œ512</p>
</li>
<li><p>  ç»¼åˆåœ¨ä¸€èµ·å°±æ˜¯å‰é¢2ä¸ªåˆ†ç‰‡é•¿åº¦ä¸º256ï¼Œ æœ€åä¸€ä¸ªä¸º512ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ³¨æ„partitionCountå’ŒpartitionLengthçš„æ•°é‡ä¸€å®šè¦ä¸€è‡´ï¼‰</p>
</li>
<li><p><img src="/mycat/image-20201219103201836.png" alt="image-20201219103201836"></p>
<p>  <img src="/mycat/image-20201219102742172.png" alt="image-20201219102742172"></p>
</li>
</ul>
</li>
<li><p>  å–æ¨¡èŒƒå›´(sharting-by-pattern)ï¼šå…ˆå–æ¨¡PartitionByPatternååˆ†ç‰‡</p>
</li>
<li><p>èŒƒå›´å–æ¨¡: PartitionByRangeMod(partition-rane-mod.txt)</p>
<ul>
<li>```txt<br>  0-2000=1        #èŒƒå›´åœ¨2000ä»¥å†…çš„åœ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå–æ¨¡çš„ç»“æœè¿˜æ˜¯æœ¬èº«ï¼‰<br>  2001-4000=2        #èŒƒå›´åœ¨2001åˆ°4000ä»¥å†…çš„å†æ¨¡2ï¼Œç»“æœä¸º0åœ¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»“æœä¸º1åœ¨ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹  <figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">-   å…¶ä»–</span><br><span class="line"></span><br><span class="line">ä¼˜ç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">-   å¹¶å‘è®¿é—®èƒ½åŠ›å¢å¼ºï¼ˆè´Ÿè½½åˆ°ä¸åŒçš„èŠ‚ç‚¹ï¼‰</span><br><span class="line">-   èŒƒå›´æ¡ä»¶æŸ¥è¯¢æ€§èƒ½æå‡ï¼ˆå¹¶è¡Œè®¡ç®—ï¼‰</span><br><span class="line"></span><br><span class="line">ç¼ºç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">-   æ•°æ®æ‰©å®¹æ¯”è¾ƒå›°éš¾ï¼Œè®¾è®¡åˆ°æ•°æ®è¿ç§»é—®é¢˜</span><br><span class="line">-   æ•°æ®åº“è¿æ¥æ¶ˆè€—æ¯”è¾ƒå¤š</span><br><span class="line"></span><br><span class="line">åˆ†ç‰‡ç­–ç•¥çš„é€‰æ‹©ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>ï¼‰ ç¡®å®šåˆ†ç‰‡è¡¨</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ï¼‰ æ‰¾å‡ºåˆ†ç‰‡é”®</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ï¼‰ è€ƒè™‘å®¹é‡ã€å¢é€Ÿã€ä¸šåŠ¡ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">å¦‚æœåœ¨æŸ¥è¯¢è¯­å¥ä¸­æ²¡æœ‰æºå¸¦åˆ†ç‰‡å»ºï¼Œé‚£ä¹ˆmycatä¼šå°†sqlå‘å¸ƒåˆ°æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Š</span><br><span class="line"></span><br><span class="line">## <span class="number">7.</span> Mycatæ‰©ç¼©å®¹</span><br><span class="line"></span><br><span class="line">### <span class="number">7.1</span> åœ¨çº¿ä¸åœæœºæ‰©ç¼©å®¹ï¼ˆåŒå†™ï¼‰</span><br><span class="line"></span><br><span class="line">![image<span class="number">-20201107205855474</span>](./mycat/image<span class="number">-20201107205855474.</span>png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### <span class="number">7.2</span> ç¦»çº¿æ‰©ç¼©å®¹</span><br><span class="line"></span><br><span class="line">#### <span class="number">7.2</span><span class="number">.1</span>Mysql Dump</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">mysqldump -uroot -p123456 -h127<span class="number">.0</span><span class="number">.0</span><span class="number">.1</span> -p3306 -c -t --skip-extended-insert æ•°æ®åº“åç§° &gt; mysql<span class="number">.11</span><span class="number">.11</span>.sql</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="7-2-2-Mycatè‡ªå¸¦å·¥å…·"><a href="#7-2-2-Mycatè‡ªå¸¦å·¥å…·" class="headerlink" title="7.2.2 Mycatè‡ªå¸¦å·¥å…·"></a>7.2.2 Mycatè‡ªå¸¦å·¥å…·</h4><ol>
<li> mycatæ‰€åœ¨ç¯å¢ƒå®‰è£…mysqlå®¢æˆ·ç«¯ç¨‹åº</li>
<li> mycatçš„libç›®å½•ä¸‹æ·»åŠ mysqlçš„jdbcé©±åŠ¨åŒ…ï¼ˆmysql-connector-java-5.7.1.jarï¼‰</li>
<li> å¯¹æ‰©å®¹ç¼©å®¹çš„è¡¨æ‰€æœ‰èŠ‚ç‚¹æ•°æ®è¿›è¡Œå¤‡ä»½</li>
<li> å¤åˆ¶schema.xmlã€rule.xmlå¹¶é‡å‘½åä¸ºnewSchema.xmlã€newRule.xml</li>
<li> ä¿®æ”¹newSchema.xmlå’ŒnewRule.xmlé…ç½®æ–‡ä»¶ä¸ºæ‰©å®¹ç¼©å®¹åçš„å‚æ•°</li>
<li> åœ¨conf/migrateTable.propertiesé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ†ç‰‡åº“å’Œåˆ†ç‰‡è¡¨å¦‚ï¼šimall=table_test1</li>
<li> dataMigrate.shé…ç½®mysqldumpè·¯å¾„</li>
<li> åœæ­¢mycatæœåŠ¡</li>
<li> æ‰§è¡Œbin/dataMigrate.shè„šæœ¬ï¼ˆä¸èƒ½ç”¨openjdkï¼‰</li>
<li> æ›¿æ¢schema.xmlã€rule.xml</li>
</ol>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>  ä¿è¯åˆ†ç‰‡è¡¨è¿ç§»æ•°æ®å‰åè·¯ç”±è§„åˆ™ä¸€è‡´ï¼ˆå–æ¨¡â€“&gt;å–æ¨¡ï¼‰</li>
<li>  ä¿è¯åˆ†ç‰‡è¡¨æ­‰æ„æ•°æ®å‰ååˆ†ç‰‡å­—æ®µä¸€è‡´</li>
<li>  å…¨å±€è¡¨å°†è¢«å¿½ç•¥</li>
<li>  ä¸è¦å°†éåˆ†ç‰‡è¡¨é…ç½®åˆ°migrateTables.propertiesæ–‡ä»¶ä¸­</li>
<li>  æš‚æ—¶åªæ”¯æŒåˆ†ç‰‡è¡¨ä½¿ç”¨Mysqlä½œä¸ºæ•°æ®æºçš„æ‰©å®¹ç¼©å®¹</li>
</ul>
<h2 id="8-Mycatè¯»å†™åˆ†ç¦»"><a href="#8-Mycatè¯»å†™åˆ†ç¦»" class="headerlink" title="8. Mycatè¯»å†™åˆ†ç¦»"></a>8. Mycatè¯»å†™åˆ†ç¦»</h2><h3 id="8-1-ä¸»ä»å¤åˆ¶"><a href="#8-1-ä¸»ä»å¤åˆ¶" class="headerlink" title="8.1 ä¸»ä»å¤åˆ¶"></a>8.1 ä¸»ä»å¤åˆ¶</h3><ol>
<li> æ•°æ®å¤‡ä»½å›å¤</li>
<li> è´Ÿè½½å‡è¡¡ï¼ˆè¯»å†™åˆ†ç¦»ï¼‰</li>
<li> é«˜å¯ç”¨HA</li>
</ol>
<h3 id="8-2-ä¸»ä»å¤åˆ¶å½¢å¼"><a href="#8-2-ä¸»ä»å¤åˆ¶å½¢å¼" class="headerlink" title="8.2 ä¸»ä»å¤åˆ¶å½¢å¼;"></a>8.2 ä¸»ä»å¤åˆ¶å½¢å¼;</h3><p><img src="/mycat/image-20201107212552852.png" alt="image-20201107212552852"></p>
<h4 id="binlog-Binary-log-äºŒè¿›åˆ¶æ—¥å¿—"><a href="#binlog-Binary-log-äºŒè¿›åˆ¶æ—¥å¿—" class="headerlink" title="binlog(Binary log äºŒè¿›åˆ¶æ—¥å¿—)"></a>binlog(Binary log äºŒè¿›åˆ¶æ—¥å¿—)</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--æŸ¥çœ‹binglog: SHOW binlog events in &#x27;mysql-bin.000001&#x27;</span></span><br><span class="line"><span class="comment">--show variables like &#x27;max_blog_max&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="binlogé…ç½®"><a href="#binlogé…ç½®" class="headerlink" title="binlogé…ç½®"></a>binlogé…ç½®</h4><ul>
<li>  STATEMENT: è®°å½•æ¯ä¸€å¤©ä¿®æ”¹æ•°æ®çš„sqlè¯­å¥ï¼ˆå‡å°‘æ—¥å¿—é‡ï¼ŒèŠ‚çº¦IOï¼‰</li>
<li>  ROW: è®°å½•å“ªæ¡æ•°æ®è¢«ä¿®æ”¹äº†ï¼Œä¿®æ”¹æˆä»€ä¹ˆæ ·å­äº†ï¼ˆ5.7ä»¥åé»˜è®¤ï¼‰</li>
<li>  MIXED: ç»“åˆä¸¤ç§æ–¹å¼ï¼Œä¸€èˆ¬è¯­å¥ç”¨STATEMENT,å‡½æ•°ä¹‹ç±»çš„ä½¿ç”¨ROW</li>
</ul>
<p><strong>binlog</strong>æ ¼å¼ï¼ˆmysql-bin.00001ç­‰ï¼‰</p>
<p><strong>æŸ¥çœ‹binlog</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> binlog events <span class="keyword">in</span> <span class="string">&#x27;mysql-bin.00001&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸»ä»å¤åˆ¶åŸç†"><a href="#ä¸»ä»å¤åˆ¶åŸç†" class="headerlink" title="ä¸»ä»å¤åˆ¶åŸç†"></a>ä¸»ä»å¤åˆ¶åŸç†</h3><p>SQL Threadæ˜¯å•çº¿ç¨‹çš„ï¼Œ è¿™ä¹Ÿæ˜¯æ‰€æœ‰çš„ä¸»ä»å¤åˆ¶å»¶è¿Ÿçš„åŸå› ï¼Œé‚£ä¹ˆrelay logæ¥å—masterèŠ‚ç‚¹çš„sqlè¯­å¥ä¸»è¦æ˜¯ç”¨äºç¼“å†²</p>
<p><img src="/mycat/image-20201107213638624.png" alt="image-20201107213638624"></p>
<h3 id="mycatè¯»å†™åˆ†ç¦»é…ç½®"><a href="#mycatè¯»å†™åˆ†ç¦»é…ç½®" class="headerlink" title="mycatè¯»å†™åˆ†ç¦»é…ç½®"></a>mycatè¯»å†™åˆ†ç¦»é…ç½®</h3><p><img src="/mycat/image-20201107213859155.png" alt="image-20201107213859155"></p>
<h3 id="8-5-Mycatæ³¨è§£ï¼ˆhintï¼‰"><a href="#8-5-Mycatæ³¨è§£ï¼ˆhintï¼‰" class="headerlink" title="8.5 Mycatæ³¨è§£ï¼ˆhintï¼‰"></a>8.5 Mycatæ³¨è§£ï¼ˆhintï¼‰</h3><p>æ³¨è§£ç”¨æ³•ï¼š</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">/*!mycat:sql=æ³¨è§£sqlè¯­å¥*/çœŸæ­£æ‰§è¡Œçš„SQL</span><br><span class="line"></span><br><span class="line">æ¯”å¦‚è¯´åœ¨mycatä¸Šåˆ›å»ºè¡¨æ— æ³•åˆ›å»ºæˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨æ³¨è§£</span><br><span class="line">/*!mycat:sql=select * from table<span class="built_in">_</span>1 where id = 1*/create table test2(id int);</span><br><span class="line">ä¸»è¦æ³¨è§£sqlå¯ä»¥ç¡®è®¤mycatå¯ä»¥è·¯ç”±åˆ°å­ç»“ç‚¹ä¸Šï¼Œå°±å¯ä»¥æ‰§è¡Œåé¢çš„çœŸæ­£æ‰§è¡Œçš„sqlè¯­å¥</span><br></pre></td></tr></table></figure>

<p>æ³¨è§£ç”¨é€”ï¼š</p>
<ul>
<li>  è·¨åº“å…³è”æŸ¥è¯¢</li>
<li>  DDLæˆ–å­˜å‚¨è¿‡ç¨‹</li>
<li>  è‡ªå®šä¹‰åˆ†ç‰‡</li>
<li>  è¯»å†™åˆ†ç¦»</li>
</ul>
<h3 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h3><p>åŸºäºXAåè®®çš„ä¸¤é˜¶æ®µæäº¤</p>
<p><img src="/mycat/image-20201107215437139.png" alt="image-20201107215437139"></p>
<h4 id="XAè§’è‰²"><a href="#XAè§’è‰²" class="headerlink" title="XAè§’è‰²"></a>XAè§’è‰²</h4><p><img src="/mycat/image-20201107215605251.png" alt="image-20201107215605251"></p>
<h4 id="XAå®ç°"><a href="#XAå®ç°" class="headerlink" title="XAå®ç°"></a>XAå®ç°</h4><p><img src="/mycat/image-20201107220049532.png" alt="image-20201107220049532"></p>
<h2 id="9-Mycatæ ¸å¿ƒæµç¨‹"><a href="#9-Mycatæ ¸å¿ƒæµç¨‹" class="headerlink" title="9. Mycatæ ¸å¿ƒæµç¨‹"></a>9. Mycatæ ¸å¿ƒæµç¨‹</h2><h3 id="9-1-æ¶æ„å›¾"><a href="#9-1-æ¶æ„å›¾" class="headerlink" title="9.1 æ¶æ„å›¾"></a>9.1 æ¶æ„å›¾</h3><p><img src="/mycat/image-20201220170713526.png" alt="image-20201220170713526"></p>
<h3 id="9-2-å¯åŠ¨æµç¨‹"><a href="#9-2-å¯åŠ¨æµç¨‹" class="headerlink" title="9.2 å¯åŠ¨æµç¨‹"></a>9.2 å¯åŠ¨æµç¨‹</h3><ol>
<li> MycatServerå¯åŠ¨ï¼Œè§£æé…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨ã€åˆ†ç‰‡è§„åˆ™ç­‰</li>
<li> åˆ›å»ºå·¥ä½œçº¿ç¨‹ï¼Œå»ºç«‹å‰ç«¯è¿æ¥å’Œåç«¯è¿æ¥</li>
</ol>
<h3 id="9-3-æ‰§è¡ŒSQLæµç¨‹"><a href="#9-3-æ‰§è¡ŒSQLæµç¨‹" class="headerlink" title="9.3 æ‰§è¡ŒSQLæµç¨‹"></a>9.3 æ‰§è¡ŒSQLæµç¨‹</h3><ol>
<li> å‰ç«¯è¿æ¥æ¥æ”¶mysqlå‘½ä»¤</li>
<li> è§£æMySQLï¼Œmycatç”¨çš„æ˜¯Druidçš„DruidParser</li>
<li> è·å–è·¯ç”±</li>
<li> æ”¹å†™MySQLï¼Œä¾‹å¦‚ä¸¤ä¸ªæ¡ä»¶åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šï¼Œåˆ™å˜æˆä¸¤æ¡å•ç‹¬çš„sql</li>
<li> ä¸åç«¯æ•°æ®åº“å»ºç«‹è¿æ¥</li>
<li> å‘é€sqlè¯­å¥åˆ°MySQLæ‰§è¡Œ</li>
<li> è·å–è¿”å›ç»“æœ</li>
<li> å¤„ç†è¿”å›ç»“æœï¼Œä¾‹å¦‚æ’åºã€è®¡ç®—ç­‰ç­‰</li>
<li> è¿”å›ç»™å®¢æˆ·ç«¯</li>
</ol>
<h2 id="Mycaté«˜å¯ç”¨"><a href="#Mycaté«˜å¯ç”¨" class="headerlink" title="Mycaté«˜å¯ç”¨"></a>Mycaté«˜å¯ç”¨</h2><p><img src="/mycat/image-20201220172406074.png" alt="image-20201220172406074"></p>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>mycat</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€</title>
    <url>/thread-status/</url>
    <content><![CDATA[<h2 id="1-Javaçº¿ç¨‹åˆ†ç±»"><a href="#1-Javaçº¿ç¨‹åˆ†ç±»" class="headerlink" title="1. Javaçº¿ç¨‹åˆ†ç±»"></a>1. Javaçº¿ç¨‹åˆ†ç±»</h2><p>åœ¨Javaä¸­çº¿ç¨‹åˆ†åˆ«å¯¹åº”ä¸åŒçš„çŠ¶æ€ï¼Œä»åˆ›å»ºçº¿ç¨‹çš„ NEW åˆ°é”€æ¯æ—¶çš„ TERMINATEDçŠ¶æ€ï¼Œ æˆ‘ä»¬ä»Threadç±»ä¸­çš„å†…éƒ¨æšä¸¾ç±»Stateä¸­å¯ä»¥çœ‹åˆ°çº¿ç¨‹çš„6ç§çŠ¶æ€ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a thread which has not yet started.</span></span><br><span class="line"><span class="comment">     * å°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    NEW,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a runnable thread.  A thread in the runnable state is executing in the Java virtual machine but it may</span></span><br><span class="line"><span class="comment">     * be waiting for other resources from the operating system such as processor.</span></span><br><span class="line"><span class="comment">     * å¯è¿è¡Œçº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚å¤„äºå¯è¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹æ­£åœ¨Javaè™šæ‹Ÿæœºä¸­æ‰§è¡Œï¼Œä½†å®ƒå¯èƒ½æ­£åœ¨ç­‰å¾…æ¥è‡ªæ“ä½œç³»ç»Ÿçš„å…¶ä»–èµ„æºï¼Œä¾‹å¦‚å¤„ç†å™¨ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    RUNNABLE,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a thread blocked waiting for a monitor lock. A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method or reenter a synchronized block/method after calling Object.wait() .</span></span><br><span class="line"><span class="comment">     * ç­‰å¾…ç›‘è§†å™¨é”å®šçš„è¢«é˜»æ­¢çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…ç›‘è§†å™¨é”è¿›å…¥åŒæ­¥å—/æ–¹æ³•ï¼Œæˆ–åœ¨è°ƒç”¨å¯¹è±¡åé‡æ–°è¿›å…¥åŒæ­¥å—/æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    BLOCKED,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a waiting thread. A thread is in the waiting state due to calling one of the following methods:</span></span><br><span class="line"><span class="comment">     * 1.Object.wait() with no timeout </span></span><br><span class="line"><span class="comment">     * 2.Thread.join() with no timeout </span></span><br><span class="line"><span class="comment">     * 3.LockSupport.park()</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * A thread in the waiting state is waiting for another thread to perform a particular action.</span></span><br><span class="line"><span class="comment">     * For example, a thread that has called Object.wait() on an object is waiting for another thread to call</span></span><br><span class="line"><span class="comment">     * Object.notify or Object.notifyAll() on that object. A thread that has called Thread.join()</span></span><br><span class="line"><span class="comment">     * is waiting for a specified thread to terminate.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    WAITING,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a waiting thread with a specified waiting time. A thread is in the timed waiting state due to calling one of</span></span><br><span class="line"><span class="comment">     * the following methods with a specified positive waiting time:</span></span><br><span class="line"><span class="comment">     * 1.Thread.sleep()</span></span><br><span class="line"><span class="comment">     * 2.Object.wait() with timeout</span></span><br><span class="line"><span class="comment">     * 3.Thread.join() with timeout</span></span><br><span class="line"><span class="comment">     * 4.LockSupport.parkNanos()</span></span><br><span class="line"><span class="comment">     * 5.LockSupport.parkUntil()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TIMED_WAITING,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Thread state for a terminated thread. The thread has completed execution.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TERMINATED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-1-çŠ¶æ€1ï¼š-NEW"><a href="#1-1-çŠ¶æ€1ï¼š-NEW" class="headerlink" title="1.1 çŠ¶æ€1ï¼š NEW"></a>1.1 çŠ¶æ€1ï¼š NEW</h3><p>å½“çº¿ç¨‹è¢«åˆ›å»ºå‡ºæ¥è¿˜æ²¡æœ‰è¢«è°ƒç”¨ start()æ—¶å€™çš„çŠ¶æ€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®˜æ–¹æè¿°ï¼šThread state for a thread which has not yet started.</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadStateTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>);</span><br><span class="line">        System.out.println(thread.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š NEW</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-çŠ¶æ€2ï¼š-RUNNABLE"><a href="#1-2-çŠ¶æ€2ï¼š-RUNNABLE" class="headerlink" title="1.2 çŠ¶æ€2ï¼š RUNNABLE"></a>1.2 çŠ¶æ€2ï¼š RUNNABLE</h3><p>å½“çº¿ç¨‹è¢«è°ƒç”¨start()ï¼Œä¸”å¤„äºç­‰å¾…æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºï¼ˆå¦‚CPUï¼‰ã€ç­‰å¾…IOè¿æ¥ã€æ­£åœ¨è¿è¡ŒçŠ¶æ€ï¼Œå³è¡¨ç¤ºRunningçŠ¶æ€å’ŒReadyçŠ¶æ€ã€‚<br>æ³¨ï¼šè°ƒç”¨äº†start()ä¸ä¸€å®šä¼šç«‹å³æ”¹å˜çŠ¶æ€ï¼Œè¿˜æœ‰ä¸€äº›å‡†å¤‡å·¥ä½œï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹çŠ¶æ€æ˜¯ä¸ç¡®å®šçš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®˜æ–¹æè¿°ï¼š</span><br><span class="line">Thread state for a runnable thread.  A thread in the runnable state is executing in the Java virtual machine but it may</span><br><span class="line">be waiting for other resources from the operating system such as processor.</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadStateTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(thread.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š RUNNABLE</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-çŠ¶æ€3ï¼š-BLOCKED"><a href="#1-3-çŠ¶æ€3ï¼š-BLOCKED" class="headerlink" title="1.3 çŠ¶æ€3ï¼š BLOCKED"></a>1.3 çŠ¶æ€3ï¼š BLOCKED</h3><p>ç­‰å¾…ç›‘è§†å™¨é”è€Œè¢«é˜»å¡çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚å½“è¿›å…¥synchronizedå—/æ–¹æ³• æˆ–è€…åœ¨è°ƒç”¨wait()è¢«å”¤é†’/è¶…æ—¶ä¹‹åé‡æ–°è¿›å…¥synchronizedå—/æ–¹æ³•ï¼Œä½†æ˜¯é”è¢«å…¶ä»–çº¿ç¨‹å æœ‰ï¼Œè¿™ä¸ªæ—¶å€™è¢«æ“ä½œç³»ç»ŸæŒ‚èµ·ï¼ŒçŠ¶æ€ä¸º<strong>é˜»å¡çŠ¶æ€ BLOCKED</strong>ã€‚</p>
<p><strong>é˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼Œå³ä½¿è°ƒç”¨interrupt()æ–¹æ³•ä¹Ÿä¸ä¼šæ”¹å˜å…¶çŠ¶æ€</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®˜æ–¹æè¿°ï¼š</span><br><span class="line">Thread state for a thread blocked waiting for a monitor lock. </span><br><span class="line">A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method or reenter a synchronized block/method after calling Object.wait() .</span><br><span class="line">è¯‘æ–‡ï¼šç­‰å¾…ç›‘è§†å™¨é”å®šçš„è¢«é˜»æ­¢çº¿ç¨‹çš„çº¿ç¨‹çŠ¶æ€ã€‚å¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…ç›‘è§†å™¨é”è¿›å…¥åŒæ­¥å—/æ–¹æ³•ï¼Œæˆ–åœ¨è°ƒç”¨å¯¹è±¡åé‡æ–°è¿›å…¥åŒæ­¥å—/æ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure>

<p>é˜»å¡(BLOCKED)ï¼šé˜»å¡çŠ¶æ€æ˜¯æŒ‡çº¿ç¨‹å› ä¸ºæŸç§åŸå› æ”¾å¼ƒäº†cpu ä½¿ç”¨æƒï¼Œä¹Ÿå³è®©å‡ºäº†cpu timesliceï¼Œæš‚æ—¶åœæ­¢è¿è¡Œã€‚ç›´åˆ°çº¿ç¨‹è¿›å…¥å¯è¿è¡Œ(runnable)çŠ¶æ€ï¼Œæ‰æœ‰æœºä¼šå†æ¬¡è·å¾—cpu timeslice è½¬åˆ°è¿è¡Œ(running)çŠ¶æ€ã€‚é˜»å¡çš„æƒ…å†µåˆ†ä¸‰ç§ï¼š</p>
<ul>
<li>ç­‰å¾…é˜»å¡ï¼šè¿è¡Œ(running)çš„çº¿ç¨‹æ‰§è¡Œo.wait()æ–¹æ³•ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—(waitting queue)ä¸­ã€‚</li>
<li>åŒæ­¥é˜»å¡ï¼šè¿è¡Œ(running)çš„çº¿ç¨‹åœ¨è·å–å¯¹è±¡çš„åŒæ­¥é”æ—¶ï¼Œè‹¥è¯¥åŒæ­¥é”è¢«åˆ«çš„çº¿ç¨‹å ç”¨ï¼Œåˆ™JVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥é”æ± (lock pool)ä¸­ã€‚</li>
<li>å…¶ä»–é˜»å¡ï¼šè¿è¡Œ(running)çš„çº¿ç¨‹æ‰§è¡ŒThread.sleep(long ms)æˆ–t.join()æ–¹æ³•ï¼Œæˆ–è€…å‘å‡ºäº†I/Oè¯·æ±‚æ—¶ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹ç½®ä¸ºé˜»å¡çŠ¶æ€ã€‚å½“sleep()çŠ¶æ€è¶…æ—¶ã€join()ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è€…è¶…æ—¶ã€æˆ–è€…I/Oå¤„ç†å®Œæ¯•æ—¶ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å¯è¿è¡Œ(runnable)çŠ¶æ€ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlockedState</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String lock = <span class="string">&quot;é”&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                    <span class="comment">//æ­»å¾ªç¯å¯¼è‡´thread1ä¸€ç›´æŒæœ‰lockå¯¹è±¡é”</span></span><br><span class="line">                    <span class="keyword">while</span> (<span class="keyword">true</span>) ;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¼‘çœ 1ç§’ï¼Œè®©thread1å…ˆå¯åŠ¨</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread2&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (lock) &#123; <span class="comment">//@1</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;thread2&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread2.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;thread1.state:&quot;</span> + thread1.getState());</span><br><span class="line">        System.out.println(<span class="string">&quot;thread2.state:&quot;</span> + thread2.getState());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//while (true) æ­»å¾ªç¯å¯¼è‡´thread1æŒæœ‰lockå¯¹è±¡é”ä¸€ç›´æ²¡æœ‰é‡Šæ”¾ï¼Œè€Œthread2ä¹Ÿæƒ³è·å–lockå¯¹è±¡é”ï¼Œä½†æ˜¯é”ä¸€ç›´è¢«thread1æŒæœ‰ç€ï¼Œå¯¼è‡´thread2è¢«é˜»å¡åœ¨@1å¤„ï¼Œ</span></span><br><span class="line">        <span class="comment">//æ­¤æ—¶thread2å°±å¤„äºBLOCKEDçŠ¶æ€</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š thread1.state:RUNNABLE</span></span><br><span class="line"><span class="comment">//      thread2.state:BLOCKED</span></span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹2ä¸ªçº¿ç¨‹çš„å †æ ˆä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šçº¿ç¨‹çŠ¶æ€ã€çº¿ç¨‹ç›®å‰æ‰§è¡Œåˆ°å“ªæ®µä»£ç ç­‰</p>
<ol>
<li><p>jpså‘½ä»¤æŸ¥çœ‹éœ€è¦æ‰“å°çº¿ç¨‹æ ˆçš„è¿›ç¨‹å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure>
<p><img src="/thread-status/02.png"></p>
</li>
<li><p>jstackå‘½ä»¤ç”Ÿæˆjavaè™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jstack 46622  #æ‰¾åˆ°BlockedStateçº¿ç¨‹çš„</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;thread2&quot; #13 prio=5 os_prio=31 tid=0x00007f81c387e800 nid=0xa703 waiting for monitor entry [0x000070000bbbd000]</span><br><span class="line">   java.lang.Thread.State: BLOCKED (on object monitor)</span><br><span class="line">      at org.example.thread.BlockedState$2.run(BlockedState.java:26)</span><br><span class="line">         - waiting to lock &lt;0x0000000715916c40&gt; (a java.lang.String)</span><br><span class="line"></span><br><span class="line">&quot;thread1&quot; #11 prio=5 os_prio=31 tid=0x00007f81b3d9b800 nid=0x5503 runnable [0x000070000b9b7000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line">      at org.example.thread.BlockedState$1.run(BlockedState.java:14)</span><br><span class="line">          - locked &lt;0x0000000715916c40&gt; (a java.lang.String)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºå†…å®¹é‡Šä¹‰ï¼š</p>
<ul>
<li>thread1ï¼šçº¿ç¨‹åç§°</li>
<li>#11ï¼šå½“å‰çº¿ç¨‹IDï¼Œä» mainçº¿ç¨‹å¼€å§‹ï¼ŒJVM æ ¹æ®çº¿ç¨‹åˆ›å»ºçš„é¡ºåºä¸ºçº¿ç¨‹ç¼–å·</li>
<li>prioï¼šæ˜¯ priority ä¼˜å…ˆçº§çš„ç¼©å†™ï¼Œè¡¨æ˜äº†å½“å‰çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå–å€¼èŒƒå›´ã€1ï½10ã€‘ï¼Œé»˜è®¤ä¸º 5ï¼Œåœ¨è™šæ‹Ÿæœºè¿›è¡Œçº¿ç¨‹è°ƒåº¦çš„æ—¶å€™ä¼šå‚è€ƒè¯¥ä¼˜å…ˆçº§ä¸ºçº¿ç¨‹åˆ†é…è®¡ç®—èµ„æºï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œä¸€èˆ¬ä¸è®¾ç½®ç›´æ¥ä½¿ç”¨é»˜è®¤çš„ä¼˜å…ˆçº§ã€‚</li>
<li>os_prioï¼šçº¿ç¨‹å¯¹åº”ç³»ç»Ÿçš„ä¼˜å…ˆçº§</li>
<li>nidï¼š æœ¬åœ°çº¿ç¨‹ç¼–å·ï¼Œ NativeIDçš„ç¼©å†™ï¼Œå¯¹åº”JVMè™šæ‹Ÿæœºä¸­çº¿ç¨‹æ˜ å°„åœ¨æ“ä½œç³»ç»Ÿä¸­çš„çº¿ç¨‹ç¼–å·ï¼Œå¯ä»¥é€šè¿‡ top å‘½ä»¤æŸ¥çœ‹è¿›ç¨‹å¯¹åº”çš„çº¿ç¨‹æƒ…å†µè¿›è¡Œç›¸å…³æ˜ å°„</li>
</ul>
</li>
</ol>
<h3 id="1-4-çŠ¶æ€4ï¼š-WAITING"><a href="#1-4-çŠ¶æ€4ï¼š-WAITING" class="headerlink" title="1.4 çŠ¶æ€4ï¼š WAITING"></a>1.4 çŠ¶æ€4ï¼š WAITING</h3><p>æ— æ¡ä»¶ç­‰å¾…ï¼Œå½“çº¿ç¨‹è°ƒç”¨wait()/join()/LockSupport.park()ä¸åŠ è¶…æ—¶æ—¶é—´çš„æ–¹æ³•ä¹‹åæ‰€å¤„çš„çŠ¶æ€ï¼Œå¦‚æœæ²¡æœ‰è¢«å”¤é†’æˆ–ç­‰å¾…çš„çº¿ç¨‹æ²¡æœ‰ç»“æŸï¼Œé‚£ä¹ˆå°†ä¸€ç›´ç­‰å¾…ï¼Œå½“å‰çŠ¶æ€çš„çº¿ç¨‹ä¸ä¼šè¢«åˆ†é…CPUèµ„æºå’ŒæŒæœ‰é”ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®˜æ–¹æè¿°ï¼š</span><br><span class="line"></span><br><span class="line">Thread state for a waiting thread. A thread is in the waiting state due to calling one of the following methods:</span><br><span class="line">1.Object.wait with no timeout </span><br><span class="line">2.Thread.join with no timeout </span><br><span class="line">3.LockSupport.park</span><br><span class="line"></span><br><span class="line">A thread in the waiting state is waiting for another thread to perform a particular action.</span><br><span class="line">For example, a thread that has called Object.wait() on an object is waiting for another thread to call</span><br><span class="line">Object.notify or Object.notifyAll() on that object. A thread that has called Thread.join()</span><br><span class="line">is waiting for a specified thread to terminate.</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹å¼ä¸€ï¼šObject-wait"><a href="#æ–¹å¼ä¸€ï¼šObject-wait" class="headerlink" title="æ–¹å¼ä¸€ï¼šObject.wait()"></a>æ–¹å¼ä¸€ï¼šObject.wait()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (WaitingState.class)&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        WaitingState.class.wait();</span><br><span class="line">                    &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿä¼‘çœ 1ç§’ï¼Œè®©thread1è¿è¡Œåˆ°waitæ–¹æ³•å¤„</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;thread.state:&quot;</span>+thread1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š thread1.state:WAITING</span></span><br></pre></td></tr></table></figure>
<p>æ‰“å°çº¿ç¨‹thread1å †æ ˆä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;thread1&quot; #11 prio=5 os_prio=31 tid=0x00007fc57b877800 nid=0x5503 in Object.wait() [0x0000700011529000]</span><br><span class="line">   java.lang.Thread.State: WAITING (on object monitor)</span><br><span class="line">true  at java.lang.Object.wait(Native Method)</span><br><span class="line">true    - waiting on &lt;0x0000000715916c40&gt; (a java.lang.Class for org.example.thread.WaitingState)</span><br><span class="line">true  at java.lang.Object.wait(Object.java:502)</span><br><span class="line">true  at org.example.thread.WaitingState$1.run(WaitingState.java:12)</span><br><span class="line">true    - locked &lt;0x0000000715916c40&gt; (a java.lang.Class for org.example.thread.WaitingState)</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹å¼äºŒï¼šThread-join"><a href="#æ–¹å¼äºŒï¼šThread-join" class="headerlink" title="æ–¹å¼äºŒï¼šThread.join()"></a>æ–¹å¼äºŒï¼šThread.join()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">               <span class="keyword">while</span> (<span class="keyword">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//joinæ–¹æ³•ä¼šè®©å½“å‰ä¸»çº¿ç¨‹ç­‰å¾…thread1ç»“æŸ</span></span><br><span class="line">        thread1.join();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å¯¼è‡´ä¸»çº¿ç¨‹å¤„äºWAITINGçŠ¶æ€ï¼Œä¸‹é¢æ˜¯ä¸»çº¿ç¨‹å †æ ˆä¿¡æ¯ï¼Œç¬¬äºŒè¡Œæ˜¾ç¤ºä¸»çº¿ç¨‹å¤„äºWAITINGçŠ¶æ€ï¼Œç¬¬äº”è¡Œè¡¨ç¤ºå› ä¸ºè°ƒç”¨äº†Thread.joinå¯¼è‡´çº¿ç¨‹WAITING</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;main&quot; #1 prio=5 os_prio=31 tid=0x00007fea7b01b800 nid=0xe03 in Object.wait() [0x0000700008b43000]</span><br><span class="line">   java.lang.Thread.State: WAITING (on object monitor)</span><br><span class="line">trueat java.lang.Object.wait(Native Method)</span><br><span class="line">true  - waiting on &lt;0x000000071591c4c8&gt; (a org.example.thread.WaitingState$1)</span><br><span class="line">trueat java.lang.Thread.join(Thread.java:1252)</span><br><span class="line">true  - locked &lt;0x000000071591c4c8&gt; (a org.example.thread.WaitingState$1)</span><br><span class="line">trueat java.lang.Thread.join(Thread.java:1326)</span><br><span class="line">trueat org.example.thread.WaitingState.main(WaitingState.java:17)</span><br></pre></td></tr></table></figure>

<h4 id="æ–¹å¼ä¸‰ï¼šLockSupport-park"><a href="#æ–¹å¼ä¸‰ï¼šLockSupport-park" class="headerlink" title="æ–¹å¼ä¸‰ï¼šLockSupport.park()"></a>æ–¹å¼ä¸‰ï¼šLockSupport.park()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>)&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                LockSupport.park();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;thread.state:&quot;</span>+thread1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š thread.state:WAITING</span></span><br></pre></td></tr></table></figure>
<p>æ‰“å°çº¿ç¨‹thread1çš„å †æ ˆä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;thread1&quot; #11 prio=5 os_prio=31 tid=0x00007f7baf82d000 nid=0x5503 waiting on condition [0x000070000b2b9000]</span><br><span class="line">   java.lang.Thread.State: WAITING (parking)</span><br><span class="line">trueat sun.misc.Unsafe.park(Native Method)</span><br><span class="line">trueat java.util.concurrent.locks.LockSupport.park(LockSupport.java:304)</span><br><span class="line">trueat org.example.thread.WaitingState$1.run(WaitingState.java:11)</span><br></pre></td></tr></table></figure>

<h3 id="1-5-çŠ¶æ€5ï¼š-TIMED-WAITING"><a href="#1-5-çŠ¶æ€5ï¼š-TIMED-WAITING" class="headerlink" title="1.5 çŠ¶æ€5ï¼š TIMED_WAITING"></a>1.5 çŠ¶æ€5ï¼š TIMED_WAITING</h3><p>æœ‰æ¡ä»¶çš„ç­‰å¾…ï¼ŒåŒºåˆ«äºä¸Šé¢çš„WAITING(æ— æ¡ä»¶ç­‰å¾…)ï¼Œå½“çº¿ç¨‹è°ƒç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹åæ‰€å¤„çš„çŠ¶æ€ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´æ²¡æœ‰è¢«å”¤é†’æˆ–è€…ç­‰å¾…çº¿ç¨‹æ²¡æœ‰ç»“æŸï¼Œä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨å”¤é†’ï¼Œæ­£å¸¸é€€å‡ºã€‚</p>
<ul>
<li>sleep(ç¡çœ æ—¶é—´)</li>
<li>wait(ç­‰å¾…æ—¶é—´) </li>
<li>join(ç­‰å¾…æ—¶é—´) </li>
<li>LockSupport.parkNanos(ç­‰å¾…æ—¶é—´) </li>
<li>LockSupport.parkUntil(ç­‰å¾…æ—¶é—´)</li>
</ul>
<p>TIMED_WAITINGï¼š æœ‰æœŸé™çš„ç­‰å¾…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®˜æ–¹æè¿°ï¼š</span><br><span class="line">Thread state for a waiting thread with a specified waiting time. </span><br><span class="line">A thread is in the timed waiting state due to calling one of the following methods with a specified positive waiting time:</span><br><span class="line">1.Thread.sleep</span><br><span class="line">2.Object.wait with timeout</span><br><span class="line">3.Thread.join with timeout</span><br><span class="line">4.LockSupport.parkNanos</span><br><span class="line">5.LockSupport.parkUntil</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹å¼ä¸€ï¼šThread-sleep-seconds"><a href="#æ–¹å¼ä¸€ï¼šThread-sleep-seconds" class="headerlink" title="æ–¹å¼ä¸€ï¼šThread.sleep(seconds)"></a>æ–¹å¼ä¸€ï¼šThread.sleep(seconds)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeWaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//ä¼‘çœ 500ç§’ = 500000æ¯«ç§’</span></span><br><span class="line">                    Thread.sleep(<span class="number">500</span> * <span class="number">1000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿä¼‘çœ 1ç§’ï¼Œè®©thread1è¿è¡Œåˆ°sleepæ–¹æ³•å¤„</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;thread1.state:&quot;</span> + thread1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š thread1.state:TIMED_WAITING</span></span><br></pre></td></tr></table></figure>
<p>æ‰“å°çº¿ç¨‹thread1çš„å †æ ˆä¿¡æ¯ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯çº¿ç¨‹sleepæ–¹æ³•(ç¬¬ä¸‰è¡Œ)å¯¼è‡´çº¿ç¨‹ç­‰å¾…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;thread1&quot; #11 prio=5 os_prio=31 tid=0x00007fddf71ae800 nid=0x5503 waiting on condition [0x000070000b11c000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (sleeping)</span><br><span class="line">trueat java.lang.Thread.sleep(Native Method)</span><br><span class="line">trueat org.example.thread.TimeWaitingState$1.run(TimeWaitingState.java:12)</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹å¼äºŒï¼šObject-wait-seconds"><a href="#æ–¹å¼äºŒï¼šObject-wait-seconds" class="headerlink" title="æ–¹å¼äºŒï¼šObject.wait(seconds)"></a>æ–¹å¼äºŒï¼šObject.wait(seconds)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeWaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (TimeWaitingState.class) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        TimeWaitingState.class.wait(<span class="number">500</span> * <span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿä¼‘çœ 1ç§’ï¼Œè®©thread1è¿è¡Œåˆ°sleepæ–¹æ³•å¤„</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;thread1.state:&quot;</span> + thread1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼› thread1.state:TIMED_WAITING</span></span><br></pre></td></tr></table></figure>
<p>æ‰“å°çº¿ç¨‹ thread1 å †æ ˆä¿¡æ¯ï¼Œä»å †æ ˆä¿¡æ¯ç¬¬ä¸‰è¡Œä¸­å¯ä»¥çœ‹å‡ºæ˜¯çº¿ç¨‹ wait æ–¹æ³•å¯¼è‡´çº¿ç¨‹ç­‰å¾…çš„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;thread1&quot; #11 prio=5 os_prio=31 tid=0x00007f80a0129800 nid=0x5503 in Object.wait() [0x000070000856b000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (on object monitor)</span><br><span class="line">trueat java.lang.Object.wait(Native Method)</span><br><span class="line">true- waiting on &lt;0x0000000715916d28&gt; (a java.lang.Class for org.example.thread.TimeWaitingState)</span><br><span class="line">trueat org.example.thread.TimeWaitingState$1.run(TimeWaitingState.java:12)</span><br><span class="line">true- locked &lt;0x0000000715916d28&gt; (a java.lang.Class for org.example.thread.TimeWaitingState)</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹å¼ä¸‰ï¼šThread-join-seconds"><a href="#æ–¹å¼ä¸‰ï¼šThread-join-seconds" class="headerlink" title="æ–¹å¼ä¸‰ï¼šThread.join(seconds)"></a>æ–¹å¼ä¸‰ï¼šThread.join(seconds)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeWaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//Thread.join ä¼šè®©å½“å‰ä¸»çº¿ç¨‹ç­‰å¾…thread1ç»“æŸï¼Œéœ€è¦ç­‰å¾…500s</span></span><br><span class="line">        thread1.join(<span class="number">500</span> * <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Thread.join ä¼šè®©å½“å‰ä¸»çº¿ç¨‹ç­‰å¾…thread1ç»“æŸï¼Œæ‰€ä»¥æˆ‘ä»¬æŸ¥çœ‹ä¸»çº¿ç¨‹å †æ ˆä¿¡æ¯: </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;main&quot; #1 prio=5 os_prio=31 tid=0x00007fa6d7009000 nid=0xd03 in Object.wait() [0x000070000feb9000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (on object monitor)</span><br><span class="line">trueat java.lang.Object.wait(Native Method)</span><br><span class="line">true- waiting on &lt;0x000000071591c138&gt; (a org.example.thread.TimeWaitingState$1)</span><br><span class="line">trueat java.lang.Thread.join(Thread.java:1260)</span><br><span class="line">true- locked &lt;0x000000071591c138&gt; (a org.example.thread.TimeWaitingState$1)</span><br><span class="line">trueat org.example.thread.TimeWaitingState.main(TimeWaitingState.java:14)</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹å¼å››ï¼šLockSupport-parkNanos-seconds"><a href="#æ–¹å¼å››ï¼šLockSupport-parkNanos-seconds" class="headerlink" title="æ–¹å¼å››ï¼šLockSupport.parkNanos(seconds)"></a>æ–¹å¼å››ï¼šLockSupport.parkNanos(seconds)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeWaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">//ç­‰å¾…500ç§’</span></span><br><span class="line">                LockSupport.parkNanos(TimeUnit.SECONDS.toNanos(<span class="number">500</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿä¼‘çœ 1ç§’ï¼Œè®©thread1è¿è¡Œåˆ°parkNanosæ–¹æ³•å¤„</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;thread1.state:&quot;</span> + thread1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š thread1.state:TIMED_WAITING</span></span><br></pre></td></tr></table></figure>
<p>çº¿ç¨‹ thread1 å †æ ˆä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;thread1&quot; #11 prio=5 os_prio=31 tid=0x00007fb71b07a000 nid=0x5503 waiting on condition [0x0000700001da8000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">trueat sun.misc.Unsafe.park(Native Method)</span><br><span class="line">trueat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:338)</span><br><span class="line">trueat org.example.thread.TimeWaitingState$1.run(TimeWaitingState.java:12)</span><br></pre></td></tr></table></figure>
<h4 id="æ–¹å¼äº”ï¼šLockSupport-parkUntil-seconds"><a href="#æ–¹å¼äº”ï¼šLockSupport-parkUntil-seconds" class="headerlink" title="æ–¹å¼äº”ï¼šLockSupport.parkUntil(seconds)"></a>æ–¹å¼äº”ï¼šLockSupport.parkUntil(seconds)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeWaitingState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">//ç­‰å¾…500ç§’</span></span><br><span class="line">                LockSupport.parkUntil(System.currentTimeMillis() + TimeUnit.SECONDS.toMillis(<span class="number">500</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿä¼‘çœ 1ç§’ï¼Œè®©thread1è¿è¡Œåˆ°parkNanosæ–¹æ³•å¤„</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;thread1.state:&quot;</span> + thread1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š thread1.state:TIMED_WAITING</span></span><br></pre></td></tr></table></figure>
<p>çº¿ç¨‹ thread1 å †æ ˆä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;thread1&quot; #11 prio=5 os_prio=31 tid=0x00007ff41d076000 nid=0x5503 waiting on condition [0x00007000094df000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (parking)</span><br><span class="line">trueat sun.misc.Unsafe.park(Native Method)</span><br><span class="line">trueat java.util.concurrent.locks.LockSupport.parkUntil(LockSupport.java:372)</span><br><span class="line">trueat org.example.thread.TimeWaitingState$1.run(TimeWaitingState.java:12)</span><br></pre></td></tr></table></figure>

<h3 id="1-6-çŠ¶æ€6ï¼š-TERMINATED"><a href="#1-6-çŠ¶æ€6ï¼š-TERMINATED" class="headerlink" title="1.6 çŠ¶æ€6ï¼š TERMINATED"></a>1.6 çŠ¶æ€6ï¼š TERMINATED</h3><p>æ‰§è¡Œå®Œäº† run()æ–¹æ³•ã€‚å…¶å®è¿™åªæ˜¯ Java è¯­è¨€çº§åˆ«çš„ä¸€ç§çŠ¶æ€ï¼Œåœ¨æ“ä½œç³»ç»Ÿå†…éƒ¨å¯èƒ½å·²ç»æ³¨é”€äº†ç›¸åº”çš„çº¿ç¨‹ï¼Œæˆ–è€…å°†å®ƒå¤ç”¨ç»™å…¶ä»–éœ€è¦ä½¿ç”¨çº¿ç¨‹çš„è¯·æ±‚ï¼Œè€Œåœ¨ Java è¯­è¨€çº§åˆ«åªæ˜¯é€šè¿‡ Java ä»£ç çœ‹åˆ°çš„çº¿ç¨‹çŠ¶æ€è€Œå·²</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®˜æ–¹æè¿°ï¼š</span><br><span class="line">Thread state for a terminated thread. The thread has completed execution.</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TerminatedState</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(<span class="string">&quot;thread1&quot;</span>) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(Thread.currentThread());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">//ä¼‘çœ 1ç§’ï¼Œç­‰å¾…thread1æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;thread1 state:&quot;</span> + thread1.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼šThread[thread1,5,main]</span></span><br><span class="line"><span class="comment">//     thread1 state:TERMINATED</span></span><br></pre></td></tr></table></figure>

<h2 id="2-çŠ¶æ€è½¬åŒ–"><a href="#2-çŠ¶æ€è½¬åŒ–" class="headerlink" title="2.çŠ¶æ€è½¬åŒ–"></a>2.çŠ¶æ€è½¬åŒ–</h2><p><img src="/thread-status/03.png" alt="çº¿ç¨‹çš„çŠ¶æ€"><br><img src="/thread-status/01.jpg" alt="çº¿ç¨‹çš„çŠ¶æ€"></p>
]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>thread</tag>
      </tags>
  </entry>
  <entry>
    <title>vueå­¦ä¹ </title>
    <url>/vue/</url>
    <content><![CDATA[<p>Object.freeze()ï¼Œè¿™ä¼šé˜»æ­¢ä¿®æ”¹ç°æœ‰çš„ propertyï¼Œä¹Ÿæ„å‘³ç€å“åº”ç³»ç»Ÿæ— æ³•å†è¿½è¸ªå˜åŒ–ã€‚</p>
<h3 id="1-export"><a href="#1-export" class="headerlink" title="1. export"></a>1. export</h3><hr>
<p>ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œexportè¾“å‡ºå˜é‡å’Œæ–¹æ³•ã€ç±»</p>
<ul>
<li><p>å˜é‡</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// profile.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> firstName = <span class="string">&#x27;Michael&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> lastName = <span class="string">&#x27;Jackson&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> year = <span class="number">1958</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç®€å†™--ä¼˜å…ˆä½¿ç”¨</span></span><br><span class="line"><span class="keyword">export</span> &#123;firstName, lastName, year&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æ–¹æ³•</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœæƒ³ä¸ºè¾“å…¥çš„å˜é‡é‡æ–°å‘½åï¼Œ å¯ä»¥ä½¿ç”¨AS å…³é”®å­—é‡æ–°å‘½å</span></span><br><span class="line"><span class="keyword">import</span> &#123; buildMenus <span class="keyword">as</span> buildMenus&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/menu&#x27;</span>;</span><br><span class="line"><span class="comment">//importå‘½ä»¤æ¥å—ä¸€å¯¹å¤§æ‹¬å·ï¼Œé‡Œé¢æŒ‡å®šè¦ä»å…¶ä»–æ¨¡å—å¯¼å…¥çš„å˜é‡åã€‚å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—ï¼ˆprofile.jsï¼‰å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒ</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-export-default"><a href="#2-export-default" class="headerlink" title="2. export default"></a>2. export default</h3><p>ä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºï¼Œ ä½¿ç”¨importå‘½ä»¤çš„æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“æ‰€è¦åŠ è½½çš„å˜é‡åå’Œå‡½æ•°åï¼Œå¦åˆ™æ— æ³•åŠ è½½ï¼›äº†è§£æ¨¡å—æœ‰å“ªäº›æ–¹æ³•å’Œå±æ€§æ¯”è¾ƒéº»çƒ¦ï¼Œä½¿ç”¨export defaultå‘½ä»¤ï¼Œä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// export-default.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªæ¨¡å—æ–‡ä»¶export-default.jsã€‚é»˜è®¤è¾“å‡º1ä¸ªå‡½æ•°ï¼›</p>
<p>ä¸exportå‘½ä»¤çš„åŒºåˆ«ï¼šå…¶ä»–æ¨¡å—åŠ è½½è¯¥æ¨¡å—æ˜¯ï¼Œimportå‘½ä»¤å¯ä»¥ä¸ºè¯¥åŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// import-default.js</span></span><br><span class="line"><span class="keyword">import</span> customName <span class="keyword">from</span> <span class="string">&#x27;./export-default&#x27;</span>;</span><br><span class="line">customName(); <span class="comment">// &#x27;foo&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç çš„<code>import</code>å‘½ä»¤ï¼Œå¯ä»¥ç”¨ä»»æ„åç§°æŒ‡å‘<code>export-default.js</code>è¾“å‡ºçš„æ–¹æ³•ï¼Œè¿™æ—¶å°±ä¸éœ€è¦çŸ¥é“åŸæ¨¡å—è¾“å‡ºçš„å‡½æ•°åã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ—¶<code>import</code>å‘½ä»¤åé¢ï¼Œä¸ä½¿ç”¨å¤§æ‹¬å·ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œ<code>export default</code>å°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åš<code>default</code>çš„å˜é‡æˆ–æ–¹æ³•ï¼Œç„¶åç³»ç»Ÿå…è®¸ä½ ä¸ºå®ƒå–ä»»æ„åå­—ã€‚æ‰€ä»¥ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// modules.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;add <span class="keyword">as</span> <span class="keyword">default</span>&#125;;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="comment">// export default add;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> foo &#125; <span class="keyword">from</span> <span class="string">&#x27;modules&#x27;</span>;</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="comment">// import foo from &#x27;modules&#x27;;</span></span><br></pre></td></tr></table></figure>

<p>æ­£æ˜¯å› ä¸º<code>export default</code>å‘½ä»¤å…¶å®åªæ˜¯è¾“å‡ºä¸€ä¸ªå«åš<code>default</code>çš„å˜é‡ï¼Œæ‰€ä»¥å®ƒåé¢ä¸èƒ½è·Ÿå˜é‡å£°æ˜è¯­å¥ã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<ul>
<li><p>  exportå‘½ä»¤å¯¹å¤–æ¥å£æ˜¯æœ‰åç§°çš„ä¸”<code>import</code>å‘½ä»¤ä»æ¨¡å—å¯¼å…¥çš„å˜é‡åä¸è¢«å¯¼å…¥æ¨¡å—å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒï¼Œè€Œexport defaultå‘½ä»¤å¯¹å¤–è¾“å‡ºçš„å˜é‡åå¯ä»¥æ˜¯ä»»æ„çš„ï¼Œè¿™æ—¶<code>import</code>å‘½ä»¤åé¢ï¼Œä¸ä½¿ç”¨å¤§æ‹¬å·ã€‚</p>
</li>
<li><p>  <code>export default</code>å‘½ä»¤ç”¨äºæŒ‡å®šæ¨¡å—çš„é»˜è®¤è¾“å‡ºã€‚æ˜¾ç„¶ï¼Œä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤è¾“å‡ºï¼Œå› æ­¤<code>export default</code>å‘½ä»¤åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œimportå‘½ä»¤åé¢æ‰ä¸ç”¨åŠ å¤§æ‹¬å·ï¼Œå› ä¸ºåªå¯èƒ½å”¯ä¸€å¯¹åº”<code>export default</code>å‘½ä»¤ã€‚</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//menu.js</span></span><br><span class="line"><span class="comment">//getè¯·æ±‚è·å–æ‰€æœ‰çš„èœå•ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">buildMenus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/menus/build&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//post è¯·æ±‚ä¿å­˜æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/menus&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//delete è¯·æ±‚åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">del</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/menus/&#x27;</span> + id,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//putè¯·æ±‚ä¿®æ”¹æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">edit</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/menus&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//app.vue</span></span><br><span class="line"><span class="keyword">import</span> &#123; buildMenus &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/menu&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-Constã€varã€let"><a href="#3-Constã€varã€let" class="headerlink" title="3. Constã€varã€let"></a>3. Constã€varã€let</h3><p> ES5 ä¸­ä½œç”¨åŸŸæœ‰ï¼šå…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸã€‚æ²¡æœ‰å—ä½œç”¨åŸŸçš„æ¦‚å¿µã€‚</p>
<p> ES6 ä¸­æ–°å¢äº†å—çº§ä½œç”¨åŸŸã€‚å—ä½œç”¨åŸŸç”± { } åŒ…æ‹¬ï¼Œifè¯­å¥å’Œ forè¯­å¥é‡Œé¢çš„{ }ä¹Ÿå±äºå—ä½œç”¨åŸŸ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// é€šè¿‡varå®šä¹‰çš„å˜é‡å¯ä»¥è·¨å—ä½œç”¨åŸŸè®¿é—®åˆ°ã€‚</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(b); <span class="comment">// 2</span></span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// console.log(b); // æŠ¥é”™ï¼Œ</span></span><br><span class="line"><span class="comment">// å¯è§ï¼Œé€šè¿‡varå®šä¹‰çš„å˜é‡ä¸èƒ½è·¨å‡½æ•°ä½œç”¨åŸŸè®¿é—®åˆ°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> c = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i ++) &#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="number">5</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// 4   (å¾ªç¯ç»“æŸiå·²ç»æ˜¯4ï¼Œæ‰€ä»¥æ­¤å¤„iä¸º4)</span></span><br><span class="line"><span class="built_in">console</span>.log(d); <span class="comment">// 5</span></span><br><span class="line"><span class="comment">// ifè¯­å¥å’Œforè¯­å¥ä¸­ç”¨varå®šä¹‰çš„å˜é‡å¯ä»¥åœ¨å¤–é¢è®¿é—®åˆ°ï¼Œ</span></span><br><span class="line"><span class="comment">// å¯è§ï¼Œifè¯­å¥å’Œforè¯­å¥å±äºå—ä½œç”¨åŸŸï¼Œä¸å±äºå‡½æ•°ä½œç”¨åŸŸ</span></span><br></pre></td></tr></table></figure>

<p>ä¸‰è€…çš„åŒºåˆ«ï¼š</p>
<ol>
<li> varå®šä¹‰çš„å˜é‡ï¼Œæ²¡æœ‰å—çš„æ¦‚å¿µï¼Œå¯ä»¥è·¨å—è®¿é—®, ä¸èƒ½è·¨å‡½æ•°è®¿é—®ã€‚</li>
<li> letå®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œä¸èƒ½è·¨å—è®¿é—®ï¼Œä¹Ÿä¸èƒ½è·¨å‡½æ•°è®¿é—®ã€‚</li>
<li> constç”¨æ¥å®šä¹‰å¸¸é‡ï¼Œä½¿ç”¨æ—¶å¿…é¡»åˆå§‹åŒ–(å³å¿…é¡»èµ‹å€¼)ï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œè€Œä¸”ä¸èƒ½ä¿®æ”¹ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å—ä½œç”¨åŸŸ</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="number">3</span>;</span><br><span class="line">  <span class="comment">// c = 4; // æŠ¥é”™</span></span><br><span class="line">  <span class="keyword">var</span> aa;</span><br><span class="line">  <span class="keyword">let</span> bb;</span><br><span class="line">  <span class="comment">// const cc; // æŠ¥é”™</span></span><br><span class="line">  <span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line">  <span class="built_in">console</span>.log(b); <span class="comment">// 2</span></span><br><span class="line">  <span class="built_in">console</span>.log(c); <span class="comment">// 3</span></span><br><span class="line">  <span class="built_in">console</span>.log(aa); <span class="comment">// undefined</span></span><br><span class="line">  <span class="built_in">console</span>.log(bb); <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 1</span></span><br><span class="line"><span class="comment">// console.log(b); // æŠ¥é”™</span></span><br><span class="line"><span class="comment">// console.log(c); // æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°ä½œç”¨åŸŸ</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">let</span> e = <span class="number">6</span>;</span><br><span class="line">  <span class="keyword">const</span> f = <span class="number">7</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(d); <span class="comment">// 5</span></span><br><span class="line">  <span class="built_in">console</span>.log(e); <span class="comment">// 6  </span></span><br><span class="line">  <span class="built_in">console</span>.log(f); <span class="comment">// 7 </span></span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// console.log(d); // æŠ¥é”™</span></span><br><span class="line"><span class="comment">// console.log(e); // æŠ¥é”™</span></span><br><span class="line"><span class="comment">// console.log(f); // æŠ¥é”™</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š<strong>constå®šä¹‰çš„å¯¹è±¡å±æ€§æ˜¯å¦å¯ä»¥æ”¹å˜</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span> : <span class="string">&#x27;jiuke&#x27;</span>,</span><br><span class="line">  <span class="attr">sex</span> : <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">person.name = <span class="string">&#x27;test&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.name)<span class="comment">//personå¯¹è±¡çš„nameå±æ€§ç¡®å®è¢«ä¿®æ”¹äº†</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸ºå¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹çš„ï¼Œpersonä¸­ä¿å­˜çš„ä»…æ˜¯å¯¹è±¡çš„æŒ‡é’ˆï¼Œè¿™å°±æ„å‘³ç€ï¼Œconstä»…ä¿è¯æŒ‡é’ˆä¸å‘ç”Ÿæ”¹å˜ï¼Œä¿®æ”¹å¯¹è±¡çš„å±æ€§ä¸ä¼šæ”¹å˜å¯¹è±¡çš„æŒ‡é’ˆï¼Œæ‰€ä»¥æ˜¯è¢«å…è®¸çš„ã€‚ä¹Ÿå°±æ˜¯è¯´constå®šä¹‰çš„å¼•ç”¨ç±»å‹åªè¦æŒ‡é’ˆä¸å‘ç”Ÿæ”¹å˜ï¼Œå…¶ä»–çš„ä¸è®ºå¦‚ä½•æ”¹å˜éƒ½æ˜¯å…è®¸çš„ã€‚</p>
<p>ç„¶åæˆ‘ä»¬è¯•ç€ä¿®æ”¹ä¸€ä¸‹æŒ‡é’ˆï¼Œè®©personæŒ‡å‘ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæœç„¶æŠ¥é”™</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">   <span class="attr">name</span> : <span class="string">&#x27;jiuke&#x27;</span>,</span><br><span class="line">   <span class="attr">sex</span> : <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">person = &#123;</span><br><span class="line">   <span class="attr">name</span> : <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">   <span class="attr">sex</span> : <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŠ¥é”™</span></span><br></pre></td></tr></table></figure>

<h3 id="4-promise"><a href="#4-promise" class="headerlink" title="4. promise"></a>4. promise</h3><p>promiseç”¨é€”ï¼šå¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚</p>
<p>ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>fulfilled</code>ï¼ˆå·²æˆåŠŸï¼‰å’Œ<code>rejected</code>ï¼ˆå·²å¤±è´¥ï¼‰ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŸºæœ¬ç”¨æ³•ï¼š</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    resolve(value);<span class="comment">//è¡¨ç¤ºå¼‚æ­¥æ“ä½œæˆåŠŸ</span></span><br><span class="line">    reject(error);<span class="comment">//è¡¨ç¤ºå¼‚æ­¥æ“ä½œå¤±è´¥</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//promiseå¸¸ç”¨çš„å‡ ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">//1. å¼‚æ­¥çŠ¶æ€ä¸ºæˆåŠŸæ—¶è°ƒç”¨ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œä¸ºå¤±è´¥æ—¶è°ƒç”¨ç¬¬äºŒä¸ªå‡½æ•°ã€‚thenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å¯é€‰ã€‚</span></span><br><span class="line">promise.then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;&#125;,<span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. å¼‚æ­¥çŠ¶æ€ä¸ºå¤±è´¥æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line">promise.catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. promiseå¼‚æ­¥çŠ¶æ€ä¸ºå¤±è´¥æ—¶æˆ–thenæ–¹æ³•ä¸­æŠ›å‡ºé”™è¯¯éƒ½ä¼šæ‰§è¡Œcatchæ–¹æ³•ã€‚</span></span><br><span class="line">promise.then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;&#125;,<span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. ä¸ç®¡çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚</span></span><br><span class="line">promise.finally(<span class="function">() =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="5-ç”Ÿå‘½å‘¨æœŸ"><a href="#5-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="5. ç”Ÿå‘½å‘¨æœŸ"></a>5. ç”Ÿå‘½å‘¨æœŸ</h3><img src="https://cn.vuejs.org/images/lifecycle.png" alt="img" style="zoom:50%;">

<h3 id="6-æ¨¡ç‰ˆè¯­æ³•"><a href="#6-æ¨¡ç‰ˆè¯­æ³•" class="headerlink" title="6. æ¨¡ç‰ˆè¯­æ³•"></a>6. æ¨¡ç‰ˆè¯­æ³•</h3><h4 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h4><p>æ‰§è¡Œä¸€æ¬¡æ€§æ’å€¼ï¼Œå½“æ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œè¯¥å†…å®¹ä¸ä¼šæ›´æ–°ï¼›å¯èƒ½ä¼šå½±å“è¯¥èŠ‚ç‚¹å…¶ä»–çš„æ•°æ®ç»‘å®š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-once</span>&gt;</span>è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: &#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h4><p>åŒå¤§æ‹¬å·ä¼šå°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬ï¼Œè€Œé HTML ä»£ç ã€‚ä¸ºäº†è¾“å‡ºçœŸæ­£çš„ HTMLï¼Œä½ éœ€è¦ä½¿ç”¨v-html;</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">var rawHtml = &quot;<span class="tag">&lt;<span class="name">span</span>&gt;</span>è¿™æ˜¯ä¸ªä½¿ç”¨v-htmls<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&quot;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Using mustaches: &#123;&#123; rawHtml &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Using v-html directive: <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;rawHtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Attribute"><a href="#Attribute" class="headerlink" title="Attribute"></a><a href="https://cn.vuejs.org/v2/guide/syntax.html#Attribute">Attribute</a></h4><p>Mustache ({}) è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML attribute ä¸Šï¼Œé‡åˆ°è¿™ç§æƒ…å†µåº”è¯¥ä½¿ç”¨ <a href="https://cn.vuejs.org/v2/api/#v-bind"><code>v-bind</code> æŒ‡ä»¤</a>ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;dynamicId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//isButtonDisabled çš„å€¼æ˜¯ nullã€undefined æˆ– falseï¼Œåˆ™ disabled attribute ç”šè‡³ä¸ä¼šè¢«åŒ…å«åœ¨æ¸²æŸ“å‡ºæ¥çš„ <span class="tag">&lt;<span class="name">button</span>&gt;</span> å…ƒç´ ä¸­</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-bind:disabled</span>=<span class="string">&quot;isButtonDisabled&quot;</span>&gt;</span>Button<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¸‰å…ƒè¡¨è¾¾å¼"><a href="#ä¸‰å…ƒè¡¨è¾¾å¼" class="headerlink" title="ä¸‰å…ƒè¡¨è¾¾å¼"></a>ä¸‰å…ƒè¡¨è¾¾å¼</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123; number + 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; ok ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;&#x27;list-&#x27; + id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//è¿™äº›è¡¨è¾¾å¼ä¼šåœ¨æ‰€å± Vue å®ä¾‹çš„æ•°æ®ä½œç”¨åŸŸä¸‹ä½œä¸º JavaScript è¢«è§£æã€‚æœ‰ä¸ªé™åˆ¶å°±æ˜¯ï¼Œæ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«å•ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä¾‹å­éƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</span><br><span class="line"><span class="comment">&lt;!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ --&gt;</span></span><br><span class="line">&#123;&#123; var a = 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ --&gt;</span></span><br><span class="line">&#123;&#123; if (ok) &#123; return message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-æŒ‡ä»¤Directives"><a href="#7-æŒ‡ä»¤Directives" class="headerlink" title="7. æŒ‡ä»¤Directives"></a>7. æŒ‡ä»¤Directives</h3><p>æŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ <code>v-</code> å‰ç¼€çš„ç‰¹æ®Š attributeã€‚æŒ‡ä»¤ attribute çš„å€¼é¢„æœŸæ˜¯<strong>å•ä¸ª JavaScript è¡¨è¾¾å¼</strong> (<code>v-for</code> æ˜¯ä¾‹å¤–æƒ…å†µï¼Œç¨åæˆ‘ä»¬å†è®¨è®º)ã€‚æŒ‡ä»¤çš„èŒè´£æ˜¯ï¼Œå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOMã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//v-if æŒ‡ä»¤å°†æ ¹æ®è¡¨è¾¾å¼ seen çš„å€¼çš„çœŸå‡æ¥æ’å…¥/ç§»é™¤ <span class="tag">&lt;<span class="name">p</span>&gt;</span> å…ƒç´ ã€‚</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><p>ä¸€äº›æŒ‡ä»¤èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªâ€œå‚æ•°â€ï¼Œåœ¨æŒ‡ä»¤åç§°ä¹‹åä»¥å†’å·è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œ<code>v-bind</code> æŒ‡ä»¤å¯ä»¥ç”¨äºå“åº”å¼åœ°æ›´æ–° HTML attribute</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//href æ˜¯å‚æ•°ï¼Œå‘ŠçŸ¥ v-bind æŒ‡ä»¤å°†è¯¥å…ƒç´ çš„ href attribute ä¸è¡¨è¾¾å¼ url çš„å€¼ç»‘å®š</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="åŠ¨æ€å‚æ•°"><a href="#åŠ¨æ€å‚æ•°" class="headerlink" title="åŠ¨æ€å‚æ•°"></a>åŠ¨æ€å‚æ•°</h4><p> 2.6.0 å¼€å§‹ï¼Œå¯ä»¥ç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥çš„ JavaScript è¡¨è¾¾å¼ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤çš„å‚æ•°</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:</span>[<span class="attr">attributeName</span>] = <span class="string">&quot;url&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	è¿™é‡Œçš„attributeNameä¼šè¢«ä½œä¸ºä¸€ä¸ªjavascriptè¡¨è¾¾å¼è¿›è¡ŒåŠ¨æ€èµ‹å€¼ï¼Œæ±‚å¾—çš„å€¼ä¼šä½œä¸ºæœ€ç»ˆçš„å‚æ•°æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="comment">å¦‚æœVUEå®ä¾‹æœ‰ä¸€ä¸ªdata. property. attributeNameï¼Œ å…¶å€¼ä¸ºhrefï¼Œ é‚£ä¹ˆç»‘å®šå°†ç­‰ä»·äºv-bind:href</span></span><br><span class="line"><span class="comment">---&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç»‘å®šå¤„ç†å‡½æ•°ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:</span>[<span class="attr">eventName</span>]=<span class="string">&quot;dosomething&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>å¯¹åŠ¨æ€å‚æ•°çš„å€¼çš„çº¦æŸ</p>
<p>  åŠ¨æ€å‚æ•°é¢„æœŸä¼šæ±‚å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¼‚å¸¸æƒ…å†µä¸‹å€¼ä¸º <code>null</code>ã€‚è¿™ä¸ªç‰¹æ®Šçš„ <code>null</code> å€¼å¯ä»¥è¢«æ˜¾æ€§åœ°ç”¨äºç§»é™¤ç»‘å®šã€‚ä»»ä½•å…¶å®ƒéå­—ç¬¦ä¸²ç±»å‹çš„å€¼éƒ½å°†ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Šã€‚</p>
</li>
<li><p>å¯¹åŠ¨æ€å‚æ•°è¡¨è¾¾å¼çš„çº¦æŸ</p>
<p>  åŠ¨æ€å‚æ•°è¡¨è¾¾å¼æœ‰ä¸€äº›è¯­æ³•çº¦æŸï¼Œå› ä¸ºæŸäº›å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼å’Œå¼•å·ï¼Œæ”¾åœ¨ HTML attribute åé‡Œæ˜¯æ— æ•ˆçš„ã€‚ä¾‹å¦‚ï¼š</p>
</li>
</ul>
<h4 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h4><p>ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰æ˜¯ä»¥åŠè§’å¥å·<code>.</code> æŒ‡æ˜çš„ç‰¹æ®Šåç¼€ï¼Œç”¨äºæŒ‡å‡ºä¸€ä¸ªæŒ‡ä»¤åº”è¯¥ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®šï¼›ä¾‹å¦‚<code> .prevent</code>ä¿®é¥°ç¬¦å‘Šè¯‰v-onæŒ‡ä»¤å¯¹è§¦å‘çš„äº‹ä»¶è°ƒç”¨event.preventDefault();</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span> = <span class="string">&quot;onSubmit&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¼©å†™"><a href="#ç¼©å†™" class="headerlink" title="ç¼©å†™"></a>ç¼©å†™</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¼©å†™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ (2.6.0+) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:</span>[<span class="attr">key</span>]=<span class="string">&quot;url&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ç¼©å†™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åŠ¨æ€å‚æ•°çš„ç¼©å†™ (2.6.0+) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> @[<span class="attr">event</span>]=<span class="string">&quot;doSomething&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>:</code> ä¸ <code>@</code> å¯¹äº attribute åæ¥è¯´éƒ½æ˜¯åˆæ³•å­—ç¬¦ï¼Œåœ¨æ‰€æœ‰æ”¯æŒ Vue çš„æµè§ˆå™¨éƒ½èƒ½è¢«æ­£ç¡®åœ°è§£æã€‚è€Œä¸”ï¼Œå®ƒä»¬ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆæ¸²æŸ“çš„æ ‡è®°ä¸­ã€‚</p>
<h3 id="8-è®¡ç®—å±æ€§"><a href="#8-è®¡ç®—å±æ€§" class="headerlink" title="8. è®¡ç®—å±æ€§"></a>8. è®¡ç®—å±æ€§</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ˜¯æƒ³è¦æ˜¾ç¤ºå˜é‡ <code>message</code> çš„ç¿»è½¬å­—ç¬¦ä¸²ã€‚å½“ä½ æƒ³è¦åœ¨æ¨¡æ¿ä¸­çš„å¤šå¤„åŒ…å«æ­¤ç¿»è½¬å­—ç¬¦ä¸²æ—¶ï¼Œå°±ä¼šæ›´åŠ éš¾ä»¥å¤„ç†ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¯¹äºä»»ä½•å¤æ‚é€»è¾‘ï¼Œä½ éƒ½åº”å½“ä½¿ç”¨<strong>è®¡ç®—å±æ€§</strong></p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Original message: &quot;&#123;&#123; message &#125;&#125;&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Computed reversed message: &quot;&#123;&#123; reversedMessage &#125;&#125;&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#example&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// è®¡ç®—å±æ€§çš„ getter</span></span><br><span class="line">    <span class="attr">reversedMessage</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// `this` æŒ‡å‘ vm å®ä¾‹</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.message.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¡µé¢æ˜¾ç¤ºï¼š</span></span><br><span class="line"><span class="comment">//Original message: &quot;Hello&quot;</span></span><br><span class="line"><span class="comment">//Computed reversed message: &quot;olleH&quot;</span></span><br></pre></td></tr></table></figure>

<p>å£°æ˜äº†ä¸€ä¸ªè®¡ç®—å±æ€§<code>reversedMessage</code>ï¼›æˆ‘ä»¬æä¾›çš„å‡½æ•°å°†ç”¨ä½œproperty <code>vm.reversedMessage</code>çš„getterå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(vm.reversedMessage) <span class="comment">// olleH</span></span><br><span class="line">vm.message = <span class="string">&#x27;Goodbye&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(vm.reversedMessage) <span class="comment">// =&gt; &#x27;eybdooG&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œè‡ªè¡Œä¿®æ”¹ä¾‹å­ä¸­çš„ vmã€‚<code>vm.reversedMessage</code> çš„å€¼å§‹ç»ˆå–å†³äº <code>vm.message</code> çš„å€¼ã€‚</p>
<p>ä½ å¯ä»¥åƒç»‘å®šæ™®é€š property ä¸€æ ·åœ¨æ¨¡æ¿ä¸­ç»‘å®šè®¡ç®—å±æ€§ã€‚Vue çŸ¥é“ <code>vm.reversedMessage</code> ä¾èµ–äº <code>vm.message</code>ï¼Œå› æ­¤å½“ <code>vm.message</code> å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ– <code>vm.reversedMessage</code> çš„ç»‘å®šä¹Ÿä¼šæ›´æ–°ã€‚ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºäº†è¿™ç§ä¾èµ–å…³ç³»ï¼šè®¡ç®—å±æ€§çš„ getter å‡½æ•°æ˜¯æ²¡æœ‰å‰¯ä½œç”¨ (side effect) çš„ã€‚</p>
<h4 id="è®¡ç®—å±æ€§-VS-æ–¹æ³•"><a href="#è®¡ç®—å±æ€§-VS-æ–¹æ³•" class="headerlink" title="è®¡ç®—å±æ€§ VS æ–¹æ³•"></a>è®¡ç®—å±æ€§ VS æ–¹æ³•</h4><p>ä½¿ç”¨è¡¨è¾¾å¼ä¸­è°ƒç”¨æ–¹æ³•åŒæ ·å¯ä»¥è¾¾åˆ°ä¸Šé¢çš„ç»“æœ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Reversed message: &quot;&#123;&#123; reversedMessage() &#125;&#125;&quot;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨ç»„ä»¶ä¸­</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="attr">reversedMessage</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.message.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚ä¸¤ç§æ–¹å¼çš„æœ€ç»ˆç»“æœç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ç„¶è€Œï¼Œä¸åŒçš„æ˜¯<strong>è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„</strong>ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚è¿™å°±æ„å‘³ç€åªè¦ <code>message</code> è¿˜æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¤šæ¬¡è®¿é—® <code>reversedMessage</code> è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>è¿™ä¹ŸåŒæ ·æ„å‘³ç€ä¸‹é¢çš„è®¡ç®—å±æ€§å°†ä¸å†æ›´æ–°ï¼Œå› ä¸º <code>Date.now()</code> ä¸æ˜¯å“åº”å¼ä¾èµ–ï¼š</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  now: <span class="keyword">function</span> <span class="title"></span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Date.now()</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯å½“è§¦å‘é‡æ–°æ¸²æŸ“æ—¶ï¼Œè°ƒç”¨æ–¹æ³•å°†<strong>æ€»ä¼š</strong>å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§çš„è®¡ç®—å±æ€§ <strong>A</strong>ï¼Œå®ƒéœ€è¦éå†ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„å¹¶åšå¤§é‡çš„è®¡ç®—ã€‚ç„¶åæˆ‘ä»¬å¯èƒ½æœ‰å…¶ä»–çš„è®¡ç®—å±æ€§ä¾èµ–äº <strong>A</strong>ã€‚å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæˆ‘ä»¬å°†ä¸å¯é¿å…çš„å¤šæ¬¡æ‰§è¡Œ <strong>A</strong> çš„ getterï¼å¦‚æœä½ ä¸å¸Œæœ›æœ‰ç¼“å­˜ï¼Œè¯·ç”¨æ–¹æ³•æ¥æ›¿ä»£ã€‚</p>
<h4 id="è®¡ç®—å±æ€§-VS-ä¾¦å¬å±æ€§"><a href="#è®¡ç®—å±æ€§-VS-ä¾¦å¬å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§ VS ä¾¦å¬å±æ€§"></a>è®¡ç®—å±æ€§ VS ä¾¦å¬å±æ€§</h4><p>ä¾¦å¬å±æ€§ï¼švueæä¾›äº†ä¸€ç§æ›´é€šç”¨çš„æ–¹å¼æ¥è§‚å¯Ÿå’Œå“åº”vueå®ä¾‹ä¸Šçš„æ•°æ®å˜åŠ¨ï¼›å½“æœ‰ä¸€äº›æ•°æ®éœ€è¦éšç€å…¶ä»–æ•°æ®å˜åŠ¨è€Œå˜åŠ¨æ—¶ï¼›å¾ˆå®¹æ˜“æ»¥ç”¨watch;<strong>é€šå¸¸æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨è®¡ç®—å±æ€§è€Œä¸æ˜¯å‘½ä»¤å¼çš„watchå›è°ƒ</strong>ï¼›</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>&#123;&#123; fullName &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#demo&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Foo&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Bar&#x27;</span>,</span><br><span class="line">    <span class="attr">fullName</span>: <span class="string">&#x27;Foo Bar&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//ä¾¦å¬å±æ€§watch </span></span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.fullName = val + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.fullName = <span class="built_in">this</span>.firstName + <span class="string">&#x27; &#x27;</span> + val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//è®¡ç®—å±æ€§</span></span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="attr">fullName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.lastName</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="è®¡ç®—å±æ€§çš„setter"><a href="#è®¡ç®—å±æ€§çš„setter" class="headerlink" title="è®¡ç®—å±æ€§çš„setter"></a>è®¡ç®—å±æ€§çš„setter</h4><p>è®¡ç®—å±æ€§é»˜è®¤åªæœ‰getterï¼Œè‡ªå·±å¯ä»¥æä¾›ä¸€ä¸ªsetter</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="attr">fullName</span>: &#123;</span><br><span class="line">    <span class="comment">// getter</span></span><br><span class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.lastName</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// setter</span></span><br><span class="line">    <span class="attr">set</span>: <span class="function"><span class="keyword">function</span> (<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> names = newValue.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">      <span class="built_in">this</span>.firstName = names[<span class="number">0</span>]</span><br><span class="line">      <span class="built_in">this</span>.lastName = names[names.length - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å†è¿è¡Œ <code>vm.fullName = &#39;John Doe&#39;</code> æ—¶ï¼Œsetter ä¼šè¢«è°ƒç”¨ï¼Œ<code>vm.firstName</code> å’Œ <code>vm.lastName</code> ä¹Ÿä¼šç›¸åº”åœ°è¢«æ›´æ–°ã€‚</p>
<h3 id="9-ä¾¦å¬å™¨"><a href="#9-ä¾¦å¬å™¨" class="headerlink" title="9. ä¾¦å¬å™¨"></a>9. ä¾¦å¬å™¨</h3><p>å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œwatchæ˜¯æœ€æœ‰ç”¨çš„ï¼›åŒæ—¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¾¦å¬å™¨ï¼›</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;watch-example&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    Ask a yes/no question:</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;question&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; answer &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- å› ä¸º AJAX åº“å’Œé€šç”¨å·¥å…·çš„ç”Ÿæ€å·²ç»ç›¸å½“ä¸°å¯Œï¼ŒVue æ ¸å¿ƒä»£ç æ²¡æœ‰é‡å¤ --&gt;</span><br><span class="line">&lt;!-- æä¾›è¿™äº›åŠŸèƒ½ä»¥ä¿æŒç²¾ç®€ã€‚è¿™ä¹Ÿå¯ä»¥è®©ä½ è‡ªç”±é€‰æ‹©è‡ªå·±æ›´ç†Ÿæ‚‰çš„å·¥å…·ã€‚ --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">var</span> watchExampleVM = <span class="keyword">new</span> Vue(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">el</span>: <span class="string">&#x27;#watch-example&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">question</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">answer</span>: <span class="string">&#x27;I cannot give you an answer until you ask a question!&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">watch</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// å¦‚æœ `question` å‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œ</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">question</span>: <span class="function"><span class="keyword">function</span> (<span class="params">newQuestion, oldQuestion</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">this</span>.answer = <span class="string">&#x27;Waiting for you to stop typing...&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">this</span>.debouncedGetAnswer()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">created</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// `_.debounce` æ˜¯ä¸€ä¸ªé€šè¿‡ Lodash é™åˆ¶æ“ä½œé¢‘ç‡çš„å‡½æ•°ã€‚</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›é™åˆ¶è®¿é—® yesno.wtf/api çš„é¢‘ç‡</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// AJAX è¯·æ±‚ç›´åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•æ‰ä¼šå‘å‡ºã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// `_.debounce` å‡½æ•° (åŠå…¶è¿‘äº² `_.throttle`) çš„çŸ¥è¯†ï¼Œ</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// è¯·å‚è€ƒï¼šhttps://lodash.com/docs#debounce</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">this</span>.debouncedGetAnswer = _.debounce(<span class="built_in">this</span>.getAnswer, <span class="number">500</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">getAnswer</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">if</span> (<span class="built_in">this</span>.question.indexOf(<span class="string">&#x27;?&#x27;</span>) === -<span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.answer = <span class="string">&#x27;Questions usually contain a question mark. ;-)&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">this</span>.answer = <span class="string">&#x27;Thinking...&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">var</span> vm = <span class="built_in">this</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      axios.get(<span class="string">&#x27;https://yesno.wtf/api&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          vm.answer = _.capitalize(response.data.answer)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">//å¼‚å¸¸æ•è·</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          vm.answer = <span class="string">&#x27;Error! Could not reach the API. &#x27;</span> + error</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>watch</code> é€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ (è®¿é—®ä¸€ä¸ª API)ï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„</p>
<h3 id="10-classä¸styleç»‘å®š"><a href="#10-classä¸styleç»‘å®š" class="headerlink" title="10. classä¸styleç»‘å®š"></a>10. classä¸styleç»‘å®š</h3><p>å°† <code>v-bind</code> ç”¨äº <code>class</code> å’Œ <code>style</code> æ—¶ï¼ŒVue.js åšäº†ä¸“é—¨çš„å¢å¼ºã€‚è¡¨è¾¾å¼ç»“æœçš„ç±»å‹é™¤äº†å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ˜¯å¯¹è±¡æˆ–æ•°ç»„</p>
<h4 id="10-1-ç»‘å®šhtml-class"><a href="#10-1-ç»‘å®šhtml-class" class="headerlink" title="10.1 ç»‘å®šhtml class"></a>10.1 ç»‘å®šhtml class</h4><h5 id="10-1-1å¯¹è±¡è¯­æ³•"><a href="#10-1-1å¯¹è±¡è¯­æ³•" class="headerlink" title="10.1.1å¯¹è±¡è¯­æ³•"></a>10.1.1å¯¹è±¡è¯­æ³•</h5><p>æ–¹å¼ä¸€ï¼šå†…è”</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;static&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123; active: isActive, &#x27;text-danger&#x27;: hasError &#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">//data</span><br><span class="line">data: &#123;</span><br><span class="line">  isActive: true,</span><br><span class="line">  hasError: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒï¼šç»‘å®šçš„æ•°æ®å¯¹è±¡ä¸å¿…å†…è”å®šä¹‰åœ¨æ¨¡æ¿é‡Œ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;classObject&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">//vue data</span><br><span class="line">data: &#123;</span><br><span class="line">  classObject: &#123;</span><br><span class="line">    active: true,</span><br><span class="line">    &#x27;text-danger&#x27;: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼ä¸‰ï¼šç»‘å®šä¸€ä¸ªè¿”å›å¯¹è±¡çš„è®¡ç®—å±æ€§ï¼ˆå¸¸ç”¨ï¼‰</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;classObject&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//vue data</span><br><span class="line">data: &#123;</span><br><span class="line">  isActive: true,</span><br><span class="line">  error: null</span><br><span class="line">&#125;,</span><br><span class="line">computed: &#123;</span><br><span class="line">  classObject: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      active: this.isActive &amp;&amp; !this.error,</span><br><span class="line">      &#x27;text-danger&#x27;: this.error &amp;&amp; this.error.type === &#x27;fatal&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="10-1-2-æ•°ç»„è¯­æ³•"><a href="#10-1-2-æ•°ç»„è¯­æ³•" class="headerlink" title="10.1.2 æ•°ç»„è¯­æ³•"></a>10.1.2 æ•°ç»„è¯­æ³•</h5>]]></content>
      <categories>
        <category>æ¶æ„å¸ˆç¬”è®°</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>LockSupportçº¿ç¨‹å·¥å…·ç±»</title>
    <url>/locksupport/</url>
    <content><![CDATA[<h3 id="1-æ¦‚è¦"><a href="#1-æ¦‚è¦" class="headerlink" title="1. æ¦‚è¦"></a>1. æ¦‚è¦</h3><p>LockSupportä½äºjava.util.concurrentï¼ˆç®€ç§°jucï¼‰åŒ…ä¸­ï¼Œæ˜¯ä¸€ä¸ªç¼–ç¨‹å·¥å…·ç±»ï¼Œ ä¸»è¦æ˜¯ä¸ºäº†é˜»å¡å’Œå”¤é†’çº¿ç¨‹ç”¨çš„ã€‚æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œå¯ä»¥è®©çº¿ç¨‹åœ¨ä»»æ„ä½ç½®é˜»å¡ï¼Œä¹Ÿå¯ä»¥åœ¨ä»»æ„ä½ç½®å”¤é†’</p>
<p>ä¸»è¦çš„æ–¹æ³•ï¼š </p>
<ul>
<li>park(é˜»å¡çº¿ç¨‹)  å’Œ </li>
<li>unpark(å¯åŠ¨å”¤é†’çº¿ç¨‹)</li>
</ul>
<p>å…³äºçº¿ç¨‹ç­‰å¾…/å”¤é†’çš„æ–¹æ³•ï¼š</p>
<ul>
<li>æ–¹å¼1ï¼šä½¿ç”¨Objectä¸­çš„wait()æ–¹æ³•è®©çº¿ç¨‹ç­‰å¾…ï¼Œä½¿ç”¨Objectä¸­çš„notify()æ–¹æ³•å”¤é†’çº¿ç¨‹</li>
<li>ä½¿ç”¨jucåŒ…ä¸­Conditionçš„await()æ–¹æ³•è®©çº¿ç¨‹ç­‰å¾…ï¼Œä½¿ç”¨signal()æ–¹æ³•å”¤é†’çº¿ç¨‹</li>
</ul>
<h3 id="2-wait-notify"><a href="#2-wait-notify" class="headerlink" title="2. wait/notify"></a>2. wait/notify</h3><ol>
<li>ç¤ºä¾‹1 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;: &quot;</span>+System.currentTimeMillis()+<span class="string">&quot; start&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    lock.wait();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;: &quot;</span>+System.currentTimeMillis()+<span class="string">&quot; è¢«å”¤é†’&quot;</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.setName(<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//ä¼‘çœ 5ç§’</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (lock)&#123;</span><br><span class="line">            lock.notify();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 è¾“å‡ºï¼š <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t1: 1667620040963 start</span><br><span class="line">t1: 1667620045967 è¢«å”¤é†’</span><br></pre></td></tr></table></figure>
 t1 çº¿ç¨‹è°ƒç”¨<code>lock.wait()</code>æ–¹æ³•è®©t1çº¿ç¨‹ç­‰å¾…ï¼Œä¸»çº¿ç¨‹ä¼‘çœ 5såï¼Œè°ƒç”¨<code>lock.notify()</code>æ–¹æ³•å”¤é†’t1çº¿ç¨‹ï¼Œç„¶åè¾“å‡ºä¿¡æ¯ï¼Œç¨‹åºæ­£å¸¸é€€å‡ºã€‚</li>
</ol>
<ol start="2">
<li><p>ç¤ºä¾‹2</p>
<p>å¦‚æœå°†ä¸Šé¢ä»£ç å—ä¸­çš„ä¸¤ä¸ª<code>synchronized</code>å»æ‰ï¼Œå‘ç°è°ƒç”¨<code>wait()</code>æ–¹æ³•å’Œ<code>notify()</code>æ–¹æ³•éƒ½ä¼šæŠ¥é”™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;: &quot;</span> + System.currentTimeMillis() + <span class="string">&quot; start&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                lock.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;: &quot;</span> + System.currentTimeMillis() + <span class="string">&quot; è¢«å”¤é†’&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        t1.setName(<span class="string">&quot;thread1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//ä¼‘çœ 5ç§’</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">        lock.notify();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">thread1: 1667624638968 start</span><br><span class="line">Exception in thread &quot;thread1&quot; java.lang.IllegalMonitorStateException</span><br><span class="line">    at java.lang.Object.wait(Native Method)</span><br><span class="line">    at java.lang.Object.wait(Object.java:502)</span><br><span class="line">    at org.example.ObjectDemo.lambda$main$0(ObjectDemo.java:13)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalMonitorStateException</span><br><span class="line">    at java.lang.Object.notify(Native Method)</span><br><span class="line">    at org.example.ObjectDemo.main(ObjectDemo.java:27)</span><br></pre></td></tr></table></figure>
<p><strong>åŸå› ï¼š Objectç±»ä¸­çš„waitã€notifyã€notifyAllç”¨äºçº¿ç¨‹ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•ï¼Œéƒ½å¿…é¡»åœ¨åŒæ­¥ä»£ç å—ä¸­è¿è¡Œï¼ˆå¿…é¡»ä½¿ç”¨å…³é”®å­—synchronizedï¼‰</strong></p>
</li>
</ol>
<ol start="3">
<li><p>ç¤ºä¾‹3 </p>
<p>å”¤é†’æ–¹æ³•åœ¨ç­‰å¾…æ–¹æ³•ä¹‹å‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;: &quot;</span>+System.currentTimeMillis()+<span class="string">&quot; start&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    lock.wait();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">&quot;: &quot;</span>+System.currentTimeMillis()+<span class="string">&quot; è¢«å”¤é†’&quot;</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.setName(<span class="string">&quot;thread1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//ä¼‘çœ 5ç§’</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (lock)&#123;</span><br><span class="line">            lock.notify();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;lock.notify æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lock.notify æ‰§è¡Œå®Œæ¯•</span><br><span class="line">thread1: 1667625571660 start</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºä¸Šé¢2è¡Œä¹‹åï¼Œç¨‹åºä¸€ç›´æ— æ³•ç»“æŸï¼Œt1çº¿ç¨‹è°ƒç”¨<code>wait()</code>æ–¹æ³•ä¹‹å‰å…ˆè°ƒç”¨äº†<code>notify()</code>æ–¹æ³•ï¼Œå¯¼è‡´ç­‰å¾…çš„çº¿ç¨‹æ— æ³•è¢«å”¤é†’äº†<br><strong>å”¤é†’æ–¹æ³•åœ¨ç­‰å¾…æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œçº¿ç¨‹æ— æ³•è¢«å”¤é†’</strong>ï¼Œå°†ä¸Šé¢ä¼‘çœ 1sçš„æ—¶é—´æ”¹æˆå¤§äºçº¿ç¨‹ä¸­ä¼‘çœ çš„æ—¶é—´å³å¯ï¼›</p>
</li>
</ol>
<p>å…³äºObjectç±»ä¸­çš„ç”¨æˆ·çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li><p>wait()/notify()/notifyAll()æ–¹æ³•éƒ½å¿…é¡»æ”¾åœ¨åŒæ­¥ä»£ç ï¼ˆå¿…é¡»åœ¨synchronizedå†…éƒ¨æ‰§è¡Œï¼‰ä¸­æ‰§è¡Œï¼Œéœ€è¦å…ˆè·å–é”</p>
</li>
<li><p>çº¿ç¨‹å”¤é†’çš„æ–¹æ³•ï¼ˆnotifyã€notifyAllï¼‰éœ€è¦åœ¨ç­‰å¾…çš„æ–¹æ³•ï¼ˆwaitï¼‰ä¹‹åæ‰§è¡Œï¼Œç­‰å¾…ä¸­çš„çº¿ç¨‹æ‰å¯èƒ½ä¼šè¢«å”¤é†’ï¼Œå¦åˆ™æ— æ³•å”¤é†’</p>
</li>
</ol>
<h3 id="3-conditionå®ç°çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’"><a href="#3-conditionå®ç°çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’" class="headerlink" title="3. conditionå®ç°çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’"></a>3. conditionå®ç°çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’</h3><ol>
<li><p>ç¤ºä¾‹1</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConditionDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">static</span> Condition condition = lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + System.currentTimeMillis() + <span class="string">&quot; start&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    condition.await();  <span class="comment">//è¿›å…¥ç­‰å¾…</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + System.currentTimeMillis() + <span class="string">&quot; è¢«å”¤é†’&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.setName(<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//ä¼‘çœ 5ç§’</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            condition.signal(); <span class="comment">//å”¤é†’ t1çº¿ç¨‹</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t1:1667712939347 start</span><br><span class="line">t1:1667712944350 è¢«å”¤é†’</span><br></pre></td></tr></table></figure>
<p>t1 çº¿ç¨‹åˆ¶åŠ¨ä¹‹åï¼Œè°ƒç”¨<code>condition.await()</code>æ–¹æ³•å°†çº¿ç¨‹å¤„äºç­‰å¾…ä¸­ï¼Œä¸»çº¿ç¨‹ä¼‘çœ 5ç§’ä¹‹åè°ƒç”¨<code>condition.signal()</code>æ–¹æ³•å°†t1çº¿ç¨‹å”¤é†’ï¼›</p>
</li>
<li><p>ç¤ºä¾‹2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConditionDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">static</span> Condition condition = lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + System.currentTimeMillis() + <span class="string">&quot; start&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    condition.await();  <span class="comment">//è¿›å…¥ç­‰å¾…</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + System.currentTimeMillis() + <span class="string">&quot; è¢«å”¤é†’&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.setName(<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//ä¼‘çœ 5ç§’</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">        condition.signal(); <span class="comment">//å”¤é†’ t1çº¿ç¨‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t1:1667713155895 start</span><br><span class="line">Exception in thread &quot;t1&quot; java.lang.IllegalMonitorStateException</span><br><span class="line">    at java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:151)</span><br><span class="line">    at java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1261)</span><br><span class="line">    at java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:457)</span><br><span class="line">    at org.example.ConditionDemo.lambda$main$0(ConditionDemo.java:23)</span><br><span class="line">    at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalMonitorStateException</span><br><span class="line">    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.signal(AbstractQueuedSynchronizer.java:1939)</span><br><span class="line">    at org.example.ConditionDemo.main(ConditionDemo.java:30)</span><br></pre></td></tr></table></figure>
<p>æœ‰å¼‚å¸¸å‘ç”Ÿï¼Œ condition.await();å’Œ condition.signal();éƒ½è§¦å‘äº† IllegalMonitorStateExceptionå¼‚å¸¸ã€‚<br><strong>åŸå› ï¼šè°ƒç”¨conditionä¸­çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•çš„å‰ææ˜¯å¿…é¡»è¦å…ˆè·å–lockçš„é”ã€‚</strong></p>
</li>
<li><p>ç¤ºä¾‹3</p>
<p>å”¤é†’ä»£ç åœ¨ç­‰å¾…ä¹‹å‰æ‰§è¡Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConditionDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">static</span> Condition condition = lock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;è¿›å…¥çº¿ç¨‹t1&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                lock.lock();</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + System.currentTimeMillis() + <span class="string">&quot; start&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    condition.await();  <span class="comment">//è¿›å…¥ç­‰å¾…</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + System.currentTimeMillis() + <span class="string">&quot; è¢«å”¤é†’&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.setName(<span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        <span class="comment">//ä¼‘çœ 5ç§’</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        lock.lock();</span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           condition.signal(); <span class="comment">//å”¤é†’ t1çº¿ç¨‹</span></span><br><span class="line">       &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">           lock.unlock();</span><br><span class="line">       &#125;</span><br><span class="line">        System.out.println(System.currentTimeMillis() +<span class="string">&quot; condition.signal;æ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¿›å…¥çº¿ç¨‹t1</span><br><span class="line">1667714134893 condition.signal;æ‰§è¡Œå®Œæ¯•</span><br><span class="line">t1:1667714138893 start</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºä¸Šé¢2è¡Œä¹‹åï¼Œç¨‹åºæ— æ³•ç»“æŸï¼Œä»£ç ç»“åˆè¾“å‡ºå¯ä»¥çœ‹å‡ºsignal()æ–¹æ³•åœ¨await()æ–¹æ³•ä¹‹å‰æ‰§è¡Œçš„ï¼Œæœ€ç»ˆt1çº¿ç¨‹æ— æ³•è¢«å”¤é†’ï¼Œå¯¼è‡´ç¨‹åºæ— æ³•ç»“æŸã€‚</p>
</li>
</ol>
<p>å…³äºConditionä¸­æ–¹æ³•ä½¿ç”¨æ€»ç»“ï¼š</p>
<ul>
<li><p>ä½¿ç”¨Conditionä¸­çš„çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’æ–¹æ³•ä¹‹å‰ï¼Œéœ€è¦å…ˆè·å–é”ã€‚å¦è€…ä¼šæŠ¥ IllegalMonitorStateExceptionå¼‚å¸¸</p>
</li>
<li><p>signal()æ–¹æ³•å…ˆäºawait()æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œçº¿ç¨‹æ— æ³•è¢«å”¤é†’</p>
</li>
</ul>
<h4 id="Objectå’ŒConditionçš„å±€é™æ€§"><a href="#Objectå’ŒConditionçš„å±€é™æ€§" class="headerlink" title="Objectå’ŒConditionçš„å±€é™æ€§"></a>Objectå’ŒConditionçš„å±€é™æ€§</h4><p>Objectå’ŒConditionçš„å±€é™æ€§<br>å…³äºObjectå’ŒCondtionä¸­çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’çš„å±€é™æ€§ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><p>2ç§æ–¹å¼ä¸­çš„è®©çº¿ç¨‹ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•èƒ½å¤Ÿæ‰§è¡Œçš„å…ˆå†³æ¡ä»¶æ˜¯ï¼šçº¿ç¨‹éœ€è¦å…ˆè·å–é”</p>
</li>
<li><p>å”¤é†’æ–¹æ³•éœ€è¦åœ¨ç­‰å¾…æ–¹æ³•ä¹‹åè°ƒç”¨ï¼Œçº¿ç¨‹æ‰èƒ½å¤Ÿè¢«å”¤é†’</p>
</li>
</ol>
<p>å…³äºè¿™2ç‚¹ï¼ŒLockSupportéƒ½ä¸éœ€è¦ï¼Œå°±èƒ½å®ç°çº¿ç¨‹çš„ç­‰å¾…å’Œå”¤é†’ã€‚ä¸‹é¢æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹LockSupportç±»ã€‚</p>
<h3 id="4-LockSupport"><a href="#4-LockSupport" class="headerlink" title="4. LockSupport"></a>4. LockSupport</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æºç </span></span><br><span class="line"><span class="keyword">package</span> java.util.concurrent.locks;</span><br><span class="line"><span class="keyword">import</span> sun.misc.Unsafe;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockSupport</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LockSupport</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">// Cannot be instantiated.</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setBlocker</span><span class="params">(Thread t, Object arg)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Even though volatile, hotspot doesn&#x27;t need a write barrier here.</span></span><br><span class="line">        UNSAFE.putObject(t, parkBlockerOffset, arg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> thread the thread to unpark, or &#123;<span class="doctag">@code</span> null&#125;, in which case</span></span><br><span class="line"><span class="comment">     *        this operation has no effect</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unpark</span><span class="params">(Thread thread)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (thread != <span class="keyword">null</span>)</span><br><span class="line">            UNSAFE.unpark(thread);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é˜»å¡å½“å‰çº¿ç¨‹</span></span><br><span class="line"><span class="comment">     * blockeræ˜¯ç”¨æ¥è®°å½•çº¿ç¨‹è¢«é˜»å¡æ—¶è¢«è°é˜»å¡çš„ã€‚ç”¨äºçº¿ç¨‹ç›‘æ§å’Œåˆ†æå·¥å…·æ¥å®šä½åŸå› çš„ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> blocker the synchronization object responsible for this</span></span><br><span class="line"><span class="comment">     *        thread parking</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">park</span><span class="params">(Object blocker)</span> </span>&#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">        <span class="comment">//setBlockerä½œç”¨æ˜¯è®°å½•tçº¿ç¨‹æ˜¯è¢«brokeré˜»å¡çš„</span></span><br><span class="line">        setBlocker(t, blocker);</span><br><span class="line">        <span class="comment">//UNSAFEæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç±»ï¼Œä»–çš„çš„æ“ä½œæ˜¯åŸºäºåº•å±‚çš„</span></span><br><span class="line">        UNSAFE.park(<span class="keyword">false</span>, <span class="number">0L</span>);</span><br><span class="line">        setBlocker(t, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æš‚åœå½“å‰çº¿ç¨‹ï¼Œæœ‰è¶…æ—¶æ—¶é—´</span></span><br><span class="line"><span class="comment">     * blockeræ˜¯ç”¨æ¥è®°å½•çº¿ç¨‹è¢«é˜»å¡æ—¶è¢«è°é˜»å¡çš„ã€‚ç”¨äºçº¿ç¨‹ç›‘æ§å’Œåˆ†æå·¥å…·æ¥å®šä½åŸå› çš„ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> blocker the synchronization object responsible for this</span></span><br><span class="line"><span class="comment">     *        thread parking</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nanos the maximum number of nanoseconds to wait</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">parkNanos</span><span class="params">(Object blocker, <span class="keyword">long</span> nanos)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nanos &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            Thread t = Thread.currentThread();</span><br><span class="line">            setBlocker(t, blocker);</span><br><span class="line">            UNSAFE.park(<span class="keyword">false</span>, nanos);</span><br><span class="line">            setBlocker(t, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æš‚åœå½“å‰çº¿ç¨‹ï¼ŒçŸ¥é“æŸä¸ªæ—¶é—´</span></span><br><span class="line"><span class="comment">     * blockeræ˜¯ç”¨æ¥è®°å½•çº¿ç¨‹è¢«é˜»å¡æ—¶è¢«è°é˜»å¡çš„ã€‚ç”¨äºçº¿ç¨‹ç›‘æ§å’Œåˆ†æå·¥å…·æ¥å®šä½åŸå› çš„ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> blocker the synchronization object responsible for this</span></span><br><span class="line"><span class="comment">     *        thread parking</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> deadline the absolute time, in milliseconds from the Epoch,</span></span><br><span class="line"><span class="comment">     *        to wait until</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">parkUntil</span><span class="params">(Object blocker, <span class="keyword">long</span> deadline)</span> </span>&#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">        setBlocker(t, blocker);</span><br><span class="line">        UNSAFE.park(<span class="keyword">true</span>, deadline);</span><br><span class="line">        setBlocker(t, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the blocker object supplied to the most recent</span></span><br><span class="line"><span class="comment">     * invocation of a park method that has not yet unblocked, or null</span></span><br><span class="line"><span class="comment">     * if not blocked.  The value returned is just a momentary</span></span><br><span class="line"><span class="comment">     * snapshot -- the thread may have since unblocked or blocked on a</span></span><br><span class="line"><span class="comment">     * different blocker object.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> t the thread</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the blocker</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> NullPointerException if argument is null</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 1.6</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBlocker</span><span class="params">(Thread t)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</span><br><span class="line">        <span class="keyword">return</span> UNSAFE.getObjectVolatile(t, parkBlockerOffset);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ— æœŸé™æš‚åœå½“å‰çº¿ç¨‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">park</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UNSAFE.park(<span class="keyword">false</span>, <span class="number">0L</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æš‚åœå½“å‰çº¿ç¨‹ï¼Œä¸è¿‡æœ‰è¶…æ—¶æ—¶é—´é™åˆ¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">parkNanos</span><span class="params">(<span class="keyword">long</span> nanos)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nanos &gt; <span class="number">0</span>)</span><br><span class="line">            UNSAFE.park(<span class="keyword">false</span>, nanos);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æš‚åœå½“å‰çº¿ç¨‹ï¼ŒçŸ¥é“æŸä¸ªæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> deadline æš‚åœç»“æŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">parkUntil</span><span class="params">(<span class="keyword">long</span> deadline)</span> </span>&#123;</span><br><span class="line">        UNSAFE.park(<span class="keyword">true</span>, deadline);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the pseudo-randomly initialized or updated secondary seed.</span></span><br><span class="line"><span class="comment">     * Copied from ThreadLocalRandom due to package access restrictions.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">nextSecondarySeed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> r;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">        <span class="keyword">if</span> ((r = UNSAFE.getInt(t, SECONDARY)) != <span class="number">0</span>) &#123;</span><br><span class="line">            r ^= r &lt;&lt; <span class="number">13</span>;   <span class="comment">// xorshift</span></span><br><span class="line">            r ^= r &gt;&gt;&gt; <span class="number">17</span>;</span><br><span class="line">            r ^= r &lt;&lt; <span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((r = java.util.concurrent.ThreadLocalRandom.current().nextInt()) == <span class="number">0</span>)</span><br><span class="line">            r = <span class="number">1</span>; <span class="comment">// avoid zero</span></span><br><span class="line">        UNSAFE.putInt(t, SECONDARY, r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Hotspot implementation via intrinsics API</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> sun.misc.Unsafe UNSAFE;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> parkBlockerOffset;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> SEED;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> PROBE;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> SECONDARY;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            UNSAFE = sun.misc.Unsafe.getUnsafe();</span><br><span class="line">            Class&lt;?&gt; tk = Thread.class;</span><br><span class="line">            parkBlockerOffset = UNSAFE.objectFieldOffset</span><br><span class="line">                (tk.getDeclaredField(<span class="string">&quot;parkBlocker&quot;</span>));</span><br><span class="line">            SEED = UNSAFE.objectFieldOffset</span><br><span class="line">                (tk.getDeclaredField(<span class="string">&quot;threadLocalRandomSeed&quot;</span>));</span><br><span class="line">            PROBE = UNSAFE.objectFieldOffset</span><br><span class="line">                (tk.getDeclaredField(<span class="string">&quot;threadLocalRandomProbe&quot;</span>));</span><br><span class="line">            SECONDARY = UNSAFE.objectFieldOffset</span><br><span class="line">                (tk.getDeclaredField(<span class="string">&quot;threadLocalRandomSecondarySeed&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123; <span class="keyword">throw</span> <span class="keyword">new</span> Error(ex); &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="4-ä¸wait-notifyå¯¹æ¯”"><a href="#4-ä¸wait-notifyå¯¹æ¯”" class="headerlink" title="4. ä¸wait / notifyå¯¹æ¯”"></a>4. ä¸wait / notifyå¯¹æ¯”</h3><p>LockSupportæ˜¯ç”¨æ¥é˜»å¡å’Œç¯çº¿çº¿ç¨‹çš„ï¼Œwait/notifyåŒæ ·ä¹Ÿæ˜¯ï¼Œé‚£ä¹ˆä¸¤è€…çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>waitå’Œnotifyéƒ½æ˜¯Objectä¸­çš„æ–¹æ³•ï¼Œåœ¨è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å‰å¿…é¡»è·å¾—é”å¯¹è±¡ï¼Œä½†æ˜¯parkä¸éœ€è¦è·å–æŸä¸ªå¯¹è±¡çš„é”å°±å¯ä»¥é”ä½çº¿ç¨‹</li>
<li>notifyåªèƒ½éšæœºé€‰æ‹©ä¸€ä¸ªçº¿ç¨‹å”¤é†’ï¼Œæ— æ³•å”¤é†’æŒ‡å®šçš„çº¿ç¨‹ï¼Œunparkå¯ä»¥å”¤é†’ä¸€ä¸ªæŒ‡å®šçš„çº¿ç¨‹</li>
</ul>
<h3 id="5-LockSupportä½¿ç”¨"><a href="#5-LockSupportä½¿ç”¨" class="headerlink" title="5. LockSupportä½¿ç”¨"></a>5. LockSupportä½¿ç”¨</h3><h4 id="5-1-å…ˆinterruptåœ¨park"><a href="#5-1-å…ˆinterruptåœ¨park" class="headerlink" title="5.1 å…ˆinterruptåœ¨park"></a>5.1 å…ˆinterruptåœ¨park</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockSupportTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span>  <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;è¿›å…¥çº¿ç¨‹&quot;</span>);</span><br><span class="line">            LockSupport.park();</span><br><span class="line">            System.out.println(<span class="string">&quot;è¿è¡Œç»“æŸ&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ˜¯å¦ä¸­æ–­ï¼š&quot;</span>+Thread.currentThread().isInterrupted());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyThread thread = <span class="keyword">new</span> MyThread();</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹å¯åŠ¨äº†ï¼Œä½†æ˜¯åœ¨å†…éƒ¨è¿›è¡Œäº†park&quot;</span>);</span><br><span class="line">        thread.interrupt();</span><br><span class="line">        System.out.println(<span class="string">&quot;main çº¿ç¨‹ç»“æŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡º</span></span><br><span class="line"><span class="comment">//       çº¿ç¨‹å¯åŠ¨äº†ï¼Œä½†æ˜¯åœ¨å†…éƒ¨è¿›è¡Œäº†park</span></span><br><span class="line"><span class="comment">//       main çº¿ç¨‹ç»“æŸ</span></span><br><span class="line"><span class="comment">//       Thread-0è¿›å…¥çº¿ç¨‹</span></span><br><span class="line"><span class="comment">//       è¿è¡Œç»“æŸ</span></span><br></pre></td></tr></table></figure>
<h4 id="5-2-å…ˆparkåœ¨interrupt"><a href="#5-2-å…ˆparkåœ¨interrupt" class="headerlink" title="5.2 å…ˆparkåœ¨interrupt"></a>5.2 å…ˆparkåœ¨interrupt</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span>  <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(getName() + <span class="string">&quot;è¿›å…¥çº¿ç¨‹&quot;</span>);</span><br><span class="line">        LockSupport.park();</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿è¡Œç»“æŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment"> * çº¿ç¨‹å¯åŠ¨äº†ï¼Œä½†æ˜¯åœ¨å†…éƒ¨è¿›è¡Œäº†park</span></span><br><span class="line"><span class="comment"> * main çº¿ç¨‹ç»“æŸ</span></span><br><span class="line"><span class="comment"> * Thread-0è¿›å…¥çº¿ç¨‹</span></span><br><span class="line"><span class="comment"> * è¿è¡Œç»“æŸ</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h3 id="6-è¶£å‘³é¢˜"><a href="#6-è¶£å‘³é¢˜" class="headerlink" title="6. è¶£å‘³é¢˜"></a>6. è¶£å‘³é¢˜</h3><p>ç”¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè¾“å‡ºå­—æ¯ï¼Œä¸€ä¸ªè¾“å‡ºæ•°å­—äº¤æ›¿è¾“å‡ºå¦‚ï¼š1A2B3C4Dâ€¦</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDemoTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Thread t1 = <span class="keyword">null</span>, t2 = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] a = <span class="string">&quot;1234567&quot;</span>.toCharArray();</span><br><span class="line">        <span class="keyword">char</span>[] b = <span class="string">&quot;ABCDEFG&quot;</span>.toCharArray();</span><br><span class="line"></span><br><span class="line">        t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> i : a) &#123;</span><br><span class="line">                System.out.print(i);</span><br><span class="line">                LockSupport.unpark(t2);</span><br><span class="line">                LockSupport.park();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;t1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> i : b) &#123;</span><br><span class="line">                LockSupport.park();</span><br><span class="line">                System.out.print(i);</span><br><span class="line">                LockSupport.unpark(t1);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="string">&quot;t1&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š  1A2B3C4D5E6F7G</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨è‡ªæ—‹é”ä¹Ÿå¯ä»¥å®ç°ä¸Šé¢çš„ç»“æœ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CasTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰æšä¸¾ï¼ŒåŒ…å«ä¸¤ä¸ªå˜é‡</span></span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">ReadyToRun</span></span>&#123;T1, T2&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">volatile</span> ReadyToRun r = ReadyToRun.T1;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span>[] a = <span class="string">&quot;1234567&quot;</span>.toCharArray();</span><br><span class="line">        <span class="keyword">char</span>[] b = <span class="string">&quot;ABCDEFG&quot;</span>.toCharArray();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> c : a)&#123;</span><br><span class="line">                <span class="comment">//å½“rä¸ä¸ºT1æ—¶ï¼Œ ç©ºè½¬å ç€cpuç­‰å¾…ï¼Œç„¶åè¾“å‡ºå­—ç¬¦ï¼Œå°†rçš„å€¼è®¾ç½®ä¸ºT2</span></span><br><span class="line">                <span class="keyword">while</span> (r != ReadyToRun.T1)&#123;&#125;</span><br><span class="line">                System.out.print(c+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                r = ReadyToRun.T2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;t1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> c : b)&#123;</span><br><span class="line">                <span class="keyword">while</span> (r != ReadyToRun.T2)&#123;&#125;</span><br><span class="line">                System.out.print(c+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                r = ReadyToRun.T1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="string">&quot;t2&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>thread</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸è§çš„æ¥å£æµ‹è¯•å·¥å…·</title>
    <url>/swagger/</url>
    <content><![CDATA[<h2 id="1-Swagger"><a href="#1-Swagger" class="headerlink" title="1. Swagger"></a>1. Swagger</h2><p>Swagger æ˜¯ä¸€ä¸ªè§„èŒƒä¸”å®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ– RESTful é£æ ¼çš„ Web æœåŠ¡ã€‚<br>Swagger çš„ç›®æ ‡æ˜¯å¯¹ REST API å®šä¹‰ä¸€ä¸ªæ ‡å‡†ä¸”å’Œè¯­è¨€æ— å…³çš„æ¥å£ï¼Œå¯ä»¥è®©äººå’Œè®¡ç®—æœºæ‹¥æœ‰æ— é¡»è®¿é—®æºç ã€æ–‡æ¡£æˆ–ç½‘ç»œæµé‡ç›‘æµ‹å°±å¯ä»¥å‘ç°å’Œç†è§£æœåŠ¡çš„èƒ½åŠ›ã€‚</p>
<p>é™æ€çš„swaggerè·Ÿä¸ä¸Šé¢‘ç¹å˜æ›´çš„ä»£ç ï¼Œå®¹æ˜“å‡ºç°ä»¥ä¸‹é—®é¢˜</p>
<ul>
<li>â€œä¸ºä»€ä¹ˆæ”¹äº†è¿™ä¸ªæ²¡å‘Šè¯‰æˆ‘â€ </li>
<li>â€œå®é™…åŠŸèƒ½å’Œæ–‡æ¡£ä¸Šè¯´çš„ä¸ä¸€æ ·å•Šâ€</li>
</ul>
<p>è¿™æ ·ä¼šå¸¦æ¥çš„é—®é¢˜æ˜¯ï¼š</p>
<ol>
<li>Swaggerï¼Œpostmanï¼ŒMockJSåªèƒ½å®Œæˆè½¯ä»¶ç ”å‘æµç¨‹ä¸­æŸä¸ªç¯èŠ‚çš„åŠŸèƒ½ï¼Œé€ æˆå®Œæˆæ¥å£è®¾è®¡ï¼Œæ–‡æ¡£ç¼–å†™ï¼Œè°ƒè¯•ï¼Œæµ‹è¯•éªŒè¯ç­‰å·¥ä½œéœ€è¦ä½¿ç”¨å¥½å‡ ä¸ªå·¥å…·ï¼›</li>
<li>æ›´éº»çƒ¦çš„æ˜¯è¿™äº›å·¥å…·æ•°æ®æ ¼å¼ä¸äº’é€šï¼Œæ— æ³•äº’ç›¸å¯¼å…¥ï¼Œé€ æˆç”¨Swaggerå®šä¹‰å’Œç¼–å†™å®Œæˆæ¥å£åï¼Œåœ¨Postmanï¼ŒMockJSï¼ŒJmeterç­‰å·¥å…·è¿˜è¦å†å»æ‰‹åŠ¨å¡«å†™ä¸€éæ‰èƒ½å¼€å§‹å·¥ä½œï¼Œå¢åŠ äº†æ— æ„ä¹‰çš„å·¥ä½œé‡ã€‚</li>
<li>æ²Ÿé€šæˆæœ¬æ€»æ˜¯è¢«å¿½ç•¥ä¸è®¡ï¼Œä½†å®é™…ä¸Šä¸ä»…å æ®äº†å¾ˆå¤§æ—¶é—´ï¼Œå„ç§æ²Ÿé€šä¸åŠæ—¶ã€æ²Ÿé€šä¸åˆ°ä½è¿˜éå¸¸è®©äººå¿ƒç´¯ã€‚</li>
<li>è€æ¿çš„éœ€æ±‚æ¥å¾—æ€¥ï¼Œè€æ¿çš„éœ€æ±‚å˜å¾—å¿«ï¼Œå„ç§ä»£ç ä¿®æ”¹å’Œå˜æ›´éš¾ä»¥åŠæ—¶é€šçŸ¥å’ŒåŒæ­¥åˆ°å›¢é˜Ÿæˆå‘˜æ‰‹ä¸­ã€‚</li>
</ol>
<h2 id="2-å¸¸è§çš„å¯è§†åŒ–RestFulé£æ ¼çš„æœåŠ¡"><a href="#2-å¸¸è§çš„å¯è§†åŒ–RestFulé£æ ¼çš„æœåŠ¡" class="headerlink" title="2. å¸¸è§çš„å¯è§†åŒ–RestFulé£æ ¼çš„æœåŠ¡"></a>2. å¸¸è§çš„å¯è§†åŒ–RestFulé£æ ¼çš„æœåŠ¡</h2><ul>
<li>springfox-swagger2</li>
<li>springdoc</li>
<li>Apifoxï¼ˆæ¥å£æµ‹è¯•å·¥å…·ï¼Œéé›†æˆåœ¨é¡¹ç›®ä¸­postmanåŠ å¼ºå‡çº§ç‰ˆï¼‰</li>
</ul>
<h2 id="3-å„ä¸ªå·¥å…·çš„ä½¿ç”¨ä»¥åŠé£æ ¼"><a href="#3-å„ä¸ªå·¥å…·çš„ä½¿ç”¨ä»¥åŠé£æ ¼" class="headerlink" title="3. å„ä¸ªå·¥å…·çš„ä½¿ç”¨ä»¥åŠé£æ ¼"></a>3. å„ä¸ªå·¥å…·çš„ä½¿ç”¨ä»¥åŠé£æ ¼</h2><p>ä½¿ç”¨Springbooté¡¹ç›®åˆ†åˆ«é›†æˆå„ä¸ªç»„ä»¶ï¼Œçœ‹ä¸‹å…·ä½“çš„å®ç°æ•ˆæœï¼›</p>
<h3 id="3-1-springfox-swagger2"><a href="#3-1-springfox-swagger2" class="headerlink" title="3.1 springfox-swagger2"></a>3.1 springfox-swagger2</h3><ol>
<li><p>å¼•å…¥ä¾èµ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.10</span><span class="number">.5</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;<span class="number">2.9</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;knife4j-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;<span class="number">2.0</span><span class="number">.8</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™é…ç½®ç±»</p>
<ul>
<li>SwaggerConfigurationç±»  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2WebMvc</span></span><br><span class="line"><span class="meta">@EnableKnife4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.application.name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String applicationName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(value = &quot;defaultApi&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">defaultApi2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//è®¾ç½®å¤„ç†è¯·æ±‚çš„åŒ…ï¼Œæˆ‘çš„controllerç±»éƒ½åœ¨com.yugb.controllerä¸­</span></span><br><span class="line">        Predicate&lt;RequestHandler&gt; apiPackage = RequestHandlerSelectors.basePackage(<span class="string">&quot;com.yugb.controller&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Docket docket = <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(<span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                        .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">                        .contact(<span class="keyword">new</span> Contact(<span class="string">&quot;xiaoyuge&quot;</span>,<span class="string">&quot;123&quot;</span>, <span class="string">&quot;12342qq.com&quot;</span>))</span><br><span class="line">                        .title(applicationName + <span class="string">&quot; æ–‡æ¡£ä¸­å¿ƒ&quot;</span>)</span><br><span class="line">                        .description(<span class="string">&quot;&lt;div style=&#x27;font-size:15px;&#x27;&gt;&quot;</span> + applicationName + <span class="string">&quot; RESTful APIs&lt;/div&gt;&quot;</span>)</span><br><span class="line">                        .build())</span><br><span class="line">                <span class="comment">//åˆ†ç»„åç§°</span></span><br><span class="line">                .groupName(<span class="string">&quot;2.Xç‰ˆæœ¬&quot;</span>)</span><br><span class="line">                .select()</span><br><span class="line">                <span class="comment">//è¿™é‡ŒæŒ‡å®šControlleræ‰«æåŒ…è·¯å¾„</span></span><br><span class="line">                .apis(apiPackage)</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> docket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>SwaggerWebMvcConfigurer ç±»  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerWebMvcConfigurer</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;doc.html&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>æ·»åŠ æ³¨è§£</p>
<p>æˆ‘ä»¬æ¥å£æ–‡æ¡£çš„ç›´æ¥æè¿°ä¸»è¦å°±æ˜¯åœ¨Controllerè¿™ä¸€å±‚ï¼Œæ¯”å¦‚è¿™ä¸ªæ¥å£çš„åŠŸèƒ½ï¼Œå‚æ•°çš„åç§°ï¼Œè¿”å›å€¼çš„åç§°ç­‰ã€‚è¿™äº›å€¼æˆ‘ä»¬éƒ½éœ€è¦åœ¨Controllerä¸Šé€šè¿‡ç»™æ–¹æ³•ä¸Šï¼Œè¯·æ±‚å‚æ•°å’Œè¿”å›å‚æ•°ä¸Šæ·»åŠ å¯¹åº”çš„æ³¨è§£ï¼Œswaggeræ‰èƒ½å¸®æˆ‘ä»¬ç”Ÿæˆç›¸åº”çš„æ¥å£æ–‡æ¡£ã€‚</p>
<ul>
<li><strong>JavaBean</strong>: @ApiModelæ³¨è§£å’Œ @@ApiModelProperty æ³¨è§£å®šä¹‰äº†å®ä½“çš„åç§°å’Œå­—æ®µçš„åç§°  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(&quot;åˆ›å»ºSwaggerå“åº”ç»“æœ&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerResVO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å§“å&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;æ€§åˆ«&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å•¥å•¥&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String what;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<ul>
<li><strong>controller</strong>: @Apiæ³¨è§£å’Œ @ApiOperationæ³¨è§£åˆ†åˆ«æ ‡æ³¨äº†æ¥å£ç»„åå’Œæ¥å£çš„åç§° <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/swagger&quot;)</span></span><br><span class="line"><span class="meta">@Api(value = &quot;ç”¨æˆ·æ¥å£&quot;, tags = &#123;&quot;ç”¨æˆ·æ¥å£&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ–°å¢ç”¨æˆ·&quot;)</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;save&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(<span class="meta">@RequestBody</span> SwaggerReqVO req)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@GetMapping(&quot;getById&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ ¹æ®æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SwaggerResVO <span class="title">getById</span><span class="params">(<span class="meta">@RequestBody</span> SwaggerResVO req)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SwaggerResVO();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="3">
<li><p>å¯åŠ¨é¡¹ç›®</p>
<p> è®¿é—® <a href="http://localhost:8080/doc.html">http://localhost:8080/doc.html</a> æŸ¥çœ‹springfox-swagger2çš„æ–‡æ¡£ä¸­å¿ƒ<br> <img src="/swagger/1.png" alt="springfox-swagger2"></p>
<p> æŸ¥çœ‹GETè¯·æ±‚çš„ç•Œé¢<br> <img src="/swagger/2.png" alt="springfox-swagger2"><br> <img src="/swagger/3.png" alt="springfox-swagger2"></p>
</li>
<li><p>ä¼˜ç¼ºç‚¹</p>
<ul>
<li>ä¼˜ç‚¹ï¼šç•Œé¢ç¾è§‚ï¼Œé›†æˆæ–¹ä¾¿ï¼Œä¸åŒç±»å‹çš„æ¥å£æŒ‰ç…§controlleråˆ†ç»„ï¼Œ<strong>å¯ä»¥å¯¼å‡ºæ‰€æœ‰çš„æ¥å£æ–‡æ¡£ï¼ï¼ï¼ï¼ï¼</strong></li>
<li>ç¼ºç‚¹ï¼šæš‚æ—¶æ²¡æœ‰é‡åˆ°</li>
</ul>
</li>
</ol>
<h3 id="3-2-springdoc"><a href="#3-2-springdoc" class="headerlink" title="3.2 springdoc"></a>3.2 springdoc</h3><ol>
<li><p>å¼•å…¥ä¾èµ–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;org.springdoc&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;<span class="number">1.5</span><span class="number">.8</span>&lt;/version&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;org.springdoc&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;springdoc-openapi-webmvc-core&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;<span class="number">1.5</span><span class="number">.8</span>&lt;/version&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®yml /yaml /properties</p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">groups:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/api-docs</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">disabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">groups-order:</span> <span class="string">asc</span></span><br><span class="line">    <span class="comment"># è‡ªå®šä¹‰çš„æ–‡æ¡£ç•Œé¢è®¿é—®è·¯å¾„ã€‚é»˜è®¤è®¿é—®è·¯å¾„æ˜¯/swagger-ui.html</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/springdoc/docs.html</span></span><br><span class="line">  <span class="comment"># å¸ƒå°”å€¼ã€‚å®ç°OpenApiè§„èŒƒçš„æ‰“å°ã€‚</span></span><br><span class="line">  <span class="attr">writer-with-default-pretty-printer:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™é…ç½®ç±»</p>
<ul>
<li>SpringdocOpenapiConfiguration  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringdocOpenapiConfiguration</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SwaggerProperties swaggerProperties;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpringdocOpenapiConfiguration</span><span class="params">(SwaggerProperties swaggerProperties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.swaggerProperties = swaggerProperties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OpenAPI <span class="title">springDocOpenAPI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//é…ç½®è®¤è¯ã€è¯·æ±‚å¤´å‚æ•°</span></span><br><span class="line">        Components components = <span class="keyword">new</span> Components();</span><br><span class="line"><span class="comment">//        Map&lt;String, Object&gt; myHeader2extensions = new HashMap&lt;&gt;(2);</span></span><br><span class="line"><span class="comment">//        myHeader2extensions.put(&quot;name&quot;, &quot;myHeader2&quot;);</span></span><br><span class="line"><span class="comment">//        components</span></span><br><span class="line"><span class="comment">//                .addSecuritySchemes(&quot;bearer-key&quot;, new SecurityScheme().type(SecurityScheme.Type.HTTP).scheme(&quot;bearer&quot;).bearerFormat(&quot;JWT&quot;))</span></span><br><span class="line"><span class="comment">//                .addSecuritySchemes(&quot;basicScheme&quot;, new SecurityScheme().type(SecurityScheme.Type.HTTP).scheme(&quot;basic&quot;))</span></span><br><span class="line"><span class="comment">//                .addHeaders(&quot;myHeader2&quot;, new Header().description(&quot;myHeader2 header&quot;).schema(new StringSchema()).extensions(myHeader2extensions))</span></span><br><span class="line"><span class="comment">//                .addParameters(&quot;myGlobalHeader&quot;, new HeaderParameter().required(true).name(&quot;My-Global-Header&quot;).description(&quot;My Global Header&quot;).schema(new StringSchema()).required(false))</span></span><br><span class="line"><span class="comment">//        ;</span></span><br><span class="line">      </span><br><span class="line">        <span class="comment">// æ¥å£è°ƒè¯•è·¯å¾„</span></span><br><span class="line">        Server tryServer = <span class="keyword">new</span> Server();</span><br><span class="line">        tryServer.setUrl(swaggerProperties.getTryHost());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> OpenAPI()</span><br><span class="line">                .components(components)</span><br><span class="line">                .servers(Collections.singletonList(tryServer))</span><br><span class="line">                .info(<span class="keyword">new</span> Info()</span><br><span class="line">                        .title(swaggerProperties.getApplicationName() + <span class="string">&quot; Api Doc&quot;</span>)</span><br><span class="line">                        .description(swaggerProperties.getApplicationDescription())</span><br><span class="line">                        .version(<span class="string">&quot;Application Version: &quot;</span> + swaggerProperties.getApplicationVersion() + <span class="string">&quot;\n Spring Boot Version: &quot;</span> + SpringBootVersion.getVersion())</span><br><span class="line">                        .license(<span class="keyword">new</span> License().name(<span class="string">&quot;Apache 2.0&quot;</span>).url(<span class="string">&quot;https://www.apache.org/licenses/LICENSE-2.0.html&quot;</span>))</span><br><span class="line">                )</span><br><span class="line">                .externalDocs(<span class="keyword">new</span> ExternalDocumentation()</span><br><span class="line">                        .description(<span class="string">&quot;SpringDoc Full Documentation&quot;</span>)</span><br><span class="line">                        .url(<span class="string">&quot;https://springdoc.org/&quot;</span>)</span><br><span class="line">                );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ å…¨å±€çš„è¯·æ±‚å¤´å‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="comment">//    @Bean</span></span><br><span class="line"><span class="comment">//    public OpenApiCustomiser customerGlobalHeaderOpenApiCustomiser() &#123;</span></span><br><span class="line"><span class="comment">//        return openApi -&gt; openApi.getPaths().values().stream().flatMap(pathItem -&gt; pathItem.readOperations().stream())</span></span><br><span class="line"><span class="comment">//                .forEach(operation -&gt; &#123;</span></span><br><span class="line"><span class="comment">//                    operation.addParametersItem(new HeaderParameter().$ref(&quot;#/components/parameters/myGlobalHeader&quot;));</span></span><br><span class="line"><span class="comment">//                &#125;);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šç”¨æ‹¦æˆªå™¨æ’é™¤è®¾ç½®ï¼Œæ‰€æœ‰æ‹¦æˆªå™¨éƒ½ä¼šè‡ªåŠ¨åŠ springdoc-opapiç›¸å…³çš„èµ„æºæ’é™¤ä¿¡æ¯ï¼Œä¸ç”¨åœ¨åº”ç”¨ç¨‹åºè‡ªèº«æ‹¦æˆªå™¨å®šä¹‰çš„åœ°æ–¹å»æ·»åŠ ï¼Œç®—æ˜¯è‰¯å¿ƒè§£è€¦å®ç°ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Field registrationsField = FieldUtils.getField(InterceptorRegistry.class, <span class="string">&quot;registrations&quot;</span>, <span class="keyword">true</span>);</span><br><span class="line">            List&lt;InterceptorRegistration&gt; registrations = (List&lt;InterceptorRegistration&gt;) ReflectionUtils.getField(registrationsField, registry);</span><br><span class="line">            <span class="keyword">if</span> (registrations != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (InterceptorRegistration interceptorRegistration : registrations) &#123;</span><br><span class="line">                    interceptorRegistration.excludePathPatterns(<span class="string">&quot;/springdoc**/**&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœåŠ¡å™¨æ”¯æŒè·¨åŸŸ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .allowedOrigins(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                .allowedMethods(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;OPTIONS&quot;</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                .exposedHeaders(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;Access-Control-Allow-Methods&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;Access-Control-Max-Age&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;X-Frame-Options&quot;</span>)</span><br><span class="line">                .allowCredentials(<span class="keyword">false</span>)</span><br><span class="line">                .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>SwaggerProperties  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(&quot;swagger&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerProperties</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é¡¹ç›®åº”ç”¨å</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">private</span> String applicationName;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡¹ç›®ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String applicationVersion;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡¹ç›®æè¿°ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String applicationDescription;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥å£è°ƒè¯•åœ°å€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String tryHost;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™æ¥å£æ–¹æ³•<ul>
<li>åœ¨controllerä¸Šæ·»åŠ @Tagæ³¨è§£</li>
<li>åœ¨æ¥å£æ–¹æ³•ä¸Šæ·»åŠ @Operation æ³¨è§£</li>
<li>åœ¨æ¥å£å‚æ•°æ·»åŠ @Parameter æˆ–@Parameters æ³¨è§£<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Tags(&#123;</span></span><br><span class="line"><span class="meta">  @Tag(name = &quot;ExpirationWarningController&quot;, description = &quot;è®¾å¤‡å¯¿å‘½åˆ°æœŸé¢„è­¦&quot;),</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExpirationWarningController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//éœ€è¦ä½¿ç”¨@Operationç«¹èŠ‚</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/getOne/&#123;id&#125;/&#123;type&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;æŒ‰IDæŸ¥è¯¢&quot;, description = &quot;æŒ‰IDæŸ¥è¯¢&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseResult <span class="title">getOne</span><span class="params">(<span class="meta">@Parameter(description = &quot;ä¸»é”®ID&quot;)</span> <span class="meta">@PathVariable</span> Integer id,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="meta">@Parameter(description = &quot;ç±»å‹&quot;)</span> <span class="meta">@PathVariable</span> String type)</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">        <span class="keyword">return</span> ResponseResult.success(expirationWarningVO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@Operation(summary = &quot;ä¿å­˜&quot;, description = &quot;ä¿å­˜&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseResult <span class="title">save</span><span class="params">(<span class="meta">@RequestBody</span> ExpirationWarning expirationWarning)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>åœ¨springbootå¯åŠ¨ç±»ä¸ŠåŠ ä¸Šä»¥ä¸‹é…ç½®<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@OpenAPIDefinition(</span></span><br><span class="line"><span class="meta">    info = @Info(</span></span><br><span class="line"><span class="meta">        title = &quot;æµ‹è¯•springdoc&quot;,</span></span><br><span class="line"><span class="meta">        version = &quot;1.0&quot;</span></span><br><span class="line"><span class="meta">    ),</span></span><br><span class="line"><span class="meta">    externalDocs = @ExternalDocumentation(description = &quot;swagger-apiå‚è€ƒæ–‡æ¡£&quot;,</span></span><br><span class="line"><span class="meta">        url = &quot;https://github.com/swagger-api/swagger-core/wiki/Swagger-2.X---Annotations&quot;</span></span><br><span class="line"><span class="meta">    ),</span></span><br><span class="line"><span class="meta">    servers = &#123;</span></span><br><span class="line"><span class="meta">        @Server(</span></span><br><span class="line"><span class="meta">            url = &quot;http://localhost:8123/app&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;æœ¬åœ°åœ°å€&quot;</span></span><br><span class="line"><span class="meta">        ),</span></span><br><span class="line"><span class="meta">        @Server(</span></span><br><span class="line"><span class="meta">            url = &quot;http://www.xiaoyuge.vip/app&quot;,</span></span><br><span class="line"><span class="meta">            description = &quot;å…¬ç½‘æµ‹è¯•ç¯å¢ƒ&quot;</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResolutionApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ResolutionApplication.class, args);</span><br><span class="line">        logger.info(<span class="string">&quot;============= Start Success =============&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>å¯åŠ¨é¡¹ç›®</p>
<p>è®¿é—® <a href="http://localhost:8123/app/springdoc/swagger-ui/index.html">http://localhost:8123/app/springdoc/swagger-ui/index.html</a> æŸ¥çœ‹springdoxçš„æ–‡æ¡£ä¸­å¿ƒ<br><img src="/swagger/4.png" alt="springdoc"><br><img src="/swagger/5.png" alt="springdoc"></p>
</li>
</ol>
<ol start="5">
<li><p>ä¼˜ç¼ºç‚¹</p>
<ul>
<li><p>ä¼˜ç‚¹ï¼šä¸å¥½è¯´</p>
</li>
<li><p>ç¼ºç‚¹ï¼šç•Œé¢æ²¡æœ‰æŒ‰ç…§æ¯ä¸ªcontrolleråˆ†ç»„ï¼Œä¸ç›´è§‚ï¼ï¼›</p>
</li>
</ul>
</li>
</ol>
<h3 id="3-3-Apifox"><a href="#3-3-Apifox" class="headerlink" title="3.3 Apifox"></a>3.3 Apifox</h3><p>ä¸€æ¬¾ç ”å‘å…¨æµç¨‹ï¼Œæ¥å£å…¨å‘¨æœŸçš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œè¿™æ¬¾è½¯ä»¶çœŸæ­£å®Œæˆäº†æ•°æ®æµçš„æ‰“é€šï¼Œåœ¨ä¸€ä¸ªè½¯ä»¶ä¸Šå°±èƒ½å®ç°<strong>æ¥å£è®¾è®¡â€“æ¥å£æ–‡æ¡£â€“æ¥å£è°ƒè¯•â€“æ¥å£ä¿®æ”¹â€“æ¥å£mockâ€“æ¥å£æµ‹è¯•â€“æ¥å£è‡ªåŠ¨åŒ–â€“æ¥å£è¿­ä»£</strong>çš„å·¥ä½œæµé—­ç¯ï¼›</p>
<h4 id="3-3-1-Apifoxä¸Šçš„åä½œæµç¨‹"><a href="#3-3-1-Apifoxä¸Šçš„åä½œæµç¨‹" class="headerlink" title="3.3.1 Apifoxä¸Šçš„åä½œæµç¨‹"></a>3.3.1 Apifoxä¸Šçš„åä½œæµç¨‹</h4><ol>
<li>åç«¯åœ¨Apifoxå¯è§†åŒ–æ¥å£è®¾è®¡ç•Œé¢ä¸Šå®šä¹‰å¥½é¡¹ç›®å„ä¸ªæ¥å£åŠå¯¹åº”å‚æ•°åŒæ—¶ç¼–å†™æ¥å£æ–‡æ¡£è¯´æ˜</li>
<li>å‰åç«¯ä¸€èµ·è¯„å®¡ï¼Œä¿®æ”¹å®Œå–„æ¥å£å¹¶åœ¨åŒä¸€ç•Œé¢é¡ºæ‰‹æ›´æ–°æ¥å£æ–‡æ¡£</li>
<li>åç«¯ä½¿ç”¨æ¥å£è°ƒè¯•åŠŸèƒ½è°ƒè¯•æ¥å£</li>
<li>å‰ç«¯ä½¿ç”¨é›¶é…ç½®é«˜ä»¿çœŸmockåŠŸèƒ½å¯¹å‰ç«¯é¡µé¢è¿›è¡Œè°ƒè¯•ï¼Œæ— éœ€æ‰‹å†™mockè§„åˆ™</li>
<li>åç«¯ä½¿ç”¨ä»£ç ç”ŸæˆåŠŸèƒ½ç›´æ¥ç”Ÿæˆæ¥å£ä»£ç </li>
<li>æµ‹è¯•åœ¨æ¥å£ç®¡ç†é¡µé¢ä¸€é”®ç”Ÿæˆæ¥å£å‚æ•°æµ‹è¯•ç”¨ä¾‹,å¹¶ä¾æ®ä¸šåŠ¡åœºæ™¯ç”Ÿæˆè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ï¼Œä¸€é”®è¿è¡Œæ¥å£ç”¨ä¾‹å¹¶ç”Ÿæˆæ¥å£æµ‹è¯•æŠ¥å‘Šå¹¶åˆ†äº«ç»™ç›¸å…³äººå‘˜ã€‚</li>
<li>å‰åç«¯ éƒ½å¼€å‘å®Œï¼Œå‰ç«¯ä»Mock æ•°æ®åˆ‡æ¢åˆ°æ­£å¼æ•°æ®ï¼Œè¿›è¡Œè”è°ƒï¼Œç”±äºä½¿ç”¨åŒä¸€ä¸ªæ¥å£æ•°æ®æºï¼Œä¸”éµå¾ªäº†æ¥å£è§„èŒƒï¼Œè”è°ƒé¡ºåˆ©</li>
<li>ç”±äºbugä¿®å¤æˆ–éœ€æ±‚å˜æ›´ï¼Œæ¥å£å‘ç”Ÿäº†å˜åŒ–ï¼Œåç«¯ä¿®æ”¹æäº¤åï¼Œå‰ç«¯å’Œæµ‹è¯•å®æ—¶åŒæ­¥åˆ°äº†ä¿®æ”¹åçš„æ•°æ®</li>
<li>é¡¹ç›®ç»ç†é€šè¿‡æƒé™è®¾ç½®ç»™ç ”å‘,äº§å“,æµ‹è¯•,å¤–éƒ¨åˆä½œäººå‘˜åˆ†é…ç¼–è¾‘,åªè¯»ç­‰å„ç§æ“ä½œæƒé™ï¼Œç»´æŠ¤äº†é¡¹ç›®å®‰å…¨</li>
<li>é¡¹ç›®ç»ç†é€šè¿‡å„ä¸ªæ¥å£çš„çŠ¶æ€å¼€å‘ä¸­,æµ‹è¯•ä¸­,å·²å‘å¸ƒæ¥è·Ÿè¿›é¡¹ç›®çš„è¿›åº¦æƒ…å†µï¼ŒæŠŠæ§é¡¹ç›®é£é™©ã€‚</li>
</ol>
<h4 id="3-3-2-Apifoxåšçš„å¢é€Ÿææ•ˆä¼˜åŒ–"><a href="#3-3-2-Apifoxåšçš„å¢é€Ÿææ•ˆä¼˜åŒ–" class="headerlink" title="3.3.2 Apifoxåšçš„å¢é€Ÿææ•ˆä¼˜åŒ–"></a>3.3.2 Apifoxåšçš„å¢é€Ÿææ•ˆä¼˜åŒ–</h4><ul>
<li><p>æ¥å£è®¾è®¡ï¼šä»ä»£ç ç”Ÿæˆç•Œé¢åˆ°å¯è§†åŒ–æ¥å£è®¾è®¡ç•Œé¢</p>
<p>Apifox æ¥å£æ–‡æ¡£éµå¾ª OpenApi 3.0 (åŸ Swagger)ã€JSON Schema è§„èŒƒï¼Œå¯ç”Ÿæˆåœ¨çº¿æ–‡æ¡£ï¼›é›¶å­¦ä¹ æˆæœ¬å³å¯ç¼–å†™å‡ºç¬¦åˆRESTfulé£æ ¼çš„æ¥å£æ–‡æ¡£ï¼Œæ–°äººä¸Šæ‰‹å¿«ï¼›æ‰€è§å³æ‰€å¾—ï¼Œä¸æ˜“å‡ºé”™<br><img src="/swagger/6.png" alt="Apifox"><br><img src="/swagger/7.png" alt="Apifox"></p>
</li>
<li><p>æ–‡æ¡£ç»´æŠ¤ï¼šä»æ¥å£ä¸æ–‡æ¡£åˆ†ç¦»åˆ°æ¥å£ä¸æ–‡æ¡£åˆå¹¶</p>
<p>Apifoxçš„æ¥å£è®¾è®¡ç•Œé¢æä¾›äº†Markdownæ ¼å¼çš„æ–‡æ¡£è¯´æ˜åŒºï¼Œä¿®æ”¹å®Œæ¥å£å°±å¦‚åŒcommitä»£ç æ—¶æ·»åŠ å˜æ›´è¯´æ˜èˆ¬<br><img src="/swagger/8.png" alt="Apifox"></p>
</li>
<li><p>æ•°æ®å¤ç”¨ï¼šä»å„è‡ªä¸ºæ”¿åˆ°å®šä¹‰ä¸€æ¬¡ã€å¤šæ¬¡å¤ç”¨</p>
<ul>
<li><p>æ¥å£æ•°æ®å¤ç”¨ï¼šSwaggerï¼ŒPostmanï¼ŒMockJSï¼ŒJmeterç­‰è½¯ä»¶å½¼æ­¤ä¹‹é—´æ•°æ®ä¸äº’é€šï¼Œæ•°æ®æ ¼å¼ä¸ä¸€è‡´ï¼Œæ¥å£å¯¼å…¥éå¸¸è€—æ—¶éº»çƒ¦ã€‚<br>è€ŒApifoxèƒ½èº«å…¼å¤šèŒï¼ŒåŒ…æ½ä¸Šè¿°è½¯ä»¶åŠŸèƒ½ï¼Œåœ¨Apifoxä¸­å®šä¹‰ä¸€æ¬¡æ¥å£ï¼Œèƒ½è¢«åç«¯ç›´æ¥ç”¨æ¥è°ƒè¯•ï¼Œå‰ç«¯ç›´æ¥ç”¨æ¥mockç•Œé¢ï¼Œæµ‹è¯•ç›´æ¥æ‰§è¡Œæ¥å£è‡ªåŠ¨åŒ–ã€‚</p>
</li>
<li><p>æ•°æ®æ¨¡å‹å¤ç”¨ï¼šå¯å¤ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®šä¹‰æ¥å£è¿”å›æ•°æ®ç»“æ„åŠè¯·æ±‚å‚æ•°æ•°æ®ç»“æ„ï¼ˆä»… JSON å’Œ XML æ¨¡å¼ï¼‰æ—¶å¯ç›´æ¥å¼•ç”¨ã€‚</p>
</li>
</ul>
</li>
<li><p>åŒæ­¥æ›´æ–°ï¼Œé«˜æ•ˆæ²Ÿé€š:ä»æ²Ÿé€šæ»ååˆ°æ•°æ®å˜æ›´å³æ—¶åŒæ­¥</p>
<p>Apifoxä¸ºæ­¤æä¾›äº†åŒæ­¥åŠŸèƒ½ï¼Œä¸€æ—¦æ¥å£æ•°æ®æœ‰æ›´æ–°å‘ç”Ÿï¼Œå°±ä¼šå³æ—¶åŒæ­¥æ›´æ–°å¹¶é€šçŸ¥åˆ°é¡¹ç›®å†…æ‰€æœ‰æˆå‘˜ã€‚</p>
</li>
</ul>
<ul>
<li><p>Apihub</p>
<p>å†…ç½®ä¼ä¸šå¾®ä¿¡å¼€æ”¾APIï¼ŒæŠ–éŸ³å¼€æ”¾APIç­‰ç¬¬ä¸‰æ–¹æ¥å£å¼€æ”¾é¡¹ç›®ï¼Œæ¥å£å¯ä»¥ç›´æ¥åœ¨Apifoxä¸­è°ƒè¯•ï¼Œä¸éœ€è¦åˆ°å¤„æ‰¾æ¥å£æ–‡æ¡£å’Œæ‰‹å·¥å¡«å†™æ¥å£</p>
<h4 id="3-3-3-ä¸‹è½½åœ°å€"><a href="#3-3-3-ä¸‹è½½åœ°å€" class="headerlink" title="3.3.3 ä¸‹è½½åœ°å€"></a>3.3.3 ä¸‹è½½åœ°å€</h4><p>å®˜ç½‘åœ°å€ï¼š <a href="http://www.apifox.cn/?utm_medium=WCSA&amp;utm_source=xxzsq">http://www.apifox.cn/?utm_medium=WCSA&amp;utm_source=xxzsq</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>swagger</category>
      </categories>
      <tags>
        <tag>swagger</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOSå®‰è£…RocketMQä»¥åŠå¸¸ç”¨å‘½ä»¤</title>
    <url>/rocketmq-install/</url>
    <content><![CDATA[<h3 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1.å‰è¨€"></a>1.å‰è¨€</h3><ol>
<li>nameserveré»˜è®¤ç«¯å£ï¼š9876</li>
<li>rocketmqé»˜è®¤ç«¯å£ï¼š10911</li>
<li>æœåŠ¡å™¨IPï¼š172.21.16.253</li>
<li>å®‰è£…è·¯å¾„ï¼š/usr/local/tools</li>
</ol>
<h3 id="2-ä¸‹è½½"><a href="#2-ä¸‹è½½" class="headerlink" title="2. ä¸‹è½½"></a>2. ä¸‹è½½</h3><p>RocketMQå®˜ç½‘é“¾æ¥ï¼š<a href="http://rocketmq.apache.org/">http://rocketmq.apache.org/</a> ,ç„¶åé€‰æ‹©Lastest Releaseè¿›å…¥ä¸‹è½½ç•Œé¢<br><img src="/rocketmq-install/1.png"><br><img src="/rocketmq-install/2.png"><br><img src="/rocketmq-install/0.png"><br>å³é”®å¤åˆ¶é“¾æ¥åœ°å€ï¼Œ<code>wget</code>ä¸‹è½½ï¼Œæˆ–è€…ä¸‹è½½åä¸Šä¼ åˆ°CentosæœåŠ¡å™¨ä¸Šã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools</span><br><span class="line">wget https://dlcdn.apache.org/rocketmq/4.9.4/rocketmq-all-4.9.4-bin-release.zip</span><br></pre></td></tr></table></figure>

<h3 id="3-è§£å‹"><a href="#3-è§£å‹" class="headerlink" title="3. è§£å‹"></a>3. è§£å‹</h3><p>è§£å‹äºŒè¿›åˆ¶åŒ…ï¼Œä¿®æ”¹æ–‡ä»¶å¤¹åç§°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unzip rocketmq-all-4.9.4-bin-release.zip </span><br><span class="line">mv rocketmq-all-4.9.4-bin-release rocketmq</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæç¤º<code>-bash: unzip: command not found</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å®‰è£…zip å’Œ unzip</span></span><br><span class="line">yum install zip</span><br><span class="line">yum install unzip</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/local/tools/rocketmq/store/broker-a /usr/local/tools/rocketmq/store/broker-a/consumequeue /usr/local/tools/rocketmq/store/broker-a/commitlog /usr/local/tools/rocketmq/store/broker-a/index /usr/local/tools/rocketmq/broker-a/logs </span><br></pre></td></tr></table></figure>

<h3 id="4-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#4-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="4. ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>4. ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/rocketmq/conf</span><br><span class="line">vim broker.conf</span><br></pre></td></tr></table></figure>
<p>å¢åŠ å†…å®¹</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Broker å¯¹å¤–æœåŠ¡çš„ç›‘å¬ç«¯å£</span></span><br><span class="line"><span class="attr">listenPort</span>=<span class="string">10911</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºTopicï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateTopicEnable</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#æ˜¯å¦å…è®¸ Broker è‡ªåŠ¨åˆ›å»ºè®¢é˜…ç»„ï¼Œå»ºè®®çº¿ä¸‹å¼€å¯ï¼Œçº¿ä¸Šå…³é—­</span></span><br><span class="line"><span class="attr">autoCreateSubscriptionGroup</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#nameServeråœ°å€ï¼Œåˆ†å·åˆ†å‰²</span></span><br><span class="line"><span class="attr">namesrvAddr</span>=<span class="string">localhost:9876</span></span><br><span class="line"><span class="comment">#å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathRootDir</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a</span></span><br><span class="line"><span class="comment">#commitLog å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathCommitLog</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/commitlog</span></span><br><span class="line"><span class="comment">#æ¶ˆè´¹é˜Ÿåˆ—å­˜å‚¨è·¯å¾„å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathConsumeQueue</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/consumequeue</span></span><br><span class="line"><span class="comment">#æ¶ˆæ¯ç´¢å¼•å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storePathIndex</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/index</span></span><br><span class="line"><span class="comment">#checkpoint æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">storeCheckpoint</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/checkpoint</span></span><br><span class="line"><span class="comment">#abort æ–‡ä»¶å­˜å‚¨è·¯å¾„</span></span><br><span class="line"><span class="attr">abortFile</span>=<span class="string">/usr/local/tools/rocketmq/store/broker-a/abort</span></span><br></pre></td></tr></table></figure>
<p><img src="/rocketmq-install/3.png"></p>
<h3 id="5-å¯åŠ¨"><a href="#5-å¯åŠ¨" class="headerlink" title="5. å¯åŠ¨"></a>5. å¯åŠ¨</h3><p>ä¾æ¬¡å¯åŠ¨nameserverå’Œbroker ,è¿™ä¸¤ä¸ªå‘½ä»¤å¯ä»¥åšæˆalias</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/rocketmq/bin</span><br><span class="line"></span><br><span class="line">nohup sh mqnamesrv &amp;</span><br><span class="line">nohup sh mqbroker -c /usr/local/tools/rocketmq/conf/broker.conf &amp;</span><br></pre></td></tr></table></figure>
<p>åœ¨è™šæ‹Ÿæœºä¸­æœ‰å¯èƒ½å› ä¸ºå†…å­˜ä¸å¤Ÿè€Œå¯åŠ¨å¤±è´¥<br><img src="/rocketmq-install/4.png"></p>
<ul>
<li>1ï¼‰è®¾ç½®<code>bin</code>ç›®å½•ä¸‹çš„ runserver.sh  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms256m -Xmx256m -Xmn512m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span><br></pre></td></tr></table></figure></li>
<li>2ï¼‰è®¾ç½®<code>bin</code>ç›®å½•ä¸‹çš„ runbroker.sh  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms256m -Xmx256m -Xmn128m&quot;</span><br></pre></td></tr></table></figure></li>
<li>3ï¼‰å¦‚æœæ”¹äº†ä¸Šé¢ä¸¤ä¸ªè¿˜ä¸è¡Œï¼Œé‚£åœ¨ä¿®æ”¹binç›®å½•ä¸‹é¢çš„tools.sh  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms256m -Xmx256m -Xmn256m -XX:PermSize=128m -XX:MaxPermSize=128m&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="6-æŸ¥çœ‹æ—¥å¿—"><a href="#6-æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="6. æŸ¥çœ‹æ—¥å¿—"></a>6. æŸ¥çœ‹æ—¥å¿—</h3><p>å¯åŠ¨æˆåŠŸåæŸ¥çœ‹mqåŠ¨æ€æ—¥å¿—</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tail -f ~/logs/rocketmqlogs/namesrv.log</span><br><span class="line">tail -f ~/logs/rocketmqlogs/broker.log</span><br></pre></td></tr></table></figure>
<p><img src="/rocketmq-install/5.png"></p>
<h3 id="7-å…³é—­æœåŠ¡"><a href="#7-å…³é—­æœåŠ¡" class="headerlink" title="7.å…³é—­æœåŠ¡"></a>7.å…³é—­æœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/tools/rocketmq/bin</span><br><span class="line"></span><br><span class="line">sh mqshutdown namesrv</span><br><span class="line">sh mqshutdown broker</span><br></pre></td></tr></table></figure>

<h3 id="8-å¸¸ç”¨å‘½ä»¤"><a href="#8-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="8. å¸¸ç”¨å‘½ä»¤"></a>8. å¸¸ç”¨å‘½ä»¤</h3><p>RocketMQ æä¾›æœ‰æ§åˆ¶å°åŠä¸€ç³»åˆ—æ§åˆ¶å°ç›®å½•ï¼Œç”¨æˆ·ç®¡ç†å‘˜å¯¹ä¸»é¢˜ã€é›†ç¾¤ã€brokerç­‰ä¿¡æ¯çš„ç®¡ç†ã€‚</p>
<p>è¿›å…¥rocketmqä¸‹çš„binç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°è¯¥ç›®å½•ä¸‹æœ‰ä¸ªmqadminè„šæœ¬<br><img src="/rocketmq-install/6.png"><br>æŸ¥çœ‹å¸®åŠ©</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh mqadmin help å‘½ä»¤åç§°</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼ŒæŸ¥çœ‹updateTopicçš„ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh mqadmin help updateTopic</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ã€‚</p>
<h4 id="8-1-åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰Topic"><a href="#8-1-åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰Topic" class="headerlink" title="8.1 åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰Topic"></a>8.1 åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰Topic</h4><ul>
<li><p>æŒ‡ä»¤ï¼š updateTopic</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.topic.UpdateTopicSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">å¦‚æœ -cä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">brokeråœ°å€ï¼Œè¡¨ç¤ºtopicå»ºåœ¨è¯¥broker</td>
</tr>
<tr>
<td align="left">-c</td>
<td align="left">å¦‚æœ -bä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">clusteråç§°ï¼Œè¡¨ç¤ºtopicå»ºåœ¨è¯¥é›†ç¾¤ï¼ˆé›†ç¾¤å¯é€šè¿‡clusterListæŸ¥è¯¢ï¼‰</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
<tr>
<td align="left">-p</td>
<td align="left">å¦</td>
<td align="left">æŒ‡å®šæ–°topicçš„æƒé™é™åˆ¶( W</td>
</tr>
<tr>
<td align="left">-r</td>
<td align="left">å¦</td>
<td align="left">å¯è¯»é˜Ÿåˆ—æ•°ï¼ˆé»˜è®¤ä¸º8ï¼‰</td>
</tr>
<tr>
<td align="left">-w</td>
<td align="left">å¦</td>
<td align="left">å¯å†™é˜Ÿåˆ—æ•°ï¼ˆé»˜è®¤ä¸º8ï¼‰</td>
</tr>
<tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">topicåç§°ï¼ˆåç§°åªèƒ½ä½¿ç”¨å­—ç¬¦ ^[a-zA-Z0-9_-]+$ ï¼‰</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åœ¨é›†ç¾¤DefaultClusterä¸Šåˆ›å»ºä¸»é¢˜ZTEExampleï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin updateTopic â€“n 172.21.16.253:9876 â€“c DefaultCluster â€“t ZTEExample</span><br></pre></td></tr></table></figure>
<h4 id="8-2-åˆ é™¤Topic"><a href="#8-2-åˆ é™¤Topic" class="headerlink" title="8.2 åˆ é™¤Topic"></a>8.2 åˆ é™¤Topic</h4></li>
<li><p>æŒ‡ä»¤ï¼š deleteTopic</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.topic.DeleteTopicSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-c</td>
<td align="left">æ˜¯</td>
<td align="left">clusteråç§°ï¼Œè¡¨ç¤ºåˆ é™¤æŸé›†ç¾¤ä¸‹çš„æŸä¸ªtopic ï¼ˆé›†ç¾¤å¯é€šè¿‡clusterListæŸ¥è¯¢ï¼‰</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
<tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">topicåç§°ï¼ˆåç§°åªèƒ½ä½¿ç”¨å­—ç¬¦ ^[a-zA-Z0-9_-]+$ ï¼‰</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åœ¨é›†ç¾¤DefaultClusterä¸Šåˆ é™¤ä¸»é¢˜ZTEExampleï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin deleteTopic â€“n 172.21.16.253:9876 â€“c DefaultCluster â€“t ZTEExample</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-3-åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰è®¢é˜…ç»„"><a href="#8-3-åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰è®¢é˜…ç»„" class="headerlink" title="8.3 åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰è®¢é˜…ç»„"></a>8.3 åˆ›å»ºï¼ˆä¿®æ”¹ï¼‰è®¢é˜…ç»„</h4><ul>
<li><p>æŒ‡ä»¤ï¼š updateSubGroup</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.consumer.UpdateSubGroupSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">å¦‚æœ -cä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">brokeråœ°å€ï¼Œè¡¨ç¤ºtopicå»ºåœ¨è¯¥broker</td>
</tr>
<tr>
<td align="left">-c</td>
<td align="left">å¦‚æœ -bä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">clusteråç§°ï¼Œè¡¨ç¤ºtopicå»ºåœ¨è¯¥é›†ç¾¤ï¼ˆé›†ç¾¤å¯é€šè¿‡clusterListæŸ¥è¯¢ï¼‰</td>
</tr>
<tr>
<td align="left">-d</td>
<td align="left">å¦</td>
<td align="left">æ˜¯å¦å®¹è®¸å¹¿æ’­æ–¹å¼æ¶ˆè´¹</td>
</tr>
<tr>
<td align="left">-g</td>
<td align="left">æ˜¯</td>
<td align="left">è®¢é˜…ç»„å</td>
</tr>
<tr>
<td align="left">-i</td>
<td align="left">å¦</td>
<td align="left">ä»å“ªä¸ªbrokerå¼€å§‹æ¶ˆè´¹</td>
</tr>
<tr>
<td align="left">-m</td>
<td align="left">å¦</td>
<td align="left">æ˜¯å¦å®¹è®¸ä»é˜Ÿåˆ—çš„æœ€å°ä½ç½®å¼€å§‹æ¶ˆè´¹ï¼Œé»˜è®¤ä¼šè®¾ç½®ä¸ºfalse</td>
</tr>
<tr>
<td align="left">-q</td>
<td align="left">å¦</td>
<td align="left">æ¶ˆè´¹å¤±è´¥çš„æ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ªé‡è¯•é˜Ÿåˆ—ï¼Œæ¯ä¸ªè®¢é˜…ç»„é…ç½®å‡ ä¸ªé‡è¯•é˜Ÿåˆ—</td>
</tr>
<tr>
<td align="left">-r</td>
<td align="left">å¦</td>
<td align="left">é‡è¯•æ¶ˆè´¹æœ€å¤§æ¬¡æ•°ï¼Œè¶…è¿‡åˆ™æŠ•é€’åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œä¸å†æŠ•é€’ï¼Œå¹¶æŠ¥è­¦</td>
</tr>
<tr>
<td align="left">-s</td>
<td align="left">å¦</td>
<td align="left">æ¶ˆè´¹åŠŸèƒ½æ˜¯å¦å¼€å¯</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
<tr>
<td align="left">-w</td>
<td align="left">å¦</td>
<td align="left">å‘ç°æ¶ˆæ¯å †ç§¯åï¼Œå°†Consumerçš„æ¶ˆè´¹è¯·æ±‚é‡å®šå‘åˆ°å¦å¤–ä¸€å°Slaveæœºå™¨</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-4-åˆ é™¤è®¢é˜…ç»„é…ç½®"><a href="#8-4-åˆ é™¤è®¢é˜…ç»„é…ç½®" class="headerlink" title="8.4 åˆ é™¤è®¢é˜…ç»„é…ç½®"></a>8.4 åˆ é™¤è®¢é˜…ç»„é…ç½®</h4><ul>
<li><p>æŒ‡ä»¤ï¼š deleteSubGroup</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.consumer.DeleteSubscriptionGroupCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">å¦‚æœ -cä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">brokeråœ°å€ï¼Œè¡¨ç¤ºè®¢é˜…ç»„å»ºåœ¨è¯¥broker</td>
</tr>
<tr>
<td align="left">-c</td>
<td align="left">å¦‚æœ -bä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">clusteråç§°ï¼Œè¡¨ç¤ºtopicå»ºåœ¨è¯¥é›†ç¾¤ï¼ˆé›†ç¾¤å¯é€šè¿‡clusterListæŸ¥è¯¢ï¼‰</td>
</tr>
<tr>
<td align="left">-g</td>
<td align="left">æ˜¯</td>
<td align="left">è®¢é˜…ç»„å</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-5-æ›´æ–°brokeré…ç½®æ–‡ä»¶"><a href="#8-5-æ›´æ–°brokeré…ç½®æ–‡ä»¶" class="headerlink" title="8.5 æ›´æ–°brokeré…ç½®æ–‡ä»¶"></a>8.5 æ›´æ–°brokeré…ç½®æ–‡ä»¶</h4><ul>
<li><p>æŒ‡ä»¤ï¼š updateBrokerConfig</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.broker.UpdateBrokerConfigSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">å¦‚æœ -cä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">brokeråœ°å€ï¼Œè¡¨ç¤ºè®¢é˜…ç»„å»ºåœ¨è¯¥broker</td>
</tr>
<tr>
<td align="left">-c</td>
<td align="left">å¦‚æœ -bä¸ºç©ºï¼Œåˆ™å¿…å¡«</td>
<td align="left">clusteråç§°ï¼Œè¡¨ç¤ºtopicå»ºåœ¨è¯¥é›†ç¾¤ï¼ˆé›†ç¾¤å¯é€šè¿‡clusterListæŸ¥è¯¢ï¼‰</td>
</tr>
<tr>
<td align="left">-k</td>
<td align="left">å¦</td>
<td align="left">æ˜¯å¦å®¹è®¸å¹¿æ’­æ–¹å¼æ¶ˆè´¹</td>
</tr>
<tr>
<td align="left">-v</td>
<td align="left">æ˜¯</td>
<td align="left">valueå€¼</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-6-æŸ¥çœ‹topic-åˆ—è¡¨ä¿¡æ¯"><a href="#8-6-æŸ¥çœ‹topic-åˆ—è¡¨ä¿¡æ¯" class="headerlink" title="8.6 æŸ¥çœ‹topic åˆ—è¡¨ä¿¡æ¯"></a>8.6 æŸ¥çœ‹topic åˆ—è¡¨ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š topicList</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.broker.UpdateBrokerConfigSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> nameserveåœ°å€ä¸º172.21.16.253:9876;</span></span><br><span class="line">sh mqadmin topicList -n 172.21.16.253:9876</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-7-æŸ¥çœ‹è·¯ç”±ä¿¡æ¯"><a href="#8-7-æŸ¥çœ‹è·¯ç”±ä¿¡æ¯" class="headerlink" title="8.7 æŸ¥çœ‹è·¯ç”±ä¿¡æ¯"></a>8.7 æŸ¥çœ‹è·¯ç”±ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š topicRoute</p>
</li>
<li><p>ç±»è·¯å¾„ï¼š com.alibaba.rocketmq.tools.command.topic.TopicRouteSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">topicåç§°</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">  æŸ¥çœ‹ä¸»é¢˜%DLQ%consumer1çš„è·¯ç”±ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin topicRoute -n 172.21.16.253:9876 -t %DLQ%consumer1</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-8-æŸ¥çœ‹topicç»Ÿè®¡ä¿¡æ¯"><a href="#8-8-æŸ¥çœ‹topicç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="8.8 æŸ¥çœ‹topicç»Ÿè®¡ä¿¡æ¯"></a>8.8 æŸ¥çœ‹topicç»Ÿè®¡ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š topicStatus</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.topic.TopicStatsSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">topicåç§°</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ä¸»é¢˜%DLQ%consumer1çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin topicStatus -n 172.21.16.253:9876 -t %DLQ%consumer1</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-9-æŸ¥çœ‹brokerç»Ÿè®¡ä¿¡æ¯"><a href="#8-9-æŸ¥çœ‹brokerç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="8.9 æŸ¥çœ‹brokerç»Ÿè®¡ä¿¡æ¯"></a>8.9 æŸ¥çœ‹brokerç»Ÿè®¡ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š brokerStatus</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.broker.BrokerStatsSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">æ˜¯</td>
<td align="left">brokeråœ°å€</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹broker(crmdb)çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œbrokeråœ°å€ä¸º172.21.16.253:10911,nameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin brokerStatus  â€“n 172.21.16.253:9876 -b 172.21.16.253:10911</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-10-æ ¹æ®æ¶ˆæ¯IDæŸ¥è¯¢æ¶ˆæ¯"><a href="#8-10-æ ¹æ®æ¶ˆæ¯IDæŸ¥è¯¢æ¶ˆæ¯" class="headerlink" title="8.10 æ ¹æ®æ¶ˆæ¯IDæŸ¥è¯¢æ¶ˆæ¯"></a>8.10 æ ¹æ®æ¶ˆæ¯IDæŸ¥è¯¢æ¶ˆæ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š queryMsgById</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.message.QueryMsgByIdSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-i</td>
<td align="left">æ˜¯</td>
<td align="left">msgId</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥è¯¢msgId= C0A89F8000002A9F000000000000449Açš„æ¶ˆæ¯ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin queryMsgById -n 172.21.16.253:9876 -i C0A89F8000002A9F000000000000449A</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-11-æ ¹æ®æ¶ˆæ¯keyæŸ¥è¯¢æ¶ˆæ¯"><a href="#8-11-æ ¹æ®æ¶ˆæ¯keyæŸ¥è¯¢æ¶ˆæ¯" class="headerlink" title="8.11 æ ¹æ®æ¶ˆæ¯keyæŸ¥è¯¢æ¶ˆæ¯"></a>8.11 æ ¹æ®æ¶ˆæ¯keyæŸ¥è¯¢æ¶ˆæ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š queryMsgByKey</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.message.QueryMsgByKeySubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-f</td>
<td align="left">å¦</td>
<td align="left">è¢«æŸ¥è¯¢æ¶ˆæ¯çš„æˆªæ­¢æ—¶é—´</td>
</tr>
<tr>
<td align="left">-k</td>
<td align="left">æ˜¯</td>
<td align="left">msgKey</td>
</tr>
<tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">Topicåç§°</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢Topic= TopicTestä¸‹key=i0çš„æ¶ˆæ¯ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin queryMsgByKey -n 172.21.16.253:9876 -t TopicTest -k i0</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-12-æ ¹æ®OffsetæŸ¥è¯¢æ¶ˆæ¯"><a href="#8-12-æ ¹æ®OffsetæŸ¥è¯¢æ¶ˆæ¯" class="headerlink" title="8.12 æ ¹æ®OffsetæŸ¥è¯¢æ¶ˆæ¯"></a>8.12 æ ¹æ®OffsetæŸ¥è¯¢æ¶ˆæ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š queryMsgByOffset</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.message.QueryMsgByOffsetSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-b</td>
<td align="left">æ˜¯</td>
<td align="left">Brokeråç§°ï¼Œè¡¨ç¤ºè®¢é˜…ç»„å»ºåœ¨è¯¥brokerï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„å¡«å†™çš„æ˜¯brokerçš„åç§°ï¼Œä¸æ˜¯brokerçš„åœ°å€ï¼Œbrokeråç§°å¯ä»¥åœ¨clusterListæŸ¥åˆ°ï¼‰</td>
</tr>
<tr>
<td align="left">-i</td>
<td align="left">æ˜¯</td>
<td align="left">queryé˜Ÿåˆ—id</td>
</tr>
<tr>
<td align="left">-o</td>
<td align="left">æ˜¯</td>
<td align="left">offsetå€¼</td>
</tr>
<tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">Topicåç§°</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥è¯¢brokerName=broker-aï¼ŒTopic= TopicTestçš„ç¬¬1ä¸ªé˜Ÿåˆ—ä¸‹offset=0çš„æ¶ˆæ¯ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin queryMsgByOffset -n 172.21.16.253:9876 -b broker-a -i 0 -t TopicTest -o 0</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-13-æŸ¥è¯¢Producerçš„ç½‘ç»œè¿æ¥"><a href="#8-13-æŸ¥è¯¢Producerçš„ç½‘ç»œè¿æ¥" class="headerlink" title="8.13 æŸ¥è¯¢Producerçš„ç½‘ç»œè¿æ¥"></a>8.13 æŸ¥è¯¢Producerçš„ç½‘ç»œè¿æ¥</h4><p>è¯¥å‘½ä»¤åªæ‰“å°å½“å‰ä¸clusterè¿æ¥çš„producerç½‘ç»œè¿æ¥ä¿¡æ¯</p>
<ul>
<li><p>æŒ‡ä»¤ï¼š producerConnection</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.connection.ProducerConnectionSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-g</td>
<td align="left">æ˜¯</td>
<td align="left">ç”Ÿäº§è€…æ‰€å±ç»„å</td>
</tr>
<tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">topicåç§°</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢å½“å‰å±äºgroupï¼ˆç”Ÿäº§è€…ç»„ï¼‰=simple-producer-testçš„ç”Ÿäº§è€…åˆ°topic=ZTEExampleçš„ç½‘ç»œè¿æ¥ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin producerConnection -n 172.21.16.253:9876 -g simple-producer-test -t ZTEExample</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-14-æŸ¥è¯¢Consumerçš„ç½‘ç»œè¿æ¥"><a href="#8-14-æŸ¥è¯¢Consumerçš„ç½‘ç»œè¿æ¥" class="headerlink" title="8.14 æŸ¥è¯¢Consumerçš„ç½‘ç»œè¿æ¥"></a>8.14 æŸ¥è¯¢Consumerçš„ç½‘ç»œè¿æ¥</h4><p>è¯¥å‘½ä»¤åªæ‰“å°å½“å‰ä¸clusterè¿æ¥çš„Consumerç½‘ç»œè¿æ¥ä¿¡æ¯</p>
<ul>
<li><p>æŒ‡ä»¤ï¼š consumerConnection</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.connection.ConsumerConnectionSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-g</td>
<td align="left">æ˜¯</td>
<td align="left">ç”Ÿäº§è€…æ‰€å±ç»„å</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">  æŸ¥è¯¢å½“å‰å±äºgroupï¼ˆæ¶ˆè´¹è€…ç»„ï¼‰=simple-consumer-testçš„æ¶ˆè´¹è€…çš„ç½‘ç»œè¿æ¥ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin consumerConnection -n 172.21.16.253:9876 -g simple-consumer-test</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-15-æŸ¥çœ‹è®¢é˜…ç»„æ¶ˆè´¹çŠ¶æ€"><a href="#8-15-æŸ¥çœ‹è®¢é˜…ç»„æ¶ˆè´¹çŠ¶æ€" class="headerlink" title="8.15  æŸ¥çœ‹è®¢é˜…ç»„æ¶ˆè´¹çŠ¶æ€"></a>8.15  æŸ¥çœ‹è®¢é˜…ç»„æ¶ˆè´¹çŠ¶æ€</h4><ul>
<li><p>æŒ‡ä»¤ï¼š consumerProgress</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.consumer.ConsumerProgressSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-g</td>
<td align="left">æ˜¯</td>
<td align="left">æ¶ˆè´¹è€…æ‰€å±ç»„å</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">   æŸ¥è¯¢å½“å‰å±äºgroupï¼ˆæ¶ˆè´¹è€…ç»„ï¼‰=simple-consumer-testçš„è®¢é˜…çŠ¶æ€ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin consumerProgress -n 172.21.16.253:9876 -g simple-consumer-test</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-16-æŸ¥çœ‹é›†ç¾¤æ¶ˆæ¯"><a href="#8-16-æŸ¥çœ‹é›†ç¾¤æ¶ˆæ¯" class="headerlink" title="8.16  æŸ¥çœ‹é›†ç¾¤æ¶ˆæ¯"></a>8.16  æŸ¥çœ‹é›†ç¾¤æ¶ˆæ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š clusterList</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.cluster.ClusterListSubCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-m</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°æ›´å¤šä¿¡æ¯ (å¢åŠ æ‰“å°å‡ºå¦‚ä¸‹ä¿¡æ¯ #InTotalYest,   #OutTotalYest, #InTotalToday ,#OutTotalToday)</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">  æŸ¥è¯¢å½“å‰é›†ç¾¤çŠ¶æ€ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin clusterList -n 172.21.16.253:9876   </span><br><span class="line">sh mqadmin clusterList -n 172.21.16.253:9876 â€“m</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-17-æ·»åŠ ï¼ˆæ›´æ–°ï¼‰KVé…ç½®ä¿¡æ¯"><a href="#8-17-æ·»åŠ ï¼ˆæ›´æ–°ï¼‰KVé…ç½®ä¿¡æ¯" class="headerlink" title="8.17  æ·»åŠ ï¼ˆæ›´æ–°ï¼‰KVé…ç½®ä¿¡æ¯"></a>8.17  æ·»åŠ ï¼ˆæ›´æ–°ï¼‰KVé…ç½®ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š updateKvConfig</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.namesrv.UpdateKvConfigCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-k</td>
<td align="left">æ˜¯</td>
<td align="left">keyå€¼</td>
</tr>
<tr>
<td align="left">-v</td>
<td align="left">æ˜¯</td>
<td align="left">valueå€¼</td>
</tr>
<tr>
<td align="left">-s</td>
<td align="left">æ˜¯</td>
<td align="left">Namespaceå€¼</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-18-åˆ é™¤KVé…ç½®ä¿¡æ¯"><a href="#8-18-åˆ é™¤KVé…ç½®ä¿¡æ¯" class="headerlink" title="8.18  åˆ é™¤KVé…ç½®ä¿¡æ¯"></a>8.18  åˆ é™¤KVé…ç½®ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š deleteKvConfig</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.namesrv.DeleteKvConfigCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-k</td>
<td align="left">æ˜¯</td>
<td align="left">keyå€¼</td>
</tr>
<tr>
<td align="left">-s</td>
<td align="left">æ˜¯</td>
<td align="left">Namespaceå€¼</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-19-æ·»åŠ ï¼ˆæ›´æ–°ï¼‰Project-groupé…ç½®ä¿¡æ¯"><a href="#8-19-æ·»åŠ ï¼ˆæ›´æ–°ï¼‰Project-groupé…ç½®ä¿¡æ¯" class="headerlink" title="8.19  æ·»åŠ ï¼ˆæ›´æ–°ï¼‰Project groupé…ç½®ä¿¡æ¯"></a>8.19  æ·»åŠ ï¼ˆæ›´æ–°ï¼‰Project groupé…ç½®ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š updateProjectGroup</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.namesrv.UpdateProjectGroupCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-i</td>
<td align="left">æ˜¯</td>
<td align="left">æœåŠ¡å™¨ip</td>
</tr>
<tr>
<td align="left">-p</td>
<td align="left">æ˜¯</td>
<td align="left">project groupå</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-20-åˆ é™¤Project-groupé…ç½®ä¿¡æ¯"><a href="#8-20-åˆ é™¤Project-groupé…ç½®ä¿¡æ¯" class="headerlink" title="8.20  åˆ é™¤Project groupé…ç½®ä¿¡æ¯"></a>8.20  åˆ é™¤Project groupé…ç½®ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š deleteProjectGroup</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.namesrv.DeleteProjectGroupCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-i</td>
<td align="left">æ˜¯</td>
<td align="left">æœåŠ¡å™¨ip</td>
</tr>
<tr>
<td align="left">-p</td>
<td align="left">æ˜¯</td>
<td align="left">project groupå</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-21-å–å¾—Project-groupé…ç½®ä¿¡æ¯"><a href="#8-21-å–å¾—Project-groupé…ç½®ä¿¡æ¯" class="headerlink" title="8.21  å–å¾—Project groupé…ç½®ä¿¡æ¯"></a>8.21  å–å¾—Project groupé…ç½®ä¿¡æ¯</h4><ul>
<li><p>æŒ‡ä»¤ï¼š getProjectGroup</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.namesrv.GetProjectGroupCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-i</td>
<td align="left">æ˜¯</td>
<td align="left">æœåŠ¡å™¨ip</td>
</tr>
<tr>
<td align="left">-p</td>
<td align="left">æ˜¯</td>
<td align="left">project groupå</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="8-22-è·å–Consumeræ¶ˆè´¹è¿›åº¦"><a href="#8-22-è·å–Consumeræ¶ˆè´¹è¿›åº¦" class="headerlink" title="8.22  è·å–Consumeræ¶ˆè´¹è¿›åº¦"></a>8.22  è·å–Consumeræ¶ˆè´¹è¿›åº¦</h4><p>è¯¥å‘½ä»¤åªæ‰“å°å½“å‰ä¸clusterè¿æ¥çš„consumerçš„æ¶ˆè´¹è¿›åº¦</p>
<ul>
<li><p>æŒ‡ä»¤ï¼š getConsumerStatus</p>
</li>
<li><p>ç±»è·¯å¾„ï¼šcom.alibaba.rocketmq.tools.command.offset.GetConsumerStatusCommand</p>
</li>
<li><p>å‚æ•°</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">æ˜¯å¦å¿…å¡«</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-g</td>
<td align="left">æ˜¯</td>
<td align="left">æ¶ˆè´¹è€…æ‰€å±ç»„å</td>
</tr>
<tr>
<td align="left">-t</td>
<td align="left">æ˜¯</td>
<td align="left">æŸ¥è¯¢ä¸»é¢˜</td>
</tr>
<tr>
<td align="left">-i</td>
<td align="left">å¦</td>
<td align="left">Consumerå®¢æˆ·ç«¯ip</td>
</tr>
<tr>
<td align="left">-h</td>
<td align="left">å¦</td>
<td align="left">æ‰“å°å¸®åŠ©</td>
</tr>
<tr>
<td align="left">-n</td>
<td align="left">æ˜¯</td>
<td align="left">nameserveæœåŠ¡åœ°å€åˆ—è¡¨ï¼Œæ ¼å¼ip:port;ip:port;â€¦</td>
</tr>
</tbody></table>
</li>
<li><p>ä¸¾ä¾‹</p>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æŸ¥è¯¢å±äºgroupï¼ˆæ¶ˆè´¹è€…ç»„ï¼‰=simple-consumer-testçš„æ¶ˆè´¹è€…åœ¨Topic=ZTEExampleä¸Šçš„æ¶ˆè´¹çŠ¶æ€ï¼Œnameserveåœ°å€ä¸º172.21.16.253:9876</span></span><br><span class="line">sh mqadmin getConsumerStatus -n 172.21.16.253:9876 -g simple-consumer-test -t ZTEExample</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>ä¸­é—´ä»¶</category>
      </categories>
      <tags>
        <tag>rocketmq</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥Tomcatæºç å­¦ä¹ </title>
    <url>/tomcat/</url>
    <content><![CDATA[<h2 id="1-Tomcatç®€ä»‹"><a href="#1-Tomcatç®€ä»‹" class="headerlink" title="1. Tomcatç®€ä»‹"></a>1. Tomcatç®€ä»‹</h2><p>Apacheæ˜¯webæœåŠ¡å™¨ï¼ŒTomcatæ˜¯åº”ç”¨æœåŠ¡å™¨ï¼Œapache tomcatåªæ˜¯ä¸€ä¸ªservletå®¹å™¨ï¼Œæ˜¯Apacheçš„æ‰©å±•ï¼›Apacheå’ŒTomcatéƒ½å¯ä»¥åšä¸ºç‹¬ç«‹çš„webæœåŠ¡å™¨æ¥è¿è¡Œï¼Œä½†æ˜¯Apacheä¸èƒ½è§£é‡Šjavaç¨‹åºï¼ˆjsp,servletï¼‰ã€‚</p>
<p>ä¸¤è€…éƒ½æ˜¯ä¸€ç§å®¹å™¨ï¼Œåªä¸è¿‡å‘å¸ƒçš„ä¸œè¥¿ä¸åŒï¼šApacheæ˜¯htmlå®¹å™¨ï¼ŒåŠŸèƒ½åƒIISä¸€æ ·ï¼›Tomcatæ˜¯jsp/servletå®¹å™¨ï¼Œç”¨äºå‘å¸ƒjspåŠjavaçš„ï¼Œç±»ä¼¼çš„æœ‰IBMçš„websphereã€BEAçš„Weblogicï¼Œsunçš„JRunç­‰ç­‰ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼šApacheæ˜¯ä¸€è¾†å¡è½¦ï¼Œä¸Šé¢å¯ä»¥è£…ä¸€äº›ä¸œè¥¿å¦‚htmlç­‰ã€‚ä½†æ˜¯ä¸èƒ½è£…æ°´ï¼Œè¦è£…æ°´å¿…é¡»è¦æœ‰å®¹å™¨ï¼ˆæ¡¶ï¼‰ï¼ŒTomcatå°±æ˜¯ä¸€ä¸ªæ¡¶ï¼ˆè£…åƒJavaè¿™æ ·çš„æ°´ï¼‰ï¼Œè€Œè¿™ä¸ªæ¡¶ä¹Ÿå¯ä»¥ä¸æ”¾åœ¨å¡è½¦ä¸Šã€‚</p>
<p>å®˜ç½‘åœ°å€ï¼š <a href="https://tomcat.apache.org/">https://tomcat.apache.org/</a></p>
<h3 id="1-1-ç½‘ç»œæ¶æ„å›¾"><a href="#1-1-ç½‘ç»œæ¶æ„å›¾" class="headerlink" title="1.1 ç½‘ç»œæ¶æ„å›¾"></a>1.1 ç½‘ç»œæ¶æ„å›¾</h3><p><img src="/tomcat/wangluojiagou.jpg" alt="wangluojiagou"></p>
<h3 id="1-2-webç›‘å¬ç«¯å£"><a href="#1-2-webç›‘å¬ç«¯å£" class="headerlink" title="1.2  webç›‘å¬ç«¯å£"></a>1.2  webç›‘å¬ç«¯å£</h3><p>DefaultServletSocketFactory.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServerSocket <span class="title">createSocket</span> <span class="params">(<span class="keyword">int</span> port, <span class="keyword">int</span> backlog,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  InetAddress ifAddress)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ServerSocket (port, backlog, ifAddress);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-Servletå®¹å™¨"><a href="#1-3-Servletå®¹å™¨" class="headerlink" title="1.3 Servletå®¹å™¨"></a>1.3 Servletå®¹å™¨</h3><ul>
<li><p>  æ‰¾åˆ°<code>Tomcat</code>æºç ä¸­å¯¹åº”ä¸€ä¸ªwebé¡¹ç›®çš„ç±» <code> Context.class</code></p>
</li>
<li><p>æ‰¾åˆ°<code>Tomcat</code>æºç  â€”&gt;<code>web.xml</code>æ–‡ä»¶å¯¹åº”çš„ç±»</p>
  <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;/app&quot;</span> <span class="attr">doBase</span>=<span class="string">&quot;E:\\app&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;/app1&quot;</span> <span class="attr">doBase</span>=<span class="string">&quot;E:\\app1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>  æ—¢ç„¶è¿™æ®µé…ç½®èƒ½å¤Ÿä»£è¡¨ä¸€ä¸ªwebé¡¹ç›®åœ¨ç£ç›˜çš„è®¿é—®è·¯å¾„ï¼ŒContextæ ‡ç­¾å°±æ˜¯ä»£è¡¨ä¸€ä¸ªwebé¡¹ç›®</p>
<p>  åœ¨tomcatå®˜ç½‘ä¸­ï¼ˆ<a href="https://tomcat.apache.org/tomcat-8.0-doc/architecture/overview.html%EF%BC%89%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E7%9B%B8%E5%BA%94%E7%9A%84%E6%96%87%E6%A1%A3%E8%AF%B4%E6%98%8E">https://tomcat.apache.org/tomcat-8.0-doc/architecture/overview.htmlï¼‰å¯ä»¥çœ‹åˆ°ç›¸åº”çš„æ–‡æ¡£è¯´æ˜</a></p>
  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">A Context represents a web application. A Host may contain multiple contexts, each with a unique path. The Context interface may be implemented to create custom Contexts, but this is rarely the case because the StandardContext provides significant additional functionality.</span><br><span class="line"></span><br><span class="line">//å¤§è‡´æ„æ€ï¼šä¸€ä¸ªContextæ–‡è¡¨ç¤ºwebåº”ç”¨ç¨‹åºã€‚ä¸€ä¸ªä¸»æœºå¯ä»¥åŒ…å«å¤šä¸ªContextï¼Œæ¯ä¸ªContextéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„è·¯å¾„ã€‚ä¸Šä¸‹æ–‡æ¥å£å¯ä»¥ç”¨æ¥åˆ›å»ºè‡ªå®šä¹‰Contextï¼Œä½†è¿™ç§æƒ…å†µå¾ˆå°‘å‘ç”Ÿï¼Œå› ä¸ºStandardContextæä¾›äº†é‡è¦çš„é™„åŠ åŠŸèƒ½ã€‚</span><br></pre></td></tr></table></figure>

<p>  é‚£ä¹ˆåœ¨<code>StandardContext</code>ä¸­æ˜¯å¦‚ä½•åŠ è½½è¿™äº›é¡¹ç›®çš„ï¼Ÿ</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">loadOnStartup</span><span class="params">(Container children[])</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Collect &quot;load on startup&quot; servlets that need to be initialized</span></span><br><span class="line">        TreeMap&lt;Integer, ArrayList&lt;Wrapper&gt;&gt; map = <span class="keyword">new</span> TreeMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; children.length; i++) &#123;</span><br><span class="line">            Wrapper wrapper = (Wrapper) children[i];</span><br><span class="line">            <span class="keyword">int</span> loadOnStartup = wrapper.getLoadOnStartup();</span><br><span class="line">            <span class="keyword">if</span> (loadOnStartup &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            Integer key = Integer.valueOf(loadOnStartup);</span><br><span class="line">            ArrayList&lt;Wrapper&gt; list = map.get(key);</span><br><span class="line">            <span class="keyword">if</span> (list == <span class="keyword">null</span>) &#123;</span><br><span class="line">                list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">                map.put(key, list);</span><br><span class="line">            &#125;</span><br><span class="line">            list.add(wrapper);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Load the collected &quot;load on startup&quot; servlets</span></span><br><span class="line">        <span class="keyword">for</span> (ArrayList&lt;Wrapper&gt; list : map.values()) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Wrapper wrapper : list) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    wrapper.load();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ServletException e) &#123;</span><br><span class="line">                    getLogger().error(sm.getString(<span class="string">&quot;standardWrapper.loadException&quot;</span>,</span><br><span class="line">                                      getName()), StandardWrapper.getRootCause(e));</span><br><span class="line">                    <span class="comment">// <span class="doctag">NOTE:</span> load errors (including a servlet that throws</span></span><br><span class="line">                    <span class="comment">// UnavailableException from tht init() method) are NOT</span></span><br><span class="line">                    <span class="comment">// fatal to application startup, excepted if failDeploymentIfServletLoadedOnStartupFails is specified</span></span><br><span class="line">                    <span class="keyword">if</span>(getComputedFailCtxIfServletStartFails()) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>  é‚£è¿™äº›Wrapperæ˜¯å¦å°±æ˜¯Servlet ?</p>
<p>  WebXml.java</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> StringManager sm = StringManager.getManager(Constants.PACKAGE_NAME);</span><br></pre></td></tr></table></figure>

<p>  Contants</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String WEB_XML_LOCATION = <span class="string">&quot;/WEB-INF/web.xml&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>  ContextConfig</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">configureContext</span><span class="params">(WebXml webxml)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// As far as possible, process in alphabetical order so it is easy to</span></span><br><span class="line">        <span class="comment">// check everything is present</span></span><br><span class="line">        <span class="comment">// Some validation depends on correct public ID</span></span><br><span class="line">        context.setPublicId(webxml.getPublicId());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Everything else in order</span></span><br><span class="line">        context.setEffectiveMajorVersion(webxml.getMajorVersion());</span><br><span class="line">        context.setEffectiveMinorVersion(webxml.getMinorVersion());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;String, String&gt; entry : webxml.getContextParams().entrySet()) &#123;</span><br><span class="line">            context.addParameter(entry.getKey(), entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        context.setDenyUncoveredHttpMethods(</span><br><span class="line">                webxml.getDenyUncoveredHttpMethods());</span><br><span class="line">        context.setDisplayName(webxml.getDisplayName());</span><br><span class="line">        context.setDistributable(webxml.isDistributable());</span><br><span class="line">        <span class="keyword">for</span> (ContextLocalEjb ejbLocalRef : webxml.getEjbLocalRefs().values()) &#123;</span><br><span class="line">            context.getNamingResources().addLocalEjb(ejbLocalRef);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ContextEjb ejbRef : webxml.getEjbRefs().values()) &#123;</span><br><span class="line">            context.getNamingResources().addEjb(ejbRef);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ContextEnvironment environment : webxml.getEnvEntries().values()) &#123;</span><br><span class="line">            context.getNamingResources().addEnvironment(environment);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ErrorPage errorPage : webxml.getErrorPages().values()) &#123;</span><br><span class="line">            context.addErrorPage(errorPage);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (FilterDef filter : webxml.getFilters().values()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (filter.getAsyncSupported() == <span class="keyword">null</span>) &#123;</span><br><span class="line">                filter.setAsyncSupported(<span class="string">&quot;false&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            context.addFilterDef(filter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (FilterMap filterMap : webxml.getFilterMappings()) &#123;</span><br><span class="line">            context.addFilterMap(filterMap);</span><br><span class="line">        &#125;</span><br><span class="line">        context.setJspConfigDescriptor(webxml.getJspConfigDescriptor());</span><br><span class="line">        <span class="keyword">for</span> (String listener : webxml.getListeners()) &#123;</span><br><span class="line">            context.addApplicationListener(listener);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;String, String&gt; entry :</span><br><span class="line">                webxml.getLocaleEncodingMappings().entrySet()) &#123;</span><br><span class="line">            context.addLocaleEncodingMappingParameter(entry.getKey(),</span><br><span class="line">                    entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Prevents IAE</span></span><br><span class="line">        <span class="keyword">if</span> (webxml.getLoginConfig() != <span class="keyword">null</span>) &#123;</span><br><span class="line">            context.setLoginConfig(webxml.getLoginConfig());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (MessageDestinationRef mdr :</span><br><span class="line">                webxml.getMessageDestinationRefs().values()) &#123;</span><br><span class="line">            context.getNamingResources().addMessageDestinationRef(mdr);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// messageDestinations were ignored in Tomcat 6, so ignore here</span></span><br><span class="line"></span><br><span class="line">        context.setIgnoreAnnotations(webxml.isMetadataComplete());</span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;String, String&gt; entry :</span><br><span class="line">                webxml.getMimeMappings().entrySet()) &#123;</span><br><span class="line">            context.addMimeMapping(entry.getKey(), entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Name is just used for ordering</span></span><br><span class="line">        <span class="keyword">for</span> (ContextResourceEnvRef resource :</span><br><span class="line">                webxml.getResourceEnvRefs().values()) &#123;</span><br><span class="line">            context.getNamingResources().addResourceEnvRef(resource);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ContextResource resource : webxml.getResourceRefs().values()) &#123;</span><br><span class="line">            context.getNamingResources().addResource(resource);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">boolean</span> allAuthenticatedUsersIsAppRole =</span><br><span class="line">                webxml.getSecurityRoles().contains(</span><br><span class="line">                        SecurityConstraint.ROLE_ALL_AUTHENTICATED_USERS);</span><br><span class="line">        <span class="keyword">for</span> (SecurityConstraint constraint : webxml.getSecurityConstraints()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (allAuthenticatedUsersIsAppRole) &#123;</span><br><span class="line">                constraint.treatAllAuthenticatedUsersAsApplicationRole();</span><br><span class="line">            &#125;</span><br><span class="line">            context.addConstraint(constraint);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (String role : webxml.getSecurityRoles()) &#123;</span><br><span class="line">            context.addSecurityRole(role);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ContextService service : webxml.getServiceRefs().values()) &#123;</span><br><span class="line">            context.getNamingResources().addService(service);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ServletDef servlet : webxml.getServlets().values()) &#123;</span><br><span class="line">            Wrapper wrapper = context.createWrapper();</span><br><span class="line">            <span class="comment">// Description is ignored</span></span><br><span class="line">            <span class="comment">// Display name is ignored</span></span><br><span class="line">            <span class="comment">// Icons are ignored</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// jsp-file gets passed to the JSP Servlet as an init-param</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (servlet.getLoadOnStartup() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                wrapper.setLoadOnStartup(servlet.getLoadOnStartup().intValue());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (servlet.getEnabled() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                wrapper.setEnabled(servlet.getEnabled().booleanValue());</span><br><span class="line">            &#125;</span><br><span class="line">            wrapper.setName(servlet.getServletName());</span><br><span class="line">            Map&lt;String,String&gt; params = servlet.getParameterMap();</span><br><span class="line">            <span class="keyword">for</span> (Entry&lt;String, String&gt; entry : params.entrySet()) &#123;</span><br><span class="line">                wrapper.addInitParameter(entry.getKey(), entry.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">            wrapper.setRunAs(servlet.getRunAs());</span><br><span class="line">            Set&lt;SecurityRoleRef&gt; roleRefs = servlet.getSecurityRoleRefs();</span><br><span class="line">            <span class="keyword">for</span> (SecurityRoleRef roleRef : roleRefs) &#123;</span><br><span class="line">                wrapper.addSecurityReference(</span><br><span class="line">                        roleRef.getName(), roleRef.getLink());</span><br><span class="line">            &#125;</span><br><span class="line">            wrapper.setServletClass(servlet.getServletClass());</span><br><span class="line">            MultipartDef multipartdef = servlet.getMultipartDef();</span><br><span class="line">            <span class="keyword">if</span> (multipartdef != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (multipartdef.getMaxFileSize() != <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">                        multipartdef.getMaxRequestSize()!= <span class="keyword">null</span> &amp;&amp;</span><br><span class="line">                        multipartdef.getFileSizeThreshold() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    wrapper.setMultipartConfigElement(<span class="keyword">new</span> MultipartConfigElement(</span><br><span class="line">                            multipartdef.getLocation(),</span><br><span class="line">                            Long.parseLong(multipartdef.getMaxFileSize()),</span><br><span class="line">                            Long.parseLong(multipartdef.getMaxRequestSize()),</span><br><span class="line">                            Integer.parseInt(</span><br><span class="line">                                    multipartdef.getFileSizeThreshold())));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    wrapper.setMultipartConfigElement(<span class="keyword">new</span> MultipartConfigElement(</span><br><span class="line">                            multipartdef.getLocation()));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (servlet.getAsyncSupported() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                wrapper.setAsyncSupported(</span><br><span class="line">                        servlet.getAsyncSupported().booleanValue());</span><br><span class="line">            &#125;</span><br><span class="line">            wrapper.setOverridable(servlet.isOverridable());</span><br><span class="line">            context.addChild(wrapper);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;String, String&gt; entry :</span><br><span class="line">                webxml.getServletMappings().entrySet()) &#123;</span><br><span class="line">            context.addServletMapping(entry.getKey(), entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        SessionConfig sessionConfig = webxml.getSessionConfig();</span><br><span class="line">        <span class="keyword">if</span> (sessionConfig != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sessionConfig.getSessionTimeout() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                context.setSessionTimeout(</span><br><span class="line">                        sessionConfig.getSessionTimeout().intValue());</span><br><span class="line">            &#125;</span><br><span class="line">            SessionCookieConfig scc =</span><br><span class="line">                context.getServletContext().getSessionCookieConfig();</span><br><span class="line">            scc.setName(sessionConfig.getCookieName());</span><br><span class="line">            scc.setDomain(sessionConfig.getCookieDomain());</span><br><span class="line">            scc.setPath(sessionConfig.getCookiePath());</span><br><span class="line">            scc.setComment(sessionConfig.getCookieComment());</span><br><span class="line">            <span class="keyword">if</span> (sessionConfig.getCookieHttpOnly() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                scc.setHttpOnly(sessionConfig.getCookieHttpOnly().booleanValue());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (sessionConfig.getCookieSecure() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                scc.setSecure(sessionConfig.getCookieSecure().booleanValue());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (sessionConfig.getCookieMaxAge() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                scc.setMaxAge(sessionConfig.getCookieMaxAge().intValue());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (sessionConfig.getSessionTrackingModes().size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                context.getServletContext().setSessionTrackingModes(</span><br><span class="line">                        sessionConfig.getSessionTrackingModes());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Context doesn&#x27;t use version directly</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String welcomeFile : webxml.getWelcomeFiles()) &#123;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * The following will result in a welcome file of &quot;&quot; so don&#x27;t add</span></span><br><span class="line"><span class="comment">             * that to the context</span></span><br><span class="line"><span class="comment">             * &lt;welcome-file-list&gt;</span></span><br><span class="line"><span class="comment">             *   &lt;welcome-file/&gt;</span></span><br><span class="line"><span class="comment">             * &lt;/welcome-file-list&gt;</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">if</span> (welcomeFile != <span class="keyword">null</span> &amp;&amp; welcomeFile.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                context.addWelcomeFile(welcomeFile);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do this last as it depends on servlets</span></span><br><span class="line">        <span class="keyword">for</span> (JspPropertyGroup jspPropertyGroup :</span><br><span class="line">                webxml.getJspPropertyGroups()) &#123;</span><br><span class="line">            String jspServletName = context.findServletMapping(<span class="string">&quot;*.jsp&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (jspServletName == <span class="keyword">null</span>) &#123;</span><br><span class="line">                jspServletName = <span class="string">&quot;jsp&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (context.findChild(jspServletName) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (String urlPattern : jspPropertyGroup.getUrlPatterns()) &#123;</span><br><span class="line">                    context.addServletMapping(urlPattern, jspServletName, <span class="keyword">true</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(log.isDebugEnabled()) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (String urlPattern : jspPropertyGroup.getUrlPatterns()) &#123;</span><br><span class="line">                        log.debug(<span class="string">&quot;Skiping &quot;</span> + urlPattern + <span class="string">&quot; , no servlet &quot;</span> +</span><br><span class="line">                                jspServletName);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;String, String&gt; entry :</span><br><span class="line">                webxml.getPostConstructMethods().entrySet()) &#123;</span><br><span class="line">            context.addPostConstructMethod(entry.getKey(), entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;String, String&gt; entry :</span><br><span class="line">            webxml.getPreDestroyMethods().entrySet()) &#123;</span><br><span class="line">            context.addPreDestroyMethod(entry.getKey(), entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-Tomcatæ ¸å¿ƒæ¶æ„"><a href="#2-Tomcatæ ¸å¿ƒæ¶æ„" class="headerlink" title="2. Tomcatæ ¸å¿ƒæ¶æ„"></a>2. Tomcatæ ¸å¿ƒæ¶æ„</h2><p>æ¯ä¸€å±‚çº§å¯¹åº”çš„éƒ½æ˜¯<code>xml</code>æ–‡ä»¶ä¸­çš„æ ‡ç­¾ï¼Œä»¥åŠæºç ä¸­çš„å®ä½“ç±»ï¼Œå…¶ä¸­æœ‰å¤šå±‚çš„å›¾å½¢è¡¨ç¤ºå¯ä»¥å­˜åœ¨å¤šä¸ª</p>
<p><img src="/tomcat/tomcat5.png" alt="tomcat5"></p>
<p>Tips: äº¿å›¾ä¸å……é’±é™åˆ¶äº†ç»„ä»¶ä¸ªæ•°ï¼ŒContextåªç”»äº†ä¸€ä¸ªï¼</p>
<h3 id="2-2-Tomcatç»„ä»¶"><a href="#2-2-Tomcatç»„ä»¶" class="headerlink" title="2.2 Tomcatç»„ä»¶"></a>2.2 Tomcatç»„ä»¶</h3><p><code>XML</code>é…ç½®æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Server</span>&gt;</span>                       <span class="comment">&lt;!--é¡¶å±‚ç±»å…ƒç´ ï¼šä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ª&lt;Server&gt;å…ƒç´ ï¼Œå¯åŒ…å«å¤šä¸ªServiceã€‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Service</span>&gt;</span>                  <span class="comment">&lt;!--é¡¶å±‚ç±»å…ƒç´ ï¼šæœ¬èº«ä¸æ˜¯å®¹å™¨ï¼Œå¯åŒ…å«ä¸€ä¸ªEngineï¼Œå¤šä¸ªConnectorã€‚--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Connector</span>/&gt;</span>           <span class="comment">&lt;!--è¿æ¥å™¨ç±»å…ƒç´ ï¼šä»£è¡¨é€šä¿¡æ¥å£ã€‚--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">Engine</span>&gt;</span>   		   <span class="comment">&lt;!--å®¹å™¨ç±»å…ƒç´ ï¼šä¸ºç‰¹å®šçš„Serviceç»„ä»¶å¤„ç†æ‰€æœ‰å®¢æˆ·è¯·æ±‚ï¼Œå¯åŒ…å«å¤šä¸ªHostã€‚--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">Host</span>&gt;</span>    	   <span class="comment">&lt;!--å®¹å™¨ç±»å…ƒç´ ï¼šä¸ºç‰¹å®šçš„è™šæ‹Ÿä¸»æœºå¤„ç†æ‰€æœ‰å®¢æˆ·è¯·æ±‚ï¼Œå¯åŒ…å«å¤šä¸ªContextã€‚--&gt;</span></span><br><span class="line">                 <span class="tag">&lt;<span class="name">Context</span>&gt;</span>      <span class="comment">&lt;!--å®¹å™¨ç±»å…ƒç´ ï¼šä¸ºç‰¹å®šçš„Webåº”ç”¨å¤„ç†æ‰€æœ‰å®¢æˆ·è¯·æ±‚ã€‚--&gt;</span></span><br><span class="line">                 <span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Server</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-1-Server"><a href="#2-2-1-Server" class="headerlink" title="2.2.1 Server"></a>2.2.1 Server</h4><p> ä»£è¡¨æ•´ä¸ª<code>Tomcat</code>å®ä¾‹ï¼Œåœ¨JVMä¸­å¼å•ä¾‹çš„ï¼Œå®ƒè¿˜è´Ÿè´£ç®¡ç†åŒ…å«<code>Service</code>ç»„ä»¶çš„å£°æ˜å‘¨æœŸï¼Œä¸‹å›¾å¼å¯¹<code>Server</code>ç»„ä»¶çš„ä¸€ä¸ªç®€å•æè¿°ï¼š</p>
<p><img src="/tomcat/tomcat_server.gif" alt="tomcat_server"></p>
<ul>
<li>  å¯ä»¥åœ¨<code>Server.xml</code>æ–‡ä»¶å¯¹<code>server</code>ç»„ä»¶è¿›è¡Œé…ç½®</li>
<li>  é…ç½®å±æ€§æœ‰ï¼šname, shutdown, port, command, class nameç­‰</li>
<li>  shutdown porté»˜è®¤ä¸º8005</li>
<li>  shutdown command é»˜è®¤ä¸ºSHUTDOWN; å¤„äºå®‰å…¨ï¼Œåªèƒ½ä»åŒä¸€å°æœåŠ¡å™¨å‘å‡ºSHUTDOWNå‘½ä»¤</li>
<li>  æä¾›JNDIçš„å®ç°ï¼Œå¯ä»¥æ”¾ä»»æ„å¯¹è±¡ï¼ˆå¦‚DataSource, ç¯å¢ƒå˜é‡ç­‰ï¼‰ï¼›</li>
</ul>
<h4 id="2-2-2-Service"><a href="#2-2-2-Service" class="headerlink" title="2.2.2 Service"></a>2.2.2 Service</h4><p> <code>Service</code>ç»„ä»¶ä»£è¡¨çš„å¼ä¸€ç»„è¯·æ±‚å¤„ç†ä¸»é”®ï¼Œä¸€ä¸ª<code>Server</code>å®ä¾‹å¯ä»¥åŒ…å«å¤šä¸ª<code>Service</code>å®ä¾‹ï¼Œæ¯ä¸ª<code>Service</code>å®ä¾‹ä¸ä¸€ç»„<code>Connector</code>å®ä¾‹å’Œå•ä¸ªEngineå®ä¾‹ç›¸å…³è”( Service æ˜¯ Server å†…éƒ¨çš„ä¸­é—´ç»„ä»¶ï¼Œå®ƒå°†ä¸€ä¸ªæˆ–å¤šä¸ª Connector ç»‘å®šåˆ°ä¸€ä¸ªEngine ä¸Šã€‚)</p>
<p><img src="/tomcat/tomcat_service.gif" alt="tomcat_service"></p>
<p>å•<code>Service</code>å®ä¾‹ä¸€èˆ¬å¤Ÿç”¨äº†ï¼Œå¦‚æœéœ€è¦é’ˆå¯¹ä¸åŒçš„<code>IP</code>æˆ–è€…<code>port</code>ä½¿ç”¨ä¸åŒçš„<code>Service</code>ç»„ä»¶æ¥å¤„ç†ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¤š<code>Service</code>å®ä¾‹</p>
<h4 id="2-2-3-Connector"><a href="#2-2-3-Connector" class="headerlink" title="2.2.3 Connector"></a>2.2.3 Connector</h4><p><code> Connector</code>ç»„ä»¶æŠŠEngineä»ä¸åŒçš„é€šä¿¡åè®®ä¸­éš”ç¦»å‡ºæ¥ï¼Œå¦‚<code>HTTP</code>, <code>HTTPS</code>, <code>AJP</code>ç­‰ï¼›</p>
<p>å¯ä»¥é…ç½®<code>Tomcat</code>çš„å·¥ä½œæ¨¡å¼: <code>Standalone</code> &amp;  <code>Conjunction</code></p>
<ul>
<li><p>Standaloneæ¨¡å¼ï¼štomcatå¯ä»¥é…ç½®HTTP/HTTPSçš„connectorï¼Œå®ƒæ—¢è¦å¤„ç†é™æ€å†…å®¹ï¼Œä¹Ÿè¦å§”æ‰˜Engineå¤„ç†åŠ¨æ€å†…å®¹</p>
<p>  <img src="/tomcat/tomcat_connector_standalone.gif" alt="tomcat_connector_standalone"></p>
</li>
<li><p>  Conjunctionæ¨¡å¼ï¼šå®¢æˆ·ç«¯æ˜¯Apacheæˆ–è€…æ˜¯IISä¹‹ç±»çš„WEB Serverï¼› å½“Web Serverå†³å®šå°†è¯·æ±‚è½¬äº¤ç»™Tomcatå¤„ç†æ—¶ï¼Œå®ƒé€šè¿‡AJPåè®®ä¸Tomcatäº¤äº’ï¼›AJPæ˜¯åŸºäºäºŒè¿›åˆ¶æµçš„æ¯”HTTPæ›´é«˜æ•ˆä¸€äº›ï¼›</p>
</li>
</ul>
<p>å…³äº<code>Connector</code>çš„å‡ ä¸ªé‡è¦ç‚¹ï¼š</p>
<ul>
<li>  ç›‘å¬çš„IPå’Œport</li>
<li>  å¤„ç†è¯·æ±‚çš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œå¦‚æœæ‰€æœ‰çš„çº¿ç¨‹éƒ½å¿™ï¼Œåˆ™ä¼šä¸¢å¼ƒæ–°çš„è¯·æ±‚</li>
<li>  æ‰€æœ‰çš„Connectoræ¥æ”¶åˆ°è¯·æ±‚åï¼Œè½¬åŒ–æˆç»Ÿä¸€çš„æ¨¡å¼ï¼Œå†äº¤ç»™å”¯ä¸€çš„Engineå¤„ç†ï¼›Engineè´Ÿè´£å¤„ç†è¯·iå»å¹¶äº§ç”Ÿå“åº”ï¼›</li>
<li>  Connectorå°†Engineäº§ç”Ÿçš„å“åº”æŒ‰ç…§åˆé€‚çš„åè®®å‘é€åˆ°å®¢æˆ·ç«¯</li>
</ul>
<p><strong>å¸¸è§Connector</strong>ï¼š</p>
<ul>
<li>  http/1.1</li>
<li>  http/2</li>
<li>  ajp(apache jserv protocol)  ä¸“ç”¨äºtomcatå‰ç«¯æ˜¯apacheåå‘ä»£ç†çš„æƒ…å†µä¸‹</li>
</ul>
<p><code>Tomcat</code>æ—¢ä½œä¸ºwebæœåŠ¡å™¨ï¼ˆè§£æhttpåè®®ï¼Œå“åº”å®¢æˆ·ç«¯ï¼Œé™æ€ï¼›éå¤„ç†åŠ¨æ€ï¼ˆå§”æ‰˜ï¼‰ï¼‰ï¼Œä¹Ÿä½œä¸ºåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼šè¯·æ±‚æ¥è‡ªäºæµè§ˆå™¨ã€‚<br><code>Tomcat</code>åº”è¯¥è€ƒè™‘å·¥ä½œæƒ…å½¢å¹¶ä¸ºç›¸åº”æƒ…å½¢ä¸‹çš„è¯·æ±‚åˆ†åˆ«å®šä¹‰å¥½éœ€è¦çš„è¿æ¥å™¨æ‰èƒ½æ­£ç¡®æ¥æ”¶æ¥è‡ªäºå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚<br>æ­¤å¤„æš‚å…ˆä»‹ç»HTTP/1.1è¿æ¥å™¨çš„å±æ€§è®¾ç½®ã€‚ajpåæ–‡å†åšä»‹ç»ã€‚<br>HTTPè¿æ¥å™¨è¡¨ç¤ºæ”¯æŒHTTP/1.1åè®®çš„ç»„ä»¶ã€‚è®¾ç½®äº†è¯¥è¿æ¥å™¨å°±è¡¨ç¤ºcatalinaå¯ç”¨å®ƒçš„ç‹¬ç«‹webæœåŠ¡åŠŸèƒ½ï¼Œå½“ç„¶ï¼Œè‚¯å®šä¹Ÿæä¾›å®ƒå¿…é¡»çš„servletså’Œjspæ‰§è¡ŒåŠŸèƒ½ã€‚åœ¨ä¸€ä¸ªserviceä¸­å¯ä»¥é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥å™¨ï¼Œæ¯ä¸ªè¿æ¥å™¨éƒ½å¯ä»¥å°†è¯·æ±‚è½¬å‘ç»™å®ƒä»¬ç›¸å…³è”çš„engineä»¥å¤„ç†è¯·æ±‚ã€åˆ›å»ºå“åº”ã€‚<br>æ¯ä¸ªæµå…¥çš„è¯·æ±‚éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æ¥æ¥æ”¶ã€‚å½“å¹¶å‘è¯·æ±‚æ•°é‡è¶…å‡ºmaxThreadsæŒ‡å®šçš„å€¼æ—¶ï¼Œå¤šå‡ºçš„è¯·æ±‚å°†è¢«å †å åœ¨å¥—æ¥å­—ï¼ˆsocketï¼‰ä¸­ï¼Œç›´åˆ°è¶…å‡ºacceptCountæŒ‡å®šçš„å€¼ã€‚è¶…å‡ºaccpetCountçš„è¯·æ±‚å°†ä»¥â€connection refusedâ€é”™è¯¯è¿›è¡Œæ‹’ç»ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--HTTPè¿æ¥å™¨çš„å±æ€§å®åœ¨å¤ªå¤šï¼Œè¯¦ç»†é…ç½®æ–¹æ³•è§å®˜æ–¹æ‰‹å†Œã€‚é€šå¸¸å®šä¹‰HTTPè¿æ¥å™¨æ—¶å¿…é¡»å®šä¹‰çš„å±æ€§åªæœ‰&quot;port&quot;ã€‚ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	addressï¼šæŒ‡å®šè¿æ¥å™¨ç›‘å¬çš„åœ°å€ï¼Œé»˜è®¤ä¸ºæ‰€æœ‰åœ°å€ï¼Œå³0.0.0.0ã€‚</span></span><br><span class="line"><span class="comment">	maxThreadsï¼šæ”¯æŒçš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼Œé»˜è®¤ä¸º200ï¼›å¦‚æœå¼•ç”¨äº†executoråˆ›å»ºçš„å…±äº«çº¿ç¨‹æ± ï¼Œåˆ™è¯¥å±æ€§è¢«å¿½ç•¥ã€‚</span></span><br><span class="line"><span class="comment">	acceptCountï¼šè®¾ç½®ç­‰å¾…é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ï¼›é€šå¸¸åœ¨tomcatæ‰€æœ‰å¤„ç†çº¿ç¨‹å‡å¤„äºç¹å¿™çŠ¶æ€æ—¶ï¼Œæ–°å‘æ¥çš„è¯·æ±‚å°†è¢«æ”¾ç½®äºç­‰å¾…é˜Ÿåˆ—ä¸­ï¼›</span></span><br><span class="line"><span class="comment">	maxConnectionsï¼šå…è®¸å»ºç«‹çš„æœ€å¤§è¿æ¥æ•°ã€‚acceptCountå’ŒmaxThreadsæ˜¯æ¥å—è¿æ¥çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚å­˜åœ¨ä¸€ç§æƒ…å†µï¼ŒmaxConnectionså°äºacceptCountæ—¶ï¼Œè¶…å‡ºmaxConnectionsçš„è¿æ¥è¯·æ±‚å°†è¢«æ¥æ”¶ï¼Œä½†ä¸ä¼šä¸ä¹‹å»ºç«‹è¿æ¥ã€‚</span></span><br><span class="line"><span class="comment">	portï¼šç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ä¸º0ï¼Œæ­¤æ—¶è¡¨ç¤ºéšæœºé€‰ä¸€ä¸ªç«¯å£ï¼Œé€šå¸¸éƒ½åº”è¯¥æ˜¾å¼æŒ‡å®šç›‘å¬ç«¯å£ã€‚</span></span><br><span class="line"><span class="comment">	protocolï¼šè¿æ¥å™¨ä½¿ç”¨çš„åè®®ï¼Œç”¨äºå¤„ç†å¯¹åº”çš„è¯·æ±‚ã€‚é»˜è®¤ä¸ºHTTP/1.1ï¼Œæ­¤æ—¶å®ƒä¼šè‡ªåŠ¨åœ¨åŸºäºJava NIOæˆ–APR/nativeè¿æ¥å™¨ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚å®šä¹‰AJPåè®®æ—¶é€šå¸¸ä¸ºAJP/1.3ã€‚</span></span><br><span class="line"><span class="comment">	redirectPortï¼šå¦‚æœæŸè¿æ¥å™¨æ”¯æŒçš„åè®®æ˜¯HTTPï¼Œå½“æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„HTTPSè¯·æ±‚æ—¶ï¼Œåˆ™è½¬å‘è‡³æ­¤å±æ€§å®šä¹‰çš„ç«¯å£ã€‚</span></span><br><span class="line"><span class="comment">	connectionTimeoutï¼šç­‰å¾…å®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œé»˜è®¤ä¸º60000ï¼Œå³1åˆ†é’Ÿï¼›æ³¨æ„ï¼Œè¿™æ—¶å€™è¿æ¥å·²ç»å»ºç«‹ã€‚</span></span><br><span class="line"><span class="comment">	keepAliveTimeoutï¼šé•¿è¿æ¥çŠ¶æ€çš„è¶…æ—¶æ—¶é—´ã€‚è¶…å‡ºè¯¥å€¼æ—¶ï¼Œé•¿è¿æ¥å°†å…³é—­ã€‚</span></span><br><span class="line"><span class="comment">		enableLookupsï¼šæ˜¯å¦é€šè¿‡request.getRemoteHost()è¿›è¡ŒDNSæŸ¥è¯¢ä»¥è·å–å®¢æˆ·ç«¯çš„ä¸»æœºåï¼›é»˜è®¤ä¸ºtrueï¼Œåº”è®¾ç½®ä¸ºfalseé˜²æ­¢åè§£å®¢æˆ·ç«¯ä¸»æœºï¼›</span></span><br><span class="line"><span class="comment">compressionï¼šæ˜¯å¦å‹ç¼©æ•°æ®ã€‚é»˜è®¤ä¸ºoffã€‚è®¾ç½®ä¸ºonæ—¶è¡¨ç¤ºåªå‹ç¼©textæ–‡æœ¬ï¼Œè®¾ç½®ä¸ºforceæ—¶è¡¨ç¤ºå‹ç¼©æ‰€æœ‰å†…å®¹ã€‚åº”è¯¥åœ¨å‹ç¼©å’Œsendfileä¹‹é—´åšä¸ªæƒè¡¡ã€‚</span></span><br><span class="line"><span class="comment">	useSendfileï¼šè¯¥å±æ€§ä¸ºNIOï¼ˆéé˜»å¡IOï¼‰çš„å±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦å¯ç”¨sendfileçš„åŠŸèƒ½ã€‚é»˜è®¤ä¸ºtrueï¼Œå¯ç”¨è¯¥å±æ€§å°†ä¼šç¦æ­¢compressionå±æ€§ã€‚</span></span><br><span class="line"><span class="comment">å½“åè®®æŒ‡å®šä¸ºHTTP/1.1æ—¶ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨åœ¨NIO/APRåè®®å¤„ç†æ–¹å¼ä¸Šè¿›è¡ŒæŒ‰éœ€åˆ‡æ¢ã€‚å¦‚è¦æ˜¾å¼æŒ‡å®šåè®®ï¼Œæ–¹å¼å¦‚ä¸‹ï¼š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;org.apache.coyote.http11.Http11Nio2Protocol&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;org.apache.coyote.http11.Http11AprProtocol&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    å…¶ä¸­NIOæ˜¯C/C++çš„éé˜»å¡IOå¤ç”¨æ¨¡å‹åœ¨JAVAä¸­çš„IOå®ç°ï¼ŒNIO2å³AIOæ˜¯å¼‚æ­¥NIOï¼Œå³å¼‚æ­¥éé˜»å¡IOï¼š</span></span><br><span class="line"><span class="comment">    NioProtocol ï¼šnon blocking Java NIO connector</span></span><br><span class="line"><span class="comment">    Nio2Protocolï¼šnon blocking Java NIO2 connector</span></span><br><span class="line"><span class="comment">    AprProtocol ï¼šthe APR/native connector </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¤šä¸ªå±æ€§çš„SSLè¿æ¥æœåŠ¡å™¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8443&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">maxThreads</span>=<span class="string">&quot;150&quot;</span> <span class="attr">minSpareThreads</span>=<span class="string">&quot;25&quot;</span> <span class="attr">maxSpareThreads</span>=<span class="string">&quot;75&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">enableLookups</span>=<span class="string">&quot;false&quot;</span> <span class="attr">acceptCount</span>=<span class="string">&quot;100&quot;</span> <span class="attr">debug</span>=<span class="string">&quot;0&quot;</span> <span class="attr">scheme</span>=<span class="string">&quot;https&quot;</span> <span class="attr">secure</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">clientAuth</span>=<span class="string">&quot;false&quot;</span> <span class="attr">sslProtocol</span>=<span class="string">&quot;TLS&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="2-2-4-Engine"><a href="#2-2-4-Engine" class="headerlink" title="2.2.4 Engine"></a>2.2.4 Engine</h4><p>â€‹    å…¶å®å°±æ˜¯Servlet Engineï¼›ä¸€ä¸ªserviceç»„ä»¶åªèƒ½åŒ…å«ä¸€ä¸ªEngineç»„ä»¶ï¼›ä½†æ˜¯ä¸€ä¸ªEngineå¯ä»¥åŒ…å«å¤šä¸ªHostç»„ä»¶ï¼›å®ƒæ¥å—ä»£è¡¨è¯·æ±‚å’Œç›¸åº”çš„å¯¹è±¡ï¼Œç„¶åå°†å·¥ä½œå§”æ‰˜ç»™ç›¸åº”çš„hostç»„ä»¶è¿›è¡Œå¤„ç†ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„hostç»„ä»¶ï¼Œåˆ™å§”æ‰˜ç»™default hostæ¥å¤„ç†ï¼›</p>
<p>â€‹    Engineä»£è¡¨æœåŠ¡è¯·æ±‚å¤„ç†ç®¡é“ï¼›ç”±äºServerå¯èƒ½æœ‰å¤šä¸ª Connector è¿æ¥å™¨ï¼Œ Engine è´Ÿè´£æ¥æ”¶å¹¶å¤„ç†æ¥è‡ªè¿™äº› Connector çš„æ‰€æœ‰è¯·æ±‚ï¼Œå¹¶å°†å“åº”è¿”å›ç»™å¯¹åº”çš„ Connectorï¼Œæœ€ç»ˆè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>â€‹    Engineæ˜¯serviceç»„ä»¶ä¸­ç”¨æ¥åˆ†æåè®®çš„å¼•æ“æœºå™¨ï¼Œå®ƒä»ä¸€ä¸ªæˆ–å¤šä¸ªconnectorä¸Šæ¥æ”¶è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚äº¤ç»™å¯¹åº”çš„è™šæ‹Ÿä¸»æœºè¿›è¡Œå¤„ç†ï¼Œæœ€åè¿”å›å®Œæ•´çš„å“åº”æ•°æ®ç»™connectorï¼Œé€šè¿‡connectorå°†å“åº”æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<br>åªæœ‰ä¸€ä¸ªengineå…ƒç´ å¿…é¡»åµŒå¥—åœ¨æ¯ä¸ªserviceä¸­ï¼Œä¸”engineå¿…é¡»åœ¨å…¶æ‰€éœ€è¦å…³è”çš„connectorä¹‹åï¼Œè¿™æ ·åœ¨engineå‰é¢çš„connectoréƒ½å¯ä»¥è¢«æ­¤engineå…³è”ï¼Œè€Œåœ¨engineåé¢çš„connectoråˆ™è¢«å¿½ç•¥ï¼Œå› ä¸ºä¸€ä¸ªserviceä¸­åªå…è®¸æœ‰ä¸€ä¸ªengineã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å®šä¹‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span> <span class="attr">defaultHost</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">&quot;Standalone&quot;</span> <span class="attr">defaultHost</span>=<span class="string">&quot;localhost&quot;</span> <span class="attr">jvmRoute</span>=<span class="string">&quot;TomcatA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">å¸¸ç”¨çš„engineå±æ€§æœ‰ï¼š</span></span><br><span class="line"><span class="comment">	classNameï¼šå®ç°engineçš„ç±»ï¼Œè¯¥ç±»å¿…é¡»å®ç°org.apache.catalina.Engineæ¥å£ã€‚ä¸ç»™å®šè¯¥å±æ€§æ—¶å°†é‡‡ç”¨é»˜è®¤çš„æ ‡å‡†ç±»org.apache.catalina.core.StandardEngineã€‚</span></span><br><span class="line"><span class="comment">	defaultHostï¼šæŒ‡å®šå¤„ç†è¯·æ±‚çš„é»˜è®¤è™šæ‹Ÿä¸»æœºã€‚åœ¨Engineä¸­å®šä¹‰çš„å¤šä¸ªè™šæ‹Ÿä¸»æœºçš„ä¸»æœºåç§°ä¸­è‡³å°‘æœ‰ä¸€ä¸ªè·ŸdefaultHostå®šä¹‰çš„ä¸»æœºåç§°åŒåã€‚</span></span><br><span class="line"><span class="comment">	nameï¼šEngineç»„ä»¶çš„åç§°ï¼Œç”¨äºè®°å½•æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯ï¼Œæ— å…³ç´§è¦çš„å±æ€§ï¼Œå¯éšæ„ç»™å®šã€‚</span></span><br><span class="line"><span class="comment">	jvmRoute(session+æ ‡è¯†ç¬¦ï¼Œè®°å½•åœ¨æœåŠ¡ç«¯)ï¼šåœ¨å¯ç”¨sessionç²˜æ€§æ—¶æŒ‡å®šä½¿ç”¨å“ªç§è´Ÿè½½å‡è¡¡çš„æ ‡è¯†ç¬¦ã€‚æ‰€æœ‰çš„tomcat serverå®ä¾‹ä¸­è¯¥æ ‡è¯†ç¬¦å¿…é¡»å”¯ä¸€ï¼Œå®ƒä¼šè¿½åŠ åœ¨sessionæ ‡è¯†ç¬¦çš„å°¾éƒ¨ï¼Œå› æ­¤èƒ½è®©å‰ç«¯ä»£ç†æ€»æ˜¯å°†ç‰¹å®šçš„sessionè½¬å‘è‡³åŒä¸€ä¸ªtomcatå®ä¾‹ä¸Šã€‚(Sessionä¸cookieåŠŸèƒ½æ•ˆæœç›¸åŒã€‚Sessionä¸Cookieçš„åŒºåˆ«åœ¨äºSessionæ˜¯è®°å½•åœ¨æœåŠ¡ç«¯çš„,è€ŒCookieæ˜¯è®°å½•åœ¨å®¢æˆ·ç«¯çš„ã€‚ )</span></span><br><span class="line"><span class="comment">æ³¨æ„: jvmRouteåŒæ ·å¯ä»¥ä½¿ç”¨jvmRouteçš„ç³»ç»Ÿå±æ€§æ¥è®¾ç½®ã€‚å¦‚æœæ­¤å¤„è®¾ç½®äº†jvmRouteï¼Œåˆ™è¦†ç›–jvmRouteç³»ç»Ÿå±æ€§ã€‚å…³äºjvmRouteçš„ä½¿ç”¨ï¼Œåœ¨åé¢tomcat ajpè´Ÿè½½å‡è¡¡çš„æ–‡ç« ä¸­ä»‹ç»ã€‚</span></span><br><span class="line"><span class="comment">engineæ˜¯å®¹å™¨ä¸­çš„é¡¶çº§å­å®¹å™¨ï¼Œå…¶å†…å¯ä»¥åµŒå¥—ä¸€ä¸ªæˆ–å¤šä¸ªHostä½œä¸ºè™šæ‹Ÿä¸»æœºï¼Œä¸”è‡³å°‘ä¸€ä¸ªhostè¦å’Œengineä¸­çš„é»˜è®¤è™šæ‹Ÿä¸»æœºåç§°å¯¹åº”ã€‚é™¤äº†hostï¼Œè¿˜å¯ä»¥åµŒå¥—releamå’Œvalveç»„ä»¶ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-5-Host"><a href="#2-2-5-Host" class="headerlink" title="2.2.5 Host"></a>2.2.5 Host</h4><p>â€‹    Hostå®¹å™¨ç”¨æ¥å®šä¹‰è™šæ‹Ÿä¸»æœºã€‚engineä»connectoræ¥æ”¶åˆ°è¯·æ±‚è¿›è¡Œåˆ†æåï¼Œä¼šå°†ç›¸å…³çš„å±æ€§å‚æ•°ä¼ é€’ç»™å¯¹åº”çš„(ç­›é€‰æ–¹å¼æ˜¯ä»è¯·æ±‚é¦–éƒ¨çš„hostå­—æ®µå’Œè™šæ‹Ÿä¸»æœºåç§°è¿›è¡ŒåŒ¹é…)è™šæ‹Ÿhostè¿›è¡Œå¤„ç†ã€‚å¦‚æœæ²¡æœ‰åˆé€‚çš„è™šæ‹Ÿä¸»æœºï¼Œåˆ™ä¼ é€’ç»™é»˜è®¤è™šæ‹Ÿä¸»æœºã€‚å› æ­¤æ¯ä¸ªå®¹å™¨ä¸­å¿…é¡»è‡³å°‘å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œä¸”å¿…é¡»æœ‰ä¸€ä¸ªè™šæ‹Ÿä¸»æœºå’Œengineå®¹å™¨ä¸­å®šä¹‰çš„é»˜è®¤è™šæ‹Ÿä¸»æœºåç§°ç›¸åŒ;</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">&quot;localhost&quot;</span>  <span class="attr">appBase</span>=<span class="string">&quot;webapps&quot;</span> <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Alias</span>&gt;</span>www.a.com<span class="tag">&lt;/<span class="name">Alias</span>&gt;</span> <span class="comment">&lt;!--Aliasä¸ºHostæŒ‡å®šçš„ä¸»æœºåå®šä¹‰ä¸»æœºåˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	å¸¸ç”¨å±æ€§è¯´æ˜ï¼š</span></span><br><span class="line"><span class="comment">    classNameï¼šå®ç°hostå®¹å™¨çš„ç±»ï¼Œè¯¥ç±»å¿…é¡»å®ç°org.apache.catalina.Hostæ¥å£ã€‚ä¸ç»™å®šè¯¥å±æ€§æ—¶å°†é‡‡ç”¨é»˜è®¤çš„æ ‡å‡†ç±»org.apache.catalina.core.StandardHostã€‚</span></span><br><span class="line"><span class="comment">    nameï¼šè™šæ‹Ÿä¸»æœºçš„ä¸»æœºåï¼Œå¿½ç•¥å¤§å°å†™(åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå°å†™)ã€‚å¯ä»¥ä½¿ç”¨å‰ç¼€æ˜Ÿå·é€šé…ç¬¦ï¼Œå¦‚&quot;*.a.com&quot;ã€‚ä½¿ç”¨äº†æ˜Ÿå·å‰ç¼€çš„è™šæ‹Ÿä¸»æœºçš„åŒ¹é…ä¼˜å…ˆçº§ä½äºç²¾ç¡®åç§°çš„è™šæ‹Ÿä¸»æœºã€‚</span></span><br><span class="line"><span class="comment">    appBaseï¼šæ­¤Hostçš„webappsç›®å½•ï¼Œå³webappéƒ¨ç½²åœ¨æ­¤è™šæ‹Ÿä¸»æœºä¸Šæ—¶çš„å­˜æ”¾ç›®å½•ã€‚åŒ…æ‹¬éå½’æ¡£çš„webåº”ç”¨ç¨‹åºç›®å½•å’Œå½’æ¡£åçš„WARæ–‡ä»¶çš„ç›®å½•ã€‚ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ—¶åŸºäº$CATALINA_BASEã€‚</span></span><br><span class="line"><span class="comment">    xmlBaseï¼šéƒ¨ç½²åœ¨æ­¤è™šæ‹Ÿä¸»æœºä¸Šçš„context xmlç›®å½•ã€‚</span></span><br><span class="line"><span class="comment">    startStopThreadsï¼šå¯åŠ¨contextå®¹å™¨æ—¶çš„å¹¶è¡Œçº¿ç¨‹æ•°ã€‚å¦‚æœä½¿ç”¨äº†è‡ªåŠ¨éƒ¨ç½²åŠŸèƒ½ï¼Œåˆ™å†æ¬¡éƒ¨ç½²æˆ–æ›´æ–°æ—¶ä½¿ç”¨ç›¸åŒçš„çº¿ç¨‹æ± ã€‚</span></span><br><span class="line"><span class="comment">    autoDeployï¼šåœ¨Tomcatå¤„äºè¿è¡ŒçŠ¶æ€æ—¶æ”¾ç½®äºappBaseç›®å½•ä¸­çš„åº”ç”¨ç¨‹åºæ–‡ä»¶æ˜¯å¦è‡ªåŠ¨è¿›è¡Œdeployæˆ–è‡ªåŠ¨æ›´æ–°éƒ¨ç½²çŠ¶æ€ã€‚è¿™ç­‰äºåŒæ—¶å¼€å¯äº†deployOnStartupå±æ€§å’Œreload/redeploy webappçš„åŠŸèƒ½ã€‚è§¦å‘è‡ªåŠ¨æ›´æ–°æ—¶å°†é»˜è®¤é‡è½½è¯¥webappã€‚é»˜è®¤ä¸ºtrueã€‚</span></span><br><span class="line"><span class="comment">    unpackWarsï¼šåœ¨æ‰§è¡Œæ­¤webappsæ—¶æ˜¯å¦å…ˆå¯¹å½’æ¡£æ ¼å¼çš„WARæ–‡ä»¶è§£å‹å†è¿è¡Œï¼Œè®¾ç½®ä¸ºfalseæ—¶åˆ™ç›´æ¥æ‰§è¡ŒWARæ–‡ä»¶ï¼›é»˜è®¤ä¸ºtrueã€‚è®¾ç½®ä¸ºfalseæ—¶ä¼šæŸè€—æ€§èƒ½ã€‚</span></span><br><span class="line"><span class="comment">    workDirï¼šè¯¥è™šæ‹Ÿä¸»æœºçš„å·¥ä½œç›®å½•ã€‚æ¯ä¸ªwebappéƒ½æœ‰è‡ªå·±çš„ä¸´æ—¶IOç›®å½•ï¼Œé»˜è®¤è¯¥å·¥ä½œç›®å½•ä¸º$CATALINA_BASE/workã€‚</span></span><br><span class="line"><span class="comment">    å¤§å¤šæ•°æ—¶å€™éƒ½åªéœ€è®¾ç½®è™šæ‹Ÿä¸»æœºåç§°nameå’ŒappBaseå±æ€§å³å¯ï¼Œå…¶ä½™é‡‡ç”¨é»˜è®¤ï¼Œé»˜è®¤æ—¶ä¼šè‡ªåŠ¨éƒ¨ç½²webapp</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªé‡è¦ç‚¹ï¼š</p>
<ul>
<li>  domain name: æ¯ä¸ªhostå¿…é¡»è¦æœ‰ä¸€ä¸ªå”¯ä¸€çš„domain name; æµè§ˆå™¨å‘è¿‡æ¥çš„è¯·æ±‚é‡ŒåŒ…å«æœ‰è¯¥domain name; domain nameåœ¨Engineé‡Œå¿…é¡»æ˜¯å”¯ä¸€çš„</li>
<li>  app base folder: å‘å¸ƒåˆ°è¯¥hosté‡Œçš„åº”ç”¨çš„ç›®å½•åï¼›å¯ä»¥æ˜¯ç›¸å¯¹CATALINE_BASEçš„ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„ç»å¯¹è·¯å¾„</li>
</ul>
<p>å½“hostè·å¾—ä¸€ä¸ªé’ˆå¯¹ç‰¹å®šhostè¯·æ±‚æ—¶ï¼Œå°†ä¼šåœ¨è¯¥Hostç¯å¢ƒä¸‹æŠŠè¯·æ±‚åŒ¹é…åˆ°å¯¹åº”çš„Contextä¸Šï¼›ç„¶åæŠŠè¯·æ±‚äº¤ç»™è¿™ä¸ªContextæ¥å¤„ç†</p>
<h4 id="2-2-6-Context"><a href="#2-2-6-Context" class="headerlink" title="2.2.6 Context"></a>2.2.6 Context</h4><p>â€‹    ä¸€ä¸ªContextå¯¹åº”ä¸€ä¸ªweb applicationï¼› å®ƒç”±å¤šä¸ªservletç»„æˆï¼›åœ¨åˆ›å»ºcontextæ—¶ï¼Œå°†æ ¹æ®conf/web.xmlå’Œwebapps/${context path}/WEB-INFO/web.xmlåŠ è½½servletå¹¶åˆ›å»ºæ˜ å°„è¡¨</p>
<p><img src="/tomcat/tomcat_context.gif" alt="tomcat_context"></p>
<ul>
<li>  Document Base: å­˜æ”¾waræˆ–è§£å‹åçš„contextçš„åœ°æ–¹</li>
<li>  Context Pathï¼šå”¯ä¸€æ ‡å¿—ä¸€ä¸ªcontext;å½“æ²¡æœ‰åŒ¹é…ä»»ä½•ä¸€ä¸ªcontextæ—¶ï¼Œé»˜è®¤çš„contextå°†ä¼šå¤„ç†è¯¥è¯·æ±‚ï¼›é»˜è®¤çš„contextçš„context pathä¸ºç©º</li>
<li>  Automatic reload: ä¸€æ—¦ç›‘æµ‹åˆ°contextæœ‰ä¿®æ”¹ï¼Œåˆ™ä¼šè‡ªåŠ¨é‡å¯contextï¼Œåªç”¨äºå¼€å‘æ¨¡å¼ï¼›</li>
</ul>
<h4 id="2-2-7-Wrapper"><a href="#2-2-7-Wrapper" class="headerlink" title="2.2.7 Wrapper"></a>2.2.7 Wrapper</h4><p>â€‹    Wrapperæ˜¯contextçš„å­å…ƒç´ ï¼Œä»£è¡¨äº†ä¸€ä¸ªServletï¼ˆæˆ–ä¸€ä¸ªjspè¢«ç¼–è¯‘åçš„servletï¼‰ï¼›å®ƒè´Ÿè´£åŠ è½½servletã€å®ä¾‹åŒ–servletã€ä»¥åŠè§¦å‘ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è°ƒç”¨ï¼Œå¦‚init()ã€service()ã€destory()ï¼›å¦å¤–wrapperä¹Ÿè´Ÿè´£è°ƒç”¨ä¸servletç›¸å…³çš„Filterã€‚</p>
<p><img src="/tomcat/tomcat_wrapper.gif" alt="tomcat_context"></p>
<h4 id="2-2-8-åµŒå¥—ç»„ä»¶"><a href="#2-2-8-åµŒå¥—ç»„ä»¶" class="headerlink" title="2.2.8  åµŒå¥—ç»„ä»¶"></a>2.2.8  åµŒå¥—ç»„ä»¶</h4><ol>
<li><p><strong>Excutor</strong>: æ‰§è¡Œå™¨ï¼Œä¾› Connector ä½¿ç”¨çš„çº¿ç¨‹æ± ï¼Œå¯é…ç½®å¤šä¸ª</p>
<p> cnnectorè‡ªå»ºï¼Œexecuterå…±äº«<br> æ‰§è¡Œå™¨å®šä¹‰tomcatå„ç»„ä»¶ä¹‹é—´å…±äº«çš„çº¿ç¨‹æ± ã€‚åœ¨ä»¥å‰ï¼Œæ¯ä¸ªconnectoréƒ½ä¼šç‹¬è‡ªåˆ›å»ºè‡ªå·±çš„çº¿ç¨‹æ± ï¼Œä½†ç°åœ¨ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå„ç»„ä»¶éƒ½å¯ä»¥å…±äº«è¯¥çº¿ç¨‹æ± ï¼Œä¸è¿‡ä¸»è¦æ˜¯ä¸ºå„connectorä¹‹é—´æä¾›å…±äº«ã€‚æ³¨æ„ï¼Œexecutoråˆ›å»ºçš„æ˜¯å…±äº«çº¿ç¨‹æ± ï¼Œå¦‚æœæŸä¸ªconnectorä¸å¼•ç”¨executoråˆ›å»ºçš„çº¿ç¨‹æ± ï¼Œé‚£ä¹ˆè¯¥connectorä»ä¼šæ ¹æ®è‡ªå·±æŒ‡å®šçš„å±æ€§åˆ›å»ºå®ƒä»¬è‡ªå·±çš„çº¿ç¨‹æ± ã€‚<br> è¿æ¥å™¨å¿…é¡»è¦å®ç°org.apache.catalina.Executoræ¥å£ï¼ˆserverçš„classnameï¼Œå¿…é¡»å®ç°çš„æ¥å£ï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªåµŒå¥—åœ¨serviceç»„ä»¶ä¸­çš„å…ƒç´ ï¼Œä¸ºäº†æŒ‘é€‰æ‰€ä½¿ç”¨çš„connectorï¼Œè¯¥å…ƒç´ è¿˜å¿…é¡»å®šä¹‰åœ¨connectorå…ƒç´ ä¹‹å‰ã€‚</p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Executor</span> <span class="attr">name</span>=<span class="string">&quot;tomcatThreadPool&quot;</span> <span class="attr">namePrefix</span>=<span class="string">&quot;catalina-exec-&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">maxThreads</span>=<span class="string">&quot;150&quot;</span> <span class="attr">minSpareThreads</span>=<span class="string">&quot;4&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	classNameï¼ˆé»˜è®¤ï¼‰ï¼šç”¨äºå®ç°æ­¤ç»„ä»¶çš„javaç±»çš„åç§°ï¼Œè¿™ä¸ªç±»å¿…é¡»å®ç°æ¥å£org.apache.catalina.Executorã€‚ä¸			ç»™å®šè¯¥å±æ€§æ—¶å°†é‡‡ç”¨é»˜è®¤çš„æ ‡å‡†ç±»org.apache.catalina.core.StandardThreadExecutorï¼›</span></span><br><span class="line"><span class="comment">	nameï¼šè¯¥çº¿ç¨‹æ± çš„åç§°ï¼Œå…¶ä»–ç»„ä»¶éœ€è¦ä½¿ç”¨è¯¥åç§°å¼•ç”¨è¯¥çº¿ç¨‹æ± ã€‚ </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment">æ ‡å‡†ç±»çš„å±æ€§åŒ…æ‹¬ï¼š</span></span><br><span class="line"><span class="comment">threadPriorityï¼šçº¿ç¨‹ä¼˜å…ˆçº§ï¼Œé»˜è®¤å€¼ä¸º5ã€‚</span></span><br><span class="line"><span class="comment">daemonï¼šçº¿ç¨‹æ˜¯å¦ä»¥daemonçš„æ–¹å¼è¿è¡Œï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚</span></span><br><span class="line"><span class="comment">namePrefixï¼šæ‰§è¡Œå™¨åˆ›å»ºæ¯ä¸ªçº¿ç¨‹æ—¶çš„åç§°å‰ç¼€ï¼Œæœ€ç»ˆçº¿ç¨‹çš„åç§°ä¸º:namePrefix+threadNumberã€‚</span></span><br><span class="line"><span class="comment">maxThreadsï¼šçº¿ç¨‹æ± æ¿€æ´»çš„æœ€å¤§çº¿ç¨‹æ•°é‡ã€‚é»˜è®¤å€¼ä¸º200ã€‚</span></span><br><span class="line"><span class="comment">minSpareThreadsï¼šçº¿ç¨‹æ± ä¸­æœ€å°‘ç©ºé—²çš„çº¿ç¨‹æ•°é‡ã€‚é»˜è®¤å€¼ä¸º25ã€‚</span></span><br><span class="line"><span class="comment">maxIdleTimeï¼šåœ¨ç©ºé—²çº¿ç¨‹å…³é—­å‰çš„æ¯«ç§’æ•°ã€‚é™¤éæ¿€æ´»çš„çº¿ç¨‹æ•°é‡å°äºæˆ–ç­‰äºminSpareThreadsçš„å€¼ï¼Œå¦åˆ™ä¼šæœ‰ç©ºé—²çº¿ç¨‹çš„å‡ºç°ã€‚é»˜è®¤å€¼ä¸º60000msï¼Œå³ç©ºé—²çº¿ç¨‹éœ€è¦ä¿ç•™1åˆ†é’Ÿçš„ç©ºé—²æ—¶é—´æ‰è¢«æ€æ‰ã€‚</span></span><br><span class="line"><span class="comment">maxQueueSizeï¼šå¯æ‰§è¡Œä»»åŠ¡çš„æœ€å¤§é˜Ÿåˆ—æ•°ï¼Œè¾¾åˆ°é˜Ÿåˆ—ä¸Šé™æ—¶çš„è¿æ¥è¯·æ±‚å°†è¢«æ‹’ç»ã€‚</span></span><br><span class="line"><span class="comment">prestartminSpareThreadsï¼šåœ¨å¯åŠ¨executoræ—¶æ˜¯å¦ç«‹å³åˆ›å»ºminSpareThreadsä¸ªçº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸ºfalseï¼Œå³åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºçº¿ç¨‹ã€‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<p> <strong>connectorä¸­æŒ‡å®šæ‰€ä½¿ç”¨çš„çº¿ç¨‹</strong></p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">executor</span>=<span class="string">&quot;tomcatThreadPool&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="2">
<li><p> <strong>Manager</strong>ï¼š ä¼šè¯ç®¡ç†å™¨ï¼šç”¨äºå®ç°httpä¼šè¯ç®¡ç†çš„åŠŸèƒ½ã€‚</p>
</li>
<li><p> <strong>Loader</strong>ï¼š ç±»åŠ è½½å™¨</p>
</li>
<li><p> <strong>Valve</strong>ï¼š é˜€é—¨ï¼ŒTomcatç»„ä»¶å±‚é¢çš„è¿‡æ»¤å™¨</p>
</li>
<li><p> <strong>Resource</strong>ï¼šèµ„æºè·¯å¾„ï¼šé…ç½® web ç¨‹åºçš„èµ„æºä¿¡æ¯ï¼Œå¦‚æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚</p>
</li>
<li><p> <strong>Realm</strong>ï¼šé¢†åŸŸï¼šç”¨äºç”¨æˆ·çš„è®¤è¯å’Œæˆæƒã€‚</p>
</li>
<li><p> <strong>Listener</strong>ï¼šç›‘å¬å™¨ï¼šç›‘å¬å·²æ³¨å†Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
</li>
<li><p> <strong>Cluster</strong>ï¼š é›†ç¾¤ï¼šä¸“ç”¨äºé…ç½® Tomcat é›†ç¾¤çš„å…ƒç´ ã€‚</p>
</li>
</ol>
<h4 id="2-2-8-container"><a href="#2-2-8-container" class="headerlink" title="2.2.8 container"></a>2.2.8 container</h4><p>â€‹    containerä¸æ˜¯tomcatçš„ç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œç»Ÿç§°ï¼›åŒ…å«Engineã€hostã€contextã€wrapper</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">Container(å®¹å™¨:åŒ…æ‹¬ä»¥ä¸‹æ‰€æœ‰ç»„ä»¶)</span><br><span class="line"><span class="comment">----Engineï¼ˆåˆ†å‘ç”¨æˆ·è¯·æ±‚ï¼‰</span></span><br><span class="line"><span class="comment">--------Hostï¼ˆä¸»æœºï¼‰</span></span><br><span class="line"><span class="comment">----------------Contextï¼ˆåº”ç”¨ï¼‰</span></span><br><span class="line"><span class="comment">--------------------Wrapperï¼ˆServletï¼‰</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-9-Server-xml"><a href="#2-2-9-Server-xml" class="headerlink" title="2.2.9 Server.xml"></a>2.2.9 Server.xml</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">&quot;8005&quot;</span> <span class="attr">shutdown</span>=<span class="string">&quot;SHUTDOWN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.startup.VersionLoggerListener&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.AprLifecycleListener&quot;</span> <span class="attr">SSLEngine</span>=<span class="string">&quot;on&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Listener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot;</span> /&gt;</span></span><br><span class="line"> </span><br><span class="line">  <span class="tag">&lt;<span class="name">GlobalNamingResources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Resource</span> <span class="attr">name</span>=<span class="string">&quot;UserDatabase&quot;</span> <span class="attr">auth</span>=<span class="string">&quot;Container&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">&quot;org.apache.catalina.UserDatabase&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">description</span>=<span class="string">&quot;User database that can be updated and saved&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">factory</span>=<span class="string">&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">pathname</span>=<span class="string">&quot;conf/tomcat-users.xml&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">GlobalNamingResources</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">  <span class="tag">&lt;<span class="name">Service</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8009&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;AJP/1.3&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span> <span class="attr">defaultHost</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.realm.LockOutRealm&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">Realm</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">resourceName</span>=<span class="string">&quot;UserDatabase&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Realm</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">&quot;localhost&quot;</span>  <span class="attr">appBase</span>=<span class="string">&quot;webapps&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">        <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.valves.AccessLogValve&quot;</span> <span class="attr">directory</span>=<span class="string">&quot;logs&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">prefix</span>=<span class="string">&quot;localhost_access_log&quot;</span> <span class="attr">suffix</span>=<span class="string">&quot;.txt&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">pattern</span>=<span class="string">&quot;%h %l %u %t <span class="symbol">&amp;quot;</span>%r<span class="symbol">&amp;quot;</span> %s %b&quot;</span> /&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;/<span class="name">Host</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Engine</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Server</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="2-2-Tomcatè¯·æ±‚å¤„ç†è¿‡ç¨‹"><a href="#2-2-Tomcatè¯·æ±‚å¤„ç†è¿‡ç¨‹" class="headerlink" title="2.2 Tomcatè¯·æ±‚å¤„ç†è¿‡ç¨‹"></a>2.2 Tomcatè¯·æ±‚å¤„ç†è¿‡ç¨‹</h3><p>æ¥æ”¶åˆ°ç”¨æˆ·HTTPè¯·æ±‚ï¼š <a href="http://localhost:8080/app/login/auth1">http://localhost:8080/app/login/auth1</a></p>
<ul>
<li>  è¯·æ±‚è¢«å‘é€åˆ°æœ¬æœºç«¯å8080ï¼Œè¢«åœ¨é‚£é‡Œä¾¦å¬çš„coyote HTTP/1.1 Connectorè·å¾—</li>
<li>  ConnectoræŠŠè¯¥è¯·æ±‚äº¤ç»™å®ƒæ‰€åœ¨å¾—serviceå¾—Engineæ¥å¤„ç†ï¼Œå¹¶ç­‰å¾…engineå¾—å›åº”</li>
<li>  Engineè·å¾—è¯·æ±‚localhost/app/login/auth1ï¼ŒåŒ¹é…å®ƒæ‰€æ‹¥æœ‰å¾—æ‰€æœ‰è™šæ‹Ÿä¸»æœºhost</li>
<li>  Engineè·å¾—è¯·æ±‚åˆ°åä¸ºlocalhostå¾—hostï¼ˆå³ä½¿åŒ¹é…ä¸åˆ°ä¹ŸæŠŠè¯·æ±‚äº¤ç»™è¯¥hostå¤„ç†ï¼Œå› ä¸ºè¯¥hostè¢«å®šä¹‰ä¸ºè¯¥Engineå¾—é»˜è®¤ä¸»æœºï¼‰</li>
<li>  åå­—ä¸ºlocalhostçš„hostä¸»æœºè·çš„è¯·æ±‚/app/login/auth1ï¼ŒåŒ¹é…å®ƒæ‰€æ‹¥æœ‰çš„æ‰€æœ‰context</li>
<li>  hoståŒ¹é…åˆ°è·¯å¾„ä¸º/appçš„context(å¦‚æœåŒ¹é…ä¸åˆ°å°±æŠŠè¯¥è¯·æ±‚äº¤ç»™è·¯å¾„åä¸ºâ€œâ€ çš„contextå»å¤„ç†)</li>
<li>  path=â€œ/appâ€çš„contextè·å¾—è¯·æ±‚/login/auth1ï¼Œåœ¨å®ƒçš„mapping tableä¸­å¯»æ‰¾å¯¹åº”çš„servlet</li>
<li>  ContextåŒ¹é…åˆ°URL PATTERNä¸º/auth1çš„servletï¼Œå¯¹åº”äºservletç±»</li>
<li>  æ„é€ HttpServletRequestå¯¹è±¡å’ŒHttpServletResponseå¯¹è±¡ï¼Œä½œä¸ºå‚æ•°è°ƒç”¨Servletçš„doGetæˆ–è€…doPostæ–¹æ³•</li>
<li>  ContextæŠŠæ‰§è¡Œå®Œäº†çš„HttpServletResponseå¯¹è±¡å‘å›ç»™host</li>
<li>  HostæŠŠHttpServletResponseå¯¹è±¡è¿”å›ç»™Engine</li>
<li>  EngineæŠŠHttpServletResponseå¯¹è±¡è¿”å›ç»™Connnector</li>
<li>  ConnectoræŠŠHttpServletResponseå¯¹è±¡è¿”å›ç»™å®¢æˆ·brower</li>
</ul>
<h2 id="3-Servletè§„èŒƒ"><a href="#3-Servletè§„èŒƒ" class="headerlink" title="3. Servletè§„èŒƒ"></a>3. Servletè§„èŒƒ</h2><p>Javaæƒ³è¦è¿›è¡ŒWebæœåŠ¡åŠŸèƒ½æä¾›</p>
<ul>
<li><p>å½“HttpæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åï¼Œå¦‚ä½•çŸ¥é“è°ƒç”¨å“ªäº›javaç±»æ¥å¤„ç†è¯·æ±‚å‘¢ï¼Ÿ</p>
<p>  æœ‰äº›ç±»å¯èƒ½å°±æ˜¯ç”¨æ¥å°è£…å˜é‡çš„ï¼Œæœ‰äº›ç±»æ‰æ˜¯ç”¨æ¥å¤„ç†è¯·æ±‚çš„ã€‚ä¸ºäº†è¯†åˆ«å‡ºé‚£äº›å…·æœ‰å¤„ç†è¯·æ±‚çš„ç±»ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼Œè¿™ä¸ªæ¥å£å°±å«Servletæ¥å£ï¼Œå¦‚æœæƒ³è¦è®©ä¸šåŠ¡ç±»å…·å¤‡å¤„ç†è¯·æ±‚çš„èƒ½åŠ›ï¼Œéƒ½å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ï¼Œå®ç°äº†æ¥å£çš„ä¸šåŠ¡ç±»å«åšServletã€‚</p>
</li>
<li><p>å¯¹äºç‰¹å®šçš„è¯·æ±‚ï¼ŒHttpæœåŠ¡å™¨å¦‚ä½•çŸ¥é“ç”±å“ªä¸ªServletæ¥å¤„ç†ï¼ŸServletåˆæ˜¯ç”±è°æ¥å®ä¾‹åŒ–å‘¢</p>
<p>  äºæ˜¯åˆæœ‰äº†Servletå®¹å™¨ã€‚HttpæœåŠ¡å™¨æŠŠè¯·æ±‚äº¤ç»™Servletå®¹å™¨å»å¤„ç†ï¼ŒServletå®¹å™¨ä¼šå°†è¯·æ±‚è½¬å‘åˆ°å…·ä½“çš„Servlet,å¦‚æœè¿™ä¸ªServletè¿˜æ²¡åˆ›å»ºï¼Œå°±åŠ è½½å¹¶å®ä¾‹åŒ–è¿™ä¸ªServletï¼Œç„¶åè°ƒç”¨è¿™ä¸ªServletçš„æ¥å£æ–¹æ³•ã€‚</p>
</li>
</ul>
<p>HttpæœåŠ¡å™¨ä¸ç›´æ¥è°ƒç”¨ä¸šåŠ¡ç±»ï¼Œè€Œæ˜¯æŠŠè¯·æ±‚äº¤ç»™å®¹å™¨æ¥å¤„ç†ï¼Œå®¹å™¨é€šè¿‡Servletæ¥å£è°ƒç”¨ä¸šåŠ¡ç±»ã€‚å› æ­¤Servletæ¥å£å’ŒServletå®¹å™¨çš„å‡ºç°ï¼Œä½¿HttpæœåŠ¡å™¨å’Œä¸šåŠ¡ç±»è§£è€¦ã€‚</p>
<p>Servletè§„èŒƒï¼šServletæ¥å£ + Servletå®¹å™¨ã€‚</p>
<p>TomcatæŒ‰ç…§Servletè§„èŒƒçš„è¦æ±‚å®ç°äº†Servletå®¹å™¨ï¼ŒåŒæ—¶å®ƒä¹Ÿå…·æœ‰HttpæœåŠ¡å™¨çš„åŠŸèƒ½ã€‚ï¼ˆå¦‚æœæˆ‘ä»¬è¦å®ç°æ–°çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œåªéœ€è¦å®ç°ä¸€ä¸ªServletï¼Œç„¶åæŠŠå®ƒæ³¨å†Œåˆ°Tomcat(Servletå®¹å™¨)ä¸­ï¼Œå‰©ä¸‹çš„äº‹æƒ…ç”±Tomcatå¸®æˆ‘ä»¬æ¥å¤„ç†ï¼‰ã€‚</p>
<p><img src="/tomcat/tomcat.png" alt="tomcat"></p>
<h3 id="3-1-Servletæ¥å£å®šä¹‰äº†äº”ä¸ªæ–¹æ³•"><a href="#3-1-Servletæ¥å£å®šä¹‰äº†äº”ä¸ªæ–¹æ³•" class="headerlink" title="3.1 Servletæ¥å£å®šä¹‰äº†äº”ä¸ªæ–¹æ³•"></a>3.1 Servletæ¥å£å®šä¹‰äº†äº”ä¸ªæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function">ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse resï¼‰<span class="keyword">throws</span> ServletException, IOException;</span></span></span><br><span class="line"><span class="params"><span class="function">    </span></span></span><br><span class="line"><span class="params"><span class="function">    String getServletInfo()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>  init(ServletConfig config)ï¼š</li>
</ul>
<p>å’Œç”Ÿå‘½å‘¨æœŸæœ‰å…³çš„æ–¹æ³•ï¼ŒServletå®¹å™¨åœ¨åŠ è½½Servletç±»çš„æ—¶å€™ä¼šè°ƒç”¨initæ–¹æ³•ã€‚å¯èƒ½ä¼šåœ¨initæ–¹æ³•é‡Œåˆå§‹åŒ–ä¸€äº›èµ„æºã€‚æ¯”å¦‚Springmvcä¸­çš„DispatcherServlet,åœ¨initæ–¹æ³•ä¸­åˆ›å»ºäº†è‡ªå·±çš„springå®¹å™¨ã€‚</p>
<ul>
<li><p>ServletConfig getServletConfig()ï¼š</p>
<p>  ServletConfigå°±æ˜¯å°è£…Servletçš„åˆå§‹åŒ–å‚æ•°ã€‚å¯ä»¥åœ¨web.xmlç»™Servleté…ç½®å‚æ•°ï¼Œç„¶ååœ¨ç¨‹åºä¸­é€šè¿‡getServletConfigæ–¹æ³•æ‹¿åˆ°è¿™äº›å‚æ•°ã€‚</p>
</li>
<li><p>service(ServletRequest req, ServletResponse res)</p>
<p>  ä¸šåŠ¡ç±»åœ¨è¿™ä¸ªæ–¹æ³•é‡Œå®ç°å¤„ç†é€»è¾‘ã€‚ServletRequestç”¨æ¥å°è£…è¯·æ±‚ä¿¡æ¯ï¼ŒServletResponseç”¨æ¥å°è£…å“åº”ä¿¡æ¯ã€‚æœ¬è´¨ä¸Šè¿™ä¸¤ä¸ªç±»æ˜¯å¯¹é€šä¿¡åè®®çš„å°è£…ã€‚Httpåè®®ä¸­çš„è¯·æ±‚å’Œå“åº”å°±æ˜¯å¯¹åº”äº†HttpServletRequestå’ŒHttpServletResponseè¿™ä¸¤ä¸ªç±»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡HttpServletRequestæ¥è·å–æ‰€æœ‰è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚è·¯å¾„ï¼ŒCookieï¼ŒHttpå¤´ï¼Œè¯·æ±‚å‚æ•°ç­‰ã€‚</p>
</li>
<li><p>   String getServletInfo()</p>
</li>
<li><p>  destroy()ï¼š å’Œç”Ÿå‘½å‘¨æœŸæœ‰å…³çš„æ–¹æ³•ï¼ŒServletå®¹å™¨åœ¨å¸è½½Servletç±»çš„æ—¶å€™ä¼šè°ƒç”¨destoryæ–¹æ³•ã€‚åœ¨destoryæ–¹æ³•é‡Œé‡Šæ”¾è¿™äº›èµ„æºã€‚</p>
</li>
</ul>
<h2 id="4-Servletå®¹å™¨"><a href="#4-Servletå®¹å™¨" class="headerlink" title="4. Servletå®¹å™¨"></a>4. Servletå®¹å™¨</h2><h3 id="4-1-Servletå®¹å™¨å·¥ä½œæµç¨‹"><a href="#4-1-Servletå®¹å™¨å·¥ä½œæµç¨‹" class="headerlink" title="4.1 Servletå®¹å™¨å·¥ä½œæµç¨‹"></a>4.1 Servletå®¹å™¨å·¥ä½œæµç¨‹</h3><p>â€‹    å½“å®¢æˆ·è¯·æ±‚æŸä¸€ä¸ªèµ„æºæ—¶ï¼ŒHttpæœåŠ¡å™¨ä¼šç”¨ä¸€ä¸ªServletRequestå¯¹è±¡æŠŠå®¢æˆ·çš„è¯·æ±‚ä¿¡æ¯å°è£…èµ·æ¥ï¼Œç„¶åè°ƒç”¨Servletå®¹å™¨çš„serviceæ–¹æ³•ï¼ŒServletå®¹å™¨æ‹¿åˆ°è¯·æ±‚åï¼Œæ ¹æ®è¯·æ±‚çš„URLå’ŒServletçš„æ˜ å°„å…³ç³»ï¼Œæ‰¾åˆ°ç›¸åº”çš„Servletï¼Œå¦‚æœServletè¿˜æ²¡æœ‰è¢«åŠ è½½ï¼Œå°±ç”¨åå°„æœºåˆ¶åˆ›å»ºè¿™ä¸ªServletï¼Œå¹¶è°ƒç”¨Servletçš„initæ–¹æ³•æ¥å®Œæˆåˆå§‹åŒ–ï¼Œæ¥ç€è°ƒç”¨Servletçš„serviceæ–¹æ³•æ¥å¤„ç†è¯·æ±‚ï¼ŒæŠŠServletResponseå¯¹è±¡è¿”å›ç»™HttpæœåŠ¡å™¨ï¼ŒHttpæœåŠ¡å™¨ä¼šæŠŠå“åº”å‘é€ç»™å®¢æˆ·ç«¯ã€‚</p>
<p><img src="/tomcat/tomcat2.png" alt="."></p>
<h3 id="4-2-Webåº”ç”¨"><a href="#4-2-Webåº”ç”¨" class="headerlink" title="4.2 Webåº”ç”¨"></a>4.2 Webåº”ç”¨</h3><h4 id="4-2-1-Servletæ³¨å†Œ"><a href="#4-2-1-Servletæ³¨å†Œ" class="headerlink" title="4.2.1 Servletæ³¨å†Œ"></a>4.2.1 Servletæ³¨å†Œ</h4><ul>
<li><p>Servletå®¹å™¨è´Ÿè´£å®ä¾‹åŒ–å’Œè°ƒç”¨Servletï¼Œé‚£ä¹ˆServletæ˜¯æ€ä¹ˆæ³¨å†Œåˆ°Servletå®¹å™¨çš„å‘¢ï¼Ÿ</p>
<p>  æˆ‘ä»¬ä¸€èˆ¬ä»¥Webåº”ç”¨ç¨‹åºçš„æ–¹å¼æ¥éƒ¨ç½²Servletçš„ã€‚æ ¹æ®Servletè§„èŒƒï¼ŒWebåº”ç”¨ç¨‹åºæœ‰ä¸€å®šçš„ç›®å½•ç»“æ„ï¼š</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">| -  MyWebApp</span><br><span class="line">      | -  WEB-INF/web.xml        -- é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥é…ç½® Servlet ç­‰</span><br><span class="line">      | -  WEB-INF/lib/           -- å­˜æ”¾ Web åº”ç”¨æ‰€éœ€å„ç§ JAR åŒ…</span><br><span class="line">      | -  WEB-INF/classes/       -- å­˜æ”¾ä½ çš„åº”ç”¨ç±»ï¼Œæ¯”å¦‚ Servlet ç±»</span><br><span class="line">      | -  META-INF/              -- ç›®å½•å­˜æ”¾å·¥ç¨‹çš„ä¸€äº›ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ†åˆ«æ”¾ç½®äº†Servletçš„ç±»æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œé™æ€èµ„æºæ–‡ä»¶ï¼ŒServletå®¹å™¨é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥æ‰¾åˆ°å¹¶åŠ è½½Servletã€‚</p>
<h4 id="4-2-2-ServletContext"><a href="#4-2-2-ServletContext" class="headerlink" title="4.2.2 ServletContext"></a>4.2.2 ServletContext</h4><p>Servletè§„èŒƒä¸­å®šä¹‰äº†ServletContextè¿™ä¸ªæ¥å£æ¥å¯¹åº”ä¸€ä¸ªWebåº”ç”¨</p>
<p>Webåº”ç”¨éƒ¨ç½²å¥½ä»¥åï¼ŒServletå®¹å™¨åœ¨å¯åŠ¨æ—¶ä¼šåŠ è½½Webåº”ç”¨ï¼Œå¹¶ä¸ºæ¯ä¸ªWebåº”ç”¨åˆ›å»ºå”¯ä¸€çš„ServletContextå¯¹è±¡ã€‚ä½ å¯ä»¥æŠŠServletContextçœ‹æˆæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œä¸€ä¸ªWebåº”ç”¨å¯èƒ½æœ‰å¤šä¸ªServletï¼Œè¿™äº›Servletå¯ä»¥é€šè¿‡å…¨å±€çš„ServletContextæ¥å…±äº«æ•°æ®ï¼Œè¿™äº›æ•°æ®åŒ…æ‹¬Webåº”ç”¨çš„åˆå§‹åŒ–å‚æ•°ï¼ŒWebåº”ç”¨ç›®å½•ä¸‹çš„æ–‡ä»¶èµ„æºç­‰ã€‚å› ä¸ºServletContextæŒæœ‰æ‰€æœ‰Servletå®ä¾‹ï¼Œè¿˜å¯ä»¥é€šè¿‡å®ƒæ¥å®ç°Servletè¯·æ±‚çš„è½¬å‘ã€‚</p>
<h4 id="4-2-3-æ‰©å±•æœºåˆ¶ï¼šFilterå’ŒListener"><a href="#4-2-3-æ‰©å±•æœºåˆ¶ï¼šFilterå’ŒListener" class="headerlink" title="4.2.3 æ‰©å±•æœºåˆ¶ï¼šFilterå’ŒListener"></a>4.2.3 æ‰©å±•æœºåˆ¶ï¼šFilterå’ŒListener</h4><ul>
<li><p><strong>Filter</strong>ï¼šè¿‡æ»¤å™¨ï¼Œè¿™ä¸ªæ¥å£å…è®¸å¯¹è¯·æ±‚å’Œå“åº”åšä¸€äº›ç»Ÿä¸€çš„å®šåˆ¶åŒ–å¤„ç†ï¼Œæ¯”å¦‚å¯ä»¥æ ¹æ®è¯·æ±‚çš„é¢‘ç‡æ¥é™åˆ¶è®¿é—®ï¼Œæ ¹æ®å›½å®¶åœ°åŒºçš„ä¸åŒæ¥ä¿®æ”¹å“åº”çš„å†…å®¹ã€‚</p>
<p>  è¿‡æ»¤å™¨åŸç†ï¼šWebåº”ç”¨éƒ¨ç½²å®Œä»¥åï¼ŒServletå®¹å™¨éœ€è¦å®ä¾‹åŒ–Filterå¹¶æŠŠFilteré“¾æ¥æˆä¸€ä¸ªFilterChainã€‚å½“è¯·æ±‚è¿›æ¥æ—¶ï¼Œè·å–ç¬¬ä¸€ä¸ªFilterå¹¶è°ƒç”¨doFilteræ–¹æ³•ï¼Œ    doFilteræ–¹æ³•è´Ÿè´£è°ƒç”¨ã€€FilterChainçš„ä¸‹ä¸€ä¸ªFilterã€‚</p>
</li>
<li><p>  <strong>Listener</strong>ï¼šç›‘å¬å™¨ï¼Œå½“Webåº”ç”¨åœ¨Servletå®¹å™¨ä¸­è¿è¡Œæ—¶ï¼ŒServletå®¹å™¨å†…éƒ¨ä¼šä¸æ–­å‘ç”Ÿå„ç§äº‹ä»¶ï¼Œæ¯”å¦‚Webåº”ç”¨çš„å¯åŠ¨å’Œåœæ­¢ï¼Œç”¨æˆ·è¯·æ±‚åˆ°è¾¾ç­‰ã€‚Servletå®¹å™¨æä¾›äº†ä¸€äº›é»˜è®¤çš„ç›‘å¬å™¨æ¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒServletå®¹å™¨ä¼šè´Ÿè´£è°ƒç”¨ç›‘å¬å™¨çš„æ–¹æ³•ã€‚è‡ªå®šä¹‰ç›‘å¬å™¨éœ€è¦æŠŠç›‘å¬å™¨é…ç½®åœ¨web.xmlä¸­ã€‚æ¯”å¦‚ï¼šSpringå°±å®ç°äº†è‡ªå·±çš„ç›‘å¬å™¨ï¼Œç”¨æ¥ç›‘å¬ServletContextçš„å¯åŠ¨äº‹ä»¶ï¼Œç›®çš„æ˜¯å½“Servletå®¹å™¨å¯åŠ¨æ—¶ï¼Œåˆ›å»ºå¹¶åˆå§‹åŒ–å…¨å±€çš„Springå®¹å™¨ã€‚</p>
</li>
</ul>
<h2 id="5-å„ç§å®¹å™¨"><a href="#5-å„ç§å®¹å™¨" class="headerlink" title="5. å„ç§å®¹å™¨"></a>5. å„ç§å®¹å™¨</h2><ol>
<li><p> Tomcatåœ¨å¯åŠ¨æ—¶ç»™æ¯ä¸ªWebåº”ç”¨åˆ›å»ºä¸€ä¸ªå…¨å±€çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡å°±æ˜¯ServletContextï¼Œä¸ºåé¢çš„Springå®¹å™¨æä¾›å®¿ä¸»ç¯å¢ƒã€‚</p>
</li>
<li><p> Tomcatåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­è§¦å‘å®¹å™¨åˆå§‹åŒ–äº‹ä»¶ï¼ŒSpringçš„ContextLoaderListenerä¼šç›‘å¬åˆ°è¿™ä¸ªäº‹ä»¶ï¼Œå®ƒçš„contextInitializedæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œç„¶åSpringä¼šåˆå§‹åŒ–å…¨å±€çš„Springæ ¹å®¹å™¨ï¼Œè¿™ä¸ªå°±æ˜¯Springçš„Iocå®¹å™¨ï¼ŒIocå®¹å™¨åˆå§‹åŒ–å®Œæ¯•åï¼ŒSpringå°†å…¶å­˜å‚¨åˆ°ServletContextä¸­ï¼Œä¾¿äºä»¥åè·å–ã€‚</p>
</li>
<li><p> Tomcatå¯åŠ¨æ—¶è¿˜ä¼šæ‰«æServletï¼Œä¸€ä¸ªWebåº”ç”¨ä¸­çš„Servletå¯ä»¥æœ‰å¤šä¸ªï¼Œä»¥SpringMvcä¸­çš„DispatcherServetä¸ºä¾‹ï¼Œè¿™ä¸ªServletå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ ‡å‡†çš„å‰ç«¯æ§åˆ¶å™¨ï¼Œç”¨æ¥è½¬å‘ï¼ŒåŒ¹é…ï¼Œå¤„ç†æ¯ä¸ªServletè¯·æ±‚ã€‚</p>
</li>
<li><p> Servletä¸€èˆ¬ä¼šå»¶è¿ŸåŠ è½½ï¼Œå½“ç¬¬ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æ—¶ï¼ŒTomcatå‘ç°DispatcherServetè¿˜æ²¡æœ‰è¢«å®ä¾‹åŒ–ï¼Œå°±è°ƒç”¨DispatcherServetçš„initæ–¹æ³•ï¼ŒDispatcherServetåœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šå»ºç«‹è‡ªå·±çš„å®¹å™¨ï¼Œå«åšSpringMvcå®¹å™¨ï¼Œç”¨æ¥æŒæœ‰SpringMvcç›¸å…³çš„Beanã€‚åŒæ—¶ï¼ŒSpringMvcè¿˜ä¼šé€šè¿‡ServletContextæ‹¿åˆ°Springæ ¹å®¹å™¨ï¼Œå¹¶æŠŠSpringæ ¹å®¹å™¨è®¾ç½®ä¸ºSpringMvcå®¹å™¨çš„çˆ¶å®¹å™¨ï¼ŒSpringå®¹å™¨å¯ä»¥è®¿é—®çˆ¶å®¹å™¨ä¸­çš„Beanï¼Œä½†æ˜¯çˆ¶å®¹å™¨ä¸èƒ½è®¿é—®å­å®¹å™¨ä¸­çš„Beanï¼ˆSpringå®¹å™¨ä¸èƒ½è®¿é—®SpringMvcå®¹å™¨é‡Œçš„Bean â€”&gt;Controlleré‡Œå¯ä»¥è®¿é—®Serviceå¯¹è±¡ï¼Œä½†æ˜¯åœ¨Serviceé‡Œä¸å¯ä»¥è®¿é—®Controllerå¯¹è±¡ï¼‰ã€‚</p>
</li>
</ol>
<p><img src="/tomcat/tomcat3.png" alt="tomcat3"></p>
<p>webå®¹å™¨ä¸­æœ‰servletå®¹å™¨ï¼Œspringé¡¹ç›®éƒ¨ç½²åå­˜åœ¨springå®¹å™¨å’Œspringmvcå®¹å™¨ã€‚å…¶ä¸­springæ§åˆ¶serviceå±‚å’Œdaoå±‚çš„beanå¯¹è±¡ã€‚springmvcå®¹å™¨æ§åˆ¶controllerå±‚beanå¯¹è±¡ã€‚servletå®¹å™¨æ§åˆ¶servletå¯¹è±¡ã€‚é¡¹ç›®å¯åŠ¨æ˜¯ï¼Œé¦–å…ˆ servletåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­é€šè¿‡web.xmlä¸­springçš„é…ç½®åŠ è½½springé…ç½®ï¼Œåˆå§‹åŒ–springå®¹å™¨å’Œspringmvcå®¹å™¨ã€‚å¾…å®¹å™¨åŠ è½½å®Œæˆã€‚servletåˆå§‹åŒ–å®Œæˆï¼Œåˆ™å®Œæˆå¯åŠ¨ã€‚<br>HTTPè¯·æ±‚åˆ°è¾¾webå®¹å™¨åï¼Œä¼šåˆ°è¾¾Servletå®¹å™¨ï¼Œå®¹å™¨é€šè¿‡åˆ†å‘å™¨åˆ†å‘åˆ°å…·ä½“çš„springçš„Controllerå±‚ã€‚æ‰§è¡Œä¸šåŠ¡æ“ä½œåè¿”å›ç»“æœã€‚</p>
]]></content>
      <categories>
        <category>tomcat</category>
      </categories>
      <tags>
        <tag>Apache</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†åº“åˆ†è¡¨ä¹‹ ShardingSphere-JDBC</title>
    <url>/sharding-jdbc/</url>
    <content><![CDATA[<h2 id="1-åŠ¨æ€æ•°æ®æºè§£å†³æ–¹æ¡ˆ"><a href="#1-åŠ¨æ€æ•°æ®æºè§£å†³æ–¹æ¡ˆ" class="headerlink" title="1. åŠ¨æ€æ•°æ®æºè§£å†³æ–¹æ¡ˆ"></a>1. åŠ¨æ€æ•°æ®æºè§£å†³æ–¹æ¡ˆ</h2><p>éšç€ä¸šåŠ¡æ•°æ®é‡é€æ¸å¢å¤§ï¼Œå¸¦æ¥å­˜å‚¨çš„ç“¶é¢ˆä»¥åŠæŸ¥è¯¢ç“¶é¢ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®å­˜æ”¾åˆ°å¤šä¸ªæ•°æ®æœåŠ¡ä¸­ï¼Œä»¥è¾¾åˆ°å‡è½»æ•°æ®åº“å‹åŠ›ï¼Œç¼©çŸ­æ•°æ®åº“æ“ä½œæ—¶é—´ï¼›<br>ç›®å‰å…³äºåŠ¨æ€æ•°æ®æºçš„è§£å†³æ–¹æ¡ˆå¤§è‡´åŒ…å«ä»¥ä¸‹5ç§ï¼Œä»Šå¤©ä¸»è¦æ˜¯å­¦ä¹ ä¸€ä¸‹Sharding-jdbcï¼›<br><img src="/sharding-jdbc/0.png"></p>
<p>å…³äºMycatè¯·æŸ¥çœ‹ <a href="https://xiaoyuge.work/mycat/">mycatå­¦ä¹ </a> è¿™ç¯‡åšå®¢ã€‚</p>
<h2 id="2-ShardingSphereç®€ä»‹"><a href="#2-ShardingSphereç®€ä»‹" class="headerlink" title="2. ShardingSphereç®€ä»‹"></a>2. ShardingSphereç®€ä»‹</h2><ol>
<li> 2018å¹´5æœˆï¼Œ<code>sharding-jdbc</code>æ›´åä¸º<code>ShardingSphere</code></li>
<li> 2018å¹´11æœˆï¼Œ<code>Sharding-sphere</code>æ­£å¼è¿›å…¥ApacheåŸºé‡‘ä¼šå­µåŒ–å™¨</li>
<li> 2020å¹´4æœˆï¼Œä»Apacheå­µåŒ–å™¨æ¯•ä¸šï¼Œæˆä¸ºApacheé¡¶çº§é¡¹ç›®<code>Apache ShardingSphere</code></li>
</ol>
<p><code>ShardingSphere</code>ç›®å‰çš„å®šä½å·²è¿œè¶…è¿‡äººä»¬ç†ŸçŸ¥çš„<code>åˆ†åº“åˆ†è¡¨</code>çš„åŠŸèƒ½äº†ï¼Œå…¶æ‹¥æœ‰è‡ªå·±çš„â¼€å¥—å¼€æºçš„åˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´ä»¶è§£å†³â½…æ¡ˆç»„æˆçš„â½£æ€åœˆï¼ˆ<strong>ShardingSphere-JDBC</strong>ã€<strong>ShardingSphere-Proxy</strong>ï¼Œ<strong>ShardingSphere-sidecar</strong>ï¼ˆè®¡åˆ’ä¸­ï¼‰ï¼‰<br>ä»–ä»¬å‡æä¾›æ ‡å‡†åŒ–çš„æ•°æ®åˆ†ç‰‡ã€åˆ†å¸ƒå¼äº‹åŠ¡å’Œæ•°æ®åº“æ²»ç†åŠŸèƒ½ï¼Œå¯é€‚ç”¨äºå¦‚JavaåŒæ„ã€å¼‚æ„è¯­è¨€ã€å®¹å™¨ã€äº‘åŸç”Ÿç­‰å„ç§å¤šæ ·åŒ–çš„åº”ç”¨åœºæ™¯</p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://shardingsphere.apache.org/document/current/cn/overview/">https://shardingsphere.apache.org/document/current/cn/overview/</a></p>
<h3 id="2-1-Apache-ShardingSphere"><a href="#2-1-Apache-ShardingSphere" class="headerlink" title="2.1 Apache ShardingSphere"></a>2.1 Apache ShardingSphere</h3><ol>
<li>å®˜æ–¹å®šä¹‰ï¼š<code>Apache ShardingSphere</code> æ˜¯ä¸€å¥—å¼€æºçš„åˆ†å¸ƒå¼æ•°æ®åº“å¢å¼ºè®¡ç®—å¼•æ“ï¼Œå…¶é€šè¿‡å¯æ’æ‹”æ¶æ„æ„å»ºåŸºäºæ•°æ®åº“ä¹‹ä¸Šçš„ç”Ÿæ€ç³»ç»Ÿï¼Œå®ç°åŒ…æ‹¬æ•°æ®åˆ†ç‰‡ã€å¼¹æ€§ä¼¸ç¼©ã€åŠ å¯†è„±æ•ç­‰åŠŸèƒ½ä¸ºä»£è¡¨çš„å¢å¼ºèƒ½åŠ›</li>
<li>å®šä½Apache ShardingSphere äº§å“å®šä½ä¸º<code>Database Plus</code>ï¼Œæ—¨åœ¨æ„å»ºå¼‚æ„æ•°æ®åº“ä¸Šå±‚çš„æ ‡å‡†å’Œç”Ÿæ€ã€‚ å®ƒå…³æ³¨å¦‚ä½•å……åˆ†åˆç†åœ°åˆ©ç”¨æ•°æ®åº“çš„è®¡ç®—å’Œå­˜å‚¨èƒ½åŠ›ï¼Œè€Œå¹¶éå®ç°ä¸€ä¸ªå…¨æ–°çš„æ•°æ®åº“<br><img src="/sharding-jdbc/1.png"></li>
</ol>
<h3 id="2-2-ShardingSphere-JDBC"><a href="#2-2-ShardingSphere-JDBC" class="headerlink" title="2.2 ShardingSphere-JDBC"></a>2.2 ShardingSphere-JDBC</h3><p>å®šä½äºè½»é‡çº§Javaæ¡†æ¶ï¼Œåœ¨Javaçš„jdbcå±‚æä¾›çš„é¢å¤–æœåŠ¡ï¼Œ <code>ShardingSphere-jdbc</code>çš„ä¸»è¦åŠŸèƒ½åœ¨å®¢æˆ·ç«¯å°½å¿ƒæ•°æ®åˆ†ç‰‡å’Œè¯»å†™åˆ†ç¦»ï¼Œé€šè¿‡sharding-jdbc,åº”ç”¨å¯ä»¥ä½¿ç”¨jdbcè®¿é—®å·²ç»è¯»å†™åˆ†ç¦»çš„å¤šä¸ªæ•°æ®æºï¼Œè€Œä¸ç”¨å…³å¿ƒæ•°æ®åº“æ•°é‡å’Œæ•°æ®çš„åˆ†å¸ƒï¼›</p>
<p><em>å¯ä»¥ç†è§£ä¸ºå¢å¼ºç‰ˆJDBCé©±åŠ¨ï¼Œå®Œå…¨å…¼å®¹JDBCå’Œå„ç§ORMæ¡†æ¶</em></p>
<ol>
<li>ä½¿ç”¨äºä»»ä½•ç»™äºˆJavaçš„ORMæ¡†æ¶ï¼Œå¦‚ï¼š<code>JPA</code>ã€<code>hibernate</code>ã€<code>mybatis</code>ã€<code>Spring JDBC Template</code>æˆ–ç›´æ¥ä½¿ç”¨JDBC</li>
<li>åŸºäºä»»ä½•ç¬¬ä¸‰æ–¹çš„æ•°æ®åº“è¿æ¥æ± ï¼Œå¦‚ï¼š<code>DBCP</code>ã€<code>C3P0</code>ã€<code>BoneCP</code>ã€<code>Druid</code>ã€<code>HikariCP</code>ç­‰</li>
<li>æ”¯æŒä»»æ„å®ç°JDBCè§„èŒƒçš„æ•°æ®åº“ï¼Œå¦‚<code>Mysql</code>ã€<code>Oracle</code>ã€<code>SQLServer</code>ã€<code>PostgreSQL</code><br><img src="/sharding-jdbc/2.png"></li>
</ol>
<p>æºç ï¼š<a href="https://github.com/apache/shardingsphere/tree/master/shardingsphere-jdbc">https://github.com/apache/shardingsphere/tree/master/shardingsphere-jdbc</a></p>
<h3 id="2-3-ShardingSphere-Proxy"><a href="#2-3-ShardingSphere-Proxy" class="headerlink" title="2.3 ShardingSphere-Proxy"></a>2.3 ShardingSphere-Proxy</h3><p>å®šä½ä¸ºé€æ˜åŒ–çš„æ•°æ®åº“ä»£ç†ç«¯ï¼Œæä¾›å°è£…äº†æ•°æ®åº“äºŒè¿›åˆ¶åè®®çš„æœåŠ¡ç«¯ç‰ˆæœ¬ï¼Œç”¨äºå®Œæˆå¯¹å¼‚æ„è¯­è¨€çš„æ”¯æŒã€‚ ç›®å‰æä¾› MySQL å’Œ PostgreSQLï¼ˆå…¼å®¹ openGauss ç­‰åŸºäº PostgreSQL çš„æ•°æ®åº“ï¼‰ç‰ˆæœ¬ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»»ä½•å…¼å®¹ MySQL/PostgreSQL åè®®çš„è®¿é—®å®¢æˆ·ç«¯ï¼ˆå¦‚ï¼šMySQL Command Client, MySQL Workbench, Navicat ç­‰ï¼‰æ“ä½œæ•°æ®ï¼Œå¯¹ DBA æ›´åŠ å‹å¥½</p>
<ol>
<li>å‘åº”ç”¨ç¨‹åºå®Œå…¨é€æ˜ï¼Œå¯ç›´æ¥å½“åš MySQL/PostgreSQL ä½¿ç”¨ï¼›</li>
<li>é€‚ç”¨äºä»»ä½•å…¼å®¹ MySQL/PostgreSQL åè®®çš„çš„å®¢æˆ·ç«¯ã€‚</li>
</ol>
<p><img src="/sharding-jdbc/3.png"></p>
<p>æºç ï¼š<a href="https://github.com/apache/shardingsphere/tree/master/shardingsphere-proxy">https://github.com/apache/shardingsphere/tree/master/shardingsphere-proxy</a></p>
<h3 id="2-4-ShardingSphere-sidecarï¼ˆTODOï¼‰"><a href="#2-4-ShardingSphere-sidecarï¼ˆTODOï¼‰" class="headerlink" title="2.4 ShardingSphere-sidecarï¼ˆTODOï¼‰"></a>2.4 ShardingSphere-sidecarï¼ˆTODOï¼‰</h3><p>å®šä½ä¸º Kubernetes çš„äº‘åŸç”Ÿæ•°æ®åº“ä»£ç†ï¼Œä»¥ Sidecar çš„å½¢å¼ä»£ç†æ‰€æœ‰å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚ é€šè¿‡æ— ä¸­å¿ƒã€é›¶ä¾µå…¥çš„æ–¹æ¡ˆæä¾›ä¸æ•°æ®åº“äº¤äº’çš„å•®åˆå±‚ï¼Œå³ Database Meshï¼Œåˆå¯ç§°æ•°æ®åº“ç½‘æ ¼ã€‚<br><img src="/sharding-jdbc/4.png"></p>
<h2 id="3-åˆ†ç‰‡çš„æ ¸å¿ƒæ¦‚å¿µ"><a href="#3-åˆ†ç‰‡çš„æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="3. åˆ†ç‰‡çš„æ ¸å¿ƒæ¦‚å¿µ"></a>3. åˆ†ç‰‡çš„æ ¸å¿ƒæ¦‚å¿µ</h2><ol>
<li><p>ä¸»è¦æ¦‚å¿µ<br> ç”±åŸæ¥çš„ä¸€ä¸ªæ•°æ®åº“(è¡¨)æ‹†åˆ†ä¸ºçœŸå®å­˜åœ¨çš„ä¸‰ä¸ªæ•°æ®åº“(è¡¨)<br> <img src="/sharding-jdbc/5.png"><br> é€»è¾‘è¡¨ä¼šåœ¨ SQL è§£æå’Œè·¯ç”±æ—¶è¢«æ›¿æ¢æˆçœŸå®çš„è¡¨åï¼Œåˆ†ç‰‡é”®å°±æ˜¯æ‹†åˆ†çš„é€»è¾‘ï¼›sharding-jdbcå¯ä»¥é€‰æ‹©å¤šä¸ªåˆ†ç‰‡é”®ï¼›</p>
</li>
<li><p>åŠ¨æ€è¡¨</p>
<p> è¡¨åä¼šå˜åŒ–ï¼Œæ¯”å¦‚è®¢å•è¡¨ï¼ŒæŒ‰ç…§æœˆä»½è¿›è¡Œåˆ†è¡¨<br> <img src="/sharding-jdbc/6.png"></p>
</li>
<li><p>ç»‘å®šè¡¨</p>
<p> ä¸Mycatçš„ERè¡¨å¯¹åº”ï¼Œå­˜åœ¨å…³è”å…³ç³»çš„ä¸¤å¼ è¡¨ï¼Œä»–ä»¬çš„åˆ†ç‰‡è§„åˆ™å¿…é¡»ç›¸åŒ<br> <img src="/sharding-jdbc/7.png"></p>
</li>
<li><p>å¹¿æ’­è¡¨</p>
<p> ä¸Mycatçš„å…¨å±€è¡¨å¯¹åº”ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®å†…å®¹ä¸€è‡´<br><img src="/sharding-jdbc/8.png"></p>
</li>
</ol>
<h2 id="4-Sharding-JDBC-Demoæ¼”ç¤º"><a href="#4-Sharding-JDBC-Demoæ¼”ç¤º" class="headerlink" title="4. Sharding-JDBC Demoæ¼”ç¤º"></a>4. Sharding-JDBC Demoæ¼”ç¤º</h2><p><code>Apache ShardingSphere-JDBC</code> å¯ä»¥é€šè¿‡ <strong>Java</strong>ï¼Œ<strong>YAML</strong>ï¼Œ<strong>Spring å‘½åç©ºé—´</strong> å’Œ <strong>Spring Boot Starter</strong> è¿™ 4 ç§æ–¹å¼è¿›è¡Œé…ç½®ï¼Œå¼€å‘è€…å¯æ ¹æ®åœºæ™¯é€‰æ‹©é€‚åˆçš„é…ç½®æ–¹å¼ã€‚</p>
<p>ç›®å‰ä»…æ”¯æŒ<code>Java</code>è¯­è¨€ä¸”java JRE 8æˆ–æ›´é«˜ç‰ˆæœ¬</p>
<p>ä¸‹é¢ä½¿ç”¨SSMæ¡†æ¶æ¥é›†æˆ<code>shardingsphere-jdbc</code>ï¼Œæ“ä½œæ•°æ®åº“ï¼Œç”±äºèµ„æºæœ‰é™ï¼Œåœ¨ä¸€ä¸ªæ•°æ®åº“<code>instance</code>é‡Œé¢åˆ›å»ºä¸¤ä¸ªæ•°æ®åº“db0ã€db1æ¥æ¨¡æ‹Ÿåˆ†åº“åˆ†è¡¨ï¼›</p>
<ol>
<li><p>åˆ›å»ºæ•°æ®åº“<code>db0</code>,<code>db1</code>ï¼Œä»¥åŠåˆ›å»ºä¸‹é¢çš„æ•°æ®è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ç”¨æˆ·è¡¨</span></span><br><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `user_info` (</span><br><span class="line">     `user_id` <span class="type">bigint</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `user_name` <span class="type">varchar</span>(<span class="number">45</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `account` <span class="type">varchar</span>(<span class="number">45</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `password` <span class="type">varchar</span>(<span class="number">45</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (`user_id`)</span><br><span class="line"> ) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- è®¢å•è¡¨</span></span><br><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_order` (</span><br><span class="line">     `order_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `user_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (`order_id`)</span><br><span class="line"> ) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- è®¢å•æ˜ç»†è¡¨</span></span><br><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_order_item` (</span><br><span class="line">     `item_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `order_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `user_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (`item_id`)</span><br><span class="line"> ) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- å‚æ•°é…ç½®è¡¨</span></span><br><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_config` (</span><br><span class="line">     `config_id` <span class="type">int</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">     `para_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `para_value` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     `para_desc` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (`config_id`)</span><br><span class="line"> ) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">truncate</span> <span class="keyword">table</span> user_info;</span><br><span class="line"> <span class="keyword">truncate</span> <span class="keyword">table</span> t_order;</span><br><span class="line"> <span class="keyword">truncate</span> <span class="keyword">table</span> t_order_item;</span><br><span class="line"> <span class="keyword">truncate</span> <span class="keyword">table</span> t_config;</span><br></pre></td></tr></table></figure></li>
<li><p><span id="index1">åˆ›å»ºé¡¹ç›®å¹¶å¼•å…¥ä¾èµ–</span></p>
 <figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.shardingsphere/shardingsphere-jdbc-core --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shardingsphere<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shardingsphere-jdbc-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shardingsphere<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sharding-jdbc-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>ä½¿ç”¨<code>mybatisPlus</code>é€†å‘å·¥ç¨‹ç”Ÿæˆ<code>entity</code>ã€<code>mapper</code>ã€<code>service</code>ç­‰ç›¸å…³ä»£ç ï¼Œè¿™é‡Œå°±ä¸è´´ä¸šåŠ¡ä»£ç äº†ã€‚</p>
</li>
<li><p>ç¼–è¾‘<code>application.yml</code></p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis-config.xml</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">shardingsphere:</span></span><br><span class="line">    <span class="attr">props:</span></span><br><span class="line">      <span class="attr">sql:</span></span><br><span class="line">        <span class="attr">show:</span> <span class="literal">true</span>    <span class="comment">#æ‰“å°sqlè¯­å¥</span></span><br><span class="line">    <span class="attr">datasource:</span>     <span class="comment">#æ•°æ®æºé…ç½®</span></span><br><span class="line">      <span class="attr">names:</span> <span class="string">db0,db1</span></span><br><span class="line">      <span class="attr">db0:</span>    <span class="comment">#æ•°æ®æº1</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db1?serverTimezone=UTC&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">xiaoyuge</span></span><br><span class="line">      <span class="attr">db1:</span>   <span class="comment">#æ•°æ®æº2</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db1?serverTimezone=UTC&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">xiaoyuge</span></span><br><span class="line">    <span class="attr">sharding:</span>     <span class="comment">#åˆ†ç‰‡</span></span><br><span class="line">      <span class="attr">default-database-strategy:</span>    <span class="comment">#æ•°æ®åº“åˆ†ç‰‡ç­–ç•¥</span></span><br><span class="line">        <span class="attr">inline:</span></span><br><span class="line">          <span class="attr">sharding-column:</span> <span class="string">user_id</span>    <span class="comment">#åˆ†ç‰‡é”®</span></span><br><span class="line">          <span class="attr">algorithm-expression:</span> <span class="string">db$&#123;user_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span>    <span class="comment">#åˆ†ç‰‡ç®—æ³•</span></span><br><span class="line">      <span class="attr">tables:</span>     <span class="comment">#è¡¨åˆ†ç‰‡ç­–ç•¥</span></span><br><span class="line">        <span class="attr">user_info:</span></span><br><span class="line">          <span class="attr">actual-data-nodes:</span> <span class="string">db$-&gt;&#123;0..1&#125;.user_info</span>      <span class="comment">#çœŸå®å­˜å‚¨æ•°æ®çš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨è¡Œå†…è¡¨è¾¾å¼,$-&gt;&#123;&#125; æ˜¯æ ‡å‡†è¯­æ³•</span></span><br><span class="line">          <span class="attr">databaseStrategy:</span></span><br><span class="line">            <span class="attr">inline:</span></span><br><span class="line">              <span class="attr">shardingColumn:</span> <span class="string">user_id</span></span><br><span class="line">              <span class="attr">algorithm-expression:</span> <span class="string">db$&#123;user_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span>  <span class="comment">#åˆ†ç‰‡ç®—æ³•</span></span><br><span class="line">          <span class="attr">key-generator:</span></span><br><span class="line">            <span class="attr">column:</span> <span class="string">user_id</span></span><br><span class="line">            <span class="attr">type:</span> <span class="string">SNOWFLAKE</span>     <span class="comment">#ä¸»é”®ç­–ç•¥ï¼šSNOWFLAKE ã€ UUIDï¼Œå¦‚æœè®¾ç½®äº†ä¸»é”®ç­–ç•¥ï¼Œé‚£ä¹ˆæ’å…¥çš„æ—¶å€™å°±ä¸ç”¨æŒ‡å®šä¸»é”®çš„å€¼</span></span><br><span class="line">        <span class="attr">t_order:</span></span><br><span class="line">          <span class="attr">databaseStrategy:</span></span><br><span class="line">            <span class="attr">inline:</span></span><br><span class="line">              <span class="attr">shardingColumn:</span> <span class="string">order_id</span></span><br><span class="line">              <span class="attr">algorithm-expression:</span> <span class="string">db$&#123;order_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span> <span class="comment">#åˆ†ç‰‡ç®—æ³•</span></span><br><span class="line">          <span class="attr">actual-data-nodes:</span> <span class="string">db$-&gt;&#123;0..1&#125;.t_order</span></span><br><span class="line">        <span class="attr">t_order_item:</span></span><br><span class="line">          <span class="attr">databaseStrategy:</span></span><br><span class="line">            <span class="attr">inline:</span></span><br><span class="line">              <span class="attr">shardingColumn:</span> <span class="string">order_id</span></span><br><span class="line">              <span class="attr">algorithm-expression:</span> <span class="string">db$&#123;order_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span>   <span class="comment">#åˆ†ç‰‡ç®—æ³•</span></span><br><span class="line">          <span class="attr">actual-data-nodes:</span> <span class="string">db$-&gt;&#123;0..1&#125;.t_order_item</span></span><br><span class="line">      <span class="string">binding-tables[0]:</span> <span class="string">t_order,t_order_item</span>    <span class="comment">#ç»‘å®šè¡¨é…ç½®</span></span><br><span class="line">      <span class="attr">broadcast-tables:</span> <span class="string">t_config</span>      <span class="comment">#å¹¿æ’­è¡¨é…ç½®</span></span><br></pre></td></tr></table></figure></li>
<li><p>æµ‹è¯•ç®€å•åˆ†åº“user_info</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.ygb.entity.UserInfo;</span><br><span class="line"><span class="keyword">import</span> com.ygb.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.ygb.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserShardingTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//éšæœºç”Ÿæˆ100æ¡æ•°æ®,æ’å…¥åˆ°æ•°æ®åº“ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            UserInfo userInfo = <span class="keyword">new</span> UserInfo();</span><br><span class="line">            userInfo.setAccount(<span class="string">&quot;account&quot;</span> + i);</span><br><span class="line">            userInfo.setPassword(<span class="string">&quot;password&quot;</span> + i);</span><br><span class="line">            userInfo.setUserName(<span class="string">&quot;name&quot;</span> + i);</span><br><span class="line">            userInfo.setUserId(i);</span><br><span class="line">            userService.insert(userInfo);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        UserInfo userInfo1 = userService.getUserInfoByUserId(<span class="number">1L</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;------userInfo1:&quot;</span> + userInfo1);</span><br><span class="line"></span><br><span class="line">        UserInfo userInfo2 = userService.getUserInfoByUserId(<span class="number">2L</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;------userInfo2:&quot;</span> + userInfo2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>æ‰§è¡Œ <code>insert</code>æ–¹æ³•åï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º:<br> <img src="/sharding-jdbc/9.png"></p>
<p> æ ¹æ®ä¸Šé¢<code>yaml</code>é…ç½®<code>user_info</code>è¡¨æŒ‰ç…§åˆ†ç‰‡é”®(<code>sharding-column</code>)<code>user_id</code>å–æ¨¡åˆ†ç‰‡åˆ°ä¸åŒæ•°æ®åº“;<code>user_id</code> % 2 ä¸ºå¶æ•°è½ä¸‹<code>db0</code>, å¥‡æ•°è½åœ¨<code>db1</code></p>
</li>
<li><p>æ‰§è¡Œ <code>select</code> æ–¹æ³•ï¼ŒæŸ¥è¯¢user_idä¸º1 çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°é€»è¾‘sqlè¯­å¥ä»¥åŠçœŸå®çš„sqlè¯­å¥è·¯ç”±åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚<br><img src="/sharding-jdbc/10.png"><br>åŒç†ï¼ŒæŸ¥è¯¢user_id ä¸º 2 çš„æ•°æ®ï¼Œæ ¹æ®è¡¨çš„åˆ†åº“è§„åˆ™ï¼Œuser_id % 2 == 0æ•°æ®è½åœ¨db0èŠ‚ç‚¹ä¸Šï¼›</p>
</li>
</ol>
</li>
<li><p>æµ‹è¯•ç»‘å®šè¡¨t_order,t_order_item</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">        <span class="comment">//è®¢å•è¡¨</span></span><br><span class="line">        Order order = <span class="keyword">new</span> Order();</span><br><span class="line">        order.setOrderId(i);</span><br><span class="line">        order.setUserId(i);</span><br><span class="line">        orderService.insert(order);</span><br><span class="line">        <span class="comment">//è®¢å•æ˜ç»†è¡¨</span></span><br><span class="line">        OrderItem orderItem = <span class="keyword">new</span> OrderItem();</span><br><span class="line">        orderItem.setItemId(i);</span><br><span class="line">        orderItem.setOrderId(i);</span><br><span class="line">        orderItem.setUserId(i);</span><br><span class="line">        orderItemService.insert(orderItem);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ<code>insert</code>æ–¹æ³•åï¼Œæ•°æ®åº“è¡¨ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br> <img src="/sharding-jdbc/11.png"><br> <code>t_order</code>è¡¨å’Œ<code>t_order_item</code> ä½¿ç”¨ç›¸åŒçš„åˆ†ç‰‡è§„åˆ™<code>db$&#123;order_id % 2&#125;</code>,ç›¸åŒçš„<code>order_id</code>åˆ†å¸ƒåœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼›</p>
</li>
</ol>
<ol start="7">
<li>æµ‹è¯•å¹¿æ’­è¡¨t_config <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">        Config config = <span class="keyword">new</span> Config();</span><br><span class="line">        config.setConfigId(i);</span><br><span class="line">        config.setParaName(<span class="string">&quot;name&quot;</span>+i);</span><br><span class="line">        config.setParaValue(<span class="string">&quot;value&quot;</span>+i);</span><br><span class="line">        config.setParaDesc(<span class="string">&quot;desc&quot;</span>+i);</span><br><span class="line">        configService.insert(config);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
æ‰§è¡Œ<code>insert</code>æ–¹æ³•åï¼ŒæŸ¥çœ‹æ‰§è¡Œæ—¥å¿—ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå‘<code>db0</code>ã€<code>db1</code>ä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«å‘é€äº†æ’å…¥è¯­å¥ï¼›<br> <img src="/sharding-jdbc/12.png"><br> <img src="/sharding-jdbc/13.png"></li>
</ol>
<h2 id="5-ShardingSphereåˆ†åº“åˆ†è¡¨åŸç†å‰–æ"><a href="#5-ShardingSphereåˆ†åº“åˆ†è¡¨åŸç†å‰–æ" class="headerlink" title="5. ShardingSphereåˆ†åº“åˆ†è¡¨åŸç†å‰–æ"></a>5. ShardingSphereåˆ†åº“åˆ†è¡¨åŸç†å‰–æ</h2><p>åŸºäºä¸Šé¢çš„æµ‹è¯•ä»£ç æ¥åˆ†æShardingSphereåˆ†åº“åˆ†è¡¨åŸç†ï¼›</p>
<h3 id="5-1-ShardingSphere-JDBCå·¥ä½œæµç¨‹"><a href="#5-1-ShardingSphere-JDBCå·¥ä½œæµç¨‹" class="headerlink" title="5.1 ShardingSphere-JDBCå·¥ä½œæµç¨‹"></a>5.1 ShardingSphere-JDBCå·¥ä½œæµç¨‹</h3><figure class="highlight coq"><table><tr><td class="code"><pre><span class="line">SQL è§£æ(è§£æå¼•æ“) =&gt; æ‰§è¡Œå™¨ä¼˜åŒ– =&gt; SQL è·¯ç”±(è·¯ç”±å¼•æ“) =&gt; SQL æ”¹å†™(æ”¹å†™å¼•æ“) =&gt; SQL æ‰§è¡Œ(æ‰§è¡Œå¼•æ“) =&gt; ç»“æœå½’å¹¶(å½’å¹¶å¼•æ“)</span><br></pre></td></tr></table></figure>
<ol>
<li>SQLè§£æ <code>SQL</code> è§£æä¸»è¦æ˜¯è¯æ³•å’Œè¯­æ³•çš„è§£æã€‚ç›®å‰å¸¸è§çš„ <code>SQL</code> è§£æå™¨ä¸»è¦æœ‰<code>fdb</code>ï¼Œ<code>jsqlparser</code> å’Œ <code>Druid</code>ã€‚<code>Sharding-JDBC1.4.x</code>ä¹‹å‰çš„ç‰ˆæœ¬ä½¿ç”¨<code>Druid</code>ä½œä¸º<code>SQL</code>è§£æå™¨ã€‚ä» 1.5.x ç‰ˆæœ¬ å¼€å§‹ï¼Œ<code>Sharding-JDBC</code>é‡‡ç”¨å®Œå…¨è‡ªç ”çš„<code>SQL</code>è§£æå¼•æ“</li>
</ol>
<ol start="2">
<li>SQL è·¯ç”±<br> <img src="/sharding-jdbc/21.png"><br> SQL è·¯ç”±æ˜¯æ ¹æ®åˆ†ç‰‡è§„åˆ™é…ç½®ä»¥åŠè§£æä¸Šä¸‹æ–‡ä¸­çš„åˆ†ç‰‡æ¡ä»¶ï¼Œå°† SQL å®šä½è‡³çœŸæ­£çš„ æ•°æ®æºã€‚å®ƒåˆåˆ†ä¸ºç›´æ¥è·¯ç”±ã€æ ‡å‡†è·¯ç”±å’Œç¬›å¡å°”ç§¯è·¯ç”±<ul>
<li>ç›´æ¥è·¯ç”±: ä½¿ç”¨ Hint æ–¹å¼ã€‚</li>
<li>æ ‡å‡†è·¯ç”±ï¼šBinding è¡¨æ˜¯æŒ‡ä½¿ç”¨åŒæ ·çš„åˆ†ç‰‡é”®å’Œåˆ†ç‰‡è§„åˆ™çš„ä¸€ç»„è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä½•æƒ…å†µä¸‹ï¼Œ Binding è¡¨çš„åˆ†ç‰‡ç»“æœåº”ä¸ä¸»è¡¨ä¸€è‡´ã€‚ä¾‹å¦‚ï¼šorder è¡¨å’Œ order_item è¡¨ï¼Œéƒ½æ ¹æ® order_id åˆ†ç‰‡ï¼Œç»“æœåº”æ˜¯ order_1 ä¸ order_item_1 æˆå¯¹å‡ºç°ã€‚è¿™æ ·çš„å…³è”æŸ¥è¯¢å’Œå•è¡¨æŸ¥è¯¢å¤æ‚åº¦ å’Œæ€§èƒ½ç›¸å½“ã€‚å¦‚æœåˆ†ç‰‡æ¡ä»¶ä¸æ˜¯ç­‰äºï¼Œè€Œæ˜¯ BETWEEN æˆ– INï¼Œåˆ™è·¯ç”±ç»“æœä¸ä¸€å®šè½å…¥å• åº“ï¼ˆè¡¨ï¼‰ï¼Œå› æ­¤ä¸€æ¡é€»è¾‘ SQL æœ€ç»ˆå¯èƒ½æ‹†åˆ†ä¸ºå¤šæ¡ SQL è¯­å¥ã€‚</li>
<li>ç¬›å¡å°”ç§¯è·¯ç”±ï¼šç¬›å¡å°”ç§¯æŸ¥è¯¢æœ€ä¸ºå¤æ‚ï¼Œå› ä¸ºæ— æ³•æ ¹æ® Binding å…³ç³»å®šä½åˆ†ç‰‡è§„åˆ™çš„ä¸€è‡´æ€§ï¼Œæ‰€ä»¥ é Binding è¡¨çš„å…³è”æŸ¥è¯¢éœ€è¦æ‹†è§£ä¸ºç¬›å¡å°”ç§¯ç»„åˆæ‰§è¡Œã€‚æŸ¥è¯¢æ€§èƒ½è¾ƒä½ï¼Œè€Œä¸”æ•°æ®åº“è¿ æ¥æ•°è¾ƒé«˜ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ol>
<ol start="3">
<li><p>SQLæ”¹å†™</p>
<p> å°†é€»è¾‘è¡¨åç§°æ”¹æˆçœŸå®è¡¨åç§°ï¼Œä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢ç­‰</p>
</li>
<li><p>SQLæ‰§è¡Œ</p>
<p> å› ä¸ºå¯èƒ½é“¾æ¥åˆ°å¤šä¸ªçœŸå®æ•°æ®æºï¼Œ Sharding -JDBC å°†é‡‡ç”¨å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œ SQL</p>
</li>
<li><p>SQLå½’å¹¶</p>
<p> å¦‚æ•°æ®çš„ç»„è£…ã€åˆ†é¡µã€æ’åºç­‰ç­‰ã€‚</p>
</li>
</ol>
<p>ä¸‹é¢æˆ‘è·Ÿç€æºç å­¦ä¹ ä¸€ä¸‹å®Œæ•´çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<h3 id="5-2-é…ç½®åŠ è½½è¿‡ç¨‹"><a href="#5-2-é…ç½®åŠ è½½è¿‡ç¨‹" class="headerlink" title="5.2 é…ç½®åŠ è½½è¿‡ç¨‹"></a>5.2 é…ç½®åŠ è½½è¿‡ç¨‹</h3><p>é¦–å…ˆç”±äºæˆ‘ä»¬å¼•å…¥sharding-jdbc-spring-boot-starterä¾èµ–ï¼Œåœ¨ä¾èµ–åŒ…ä¸­å¯ä»¥çœ‹åˆ°shardingSphereæ”¯æŒspringboot,é‚£ä¹ˆå®ƒè‚¯å®šä¼šæœ‰ä¸€ä¸ªç±»ä¼¼äºSpringBootè‡ªåŠ¨è£…é…ç±» <code>SpringBootConfiguration</code>è¿™æ ·çš„é…ç½®ç±»ï¼›</p>
<p>æŸ¥çœ‹ä¸€ä¸‹æºç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Spring boot starter configuration.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;org.apache.shardingsphere.spring.boot.converter&quot;)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;</span></span><br><span class="line"><span class="meta">        SpringBootShardingRuleConfigurationProperties.class,</span></span><br><span class="line"><span class="meta">        SpringBootMasterSlaveRuleConfigurationProperties.class, SpringBootEncryptRuleConfigurationProperties.class,</span></span><br><span class="line"><span class="meta">        SpringBootPropertiesConfigurationProperties.class, SpringBootShadowRuleConfigurationProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.shardingsphere&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)</span></span><br><span class="line"><span class="meta">@AutoConfigureBefore(DataSourceAutoConfiguration.class)</span> </span><br><span class="line"><span class="comment">//@AutoConfigureBeforeè‡ªåŠ¨è£…é…åœ¨DataSourceAutoConfigurationè£…é…ç±»ä¹‹å‰å®Œæˆï¼Œä¹Ÿå°±æ˜¯è¯´Shardingsphereåˆ›å»ºå¾—æ•°æ®æºå°±æ˜¯å…¨å±€å¾—æ•°æ®æºï¼Œé¡¹ç›®åªè¦æ¶‰åŠåˆ°å¯¹æ•°æ®åº“å¾—ä»»ä½•æ“ä½œéƒ½ä¼šç»è¿‡ShardingDataSourceå¾—è¿™ä¸€å±‚å¤„ç†</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootConfiguration</span> <span class="keyword">implements</span> <span class="title">EnvironmentAware</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å°†ä¹‹å‰é…ç½®å¾—è§„åˆ™æ˜ å°„åˆ°æ­¤é…ç½®æ–‡ä»¶ä¸­ï¼Œä¸ºåˆ›å»ºæ•°æ®æºå¾—è¿‡ç¨‹æä¾›é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SpringBootShardingRuleConfigurationProperties shardingRule;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SpringBootMasterSlaveRuleConfigurationProperties masterSlaveRule;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SpringBootEncryptRuleConfigurationProperties encryptRule;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SpringBootShadowRuleConfigurationProperties shadowRule;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SpringBootPropertiesConfigurationProperties props;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯¹è±¡å­˜æ”¾å¾—æ˜¯é…ç½®å¾—æ‰€æœ‰æ•°æ®æºæ˜ å°„ä¿¡æ¯ï¼Œä¸ºåé¢è·å–æ•°æ®åº“è¿æ¥ä»¥åŠæ•°æ®åˆ†ç‰‡æä¾›åŸºç¡€èƒ½åŠ›</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, DataSource&gt; dataSourceMap = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String jndiName = <span class="string">&quot;jndi-name&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šé¢çš„æµ‹è¯•ä»£ç åŸºäºåˆ†ç‰‡çš„ ç­–ç•¥é…ç½®ï¼Œæ‰€ä»¥åªæœ‰ ShardingRuleCondition æ‰æ»¡è¶³è£…é…æ¡ä»¶ã€‚</span></span><br><span class="line"><span class="comment">     * ShardingDataSourceFactoryå·¥å‚ç±»æ¥åˆ›å»º ShardingDataSourceæ•°æ®æºï¼Œ</span></span><br><span class="line"><span class="comment">     * Get sharding data source bean.</span></span><br><span class="line"><span class="comment">     * æ¡ä»¶æ³¨å…¥ä¸åŒçš„æ•°æ®æº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> data source bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException SQL exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(ShardingRuleCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">shardingDataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//é…ç½®è½¬æ¢è¿‡ç¨‹ï¼Œ</span></span><br><span class="line">        <span class="keyword">return</span> ShardingDataSourceFactory.createDataSource(dataSourceMap, <span class="keyword">new</span> ShardingRuleConfigurationYamlSwapper().swap(shardingRule), props.getProps());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get master-slave data source bean.</span></span><br><span class="line"><span class="comment">     * æ¡ä»¶æ³¨å…¥ä¸åŒçš„æ•°æ®æº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> data source bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException SQL exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(MasterSlaveRuleCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">masterSlaveDataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> MasterSlaveDataSourceFactory.createDataSource(dataSourceMap, <span class="keyword">new</span> MasterSlaveRuleConfigurationYamlSwapper().swap(masterSlaveRule), props.getProps());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get encrypt data source bean.</span></span><br><span class="line"><span class="comment">     *æ¡ä»¶æ³¨å…¥ä¸åŒçš„æ•°æ®æº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> data source bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException SQL exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(EncryptRuleCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">encryptDataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> EncryptDataSourceFactory.createDataSource(dataSourceMap.values().iterator().next(), <span class="keyword">new</span> EncryptRuleConfigurationYamlSwapper().swap(encryptRule), props.getProps());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Get shadow data source bean.</span></span><br><span class="line"><span class="comment">     * æ¡ä»¶æ³¨å…¥ä¸åŒçš„æ•°æ®æº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> data source bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> SQLException SQL exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Conditional(ShadowRuleCondition.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">shadowDataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ShadowDataSourceFactory.createDataSource(dataSourceMap, <span class="keyword">new</span> ShadowRuleConfigurationYamlSwapper().swap(shadowRule), props.getProps());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create sharding transaction type scanner</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> sharding transaction type scanner</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ShardingTransactionTypeScanner <span class="title">shardingTransactionTypeScanner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShardingTransactionTypeScanner();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">setEnvironment</span><span class="params">(<span class="keyword">final</span> Environment environment)</span> </span>&#123;</span><br><span class="line">        String prefix = <span class="string">&quot;spring.shardingsphere.datasource.&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (String each : getDataSourceNames(environment, prefix)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//éå†ç¯å¢ƒå˜é‡ï¼Œå°†æ•°æ®æºä¿å­˜åˆ° dataSourceMap</span></span><br><span class="line">                dataSourceMap.put(each, getDataSource(environment, prefix, each));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> ReflectiveOperationException ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ShardingSphereException(<span class="string">&quot;Can&#x27;t find datasource type!&quot;</span>, ex);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> NamingException namingEx) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ShardingSphereException(<span class="string">&quot;Can&#x27;t find JNDI datasource!&quot;</span>, namingEx);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//----------------------------çœç•¥------------------------------</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p><code>ShardingDataSourceFactory</code>å·¥å‚ç±»åˆ›å»ºShardingDataSourceæ•°æ®æº</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShardingDataSource</span> <span class="keyword">extends</span> <span class="title">AbstractDataSourceAdapter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ShardingRuntimeContext runtimeContext;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–è·¯ç”±è£…é¥°å™¨ï¼ˆè·¯ç”±å¼•æ“ï¼ŒSPIæ–¹å¼ï¼‰</span></span><br><span class="line">        NewInstanceServiceLoader.register(RouteDecorator.class);</span><br><span class="line">        <span class="comment">//åˆ›å»ºSQLæ”¹å†™ä¸Šä¸‹æ–‡è£…é¥°å™¨ï¼ˆæ”¹å†™å¼•æ“ï¼ŒSPIæ–¹å¼ï¼‰</span></span><br><span class="line">        NewInstanceServiceLoader.register(SQLRewriteContextDecorator.class);</span><br><span class="line">        <span class="comment">// åˆ›å»ºç»“æœå¤„ç†å¼•æ“ï¼ˆå½’å¹¶å¼•æ“ï¼Œç”¨äºå¯¹æŸ¥è¯¢ç»“æœåˆå¹¶å¤„ç†ï¼ŒåŒä¸Šï¼‰</span></span><br><span class="line">        NewInstanceServiceLoader.register(ResultProcessEngine.class);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShardingDataSource</span><span class="params">(Map&lt;String, DataSource&gt; dataSourceMap, ShardingRule shardingRule, Properties props)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(dataSourceMap);</span><br><span class="line">        <span class="keyword">this</span>.checkDataSourceType(dataSourceMap);</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼ˆå…¨å±€åˆ†ç‰‡è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼Œç”¨äºä¿å­˜åˆ†ç‰‡æ‰€éœ€å¾—ç›¸å…³é…ç½®ï¼‰</span></span><br><span class="line">        <span class="keyword">this</span>.runtimeContext = <span class="keyword">new</span> ShardingRuntimeContext(dataSourceMap, shardingRule, props, <span class="keyword">this</span>.getDatabaseType());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//----------------------------çœç•¥------------------------------</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ShardingRuleé…ç½®è§„åˆ™è§£æç±»<br>é…ç½®è½¬æ¢è¿‡ç¨‹ã€‚ä¼šå°†åˆ†è¡¨è§„åˆ™ã€åˆ†åº“è§„åˆ™ã€åˆ†è¡¨ç®—æ³•ã€åˆ†åº“ç®—æ³•ç­‰éƒ½è§£æåˆ°å¯¹åº”å¾— ShardingRuleConfiguration é€šç”¨åˆ†ç‰‡é…ç½®ç±»ä¸­</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ShardingRuleConfiguration <span class="title">swap</span><span class="params">(YamlShardingRuleConfiguration yamlConfiguration)</span> </span>&#123;</span><br><span class="line">   ShardingRuleConfiguration result = <span class="keyword">new</span> ShardingRuleConfiguration();</span><br><span class="line">   Iterator var3 = yamlConfiguration.getTables().entrySet().iterator();</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">while</span>(var3.hasNext()) &#123;</span><br><span class="line">       <span class="comment">//å°†æˆ‘ä»¬é…ç½®å¾—åˆ†åº“ã€åˆ†è¡¨ç­–ç•¥ã€åˆ†åº“ç®—æ³•ã€åˆ†è¡¨ç®—æ³•è§£æåˆ°TableRuleConfigurationä¸­ï¼Œæ¯ä¸€å¼ è¡¨éƒ½ä¼šå¯¹åº”ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line">       Entry&lt;String, YamlTableRuleConfiguration&gt; entry = (Entry)var3.next();</span><br><span class="line">       YamlTableRuleConfiguration tableRuleConfig = (YamlTableRuleConfiguration)entry.getValue();</span><br><span class="line">       tableRuleConfig.setLogicTable((String)entry.getKey());</span><br><span class="line">       result.getTableRuleConfigs().add(<span class="keyword">this</span>.tableRuleConfigurationYamlSwapper.swap(tableRuleConfig));</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">   result.setDefaultDataSourceName(yamlConfiguration.getDefaultDataSourceName());</span><br><span class="line">   <span class="comment">//ç»‘å®šè¡¨</span></span><br><span class="line">   result.getBindingTableGroups().addAll(yamlConfiguration.getBindingTables());</span><br><span class="line">   <span class="comment">//å¹¿æ’­è¡¨</span></span><br><span class="line">   result.getBroadcastTables().addAll(yamlConfiguration.getBroadcastTables());</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">null</span> != yamlConfiguration.getDefaultDatabaseStrategy()) &#123;</span><br><span class="line">       result.setDefaultDatabaseShardingStrategyConfig(<span class="keyword">this</span>.shardingStrategyConfigurationYamlSwapper.swap(yamlConfiguration.getDefaultDatabaseStrategy()));</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">null</span> != yamlConfiguration.getDefaultTableStrategy()) &#123;</span><br><span class="line">       result.setDefaultTableShardingStrategyConfig(<span class="keyword">this</span>.shardingStrategyConfigurationYamlSwapper.swap(yamlConfiguration.getDefaultTableStrategy()));</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">null</span> != yamlConfiguration.getDefaultKeyGenerator()) &#123;</span><br><span class="line">       result.setDefaultKeyGeneratorConfig(<span class="keyword">this</span>.keyGeneratorConfigurationYamlSwapper.swap(yamlConfiguration.getDefaultKeyGenerator()));</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">   Collection&lt;MasterSlaveRuleConfiguration&gt; masterSlaveRuleConfigs = <span class="keyword">new</span> LinkedList();</span><br><span class="line">   Iterator var9 = yamlConfiguration.getMasterSlaveRules().entrySet().iterator();</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">while</span>(var9.hasNext()) &#123;</span><br><span class="line">       Entry&lt;String, YamlMasterSlaveRuleConfiguration&gt; entry = (Entry)var9.next();</span><br><span class="line">       YamlMasterSlaveRuleConfiguration each = (YamlMasterSlaveRuleConfiguration)entry.getValue();</span><br><span class="line">       each.setName((String)entry.getKey());</span><br><span class="line">       masterSlaveRuleConfigs.add(<span class="keyword">this</span>.masterSlaveRuleConfigurationYamlSwapper.swap((YamlMasterSlaveRuleConfiguration)entry.getValue()));</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">   result.setMasterSlaveRuleConfigs(masterSlaveRuleConfigs);</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">null</span> != yamlConfiguration.getEncryptRule()) &#123;</span><br><span class="line">       result.setEncryptRuleConfig(<span class="keyword">this</span>.encryptRuleConfigurationYamlSwapper.swap(yamlConfiguration.getEncryptRule()));</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SpringBootConfiguration -&gt; ShardingDataSourceFactory -&gt; ShardingRule -&gt; ShardingDataSource -&gt; ShardingRuntimeContext</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="5-3-åˆ†ç‰‡è¿è¡Œæ—¶ä¸Šä¸‹æ–‡åˆ›å»ºè¿‡ç¨‹"><a href="#5-3-åˆ†ç‰‡è¿è¡Œæ—¶ä¸Šä¸‹æ–‡åˆ›å»ºè¿‡ç¨‹" class="headerlink" title="5.3 åˆ†ç‰‡è¿è¡Œæ—¶ä¸Šä¸‹æ–‡åˆ›å»ºè¿‡ç¨‹"></a>5.3 åˆ†ç‰‡è¿è¡Œæ—¶ä¸Šä¸‹æ–‡åˆ›å»ºè¿‡ç¨‹</h3><p>åˆ›å»ºæ•°æ®æºçš„æ—¶å€™ä¼šåœ¨æ„é€ å™¨ä¸­å°†è¿è¡Œæ—¶ä¸Šä¸‹æ–‡<code>ShardingRuntimeContext</code>ä¸€åŒåˆ›å»ºå‡ºæ¥ï¼ŒShardingRuntimeContextå¾—æ„é€ å™¨å¦‚ä¸‹å›¾</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ShardingRuntimeContext</span> <span class="keyword">extends</span> <span class="title">MultipleDataSourcesRuntimeContext</span>&lt;<span class="title">ShardingRule</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CachedDatabaseMetaData cachedDatabaseMetaData;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ShardingTransactionManagerEngine shardingTransactionManagerEngine;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShardingRuntimeContext</span><span class="params">(Map&lt;String, DataSource&gt; dataSourceMap, ShardingRule shardingRule, Properties props, DatabaseType databaseType)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(dataSourceMap, shardingRule, props, databaseType);</span><br><span class="line">        <span class="keyword">this</span>.cachedDatabaseMetaData = <span class="keyword">this</span>.createCachedDatabaseMetaData(dataSourceMap);</span><br><span class="line">        <span class="keyword">this</span>.shardingTransactionManagerEngine = <span class="keyword">new</span> ShardingTransactionManagerEngine();</span><br><span class="line">        <span class="keyword">this</span>.shardingTransactionManagerEngine.init(databaseType, dataSourceMap);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//----------------- çœç•¥------------</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç±»å…³ç³»å›¾å¦‚ä¸‹ï¼š<br><img src="/sharding-jdbc/14.png"><br>å‘ç°è¿è¡Œæ—¶ä¸Šä¸‹æ–‡è¿›è¡Œäº†æŠ½è±¡ï¼Œåˆ†ç‰‡è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ç»§æ‰¿äº†<code>MultipleDataSourcesRuntimeContext</code> å¤šæ•°æ®æºè¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼Œè€Œå¤šæ•°æ®æºè¿è¡Œæ—¶ä¸Šä¸‹æ–‡åˆç»§æ‰¿äº† <code>AbstractRuntimeContext</code> æŠ½è±¡ä¸Šä¸‹æ–‡ã€‚è€Œåˆ›å»º <code>ShardingRuntimeContext</code> åˆ†ç‰‡è¿è¡Œæ—¶ä¸Šä¸‹æ–‡å¾—æ—¶å€™ä¼šåŒæ—¶å°†åˆ†ç‰‡è§„åˆ™ä¿å­˜åœ¨æŠ½è±¡ç±»ä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractRuntimeContext</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">BaseRule</span>&gt; <span class="keyword">implements</span> <span class="title">RuntimeContext</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> T rule;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ConfigurationProperties properties;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DatabaseType databaseType;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ExecutorEngine executorEngine;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SQLParserEngine sqlParserEngine;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="title">AbstractRuntimeContext</span><span class="params">(T rule, Properties props, DatabaseType databaseType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.rule = rule;   <span class="comment">//1. ç¼“å­˜æ•´ä¸ªåˆ†ç‰‡è§„åˆ™ï¼Œä¸ºåç»­çš„åˆ†ç‰‡æ“ä½œæä¾›ä¾æ®</span></span><br><span class="line">        <span class="keyword">this</span>.properties = <span class="keyword">new</span> ConfigurationProperties(<span class="keyword">null</span> == props ? <span class="keyword">new</span> Properties() : props);</span><br><span class="line">        <span class="keyword">this</span>.databaseType = databaseType;   <span class="comment">//2. ç¼“å­˜æ•°æ®åº“ç±»å‹ï¼Œç”¨äºåç»­æ‰§è¡Œçš„æ—¶å€™åŠ è½½å¯¹åº”çš„æ•°æ®åº“å…ƒæ•°æ®</span></span><br><span class="line">        <span class="comment">//3.åˆ›å»ºæ‰§è¡Œå¼•æ“ï¼Œæ ¹æ®å½“å‰æ‰§è¡Œè¿æ¥æ˜¯å¦æŒæœ‰äº‹ç‰©æ¥å†³å®šæ˜¯å¦å¼‚æ­¥æ‰§è¡Œï¼Œæ ¹æ®é…ç½®çš„executor.size å‚æ•°å†³å®šåˆ›å»ºå¤šå°‘ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œé»˜è®¤ä¸é…ç½®å¾—è¯ï¼Œä½¿ç”¨ cachepoolï¼Œé…ç½®äº†å°±ä½¿ç”¨å›ºå®šçº¿ç¨‹æ•°å¾—çº¿ç¨‹æ± </span></span><br><span class="line">        <span class="keyword">this</span>.executorEngine = <span class="keyword">new</span> ExecutorEngine((Integer)<span class="keyword">this</span>.properties.getValue(ConfigurationPropertyKey.EXECUTOR_SIZE));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è§£æå¼•æ“ï¼Œç”¨äºè§£æSQLä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼Œè§£æè¿‡ç¨‹åˆ†ä¸ºè¯æ³•è§£æå’Œè¯­æ³•è§£æã€‚ä»3.0ä¹‹åè§£æä¼šå…¨é¢æ›¿æ¢ä¸º ANTLR</span></span><br><span class="line">        <span class="keyword">this</span>.sqlParserEngine = SQLParserEngineFactory.getSQLParserEngine(DatabaseTypes.getTrunkDatabaseTypeName(databaseType));</span><br><span class="line">        ConfigurationLogger.log(rule.getRuleConfiguration());</span><br><span class="line">        ConfigurationLogger.log(props);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//----------------- çœç•¥------------</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line">S<span class="function"><span class="title">hardingRuntimeContext</span>-&gt;</span> M<span class="function"><span class="title">ultipleDataSourcesRuntimeContext</span> -&gt;</span> A<span class="function"><span class="title">bstractRuntimeContext</span>-&gt;</span> E<span class="function"><span class="title">xecutorEngine</span>-&gt;</span> SQLParserEngine</span><br></pre></td></tr></table></figure>
<h3 id="5-4-åˆ†ç‰‡å¤„ç†è¿‡ç¨‹"><a href="#5-4-åˆ†ç‰‡å¤„ç†è¿‡ç¨‹" class="headerlink" title="5.4 åˆ†ç‰‡å¤„ç†è¿‡ç¨‹"></a>5.4 åˆ†ç‰‡å¤„ç†è¿‡ç¨‹</h3><p>ç”±äºæµ‹è¯•ä»£ç ä½¿ç”¨çš„æ˜¯<code>Mybatis</code>å±‚ï¼Œè¿™é‡Œåªæ˜¯å¯¹<code>Mybatis</code>å¤„ç†æµç¨‹è¿›è¡Œåˆ†æã€‚</p>
<p>å½“ä¸€ä¸ªæŸ¥è¯¢<code>sql</code>æ‰§è¡Œæ—¶ï¼Œé¦–å…ˆç»è¿‡Mybatiså±‚</p>
<ol>
<li><p>è°ƒç”¨<code>org.apache.ibatis.executor.BaseExecutor # queryFromDatabase</code>æ–¹æ³•</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> &lt;E&gt; <span class="function">List&lt;E&gt; <span class="title">queryFromDatabase</span><span class="params">(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey key, BoundSql boundSql)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.localCache.putObject(key, ExecutionPlaceholder.EXECUTION_PLACEHOLDER);</span><br><span class="line">    List list;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        list = <span class="keyword">this</span>.doQuery(ms, parameter, rowBounds, resultHandler, boundSql);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.localCache.removeObject(key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.localCache.putObject(key, list);</span><br><span class="line">    <span class="keyword">if</span> (ms.getStatementType() == StatementType.CALLABLE) &#123;</span><br><span class="line">        <span class="keyword">this</span>.localOutputParameterCache.putObject(key, parameter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>é€šè¿‡æ¨¡æ¿æŠ½è±¡æ–¹æ³•<code>org.apache.ibatis.executor.BaseExecutor#doQuery</code>æŸ¥æ‰¾å…·ä½“å®ç°ï¼ˆå¦‚æœæ²¡æœ‰ç‰¹æ®Šé…ç½®ï¼Œæ­¤å¤„æ˜¯SimpleExecutorï¼‰,å¹¶ä¸”å°†æŸ¥è¯¢ç»“æœæ”¾å…¥ä¸€çº§ç¼“å­˜ä¸­ã€‚</p>
  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">public</span> &lt;E&gt; <span class="function">List&lt;E&gt; <span class="title">doQuery</span><span class="params">(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    Statement stmt = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    List var9;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Configuration configuration = ms.getConfiguration();</span><br><span class="line">        StatementHandler handler = configuration.newStatementHandler(<span class="keyword">this</span>.wrapper, ms, parameter, rowBounds, resultHandler, boundSql);</span><br><span class="line">        stmt = <span class="keyword">this</span>.prepareStatement(handler, ms.getStatementLog());</span><br><span class="line">        var9 = handler.query(stmt, resultHandler);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.closeStatement(stmt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> var9;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨<code>org.apache.ibatis.executor.SimpleExecutor#doQuery</code>æ–¹æ³•ä¸­ä¼šåˆ›å»ºä¸€ä¸ª<code>Statement</code>ï¼Œè€Œæ­¤å®ä¾‹å°±æ˜¯<code>ShardingPreparedStatement</code><br> <img src="/sharding-jdbc/16.png"></p>
</li>
<li><p>ç»è¿‡Mybatisé¢„ç¼–è¯‘SQLå¤„ç†å™¨ï¼Œç„¶ååœ¨<code>org.apache.ibatis.executor.statement.PreparedStatementHandler#query</code>æ–¹æ³•ä¸­æ‰§è¡Œäº†<code>PreparedStatement</code>çš„<code>execute</code>æ–¹æ³•</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;E&gt; <span class="function">List&lt;E&gt; <span class="title">query</span><span class="params">(Statement statement, ResultHandler resultHandler)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    PreparedStatement ps = (PreparedStatement)statement;</span><br><span class="line">    ps.execute();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.resultSetHandler.handleResultSets(ps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><span id="initPreparedStatementExecutor">åœ¨å‰é¢çŸ¥é“æ­¤å¤„</span>çš„<code>PreparedStatement</code>æ˜¯<code>ShardingPreparedStatement</code>ï¼Œæ‰€ä»¥è¿™é‡Œè°ƒç”¨çš„æ˜¯<code>ShardingPreparedStatement</code>çš„<code>execute</code>æ–¹æ³•</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> var1;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1. é¦–å…ˆæ¸…ç†æœ¬åœ° PreparedStatementExecutor ä¸­ç¼“å­˜çš„sqlç›¸å…³ä¿¡æ¯ï¼ˆåˆ›å»ºæ‰§è¡Œå•å…ƒçš„æ—¶å€™ä¼šå°†sqlç›¸å…³ä¿¡æ¯ç¼“å­˜åˆ°æœ¬åœ°ï¼‰</span></span><br><span class="line">        <span class="keyword">this</span>.clearPrevious();</span><br><span class="line">        <span class="comment">//2. â‘¡ ç„¶åæ‰§è¡Œprepareæ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå¾ˆå…³é”®çš„æ“ä½œï¼š</span></span><br><span class="line">        <span class="keyword">this</span>.prepare();</span><br><span class="line">        <span class="keyword">this</span>.initPreparedStatementExecutor();</span><br><span class="line">        var1 = <span class="keyword">this</span>.preparedStatementExecutor.execute();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.clearBatch();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> var1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/sharding-jdbc/17.png"></p>
<ol>
<li><code>this.prepare()</code>æ‰§è¡Œè·¯ç”±ç­–ç•¥å’ŒSQLæ”¹å†™ç­–ç•¥ï¼ˆè¿™ä¸¤æ­¥æ˜¯åˆ†ç‰‡çš„æ ¸å¿ƒï¼Œå¦å¤–ä¹Ÿéƒ½æ˜¯å¯ä¾›ä½¿ç”¨è€…æ‰©å±•çš„ï¼‰<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ExecutionContext <span class="title">prepare</span><span class="params">(String sql, List&lt;Object&gt; parameters)</span> </span>&#123;</span><br><span class="line">    List&lt;Object&gt; clonedParameters = <span class="keyword">this</span>.cloneParameters(parameters);</span><br><span class="line">    RouteContext routeContext = <span class="keyword">this</span>.executeRoute(sql, clonedParameters);</span><br><span class="line">    ExecutionContext result = <span class="keyword">new</span> ExecutionContext(routeContext.getSqlStatementContext());</span><br><span class="line">    result.getExecutionUnits().addAll(<span class="keyword">this</span>.executeRewrite(sql, clonedParameters, routeContext));</span><br><span class="line">    <span class="keyword">if</span> ((Boolean)<span class="keyword">this</span>.properties.getValue(ConfigurationPropertyKey.SQL_SHOW)) &#123;</span><br><span class="line">        SQLLogger.logSQL(sql, (Boolean)<span class="keyword">this</span>.properties.getValue(ConfigurationPropertyKey.SQL_SIMPLE), result.getSqlStatementContext(), result.getExecutionUnits());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>org.apache.shardingsphere.underlying.pluggble.prepare.BasePrepareEngine#executeRoute</code>æ–¹æ³•ï¼Œæ³¨å†Œè·¯ç”±è£…é¥°å™¨ã€‚ <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> RouteContext <span class="title">executeRoute</span><span class="params">(String sql, List&lt;Object&gt; clonedParameters)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.registerRouteDecorator();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.route(<span class="keyword">this</span>.router, sql, clonedParameters);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å·²ç»æ³¨å†Œçš„<code>RouteDecorator</code>ç±»å®ä¾‹ï¼Œè¿‡æ»¤æ‰æ³›å‹æ˜¯BaseRuleç±»å‹çš„ï¼ˆShardingRuleæ˜¯å…¶å­ç±»ï¼Œæ‰€ä»¥é‡æ–°çš„æ—¶å€™è¦†å†™ getTypeæ–¹æ³•æ—¶ï¼Œä¸€å®šè¦æ˜¯BaseRuleç±»å‹çš„ï¼‰</li>
<li>å®ä¾‹åŒ–è·¯ç”±è£…é¥°å™¨</li>
<li>è°ƒç”¨æ¨¡æ¿æ–¹æ³• routeï¼Œæœ€ç»ˆä¼šè°ƒç”¨åˆ°<code>DataNodeRouter</code>çš„ <code>executeRoute</code> æ–¹æ³•  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">private</span> RouteContext <span class="title">executeRoute</span><span class="params">(String sql, List&lt;Object&gt; parameters, <span class="keyword">boolean</span> useCache)</span> </span>&#123;</span><br><span class="line">     <span class="comment">//1. è§£æå¼•æ“ï¼š é€šè¿‡ SQLParserEngine è§£æSQLï¼ˆå¹¶ä¸”æ­¤å¤„é»˜è®¤æ˜¯ä¼šå°†è§£æåçš„è¯­å¥ç¼“å­˜èµ·æ¥ï¼Œä¹Ÿå°±è¯å®äº†å‰é¢ä¼šä»€ä¹ˆä¼šå…ˆæ¸…ç†ç¼“å­˜ï¼‰ï¼Œç„¶åé€šè¿‡è°ƒç”¨parse0æ–¹æ³•è§£æSQLå¹¶ç¼“å­˜</span></span><br><span class="line">     RouteContext result = <span class="keyword">this</span>.createRouteContext(sql, parameters, useCache);</span><br><span class="line"></span><br><span class="line">     Entry entry;</span><br><span class="line">     <span class="comment">//2. å¾ªç¯æ‰§è¡Œæ³¨å†Œäº†çš„è·¯ç”±è£…é¥°å™¨</span></span><br><span class="line">     <span class="keyword">for</span>(Iterator var5 = <span class="keyword">this</span>.decorators.entrySet().iterator();</span><br><span class="line">          var5.hasNext(); result = ((RouteDecorator)entry.getValue()).decorate(result, <span class="keyword">this</span>.metaData, (BaseRule)entry.getKey(), <span class="keyword">this</span>.properties)) &#123;</span><br><span class="line">         entry = (Entry)var5.next();</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
<li><p>ç„¶åå¼€å§‹åˆ†ç‰‡è·¯ç”±è£…é¥°å™¨<code>org.apache.shardingsphere.sharding.route.engine.ShardingRouteDecorator#decorate</code><br> <img src="/sharding-jdbc/18.png"><br>â‘  è·å–åˆ†ç‰‡æ¡ä»¶ï¼šæ ¹æ®ä¸åŒçš„è¯­å¥åˆ›å»ºä¸åŒçš„ æ¡ä»¶è§£æå¼•æ“æ¥æ„é€ åˆ†ç‰‡æ¡ä»¶ï¼ˆè·å–çš„åˆ†ç‰‡æ¡ä»¶ç”¨äºåœ¨æ‰§è¡Œè·¯ç”±åˆ¤æ–­æ—¶å†³å®šä½¿ç”¨å“ªç§åˆ†ç‰‡ç­–ç•¥ï¼‰<br>â‘¡ é€šè¿‡å·¥å‚åˆ›å»ºå‡º ShardingRouteEngine å®ä¾‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ ä¼šåˆ›å»ºå‡ºæ¥ ShardingStandardRoutingEngineï¼ˆæ²¡æœ‰é…ç½®ä»€ä¹ˆéªšæ“ä½œçš„æƒ…å†µä¸‹ï¼‰ï¼Œç„¶åè°ƒç”¨ æ ‡å‡†è·¯ç”±æ‰§è¡Œå¼•æ“çš„ è·¯ç”±æ–¹æ³•</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> RouteResult <span class="title">route</span><span class="params">(ShardingRule shardingRule)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">this</span>.isDMLForModify(<span class="keyword">this</span>.sqlStatementContext) &amp;&amp; <span class="number">1</span> != ((TableAvailable)<span class="keyword">this</span>.sqlStatementContext).getAllTables().size()) &#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> ShardingSphereException(<span class="string">&quot;Cannot support Multiple-Table for &#x27;%s&#x27;.&quot;</span>, <span class="keyword">new</span> Object[]&#123;<span class="keyword">this</span>.sqlStatementContext.getSqlStatement()&#125;);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;                </span><br><span class="line">         <span class="comment">//æ ¹æ®è·¯ç”±èŠ‚ç‚¹ç”Ÿæˆè·¯ç”±ç»“æœ RouteResult</span></span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">this</span>.generateRouteResult(<span class="keyword">this</span>.getDataNodes(shardingRule, shardingRule.getTableRule(<span class="keyword">this</span>.logicTableName)));</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è·å–æ•°æ®èŠ‚ç‚¹ï¼šæ­¤å¤„è·å–çš„å°±æ˜¯çœŸå®çš„SQLè·¯ç”±æƒ…å†µï¼ˆæ¯”å¦‚ï¼šds0.table_0ï¼‰ï¼Œ</span></span><br><span class="line"><span class="comment">  * é¦–å…ˆåˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç›´æ¥è·¯ç”±(å¼ºåˆ¶è·¯ç”±)ï¼Œè‹¥ä½¿ç”¨åˆ™èµ°å¼ºåˆ¶è·¯ç”±çš„åˆ†ç‰‡ç®—æ³•å»è®¡ç®—åˆ†ç‰‡ï¼›ç„¶åå†åˆ¤æ–­æ˜¯å¦æ ¹æ®åˆ†ç‰‡æ¡ä»¶å»è·¯ç”±ï¼Œ</span></span><br><span class="line"><span class="comment">  * è‹¥æœ‰çš„è¯ï¼Œåˆ™æ ¹æ®é…ç½®çš„åˆ†ç‰‡ç®—æ³•ï¼ˆå†…è”ï¼‰æ ¹æ®åˆ†ç‰‡å€¼è®¡ç®—å‡ºæ¥å…·ä½“åˆ†åˆ°å“ªä¸ªåº“å“ªå¼ è¡¨ï¼›è‹¥éƒ½æ²¡æœ‰çš„è¯ï¼Œåˆ™ç›´æ¥èµ°æ··åˆè·¯ç”±çš„å¤„ç†é€»è¾‘</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="function"><span class="keyword">private</span> Collection&lt;DataNode&gt; <span class="title">getDataNodes</span><span class="params">(ShardingRule shardingRule, TableRule tableRule)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (<span class="keyword">this</span>.isRoutingByHint(shardingRule, tableRule)) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">this</span>.routeByHint(shardingRule, tableRule);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">this</span>.isRoutingByShardingConditions(shardingRule, tableRule) ? <span class="keyword">this</span>.routeByShardingConditions(shardingRule, tableRule) : <span class="keyword">this</span>.routeByMixedConditions(shardingRule, tableRule);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°äº†è·¯ç”±èŠ‚ç‚¹</p>
</li>
<li><p><a href="#initPreparedStatementExecutor">å‰é¢ä¸€ç›´åœ¨è®²prepareæ–¹æ³•</a> å›åˆ°<code>ShardingPreparedStatement#execute</code>æ–¹æ³•ä¸­ï¼Œè°ƒç”¨<code>initPreparedStatementExecutor()</code> åˆå§‹åŒ–<code> PreparedStatementExecutor</code>å®ä¾‹ å¹¶å°†è§£æå‡ºæ¥çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ç›¸å…³SQLè¯­å¥ç»„è®¾ç½®åˆ°ç¼“å­˜ä¸­,ç„¶åè°ƒç”¨æ‰§è¡Œå™¨çš„æ‰§è¡Œæ–¹æ³•</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ­¤å¤„ä¼šè·å–åˆ°éœ€è¦æ‰§è¡Œçš„SQLé›†åˆï¼Œä¸»è¦æ˜¯é€šè¿‡maxConnectionsSizePerQueryæ¯æ¬¡æ‰§è¡Œæ—¶æœ€å¤§è¿æ¥æ•°æ¥åˆ¤æ–­sqlæ‰§è¡Œå•å…ƒåº”è¯¥åˆ†æˆå‡ ç»„ï¼ŒmaxConnectionsSizePerQueryçš„å€¼é»˜è®¤æ˜¯1ã€‚åˆ™è¡¨ç¤ºï¼Œ</span></span><br><span class="line"><span class="comment">// å¦‚æœçœŸå®çš„sqlæœ‰10æ¡ï¼Œé‚£ä¹ˆæ¯ç»„æ‹†åˆ†10æ¡ï¼Œæ€»å…±æ‹†åˆ†æˆ1ç»„ï¼Œ</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶ä¼šåˆ¤æ–­ maxConnectionsSizePerQuery æ˜¯å¦å¤§äº10ï¼Œå°äºçš„è¯åˆ™ä¼šé€‰æ‹©å½“å‰æ‰¹æ¬¡æ‰§è¡Œçš„æ˜¯è¿æ¥é™åˆ¶æ¨¡å¼ï¼ˆåªå…è®¸å ç”¨ä¸€ä¸ªåº“çš„ä¸€ä¸ªè¿æ¥ï¼‰ï¼Œç›¸ååˆ™æ˜¯å†…å­˜é™åˆ¶æ¨¡å¼ï¼Œä¸ä¼šé™åˆ¶åˆ›å»ºçš„è¿æ¥æ•°</span></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initPreparedStatementExecutor</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">     <span class="keyword">this</span>.preparedStatementExecutor.init(<span class="keyword">this</span>.executionContext);</span><br><span class="line">     <span class="keyword">this</span>.setParametersForStatements();</span><br><span class="line">     <span class="keyword">this</span>.replayMethodForStatements();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li>
<li><p><a href="#initPreparedStatementExecutor">ShardingPreparedStatement#executeQueryæ–¹æ³•ä¸­</a>æœ€åè°ƒç”¨æ‰§è¡Œå™¨çš„æ‰§è¡Œæ–¹æ³•<code>this.preparedStatementExecutor.execute()</code></p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">execute</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="comment">//1. è·å–sqlæ‰§è¡Œå›è°ƒç±»ï¼ˆçœŸæ­£æ“ä½œæ•°æ®åº“ï¼‰</span></span><br><span class="line">    <span class="keyword">boolean</span> isExceptionThrown = ExecutorExceptionHandler.isExceptionThrown();</span><br><span class="line">    <span class="comment">//2. è°ƒç”¨ executeCallbackæ–¹æ³•ï¼Œæ­¤æ–¹æ³•ç»§æ‰¿è‡ªçˆ¶ç±»AbstractStatementExecutor</span></span><br><span class="line">    SQLExecuteCallback&lt;Boolean&gt; executeCallback = SQLExecuteCallbackFactory.getPreparedSQLExecuteCallback(<span class="keyword">this</span>.getDatabaseType(), isExceptionThrown);</span><br><span class="line">    List&lt;Boolean&gt; result = <span class="keyword">this</span>.executeCallback(executeCallback);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span> != result &amp;&amp; !result.isEmpty() &amp;&amp; <span class="keyword">null</span> != result.get(<span class="number">0</span>) ? (Boolean)result.get(<span class="number">0</span>) : <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>è¿›å…¥çˆ¶ç±»<code>org.apache.shardingsphere.shardingjdbc.executor.AbstractStatementExecutor#executeCallback</code>ï¼ŒSQLæ‰§è¡Œæ¨¡æ¿<code>SQLExecuteTemplate</code>ç±»é€šè¿‡å§”æ´¾å…¶æˆå‘˜<code>ExecutorEngine</code>æ‰§è¡Œå¼•æ“æ¥æ‰§è¡ŒçœŸæ­£çš„æ“ä½œ</p>
 <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">executeCallback</span><span class="params">(SQLExecuteCallback&lt;T&gt; executeCallback)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    List&lt;T&gt; result = <span class="keyword">this</span>.sqlExecuteTemplate.execute(<span class="keyword">this</span>.inputGroups, executeCallback);</span><br><span class="line">    <span class="keyword">this</span>.refreshMetaDataIfNeeded(<span class="keyword">this</span>.connection.getRuntimeContext(), <span class="keyword">this</span>.sqlStatementContext);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå¼•æ“å¯¹æ‹†åˆ†çš„SQLæ‰§è¡Œå•å…ƒæ‰§è¡Œå¤„ç†ï¼Œå¦‚å›¾ï¼š<br><img src="/sharding-jdbc/21.png"><br>â‘  å¹¶å‘æ‰§è¡Œï¼ˆæ˜¯å¦æ˜¯å¹¶å‘æ‰§è¡Œé€šè¿‡ æ˜¯å¦æŒæœ‰äº‹åŠ¡æ¥åˆ¤æ–­çš„ï¼Œä¾‹å¦‚ æœ¬åœ°äº‹åŠ¡ä½†æ˜¯ä½ ä¿®æ”¹ä¸ºéè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±æ˜¯æŒæœ‰äº‹åŠ¡çŠ¶æ€ï¼Œåˆ™æ­¤æ—¶å°±æ˜¯åŒæ­¥æ‰§è¡Œè¯­å¥ï¼‰</p>
<p>â‘¡ è¿­ä»£å‡ºSQLæ‰§è¡Œç»„çš„ç¬¬ä¸€ä¸ªï¼Œå…¶ä½™çš„SQLå¼‚æ­¥æ‰§è¡Œ</p>
<p>â‘¢ åŒæ­¥æ‰§è¡Œç¬¬ä¸€ä¸ªSQLæ‰§è¡Œç»„ï¼ˆæ–¹ä¾¿ä¸åé¢çš„æ‰§è¡Œç»„è¿›è¡Œåˆå¹¶èµ·æ¥ï¼‰</p>
<p>â‘£ é€šè¿‡å…¶å†…ç½®çš„çº¿ç¨‹æ± æ¥å¼‚æ­¥æ‰§è¡ŒSQL</p>
<p>æ­¤æ—¶ä¸€æ¡æŸ¥è¯¢è¯­å¥åˆ°è¿™é‡Œå°±æ‰§è¡Œå®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥ç€åˆ†æå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œå¤„ç†çš„æ“ä½œ</p>
</li>
<li><p>å›åˆ°Mybatisä¸­ï¼Œæœ€åå¯¹æŸ¥è¯¢çš„ç»“æœé›†è¿›è¡Œå¤„ç†( resultSetHandler.<E> handleResultSets(ps)ï¼Œæ­¤å¤„æ˜¯org.apache.ibatis.executor.resultset.DefaultResultSetHandlerç»“æœé›†å¤„ç†å™¨ ),å¦‚ä¸‹ï¼š</E></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Object&gt; <span class="title">handleResultSets</span><span class="params">(Statement stmt)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    ErrorContext.instance().activity(<span class="string">&quot;handling results&quot;</span>).object(<span class="keyword">this</span>.mappedStatement.getId());</span><br><span class="line">    List&lt;Object&gt; multipleResults = <span class="keyword">new</span> ArrayList();</span><br><span class="line">    <span class="keyword">int</span> resultSetCount = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//1. é¦–å…ˆè°ƒç”¨getFirstResultSetå»è·å–ç¬¬ä¸€ä¸ªç»“æœé›†ï¼Œæ­¤å¤„çš„ Statement å®ä¾‹æ˜¯ ShardingPreparedStatement</span></span><br><span class="line">    ResultSetWrapper rsw = <span class="keyword">this</span>.getFirstResultSet(stmt);</span><br><span class="line">    List&lt;ResultMap&gt; resultMaps = <span class="keyword">this</span>.mappedStatement.getResultMaps();</span><br><span class="line">    <span class="keyword">int</span> resultMapCount = resultMaps.size();</span><br><span class="line">    <span class="keyword">this</span>.validateResultMapsCount(rsw, resultMapCount);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(rsw != <span class="keyword">null</span> &amp;&amp; resultMapCount &gt; resultSetCount) &#123;</span><br><span class="line">        ResultMap resultMap = (ResultMap)resultMaps.get(resultSetCount);</span><br><span class="line">        <span class="keyword">this</span>.handleResultSet(rsw, resultMap, multipleResults, (ResultMapping)<span class="keyword">null</span>);</span><br><span class="line">        rsw = <span class="keyword">this</span>.getNextResultSet(stmt);</span><br><span class="line">        <span class="keyword">this</span>.cleanUpAfterHandlingResultSet();</span><br><span class="line">        ++resultSetCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String[] resultSets = <span class="keyword">this</span>.mappedStatement.getResultSets();</span><br><span class="line">    <span class="keyword">if</span> (resultSets != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(rsw != <span class="keyword">null</span> &amp;&amp; resultSetCount &lt; resultSets.length) &#123;</span><br><span class="line">            ResultMapping parentMapping = (ResultMapping)<span class="keyword">this</span>.nextResultMaps.get(resultSets[resultSetCount]);</span><br><span class="line">            <span class="keyword">if</span> (parentMapping != <span class="keyword">null</span>) &#123;</span><br><span class="line">                String nestedResultMapId = parentMapping.getNestedResultMapId();</span><br><span class="line">                ResultMap resultMap = <span class="keyword">this</span>.configuration.getResultMap(nestedResultMapId);</span><br><span class="line">                <span class="keyword">this</span>.handleResultSet(rsw, resultMap, (List)<span class="keyword">null</span>, parentMapping);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            rsw = <span class="keyword">this</span>.getNextResultSet(stmt);</span><br><span class="line">            <span class="keyword">this</span>.cleanUpAfterHandlingResultSet();</span><br><span class="line">            ++resultSetCount;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.collapseSingleResultList(multipleResults);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™é‡Œçš„Statement ShardingPreparedStatement</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ResultSetWrapper <span class="title">getFirstResultSet</span><span class="params">(Statement stmt)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    ResultSet rs = stmt.getResultSet();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(rs == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (stmt.getMoreResults()) &#123;</span><br><span class="line">            rs = stmt.getResultSet();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stmt.getUpdateCount() == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> rs != <span class="keyword">null</span> ? <span class="keyword">new</span> ResultSetWrapper(rs, <span class="keyword">this</span>.configuration) : <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨äº†<code>getResultSet()</code>æ–¹æ³•ï¼›</p>
</li>
<li><p>è¿›å…¥åˆ°<code>org.apache.shardingsphere.shardingjdbc.jdbc.core.statement.ShardingPreparedStatement# getResultSet</code><br>å°†æŸ¥è¯¢è¿”å›çš„ç»“æœé›†è¿›è¡Œåˆå¹¶å¤„ç†ï¼ŒShardingsphere çš„å½’å¹¶å¼•æ“åŠŸèƒ½ä¸Šåˆ’åˆ†ï¼šéå†å½’å¹¶ã€æ’åºå½’å¹¶ï¼ˆSQLä¸­å­˜åœ¨ORDER BYè¯­å¥ï¼‰ã€åˆ†ç»„å½’å¹¶ï¼ˆSQLä¸­æœ‰GroupByå­å¥ï¼‰ã€èšåˆå½’å¹¶ï¼ˆå«æœ‰èšåˆå‡½æ•°ï¼‰ã€åˆ†é¡µå½’å¹¶ï¼ˆå«æœ‰Limitå…³é”®å­—ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ResultSet <span class="title">getResultSet</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != <span class="keyword">this</span>.currentResultSet) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.currentResultSet;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.executionContext.getSqlStatementContext() <span class="keyword">instanceof</span> SelectStatementContext || <span class="keyword">this</span>.executionContext.getSqlStatementContext().getSqlStatement() <span class="keyword">instanceof</span> DALStatement) &#123;</span><br><span class="line">            List&lt;ResultSet&gt; resultSets = <span class="keyword">this</span>.getResultSets();          <span class="comment">// â‘  </span></span><br><span class="line">            MergedResult mergedResult = <span class="keyword">this</span>.mergeQuery(<span class="keyword">this</span>.getQueryResults(resultSets));      <span class="comment">// â‘¡ </span></span><br><span class="line">            <span class="keyword">this</span>.currentResultSet = <span class="keyword">new</span> ShardingResultSet(resultSets, mergedResult, <span class="keyword">this</span>, <span class="keyword">this</span>.executionContext);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.currentResultSet;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â‘  è·å–æ‰€æœ‰Statementå¯¹åº”çš„ç»“æœé›†ï¼Œæ­¤å¤„æ˜¯æ‹¿åˆ°çœŸæ­£æ•°æ®æºæ‰€å¯¹åº”çš„Statementå®ä¾‹ï¼Œæ¯”å¦‚ï¼šæˆ‘ç°åœ¨çš„æ•°æ®æºæ˜¯ HikariDateSourceï¼Œé‚£ä¹ˆæ‹¿åˆ°çš„å°±æ˜¯ HikariProxyPreparedStatement</p>
<p>â‘¡ æ‰§è¡Œåˆå¹¶é€»è¾‘ï¼šé¦–å…ˆå°†ç»“æœé›†å°è£…æˆæµå¼æŸ¥è¯¢ç»“æœå¯¹è±¡StreamQueryResultï¼Œæ¥ç€åˆ›å»ºåˆå¹¶å¼•æ“<code>org.apache.shardingsphere.underlying.pluggble.merge.MergeEngine#merge</code>ï¼Œç„¶åè°ƒç”¨åˆå¹¶å¼•æ“çš„åˆå¹¶æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> MergedResult <span class="title">merge</span><span class="params">(List&lt;QueryResult&gt; queryResults, SQLStatementContext sqlStatementContext)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.registerMergeDecorator();  <span class="comment">// â‘¢ </span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.merger.process(queryResults, sqlStatementContext);  <span class="comment">// â‘£ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â‘¢ å®ä¾‹åŒ–åˆå¹¶å¼•æ“å¤„ç†å™¨ResultProcessEngine</p>
<p>â‘£ è°ƒç”¨MergeEntryçš„ process æ–¹æ³•ï¼Œå§”æ´¾æ¥è¿›è¡Œåˆå¹¶é€»è¾‘ã€‚<br><img src="/sharding-jdbc/24.png"><br>â‘¤ â‘¥ ä¸­ï¼Œåˆ¤æ–­è‹¥æ˜¯<code>ResultMergerEngine </code>ç±»å‹çš„åˆå¹¶å¼•æ“ï¼Œåˆ™è°ƒç”¨å…¶mergeæ–¹æ³•æ‰§è¡ŒçœŸæ­£çš„åˆå¹¶é€»è¾‘<br><img src="/sharding-jdbc/25.png"><br>æ˜¾ç„¶æ»¡è¶³ç±»å‹åˆ¤æ–­ï¼Œåˆ™æ­¤å¤„ä¼šè°ƒç”¨ShardingResultMergerEngine#newInstance æ–¹æ³•æ¥å®ä¾‹åŒ–çœŸæ­£ç”¨äºåˆå¹¶æ•°æ®æµçš„å¼•æ“</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ResultMerger <span class="title">newInstance</span><span class="params">(DatabaseType databaseType, ShardingRule shardingRule, ConfigurationProperties properties, SQLStatementContext sqlStatementContext)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (sqlStatementContext <span class="keyword">instanceof</span> SelectStatementContext) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ShardingDQLResultMerger(databaseType);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (ResultMerger)(sqlStatementContext.getSqlStatement() <span class="keyword">instanceof</span> DALStatement ? <span class="keyword">new</span> ShardingDALResultMerger(shardingRule) : <span class="keyword">new</span> TransparentResultMerger());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ˜¾ç„¶æ­¤å¤„æ˜¯æŸ¥è¯¢è¯­å¥ï¼Œé‚£ä¹ˆæœ€ç»ˆç”¨äºåˆå¹¶çš„å¼•æ“å°±æ˜¯ ShardingDQLResultMergerï¼Œç„¶åæ‰§è¡Œå…¶mergeæ–¹æ³•<br><img src="/sharding-jdbc/26.png"><br>â‘¦ ä¸­åˆ¤æ–­sqlä¸­åŒ…å«å“ªäº›å…³é”®å­—ï¼Œç„¶ååˆ›å»ºå¯¹åº”çš„åˆå¹¶ç»“æœï¼Œå¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šä½¿ç”¨ éå†æµå¼å½’å¹¶æ–¹å¼åˆå¹¶æ•°æ®ã€‚å‡è®¾ æˆ‘ä»¬æ­¤å¤„SQLä¸­å¸¦æœ‰ order byå…³é”®å­—ï¼Œé‚£ä¹ˆåˆ›å»ºå¾—åˆå¹¶ç»“æœå¯¹è±¡å°±æ˜¯OrderByStreamMergedResult<br>â‘§ å¯¹åˆ›å»ºå‡ºæ¥çš„æ’åºåˆå¹¶ç»“æœè¿›è¡Œè£…é¥°æ“ä½œï¼ˆå°±æ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰åˆ«çš„å…³é”®å­—ï¼Œä¾‹å¦‚ï¼šLimitï¼Œå¦‚æœæœ‰å°±ä¼šåˆ›å»ºLimitDecoratorMergedResult è£…é¥°å™¨å¯¹è±¡ï¼Œåœ¨ä¹‹å‰çš„æ’åºåˆå¹¶åŸºç¡€ä¸Šåˆå¤šä¸€ä¸ª LimitåŠŸèƒ½ï¼‰ï¼Œå†å›åˆ° ShardingPreparedStatementä¸­ï¼Œä¼šåˆ›å»ºä¸€ä¸ª ShardingResultSetå¯¹è±¡è®¾ç½®åˆ°å½“å‰çš„æˆå‘˜å˜é‡currentResultSetä¸­ï¼Œå¹¶è¿”å›ã€‚ æ­¤æ—¶å¦‚æœæ˜¯æ‰¹é‡çš„åœºæ™¯ï¼Œè¿”å›çš„ç»“æœé›†ä¸­å®é™…ä¸Šå·²ç»åŒ…å«äº†æ‰€æœ‰çš„ç»“æœé›†ï¼ˆå‰é¢å­˜æ”¾åœ¨OrderByStreamMergedResultçš„ orderByValuesQueue é˜Ÿåˆ—ä¸­ï¼‰</p>
<p>æ’åºå½’å¹¶æµç¨‹ï¼š<br><img src="/sharding-jdbc/27.png"><br>è°ƒç”¨åˆå¹¶ç»“æœçš„ nextæ–¹æ³•æ—¶ä¼šæ‰§è¡Œå¦‚å›¾<br><img src="/sharding-jdbc/28.png"><br>æœ€åæµç¨‹åˆå›åˆ°Mybatis ç»“æœé›†å¤„ç†ä¸Šäº†ï¼Œå°†ç»“æœè¿”å›ç»™è¯·æ±‚è°ƒç”¨æ–¹</p>
</li>
</ol>
<h2 id="6-åˆ†ç‰‡ç­–ç•¥"><a href="#6-åˆ†ç‰‡ç­–ç•¥" class="headerlink" title="6. åˆ†ç‰‡ç­–ç•¥"></a>6. åˆ†ç‰‡ç­–ç•¥</h2><p><strong>ç­–ç•¥åŒ…æ‹¬äº†ç®—æ³•ï¼Œç®—æ³•æ˜¯ç­–ç•¥çš„ä¸€ä¸ªå±æ€§ã€‚</strong></p>
<p>Sharding-JDBC ä¸­çš„åˆ†ç‰‡ç­–ç•¥æœ‰ä¸¤ä¸ªç»´åº¦ï¼šåˆ†åº“ï¼ˆæ•°æ®æºåˆ†ç‰‡ï¼‰ç­–ç•¥å’Œåˆ†è¡¨ç­–ç•¥ï¼›ï¼ˆmycatåªæ”¯æŒè¦ä¹ˆåˆ†åº“æˆ–è€…è¦ä¹ˆåˆ†è¡¨ï¼‰</p>
<p>è·Ÿ Mycat ä¸ä¸€æ ·ï¼ŒSharding-JDBC æ²¡æœ‰æä¾›å†…ç½®çš„åˆ†ç‰‡ç®—æ³•ï¼Œè€Œæ˜¯é€šè¿‡å®ç°æ¥å£<code>ShardingStrategy</code>ï¼Œ è®©å¼€å‘è€…è‡ªè¡Œå®ç°ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®ä¸šåŠ¡å®é™…æƒ…å†µçµæ´»åœ°å®ç°åˆ†ç‰‡ã€‚</p>
<h3 id="6-1-è¡Œè¡¨è¾¾å¼åˆ†ç‰‡ç­–ç•¥-InlineShardingStrategy"><a href="#6-1-è¡Œè¡¨è¾¾å¼åˆ†ç‰‡ç­–ç•¥-InlineShardingStrategy" class="headerlink" title="6.1 è¡Œè¡¨è¾¾å¼åˆ†ç‰‡ç­–ç•¥ InlineShardingStrategy"></a>6.1 è¡Œè¡¨è¾¾å¼åˆ†ç‰‡ç­–ç•¥ InlineShardingStrategy</h3><ul>
<li>ç®—æ³•ï¼šè¡Œå†…è¡¨è¾¾å¼ $-&gt;{}</li>
<li>æ–‡æ¡£è·¯å¾„ï¼š<a href="https://shardingsphere.apache.org/document/current/cn/features/sharding/concept/inline-expression/">https://shardingsphere.apache.org/document/current/cn/features/sharding/concept/inline-expression/</a></li>
</ul>
<p>åªæ”¯æŒå•åˆ†ç‰‡é”®ï¼Œæä¾›å¯¹<code>=</code>å’Œ<code>IN</code> æ“ä½œçš„æ”¯æŒã€‚è¡Œå†…è¡¨è¾¾å¼çš„é…ç½®æ¯”è¾ƒç®€å•ã€‚ </p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>${begin..end}   è¡¨ç¤ºèŒƒå›´åŒºé—´ï¼Œå¦‚ï¼šdb$-&gt;{0..1}è¡¨ç¤ºdb0, db1</li>
<li>${[unit1, unit2, unit_x]}   è¡¨ç¤ºæšä¸¾å€¼ï¼Œå¦‚ ï¼š${[â€˜db0â€™, â€˜db1â€™]}</li>
<li>t_user_$-&gt;{u_id % 8} è¡¨ç¤º t_user è¡¨æ ¹æ® u_id æ¨¡ 8ï¼Œè€Œåˆ†æˆ 8 å¼ è¡¨ï¼Œè¡¨åç§°ä¸º t_user_0 åˆ° t_user_7ã€‚ </li>
</ul>
<p>è¡Œè¡¨è¾¾å¼ä¸­å¦‚æœå‡ºç°è¿ç»­å¤šä¸ª${ expression }æˆ–$-&gt;{ expression }è¡¨è¾¾å¼ï¼Œæ•´ä¸ªè¡¨è¾¾å¼æœ€ç»ˆçš„ç»“æœå°†ä¼šæ ¹æ®æ¯ä¸ªå­è¡¨è¾¾å¼çš„ç»“æœè¿›è¡Œç¬›å¡å°”ç»„åˆã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹è¡Œè¡¨è¾¾å¼ï¼š ${[â€˜db1â€™, â€˜db2â€™]}_table${1..3} æœ€ç»ˆä¼šè§£æä¸ºï¼š db1_table1, db1_table2, db1_table3, db2_table1, db2_table2, db2_table3</p>
<h3 id="6-2-æ ‡å‡†åˆ†ç‰‡ç­–ç•¥-StandardShardingStrategy"><a href="#6-2-æ ‡å‡†åˆ†ç‰‡ç­–ç•¥-StandardShardingStrategy" class="headerlink" title="6.2 æ ‡å‡†åˆ†ç‰‡ç­–ç•¥ StandardShardingStrategy"></a>6.2 æ ‡å‡†åˆ†ç‰‡ç­–ç•¥ StandardShardingStrategy</h3><p>æ ‡å‡†åˆ†ç‰‡ç­–ç•¥åªæ”¯æŒä½†åˆ†ç‰‡é”®ï¼Œæä¾›äº†ä¸¤ä¸ªåˆ†ç‰‡ç®—æ³•ï¼Œåˆ†åˆ«å¯¹åº”äº†<code>IN</code>ã€<code>BETWEEN</code> å’Œ <code>=</code>ï¼›å¦‚æœè¦æ˜¯ç”¨æ ‡å‡†åˆ†ç‰‡ç­–ç•¥ï¼Œå¿…é¡»è¦å®ç°<code>PreciseShardingAlgorithm</code>,ç”¨æ¥å¤„ç†<code>=</code>å’Œ<code>IN</code>çš„åˆ†ç‰‡<br><code>RangeShardingAlgorithm</code>æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ²¡æœ‰å®ç°ï¼ŒSQLè¯­å¥ä¼šå‘é€åˆ°æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚</p>
<ul>
<li>ç®—æ³•ï¼šèŒƒå›´åˆ†ç‰‡<code>RangeShardingAlgorithm</code> å’Œ ç²¾ç¡®åˆ†ç‰‡<code>PreciseShardingAlgorithm</code>ä¸¤ç§ç®—æ³•<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰åˆ†åº“ç­–ç•¥</span></span><br><span class="line"><span class="comment"> * æ•°æ®åº“åˆ†åº“çš„ç­–ç•¥ï¼Œæ ¹æ®åˆ†ç‰‡é”®ï¼Œè¿”å›æ•°æ®åº“åç§°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBShardAlgo</span> <span class="keyword">implements</span> <span class="title">PreciseShardingAlgorithm</span>&lt;<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doSharding</span><span class="params">(Collection&lt;String&gt; collection, PreciseShardingValue&lt;Long&gt; preciseShardingValue)</span> </span>&#123;</span><br><span class="line">        String db_name=<span class="string">&quot;ds&quot;</span>;</span><br><span class="line">        Long num= preciseShardingValue.getValue()%<span class="number">2</span>;</span><br><span class="line">        db_name=db_name + num;</span><br><span class="line">        System.out.println(<span class="string">&quot;----------------db_name:&quot;</span> + db_name);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String each : collection) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ds:&quot;</span> + each);</span><br><span class="line">            <span class="keyword">if</span> (each.equals(db_name)) &#123;</span><br><span class="line">                <span class="keyword">return</span> each;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰åˆ†è¡¨ç­–ç•¥</span></span><br><span class="line"><span class="comment"> * ç­‰å€¼æŸ¥è¯¢ä½¿ç”¨çš„åˆ†ç‰‡ç®—æ³•ï¼ŒåŒ…æ‹¬in</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TblPreShardAlgo</span> <span class="keyword">implements</span> <span class="title">PreciseShardingAlgorithm</span>&lt;<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">doSharding</span><span class="params">(Collection&lt;String&gt; availableTargetNames, PreciseShardingValue&lt;Long&gt; shardingColumn)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸åˆ†è¡¨</span></span><br><span class="line">        System.out.println(<span class="string">&quot;-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-availableTargetNames:&quot;</span> + availableTargetNames);</span><br><span class="line">        <span class="keyword">for</span> (String tbname : availableTargetNames) &#123;</span><br><span class="line">            <span class="comment">//å¦‚æœè¿™é‡Œè¦åˆ†è¡¨å¯ä»¥æ ¹æ®  shardingColumn.getValue() % 2</span></span><br><span class="line">            <span class="comment">//ä¹Ÿå¯ä»¥æ ¹æ®æœˆä»½åˆ†è¡¨ï¼Œuser_info_202201è¿™ç§ï¼Œåªéœ€è¦åœ¨è¿™é‡Œæ‹¼æ¥è¡¨åå³å¯</span></span><br><span class="line">            System.out.println(shardingColumn.getValue() % <span class="number">2</span>+<span class="string">&quot;-------&quot;</span>+ tbname);</span><br><span class="line">            <span class="keyword">return</span> tbname;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
é‚£ä¹ˆåœ¨é…ç½®æ–‡ä»¶ä¸­åªéœ€è¦æŒ‡å®šåˆ†é…è§„åˆ™<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">##ä¸ºäº†ç¼©å‡ç¯‡å¹…ï¼Œè¿™é‡Œæ”¹æˆpropertiesçš„æ ¼å¼</span></span><br><span class="line"><span class="meta">spring.shardingsphere.sharding.tables.t_order.databaseStrategy.standard.shardingColumn</span>=<span class="string">order_id</span></span><br><span class="line"><span class="meta">spring.shardingsphere.sharding.tables.t_order.databaseStrategy.standard.precise-algorithm-class-name</span>=<span class="string">com.ygb.config.TblPreShardAlgo</span></span><br></pre></td></tr></table></figure>
<img src="/sharding-jdbc/19.png"></li>
</ul>
<p>èŒƒå›´åˆ†ç‰‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŒƒå›´æŸ¥è¯¢æ‰€ä½¿ç”¨çš„åˆ†ç‰‡ç®—æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TblRangeShardAlgo</span> <span class="keyword">implements</span> <span class="title">RangeShardingAlgorithm</span>&lt;<span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection&lt;String&gt; <span class="title">doSharding</span><span class="params">(Collection&lt;String&gt; availableTargetNames, RangeShardingValue&lt;Long&gt; rangeShardingValue)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;èŒƒå›´-*-*-*-*-*-*-*-*-*-*-*---------------&quot;</span>+availableTargetNames);</span><br><span class="line">        System.out.println(<span class="string">&quot;èŒƒå›´-*-*-*-*-*-*-*-*-*-*-*---------------&quot;</span>+rangeShardingValue);</span><br><span class="line">        Collection&lt;String&gt; collect = <span class="keyword">new</span> LinkedHashSet&lt;&gt;();</span><br><span class="line">        Range&lt;Long&gt; valueRange = rangeShardingValue.getValueRange();</span><br><span class="line">        <span class="keyword">for</span> (Long i = valueRange.lowerEndpoint(); i &lt;= valueRange.upperEndpoint(); i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String each : availableTargetNames) &#123;</span><br><span class="line">                <span class="keyword">if</span> (each.endsWith(i % availableTargetNames.size() + <span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">                    collect.add(each);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> collect;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ•°æ®åº“<code>db0</code>ã€<code>db1</code>ï¼Œå¯ä»¥çœ‹åˆ°åªæœ‰<code>db0</code>æœ‰æ•°æ®ï¼›</p>
<h3 id="6-3-å¤åˆåˆ†ç‰‡ç­–ç•¥-ComplexShardingStrategy"><a href="#6-3-å¤åˆåˆ†ç‰‡ç­–ç•¥-ComplexShardingStrategy" class="headerlink" title="6.3 å¤åˆåˆ†ç‰‡ç­–ç•¥ ComplexShardingStrategy"></a>6.3 å¤åˆåˆ†ç‰‡ç­–ç•¥ ComplexShardingStrategy</h3><p>å¤åˆåˆ†ç‰‡ç­–ç•¥æ”¯æŒå¤šåˆ†ç‰‡é”®</p>
<ul>
<li>ç®—æ³•ï¼šComplexKeysShardingAlgorithm</li>
<li>åœºæ™¯ï¼šæ ¹æ®æ—¥æœŸå’ŒIDä¸¤ä¸ªå­—æ®µåˆ†ç‰‡ï¼Œæ¯ä¸ªæœˆ3å¼ è¡¨ï¼Œå…ˆæ ¹æ®æ—¥æœŸï¼Œç„¶ååœ¨æ ¹æ®IDå–æ¨¡åˆ†ç‰‡</li>
</ul>
<h3 id="6-4-Hintåˆ†ç‰‡ç­–ç•¥-HintShardingStrategy"><a href="#6-4-Hintåˆ†ç‰‡ç­–ç•¥-HintShardingStrategy" class="headerlink" title="6.4 Hintåˆ†ç‰‡ç­–ç•¥ HintShardingStrategy"></a>6.4 Hintåˆ†ç‰‡ç­–ç•¥ HintShardingStrategy</h3><p>é€šè¿‡ Hint è€Œé SQL è§£æçš„æ–¹å¼åˆ†ç‰‡çš„ç­–ç•¥</p>
<ul>
<li>ç®—æ³•ï¼šHintShardingAlgorithm<h3 id="6-5-ä¸åˆ†ç‰‡ç­–ç•¥-NoneShardingStrategy"><a href="#6-5-ä¸åˆ†ç‰‡ç­–ç•¥-NoneShardingStrategy" class="headerlink" title="6.5 ä¸åˆ†ç‰‡ç­–ç•¥ NoneShardingStrategy"></a>6.5 ä¸åˆ†ç‰‡ç­–ç•¥ NoneShardingStrategy</h3>åªåœ¨ä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨</li>
<li>ç®—æ³•ï¼šæ— </li>
</ul>
<p><img src="/sharding-jdbc/20.png"></p>
<h2 id="ä¸Mycatå¯¹æ¯”"><a href="#ä¸Mycatå¯¹æ¯”" class="headerlink" title="ä¸Mycatå¯¹æ¯”"></a>ä¸Mycatå¯¹æ¯”</h2><table>
<thead>
<tr>
<th align="left"></th>
<th align="center">ShardingSphere-JDBC</th>
<th align="center">Mycat</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å·¥ä½œå±‚é¢</td>
<td align="center">JDBCåè®®</td>
<td align="center">Mysqlåè®®/JDBCåè®®</td>
</tr>
<tr>
<td align="left">è¿è¡Œæ–¹å¼</td>
<td align="center">JaråŒ…ï¼Œå®¢æˆ·ç«¯</td>
<td align="center">ç‹¬ç«‹æœåŠ¡ï¼ŒæœåŠ¡ç«¯</td>
</tr>
<tr>
<td align="left">å¼€å‘æ–¹å¼</td>
<td align="center">ä»£ç /é…ç½®æ”¹åŠ¨</td>
<td align="center">è¿æ¥åœ°å€ä¿®æ”¹ï¼ˆæ•°æ®æºï¼‰</td>
</tr>
<tr>
<td align="left">è¿ç»´æ–¹å¼</td>
<td align="center">æ— </td>
<td align="center">ç®¡ç†ç‹¬ç«‹æœåŠ¡ï¼Œè¿ç»´æˆæœ¬é«˜</td>
</tr>
<tr>
<td align="left">æ€§èƒ½</td>
<td align="center">å¤šçº¿ç¨‹å¹¶å‘æ“ä½œï¼Œæ€§èƒ½é«˜</td>
<td align="center">ç‹¬ç«‹æœåŠ¡+ç½‘ç»œå¼€é”€ï¼Œå­˜åœ¨æ€§èƒ½æŸå¤±é£é™©</td>
</tr>
<tr>
<td align="left">åŠŸèƒ½èŒƒå›´</td>
<td align="center">åè®®å±‚é¢</td>
<td align="center">åŒ…æ‹¬åˆ†å¸ƒå¼äº‹åŠ¡ã€æ•°æ®è¿ç§»ç­‰</td>
</tr>
<tr>
<td align="left">é€‚ç”¨æ“ä½œ</td>
<td align="center">OLTP</td>
<td align="center">OLTP+OLAP</td>
</tr>
<tr>
<td align="left">æ”¯æŒæ•°æ®åº“</td>
<td align="center">åŸºäºJDBCåè®®çš„æ•°æ®åº“</td>
<td align="center">MySQL å’Œå…¶ä»–æ”¯æŒ JDBC åè®®çš„æ•°æ®åº“</td>
</tr>
<tr>
<td align="left">æ”¯æŒè¯­è¨€</td>
<td align="center">Java</td>
<td align="center">æ”¯æŒ JDBC åè®®çš„è¯­è¨€</td>
</tr>
</tbody></table>
<p>ä»æ˜“ç”¨æ€§å’ŒåŠŸèƒ½å®Œå–„çš„è§’åº¦æ¥è¯´ï¼Œ<code>Mycat</code> ä¼¼ä¹æ¯” <code>Sharding-JDBC</code> è¦å¥½ï¼Œå› ä¸ºæœ‰ç°æˆ çš„åˆ†ç‰‡è§„åˆ™ï¼Œä¹Ÿæä¾›äº†4ç§<code>ID</code>ç”Ÿæˆæ–¹å¼ï¼Œé€šè¿‡æ³¨è§£å¯ä»¥æ”¯æŒé«˜çº§åŠŸèƒ½ï¼Œæ¯”å¦‚è·¨åº“å…³è”æŸ¥è¯¢ã€‚</p>
<p>å»ºè®®ï¼šå°å‹é¡¹ç›®å¯ä»¥ç”¨ <code>Sharding-JDBC</code>ã€‚å¤§å‹é¡¹ç›®ï¼Œå¯ä»¥ç”¨ <code>Mycat</code>ã€‚</p>
]]></content>
      <categories>
        <category>ShardingSphere-jdbc</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
      </tags>
  </entry>
</search>
